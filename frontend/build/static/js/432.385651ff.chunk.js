"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[432],{59209:function(e,n,t){var o=t(23029),r=t(92901),i=t(6919),s=t(85501),a=t(22107),c=t(39081),l=t(7189),u=t(65043),d=t(70579),f=function(e){function n(e){var t;return(0,o.A)(this,n),(t=(0,i.A)(this,n,[e])).state={hasError:!1},t}return(0,s.A)(n,e),(0,r.A)(n,[{key:"componentDidCatch",value:function(e,n){console.error(e,n)}},{key:"render",value:function(){return this.state.hasError?(0,d.jsxs)(a.a,{display:"flex",justifyContent:"center",alignItems:"center",background:"whitesmoke",width:"100%",height:"100%",children:[" ",(0,d.jsxs)(a.a,{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[" ",(0,d.jsx)(c.E,{fontSize:"2xl",children:"An error occurred. Please "}),(0,d.jsx)(l.N,{color:"teal.500",href:"/dashboard",children:"Go Back..."})]})]}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}])}(u.Component);n.A=f},10554:function(e,n,t){var o=t(90675),r=t(10467),i=t(79722).A.create();i.interceptors.response.use(function(){var e=(0,r.A)((0,o.A)().mark((function e(n){return(0,o.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n);case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),(function(e){return Promise.reject(e)})),n.A=i},20200:function(e,n){n.A=function(e){var n=new Date(e),t=new Date-n,o=Math.floor(t/1e3),r=Math.floor(o/60),i=Math.floor(r/60),s=Math.floor(i/24);if(o<60)return"Just now";if(r<60)return"".concat(r," minute").concat(1===r?"":"s"," ago");if(i<24)return"".concat(i," hour").concat(1===i?"":"s"," ago");if(1===s)return"Yesterday";if(s<7)return"".concat(s," day").concat(1===s?"":"s"," ago");return n.toLocaleDateString("en-US",{hour:"numeric",minute:"numeric",month:"long",day:"numeric",year:"numeric"})}},33432:function(e,n,t){t.r(n),t.d(n,{default:function(){return ce}});var o,r,i,s,a,c=t(89379),l=t(60436),u=t(90675),d=t(10467),f=t(5544),p=t(65043),h=t(59209),m=t(30502),x=t(22107),b=t(42703),v=t(42837),g=t(57528),A=t(39081),j=t(1529),y=t(82639),w=t(70579),C=j.Ay.div(o||(o=(0,g.A)(["\n  display: flex;\n  justify-content: center;\n  align-items: flex-end;\n  position: relative;\n  width: 100%;\n  padding: 0;\n  margin: 0;\n"]))),k=j.Ay.div(r||(r=(0,g.A)(["\n  display: flex;\n  width: 30%;\n  height: 50px;\n  border: none;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n  font-weight: bold;\n  padding: 0;\n  margin: 0;\n"]))),S=(0,j.i7)(i||(i=(0,g.A)(["\n  from {\n    width: 1%; /* Adjust the initial width as needed */\n  }\n  to {\n    width: ","%;\n  }\n"])),(function(e){return 10*(e.level+1.2)})),E=(0,j.i7)(s||(s=(0,g.A)(["\n  0%, 100% {\n    background-color: #ed7d66; /* Slightly less green color */\n  }\n  50% {\n    background-color: #66d171; /* Default green color */\n  }\n"]))),_=j.Ay.div(a||(a=(0,g.A)(["\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  width: 50px;\n  height: 14px;\n  background-color: #66d171;\n  border-radius: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n  margin: 0;\n  padding: 0;\n  width: ","%;\n  animation: "," 2s ease-in-out,\n    "," 3s ease-in-out infinite;\n"])),(function(e){return 10*(e.level+1)}),S,E),z=function(e){var n=e.userBelt,t=["Guest","Beginner","Yellow","Orange","Red","Purple","Green","Blue","Brown","Black"].indexOf(n);return(0,w.jsxs)(C,{children:[["Guest","grey","#baba30","orange","red","purple","green","blue","brown","black"].map((function(e,n){return(0,w.jsx)(k,{children:(0,w.jsx)(A.E,{marginTop:-3,fontWeight:{base:"sm",md:"md"},fontSize:{base:"10px",md:"md"},textAlign:"center",children:n>0?(0,w.jsx)(y.n7_,{style:{color:e,fontSize:"1.5rem"}}):e})},n)})),(0,w.jsxs)(_,{level:t,children:[" ",(0,w.jsxs)(A.E,{textAlign:"center",fontSize:"small",p:1,children:[10*(t+1),"%"]})," "]})]})},D=t(5371),P=t(7189),I=t(29301),F=t(44093),B=t(96870),N=t(73203),M=t(11054),R=t(76524),W=t(15071),Y=t(35929),O=t(67516),L=t(20972),U=t(35699),q=t(82459),$=t(56529),G=t(30059),T=t(23772),Z=t(56818),K=t(79722);function J(e){var n=e.course,t=(0,m.d)(),o=(0,Z.a)(),r=o.user,i=o.setUser,s=(0,p.useState)(!1),a=(0,f.A)(s,2),l=a[0],h=a[1],b=(0,p.useState)(""),v=(0,f.A)(b,2),g=v[0],j=v[1],y=(0,B.j)(),C=y.isOpen,k=y.onOpen,S=y.onClose,E=(0,T.bK)(null===r||void 0===r?void 0:r.token);(0,p.useEffect)((function(){if(E)return E.on("noPayment",(function(e){t({title:e,description:"Subscription unsuccessful",status:"info",duration:5e3,position:"bottom"})})),E.on("userUpdated",function(){var e=(0,d.A)((0,u.A)().mark((function e(n){return(0,u.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i((function(e){return(0,c.A)((0,c.A)({},e),{},{belt:n.belt})})),t({title:"Successfully updated",description:"Ranked ".concat(n.belt),status:"info",duration:5e3,position:"bottom"});case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),function(){E.off("userUpdated"),E.off("noPayment")}}),[i,t,E]);var _=function(){var e=(0,d.A)((0,u.A)().mark((function e(){var n,o,s;return(0,u.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,n={headers:{Authorization:"Bearer ".concat(r.token)}},e.next=6,K.A.get("/api/user/update",n);case 6:o=e.sent,s=o.data,i((function(e){return(0,c.A)((0,c.A)({},e),{},{belt:s.belt})})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),e.t0.response&&400===e.t0.response.status?t({title:"Belt achieved!",description:e.t0.response.data.message,status:"info",duration:5e3,isClosable:!0,position:"bottom"}):(console.error("An error occurred:",e.t0),t({title:"An Error Occurred!",description:"Please try again later.",status:"error",duration:5e3,isClosable:!0,position:"bottom"}));case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(){return e.apply(this,arguments)}}();return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(I.$,{borderRadius:20,fontSize:"small",background:"#a432a8",textColor:"white",_hover:{color:"black"},m:1,onClick:function(){var e=r&&r.certificates.length,o=n.id-1;r&&"Guest"===r.belt&&0===o||e+1===o+1?k():r&&r.belt===n.title?t({title:"Currently on this course",description:"You don't need to enroll in this course.",status:"warning",duration:5e3,isClosable:!0}):t({title:"Course Unavailable",description:"You don't meet the requirements to enroll in this course.",status:"warning",duration:5e3,isClosable:!0})},children:"Enroll"}),(0,w.jsxs)(N.aF,{size:"lg",onClose:function(){h(!1),S()},isOpen:C,isCentered:!0,children:[(0,w.jsx)(M.m,{bg:"blackAlpha.300",backdropFilter:"blur(10px) hue-rotate(90deg)"}),(0,w.jsxs)(R.$,{display:"flex",flexDirection:"column",justifyContent:"center",width:"100%",children:[(0,w.jsx)(W.r,{fontSize:"40px",fontFamily:"Work sans",children:(0,w.jsxs)(A.E,{textAlign:"center",fontSize:"sm",fontWeight:500,p:2,px:3,color:"green.500",rounded:"full",children:["Elevate Your Craft: ",n.title]})}),(0,w.jsx)(Y.s,{}),(0,w.jsxs)(O.c,{children:[(0,w.jsx)(G.ag,{options:{clientId:"AZAdYFR_SbadcgOcCLYn9ajkReJTZmOCnEeAvQ3xPYAE5BMYFBHi4vDeILfNwBO-hh-8wfyGC9lNeB1I"},children:(0,w.jsx)(G.JV,{createOrder:function(e,n){return n.order.create({purchase_units:[{amount:{currency_code:"USD",value:12..toFixed(2)}}]})},onApprove:function(){var e=(0,d.A)((0,u.A)().mark((function e(n,o){return(0,u.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_();case 2:return e.abrupt("return",o.order.capture().then((function(e){t({title:"Success",description:n.subscriptionID,status:"info",duration:3e3,isClosable:!0,position:"bottom"})})));case 3:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),onCancel:function(){t({title:"Cancelled",description:"Subscription Unsuccessful",status:"info",isClosable:!0,position:"bottom"})}})}),(0,w.jsxs)(I.$,{fontSize:"small",width:"100%",bg:(0,F.dU)("green.100","green.900"),onClick:function(){h(!0)},p:0,children:[(0,w.jsx)(L._,{height:5,width:"auto",src:"https://res.cloudinary.com/dvc7i8g1a/image/upload/v1694007922/mpesa_ppfs6p.png",alt:"",loading:"lazy"})," ","Pay via Mpesa"]}),l&&(0,w.jsxs)(x.a,{m:3,children:[(0,w.jsx)(A.E,{textAlign:"center",justifyContent:"center",fontSize:"2xl",children:"Enter Your Mpesa Phone Number"}),(0,w.jsx)(U.p,{fontSize:"small",color:"green.400",fontWeight:"bold",placeholder:"Enter phone number",textAlign:"center",type:"number",onChange:function(e){return j(e.target.value)},value:g,minLength:10,maxLength:10}),(0,w.jsx)(q.c,{p:2}),(0,w.jsx)(I.$,{width:"100%",onClick:function(){(0,T.ZU)("4500",g,r,t),h(!1),t({title:"Wait as message is sent",status:"loading",isClosable:!0,position:"bottom",duration:5e3})},isDisabled:g.length!==parseInt(10),colorScheme:"green",children:"Proceed"}),(0,w.jsx)(A.E,{textAlign:"center",justifyContent:"center",children:"You'll be sent a Message"})]})]}),(0,w.jsx)($.j,{display:"flex",children:" Wait as PayPal processes..."})]})]})]})}var X=function(e){var n=e.courses,t=e.user,o=function(e,n){var t=document.createElement("a");t.href=n,t.download="".concat(e,"BeltCertificate.pdf"),t.click()},r=["#baba30","orange","red","purple","green","blue","brown","black"];return(0,w.jsxs)(x.a,{display:"flex",flexDir:"column",alignItems:"center",justifyContent:"center",width:"100%",p:4,backgroundColor:"white",children:[(0,w.jsx)(A.E,{fontSize:"20px",fontWeight:"medium",children:"My Programs"}),n.map((function(e,n){return(0,w.jsxs)(D.s,{display:"flex",alignItems:"center",justifyContent:"space-between",m:4,p:{base:"1",md:"4"},width:{base:"90%",md:"70%"},border:"1px",borderRadius:5,children:[(0,w.jsxs)(x.a,{children:[(0,w.jsxs)(x.a,{fontSize:"larger",fontWeight:"medium",children:[(0,w.jsx)(A.E,{children:e.title}),(0,w.jsx)(y.n7_,{style:{color:r[n],fontSize:"3rem"}})]}),e.title===(null===t||void 0===t?void 0:t.belt)&&(0,w.jsx)(P.N,{href:"/courses/".concat(e.id),style:{textDecoration:"none",color:"inherit"},p:0,m:0,children:"Continue"})]}),t&&t.certificates&&t.certificates[n]?(0,w.jsx)(I.$,{onClick:o(e.title,t.certificates[n]),borderRadius:20,fontSize:"small",border:"none",children:"Download Certificate"}):(0,w.jsxs)(x.a,{display:"flex",flexDir:"column",justifyContent:"space-between",alignItems:"center",children:[(0,w.jsx)(J,{course:e}),(0,w.jsx)(A.E,{fontSize:"sm",fontWeight:400,bg:(0,F.dU)("green.50","green.900"),p:3,px:3,color:"green.500",rounded:"full",children:"$12.00 only"})]})]},e.id)}))]})},H=t(76659),Q=t(20200),V=t(31462),ee=t(89698);var ne=function(e){var n,t,o,r,i,s,a,c,l=e.m,u=(0,Z.a)(),d=u.user,f=u.setSelectedChat,p=u.setSend,h="6693a995f6295b8bd90d9301",m=null===d||void 0===d?void 0:d._id;return(0,w.jsx)(w.Fragment,{children:(0,w.jsxs)(x.a,{display:"flex",flexDir:"column",position:"relative",fontSize:"small",onClick:function(){var e,n,t;(null===(e=l.sender)||void 0===e?void 0:e._id)!==m&&(f(null===(n=l.sender)||void 0===n?void 0:n._id),p(null===(t=l.sender)||void 0===t?void 0:t.name))},children:[(0,w.jsxs)(x.a,{fontSize:"smaller",textDecor:"underline",textAlign:"end",children:[(null===(n=l.sender)||void 0===n?void 0:n._id)===h&&m!==h&&(0,w.jsxs)(x.a,{display:"flex",justifyContent:"flex-end",alignItems:"center",width:"100%",children:["From:","\xa0",(0,w.jsxs)(x.a,{display:"flex",children:[(0,w.jsx)(A.E,{fontSize:"bold",children:"WSF"}),(0,w.jsx)(ee.Tcv,{style:{color:"blue"}})]})]}),(null===(t=l.sender)||void 0===t?void 0:t._id)===m&&(null===(o=l.recipient)||void 0===o?void 0:o._id)===h&&(0,w.jsxs)(x.a,{display:"flex",children:["Sent to","\xa0","WSF",(0,w.jsx)(ee.Tcv,{style:{color:"blue"}})]}),(null===(r=l.sender)||void 0===r?void 0:r._id)!==h&&(0,w.jsxs)(A.E,{children:["From","\xa0",null===(i=l.sender)||void 0===i?void 0:i.name]}),(null===(s=l.sender)||void 0===s?void 0:s._id)===h&&(0,w.jsxs)(A.E,{children:["Sent to","\xa0",null===(a=l.recipient)||void 0===a?void 0:a.name]})]}),l.content,(0,w.jsxs)(A.E,{display:"flex",textAlign:"right",m:0,p:0,fontSize:"2xs",children:[(null===(c=l.sender)||void 0===c?void 0:c._id)===d._id?(0,w.jsx)(V.ohF,{}):"",(0,Q.A)(l.createdAt)]})]})})},te=function(e){var n=e.messages,t=(0,Z.a)().user;return(0,w.jsx)("div",{style:{width:"100%",height:"90%",overflowY:"auto"},children:(0,w.jsx)(x.a,{display:"flex",justifyContent:"start",alignItems:"center",flexDir:"column",background:"white",minH:"100vh",p:4,mb:"10",width:"100%",children:n.map((function(e,n){var o;if(!e&&!t)return null;var r=(null===(o=e.sender)||void 0===o?void 0:o._id)===t._id;return(0,w.jsx)(x.a,{bg:r?"#BEE3F8":"#B9F5D0",borderRadius:"20px",p:"5px 15px",mb:"2",maxW:"75%",alignSelf:r?"flex-end":"flex-start",children:(0,w.jsx)(ne,{m:e})},n)}))})})},oe=t(73216),re=t(50423),ie=function(e){var n=e.onClose,t=(0,m.d)(),o=(0,p.useState)(""),r=(0,f.A)(o,2),i=r[0],s=r[1],a=(0,p.useState)(["WSF","Coach","Provincial Coach","National Coach"]),c=(0,f.A)(a,2),h=c[0],v=c[1],g=(0,p.useState)(null),j=(0,f.A)(g,2),y=j[0],C=j[1],k=(0,p.useState)(null),S=(0,f.A)(k,2),E=S[0],_=S[1],z=(0,p.useState)(),D=(0,f.A)(z,2),P=D[0],F=D[1],B=(0,p.useState)(!1),N=(0,f.A)(B,2),M=N[0],R=N[1],W=(0,p.useState)(!1),Y=(0,f.A)(W,2),O=Y[0],L=Y[1],q=(0,Z.a)(),$=q.user,G=q.selectedChat,J=q.setSelectedChat,X=q.send,Q=q.setSend,V=q.messages,ee=q.setMessages,ne=q.national,ie=q.province,se=(0,oe.Zp)(),ae="6693a995f6295b8bd90d9301",ce=(0,T.bK)(null===$||void 0===$?void 0:$.token);(0,p.useEffect)((function(){((null===$||void 0===$?void 0:$._id)===ae||null!==$&&void 0!==$&&$.coach||(null===ie||void 0===ie?void 0:ie.provincialCoach._id)===(null===$||void 0===$?void 0:$._id)||(null===ne||void 0===ne?void 0:ne.nationalCoach._id)===(null===$||void 0===$?void 0:$._id))&&R(!0)}),[$,ne,ie,R]),(0,p.useEffect)((function(){void 0===$.provinces&&v((function(e){return e.filter((function(e){return"Provincial Coach"!==e}))}))}),[$.provinces]),(0,p.useEffect)((function(){return"Coach"!==y||null!==$&&void 0!==$&&$.physicalCoach?"Provincial Coach"!==y||ie?"National Coach"!==y||ne?void 0:(C(null),se("/national"),void t({title:"National Samma Association seat is empty!",description:"Apply for Interim",status:"info",duration:5e3,position:"bottom-left"})):(C(null),se("/province"),void t({title:"Provincial Samma Association seat is empty!",description:"Apply for Interim",status:"info",duration:5e3,position:"bottom-left"})):(se("/clubs"),t({title:"You've not joined a Club",description:"Join a club or make one as you'd please",status:"info",duration:5e3,position:"bottom-left"}),void C(null))}),[y,se,$,ne,ie,t]);var le=(0,p.useCallback)((0,d.A)((0,u.A)().mark((function e(){var n,o,r;return(0,u.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if($){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,n={headers:{Authorization:"Bearer ".concat($.token)}},F(!0),e.next=7,K.A.get("/api/message/".concat($._id),n);case 7:o=e.sent,r=o.data,ee(r),F(!1),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(2),console.log(e.t0),F(!1),t({title:"Error Occured!",description:"Failed to Load the Messages",status:"error",duration:5e3,isClosable:!0,position:"bottom"});case 18:case"end":return e.stop()}}),e,null,[[2,13]])}))),[t,$]);(0,p.useEffect)((function(){le()}),[le]),(0,p.useEffect)((function(){"Coach"===y?_($.physicalCoach):"WSF"===y&&$?_($.wsf):"Provincial Coach"===y&&ie?_(ie.provincialCoach._id):"National Coach"===y&&ne&&_(ne.nationalCoach._id)}),[y,ne,ie,$,_]),(0,p.useEffect)((function(){G&&_(G)}),[G,_]);var ue=function(){var e=(0,d.A)((0,u.A)().mark((function e(n){var o,r,a,c,d;return(0,u.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n&&"click"===n.type||n&&"Enter"===n.key)){e.next=27;break}if(L(!0),o=$._id,y||M){e.next=7;break}return t({title:"Select a recipient",description:"Please choose whom you want to chat with.",status:"info",duration:5e3,isClosable:!0,position:"bottom"}),L(!1),e.abrupt("return");case 7:if(!M||G||o===ae){e.next=11;break}return t({title:"Select a recipient!",description:"Please choose whom you want to reply to...",status:"info",duration:5e3,isClosable:!0,position:"bottom"}),L(!1),e.abrupt("return");case 11:return e.prev=11,r={headers:{"Content-type":"application/json",Authorization:"Bearer ".concat($.token)}},e.next=15,K.A.post("/api/message",{sender:E,content:i,userId:o},r);case 15:a=e.sent,c=a.data,o===ae?(d={content:i.trim(),createdAt:new Date,recipient:{WSF:null,_id:"65c7549721abc4f629ae5009",name:"Broadcast",otherName:"Ngatia",email:"josephmpesa23@gmail.com"},sender:{_id:"6693a995f6295b8bd90d9301",name:"j",otherName:"e",email:"almanobe2@gmail.com"},updatedAt:"2024-07-01T16:26:45.964Z",__v:0,_id:"6682d8c501209935692efb9e"},ee((function(e){return[].concat((0,l.A)(e),[d])}))):(ee((function(e){return[].concat((0,l.A)(e),[c])})),ce.emit("new message",c)),L(!1),s(""),e.next=27;break;case 22:e.prev=22,e.t0=e.catch(11),console.error("Failed to send message:",e.t0),L(!1),t({title:"Failed to send the Message",description:"Please try again after some time",status:"error",duration:5e3,isClosable:!0,position:"bottom"});case 27:case"end":return e.stop()}}),e,null,[[11,22]])})));return function(n){return e.apply(this,arguments)}}();return(0,w.jsxs)(x.a,{display:"flex",flexDirection:"column",position:"fixed",bottom:"0",right:"1",height:"90vh",width:{base:"100%",md:"60%"},borderRadius:4,boxShadow:"dark-lg",p:"2",rounded:"md",bg:"white",zIndex:11,children:[(0,w.jsx)(I.$,{p:2,onClick:function(){n()},border:"none",children:"X"}),(0,w.jsxs)(x.a,{p:2,top:"0",left:"0",height:"90%",display:"flex",flexDir:"column",justifyContent:"center",alignItems:"center",width:"100%",background:"whitesmoke",children:[!y&&!M&&(0,w.jsxs)(x.a,{display:"flex",flexDir:"column",bg:"transparent",children:[(0,w.jsx)(A.E,{children:"Select whom you want to chat with:"}),h.map((function(e){return(0,w.jsx)(I.$,{bg:"transparent",onClick:function(){return C(e)},border:"none",p:"2",children:e},e)}))]}),P?(0,w.jsx)(H.y,{speed:"0.65s",size:"xl"}):(0,w.jsx)(te,{messages:V}),(0,w.jsxs)(x.a,{position:"absolute",bottom:0,width:"100%",children:[M&&(0,w.jsxs)(x.a,{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",children:["Replying to ",G?X:"(select a message please)",G&&(0,w.jsx)(I.$,{onClick:function(){J(null),Q(null)},background:"transparent",textColor:"red",border:"none",children:"X"})]}),y&&(0,w.jsxs)(x.a,{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",children:["Chatting with ",y,(0,w.jsx)(I.$,{onClick:function(){return C(null)},background:"transparent",textColor:"red",border:"none",children:"X"})]}),(0,w.jsxs)(x.a,{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",background:"white",p:2,children:[(0,w.jsx)(U.p,{placeholder:"Type your message...",value:i,onChange:function(e){return s(e.target.value)}}),(0,w.jsx)(b.K,{isLoading:O,border:"none",onClick:function(e){return ue(e)},p:0,m:1,children:(0,w.jsx)(re.sfP,{})})]})]})]})]})},se=t(10554),ae=t(6720),ce=function(e){var n=e.courses,t=(0,p.useState)(!1),o=(0,f.A)(t,2),r=o[0],i=o[1],s=(0,Z.a)(),a=s.user,g=s.setUser,A=s.setClub,j=s.setMessages,y=s.notification,C=s.setNotification,k=s.setNational,S=s.setProvince,E=(0,oe.Zp)(),_=(0,p.useState)(!1),D=(0,f.A)(_,2),P=D[0],I=D[1],F=(0,m.d)(),B=(0,T.bK)(a),N=(0,p.useState)(!1),M=(0,f.A)(N,2),R=M[0],W=M[1];(0,p.useEffect)((function(){B&&(W(B.connected),B.on("connect",(function(){W(!0)})),B.on("disconnect",(function(){W(!1)})))}),[B]);var Y=(0,p.useCallback)((0,d.A)((0,u.A)().mark((function e(){var n,t;return(0,u.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==a&&void 0!==a&&a.coach){e.next=2;break}return e.abrupt("return");case 2:return n={headers:{Authorization:"Bearer ".concat(a.token)}},e.prev=3,e.next=6,se.A.get("/api/clubs/".concat(a.coach),n);case 6:t=e.sent,A(t.data),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),console.error("Error fetching Club:",e.t0);case 13:case"end":return e.stop()}}),e,null,[[3,10]])}))),[a]);(0,p.useEffect)((function(){a&&Y()}),[a,Y]),(0,p.useEffect)((function(){if(R){var e=function(e){C([e].concat((0,l.A)(y))),function(e,n){if("granted"===Notification.permission){new Notification(e,n);var t=new Audio("https://s3.amazonaws.com/freecodecamp/drums/Give_us_a_light.mp3");t.addEventListener("error",(function(e){console.error("Audio playback error:",e)})),t.play().catch((function(e){console.error("Audio playback error:",e)}))}else"denied"!==Notification.permission&&Notification.requestPermission().then((function(t){if("granted"===t){new Notification(e,n);var o=new Audio("https://s3.amazonaws.com/freecodecamp/drums/Give_us_a_light.mp3");o.addEventListener("error",(function(e){console.error("Audio playback error:",e)})),o.play().catch((function(e){console.error("Audio playback error:",e)}))}}))}("New Message",{body:"New message from ".concat(e.sender.name),icon:"".concat(e.sender.pic)}),j((function(n){return[].concat((0,l.A)(n),[e])}))},n=function(e){g((function(n){return(0,c.A)((0,c.A)({},n),{},{provinceRequests:[].concat((0,l.A)(n.provinceRequests),[e.provincialCoach])})}))},t=function(e){g((function(n){return(0,c.A)((0,c.A)({},n),{},{nationalRequests:[].concat((0,l.A)(n.nationalRequests),[e.nationalCoach])})}))},o=function(e){g((function(n){return(0,c.A)((0,c.A)({},n),{},{certificates:e.certificates,belt:e.belt})}))};return B.on("provincial request",n),B.on("national request",t),B.on("certificates",o),B.on("message received",e),function(){B.off("provincial request",n),B.off("national request",t),B.off("certificates",o),B.off("message received",e)}}}),[B,E,y,R]);var O=(0,p.useCallback)((0,d.A)((0,u.A)().mark((function e(){var n,t,o,r,i,s,c;return(0,u.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=3;break}return E("/"),e.abrupt("return");case 3:return n={headers:{Authorization:"Bearer ".concat(a.token)}},e.prev=4,e.next=7,Promise.all([se.A.get("/api/province/officials/".concat(a.country,"/").concat(a.provinces),n),se.A.get("/api/national/officials/".concat(a.country,"/").concat(a.provinces),n)]);case 7:t=e.sent,o=(0,f.A)(t,2),r=o[0],i=o[1],s=r.data,c=i.data,s.length>0&&(S(s),console.log(s)),c.length>0&&k(c),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(4),e.t0.response&&401===e.t0.response.status?(F({title:"Your session has expired",description:"Logging out in 8 seconds",duration:8e3,status:"loading",position:"bottom"}),console.log(e.t0),setTimeout((function(){localStorage.removeItem("userInfo"),E("/")}),8e3)):(console.log(e.t0),F({title:"An Error Occurred!",description:"Try again after sometime.",status:"error",duration:5e3,isClosable:!0}));case 20:case"end":return e.stop()}}),e,null,[[4,17]])}))),[a,E,F]);return(0,p.useEffect)((function(){a?O():E("/dashboard")}),[O,E,a]),(0,w.jsx)(h.A,{fallback:(0,w.jsx)("p",{style:{color:"white"},children:"Something went wrong"}),userSelect:"none",children:(0,w.jsxs)(x.a,{display:"flex",alignItems:"center",justifyContent:"center",flexDir:"column",width:"100%",background:"white",position:"relative",children:[(0,w.jsx)(v.A,{}),(0,w.jsx)(x.a,{width:"100%",mt:20,children:(0,w.jsx)(z,{userBelt:null===a||void 0===a?void 0:a.belt})}),(0,w.jsx)(X,{courses:n,user:a}),r&&(0,w.jsx)(ie,{onClose:function(){return i(!1)}}),(0,w.jsx)(b.K,{display:r?"none":"flex",position:"fixed",bottom:"8%",right:"10%",icon:(0,w.jsx)(ae.X5G,{style:{width:P?"60px":"40px",transition:"width 0.3s ease-in-out",color:"teal",fontSize:"40px",border:"none"}}),backgroundColor:"orange",p:"2",boxSize:"auto",border:"none",_hover:{backgroundColor:"white"},onClick:function(){return i(!0)},onMouseEnter:function(){return I(!0)},onMouseLeave:function(){return I(!1)},borderRadius:"full"})]})})}}}]);
//# sourceMappingURL=432.385651ff.chunk.js.map