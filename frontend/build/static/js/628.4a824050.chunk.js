"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[628],{13628:function(e,n,t){t.r(n),t.d(n,{default:function(){return q}});var r=t(90675),a=t(10467),i=t(5544),o=t(65043),s=t(73216),l=t(30502),c=t(22107),d=t(39081),u=t(76659),h=t(7189),p=t(29301),v=t(44093),f=t(56818),x=t(33021),g=t(20200),m=t(39261),b=t(38028),j=t(93461),A=t(24776),y=t(22111),w=t(45503),k=t(3952),C=t(85522),S=t(79722),E=t(70579),z=function(e){var n=e.states,t=(0,o.useState)([]),l=(0,i.A)(t,2),c=l[0],d=l[1],u=(0,f.a)().user,h=(0,o.useState)(),p=(0,i.A)(h,2),x=p[0],g=p[1],m=(0,o.useState)(""),z=(0,i.A)(m,2),I=z[0],R=z[1],q=(0,o.useState)(""),D=(0,i.A)(q,2),B=D[0],M=D[1],N=(0,o.useState)(""),_=(0,i.A)(N,2),J=_[0],P=_[1],W=(0,s.Zp)();console.log(n);var $=function(){var e=(0,a.A)((0,r.A)().mark((function e(n){var t,a,i,o;return(0,r.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),I&&J&&B&&u){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,t={headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(u.token)}},a={chairperson:I,secretary:J,viceChair:B},e.next=8,S.A.post("/api/province/register",a,t);case 8:i=e.sent,o=i.data,console.log(o),setProvince(o),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(3),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(n){return e.apply(this,arguments)}}(),Y=function(){var e=(0,a.A)((0,r.A)().mark((function e(n){var t,a,i,o;return(0,r.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(n),n&&u){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,t={headers:{Authorization:"Bearer ".concat(u.token)}},a={country:u.country,province:u.provinces},e.next=8,S.A.get("/api/national/".concat(n),a,t);case 8:i=e.sent,o=i.data,console.log(o),setProvince(o),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(3),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(n){return e.apply(this,arguments)}}(),F=(0,o.useCallback)((0,a.A)((0,r.A)().mark((function e(){var n,t,a,i,o;return(0,r.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u){e.next=3;break}return W("/dashboard"),e.abrupt("return");case 3:return n={headers:{Authorization:"Bearer ".concat(u.token)}},e.prev=4,e.next=7,S.A.get("/api/national/my/province",n);case 7:t=e.sent,a=t.data,g(a),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),console.log(e.t0);case 15:return e.prev=15,e.next=18,S.A.get("/api/national/get/coaches",n);case 18:i=e.sent,o=i.data,d(o),e.next=26;break;case 23:e.prev=23,e.t1=e.catch(15),console.log(e.t1);case 26:case"end":return e.stop()}}),e,null,[[4,12],[15,23]])}))),[u,W,d,g]);return(0,o.useEffect)((function(){u&&F()}),[F,u]),(0,E.jsx)("form",{onSubmit:$,children:(0,E.jsxs)(w.T,{spacing:4,align:"stretch",width:"100%",boxShadow:"dark-lg",p:"6",rounded:"md",bg:"white",children:[" ",(0,E.jsxs)(k.E,{fontSize:"sm",fontWeight:500,bg:(0,v.dU)("green.50","green.900"),p:2,px:3,color:"green.500",rounded:"full",children:["Status (*",x&&x.registered?"Registered \u2714\ufe0f":"Not registered",")"]}),(0,E.jsxs)(C.az,{display:"flex",flexDir:"column",justifyContent:"center",alignItems:"center",height:"200px",children:[(0,E.jsxs)(k.E,{textAlign:"center",fontSize:"large",fontWeight:"bold",color:"cornflowerblue",children:["Send Requests to Provincial Samma Associations around"," ",null===u||void 0===u?void 0:u.country]}),(0,E.jsxs)(C.az,{display:"flex",height:"200px",overflowY:"auto",width:"100%",boxShadow:"base",p:"6",rounded:"md",bg:"white",children:[0===c.length&&(0,E.jsx)(k.E,{textAlign:"center",children:"No Associations in this region yet."}),c.length>0&&c.map((function(e,n){return(0,E.jsxs)(k.E,{display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center",fontWeight:"bold",p:1,children:[e.coach.name," ",e.coach.admission,(0,E.jsx)(b.$,{onClick:function(){return Y(null===e||void 0===e?void 0:e.coach._id)},borderRadius:20,background:"#A020F0",color:"white",_hover:{color:"black"},isDisabled:null===x||void 0===x?void 0:x.requests.includes(e.coach._id),children:null!==x&&void 0!==x&&x.requests.includes(e.coach._id)?"Request Sent":"Send Request"})]},e._id)}))]}),(0,E.jsxs)(j.MJ,{id:"approvals",isRequired:!0,children:[(0,E.jsx)(A.l,{children:"Required Approvals"}),null===x||void 0===x?void 0:x.approvals.length,"/ ",Math.round(n/3)]})]}),(0,E.jsxs)(j.MJ,{id:"chairman",isRequired:!0,children:[(0,E.jsx)(A.l,{children:"Chairperson"}),(0,E.jsx)(y.p,{type:"text",name:"chairman",value:I,onChange:function(e){return R(e.target.chairperson)},placeholder:"Input valid adm of the party",isInvalid:!(null!==x&&void 0!==x&&x.approvals.some((function(e){return e.admission===I})))})]}),(0,E.jsxs)(j.MJ,{id:"secretary",isRequired:!0,children:[(0,E.jsx)(A.l,{children:"Secretary"}),(0,E.jsx)(y.p,{type:"text",name:"secretary",value:J,placeholder:"Input valid adm of the party",isInvalid:!(null!==x&&void 0!==x&&x.approvals.some((function(e){return e.admission===J}))),onChange:function(e){return P(e.target.secretary)}})]}),(0,E.jsxs)(j.MJ,{id:"vice-chairman",isRequired:!0,children:[(0,E.jsx)(A.l,{children:"Vice Chairperson"}),(0,E.jsx)(y.p,{type:"text",name:"viceChairman",value:B,placeholder:"Input valid adm of the party",isInvalid:!(null!==x&&void 0!==x&&x.approvals.some((function(e){return e.admission===B}))),onChange:function(e){return M(e.target.viceChair)}})]}),(0,E.jsxs)(j.MJ,{id:"provincial-coach",children:[(0,E.jsx)(A.l,{children:"National Coach"}),(0,E.jsx)(y.p,{type:"text",name:"provincialCoach",value:null===u||void 0===u?void 0:u.admission,isDisabled:!0})]}),(0,E.jsx)(b.$,{type:"submit",colorScheme:"blue",isDisabled:(null===x||void 0===x?void 0:x.approvals.length)<Math.round(n/3),children:"Submit"})]})})},I=t(14628),R=t(25010),q=function(){var e,n,t,b=(0,f.a)(),j=b.user,A=b.national,y=(0,o.useState)([]),w=(0,i.A)(y,2),k=w[0],C=w[1],q=(0,m.x)(null===j||void 0===j?void 0:j.country),D=(0,o.useState)(void 0),B=(0,i.A)(D,2),M=B[0],N=B[1],_=(0,o.useState)(!1),J=(0,i.A)(_,2),P=J[0],W=J[1],$=(0,o.useState)(!1),Y=(0,i.A)($,2),F=Y[0],H=Y[1],U=(0,s.Zp)(),O=(0,o.useState)([]),V=(0,i.A)(O,2),Z=V[0],T=V[1],G=(0,l.d)(),K=(0,o.useCallback)((0,a.A)((0,r.A)().mark((function e(){var n,t,a;return(0,r.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return H(!0),e.prev=1,n={headers:{Authorization:"Bearer ".concat(j.token)}},e.next=5,S.A.get("/api/donate/national",n);case 5:t=e.sent,a=t.data,N(a),H(!1),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),H(!1),G({title:"An Error Occurred!",description:"Please try again later",status:"warning",isClosable:!0,position:"bottom"});case 15:case"end":return e.stop()}}),e,null,[[1,11]])}))),[G,j]),L=(0,o.useCallback)((0,a.A)((0,r.A)().mark((function e(){var n,t,a;return(0,r.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(j){e.next=3;break}return U("/dashboard"),e.abrupt("return");case 3:return n={headers:{Authorization:"Bearer ".concat(j.token)}},e.prev=4,e.next=7,S.A.get("/api/national/all/".concat(j.country),n);case 7:t=e.sent,a=t.data,T(a),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),console.error("Error fetching or creating clubs:",e.t0);case 15:case"end":return e.stop()}}),e,null,[[4,12]])}))),[j,G]);(0,o.useEffect)((function(){j&&L()}),[L,j]),(0,o.useEffect)((function(){j||U("/dashboard");var e=function(){var e=(0,a.A)((0,r.A)().mark((function e(){var n;return(0,r.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=(0,m.e)(null===j||void 0===j?void 0:j.country),C(n);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e(),K()}),[j]);return(0,E.jsxs)(c.a,{display:"flex",justifyContent:"start",alignItems:"center",flexDir:"column",backgroundColor:"whitesmoke",overflowY:"auto",width:"100%",minH:"100vh",children:[(0,E.jsx)(x.A,{}),(0,E.jsxs)(c.a,{display:"flex",justifyContent:"center",alignItems:"center",flexDir:"column",width:"100%",mt:20,children:[(0,E.jsxs)(d.E,{textAlign:"center",fontSize:"large",fontWeight:"bold",p:3,children:[null===j||void 0===j?void 0:j.country," Samma Association ",q]}),(0,E.jsx)(c.a,{textAlign:"center",children:F?(0,E.jsx)(u.y,{size:"sm"}):(0,E.jsxs)(d.E,{children:["Account Balance: $",M&&M.length>0?M[0].fund:"0"]})}),(0,E.jsxs)(d.E,{textAlign:"center",p:"6",children:[" States: ",k&&k.length]}),(0,E.jsxs)(c.a,{maxH:"20rem",width:"100%",overflowY:"scroll",p:"6",bg:"whitesmoke",fontSize:"small",mb:"6",children:[0===Z.length&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(d.E,{fontWeight:"bold",children:"No clubs available in this region yet \ud83d\udeab"}),(0,E.jsx)(h.N,{href:"/clubs",textDecoration:"underline",children:"Start your own club and lead the way!"})]}),Z.length>0&&Z.map((function(e,n){return(0,E.jsxs)(p.$,{border:"none",display:"flex",justifyContent:"space-around",onClick:function(){return U("/showclub/".concat(e._id,"/",!1))},width:"100%",mb:"2",children:[(0,E.jsx)(d.E,{fontSize:"xs",children:e.name}),(0,E.jsx)(d.E,{fontSize:"xs",bg:(0,v.dU)("green.50","green.900"),color:"green.500",rounded:"full",p:"2",children:e.registered?"Registered":"Unregistered"})]},n)}))]}),(0,E.jsx)(I.A,{nationalPage:!0}),(0,E.jsxs)(c.a,{display:"flex",flexDir:"column",justifyContent:"center",alignItems:"center",boxShadow:"base",p:4,rounded:"md",bg:"whitesmoke",fontStyle:"italic",width:"100%",children:[" ","Officials: ",!A&&"Viable position",null!==A?(0,E.jsxs)(c.a,{display:"flex",flexDir:"column",justifyContent:"center",alignItems:"center",boxShadow:"base",p:"6",rounded:"md",bg:"white",fontStyle:"italic",children:[(0,E.jsxs)(d.E,{children:["Coach: ",null===A||void 0===A||null===(e=A.nationalCoach)||void 0===e?void 0:e.name," ",null===A||void 0===A||null===(n=A.nationalCoach)||void 0===n?void 0:n.otherName," ",null===A||void 0===A||null===(t=A.nationalCoach)||void 0===t?void 0:t.belt]}),(0,E.jsxs)(d.E,{children:["Chairperson: ",null===A||void 0===A?void 0:A.chairman," "]}),(0,E.jsxs)(d.E,{children:["Secretary: ",null===A||void 0===A?void 0:A.secretary," "]}),(0,E.jsxs)(d.E,{children:["viceChairperson: ",null===A||void 0===A?void 0:A.viceChairman," "]}),(0,E.jsxs)(d.E,{children:["Interim commencement: ",(0,g.A)(null===A||void 0===A?void 0:A.updatedAt)," "]})]}):(0,E.jsxs)(E.Fragment,{children:[" ",!P&&(0,E.jsx)(p.$,{bg:"purple",color:"white",_hover:{color:"black"},borderRadius:20,onClick:function(){"Black"!==j.belt?G({title:"Your highest rank is ".concat(j.belt,"!"),description:"Head of a National Association must have attained at least black belt 3.",status:"info",isClosable:!0,duration:1e4}):W(!0)},border:"none",fontSize:"small",children:"Claim Interim leadership"}),P&&(0,E.jsx)(z,{states:k.length})]})]}),(0,E.jsx)(R.A,{})]})]})}}}]);
//# sourceMappingURL=628.4a824050.chunk.js.map