"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[820],{10554:function(e,n,t){var r=t(90675),o=t(10467),i=t(79722).A.create();i.interceptors.response.use(function(){var e=(0,o.A)((0,r.A)().mark((function e(n){return(0,r.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n);case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),(function(e){return Promise.reject(e)})),n.A=i},53747:function(e,n,t){t.d(n,{ZU:function(){return p},bK:function(){return d},tJ:function(){return u},uS:function(){return f}});var r=t(90675),o=t(5544),i=t(10467),a=t(79722),s=t(65043),l=t(42104),c=t(97665),u=c.z.object({name:c.z.string().min(2,"Name must be at least 2 characters").max(50,"Name must be at most 50 characters"),otherName:c.z.string().min(2,"Other name must be at least 2 characters").max(50,"Other name must be at most 50 characters"),email:c.z.string().email("Invalid email address"),gender:c.z.enum(["male","female","other"]),password:c.z.string().min(4,"Password must be at least 8 characters long").max(100,"Password must be at most 100 characters"),confirmPassword:c.z.string().min(4,"Confirm password must be at least 8 characters long").max(100,"Confirm password must be at most 100 characters").refine((function(e,n){return e===n.parent.password}),{message:"Passwords do not match"}),passport:c.z.string().regex(/^\d{8,15}$/,"Invalid passport/ID number"),selectedCountry:c.z.string().min(2,"Country is required"),provinces:c.z.string().optional(),language:c.z.string().min(2,"Language is required"),pic:c.z.string().url("Profile picture is required")});function d(e){var n=(0,s.useState)(null),t=(0,o.A)(n,2),r=t[0],i=t[1],a=(0,s.useRef)(null);return(0,s.useEffect)((function(){if(e&&e.token){if(!a.current){var n=e._id,t=(0,l.io)("/",{query:{token:e.token,userId:n}});return t.on("connect",(function(){console.log("connected"),i(t)})),t.on("disconnect",(function(e){console.log("Socket.IO disconnected due to:",e),"io server disconnect"===e&&t.connect()})),t.on("reconnect_attempt",(function(e){console.log("Reconnection attempt ".concat(e))})),t.on("error",(function(e){console.error("Socket.IO error:",e)})),a.current=t,function(){t&&t.disconnect(),a.current=null}}i(a.current)}}),[e]),r}function p(e,n,t,r){return h.apply(this,arguments)}function h(){return(h=(0,i.A)((0,r.A)().mark((function e(n,t,o,i){var s,l;return(0,r.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,s={headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(o.token)}},e.next=6,a.A.post("/api/paycheck/makepaymentmpesa/".concat(o._id,"?amount=").concat(n),{phoneNumber:t},s);case 6:l=e.sent,l.data&&i({title:"You have been prompt to finish your subscription process",status:"info",duration:1e3,position:"bottom"}),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(2);case 13:case"end":return e.stop()}}),e,null,[[2,11]])})))).apply(this,arguments)}function f(e,n,t){return m.apply(this,arguments)}function m(){return(m=(0,i.A)((0,r.A)().mark((function e(n,t,o){var i,s;return(0,r.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,i={headers:{"Content-type":"application/json"}},e.next=6,a.A.post("/api/paycheck/donationsmpesa?amount=".concat(n),{phoneNumber:t},i);case 6:s=e.sent,s.data&&o({title:"You have been prompt to finish your subscription process",status:"info",duration:1e3,position:"bottom"}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[2,11]])})))).apply(this,arguments)}},20200:function(e,n){n.A=function(e){var n=new Date(e),t=new Date-n,r=Math.floor(t/1e3),o=Math.floor(r/60),i=Math.floor(o/60),a=Math.floor(i/24);if(r<60)return"Just now";if(o<60)return"".concat(o," minute").concat(1===o?"":"s"," ago");if(i<24)return"".concat(i," hour").concat(1===i?"":"s"," ago");if(1===a)return"Yesterday";if(a<7)return"".concat(a," day").concat(1===a?"":"s"," ago");return n.toLocaleDateString("en-US",{hour:"numeric",minute:"numeric",month:"long",day:"numeric",year:"numeric"})}},74533:function(e,n,t){t(65043);var r=t(30502),o=t(73225),i=t(76668),a=t(35699),s=t(70579);n.A=function(e){var n=e.setPicLoading,t=e.color,l=e.setPic,c=(0,r.d)();return(0,s.jsxs)(o.MJ,{id:"pic",children:[(0,s.jsx)(i.l,{textColor:t,fontSize:"small",children:"Upload your Passport Photo"}),(0,s.jsx)(a.p,{type:"file",p:1.5,textColor:t,fontSize:"small",placeholder:"Select a passport photo",accept:"image/*",onChange:function(e){var t=e.target.files[0];if(n(!0),t)if("image/jpeg"===t.type||"image/png"===t.type){var r=new FormData;r.append("file",t),r.append("upload_preset","WorldSamma"),fetch("https://api.cloudinary.com/v1_1/dsdlgmgwi/image/upload",{method:"post",body:r}).then((function(e){return e.json()})).then((function(e){l(e.url.toString()),n(!1)})).catch((function(e){n(!1)}))}else n(!1),c({title:"Invalid file type",status:"warning"});else n(!1)}})]})}},62820:function(e,n,t){t.r(n),t.d(n,{default:function(){return K}});var r=t(89379),o=t(90675),i=t(10467),a=t(5544),s=t(65043),l=t(73216),c=t(30502),u=t(22107),d=t(20972),p=t(28846),h=t(39081),f=t(29301),m=t(29904),x=t(99032),g=t(44093),v=t(35699),b=t(19077),j=t(76668),w=t(51044),y=t(1041),A=t(82459),C=t(42837),k=t(10554),S=t(79722),E=t(49788),z=t(85522),R=t(3952),I=t(70579),P=function(e){var n=e.handleFunction,t=e.user;return(0,I.jsxs)(z.az,{onClick:n,cursor:"pointer",bg:"#E8E8E8",_hover:{background:"#38B2AC",color:"white"},width:"100%",display:"flex",alignItems:"center",color:"black",px:3,py:2,mb:2,borderRadius:"lg",children:[(0,I.jsx)(E.e,{mr:2,size:"sm",cursor:"pointer",name:t.name,src:t.pic}),(0,I.jsxs)(z.az,{children:[(0,I.jsx)(R.E,{children:t.name}),(0,I.jsxs)(R.E,{fontSize:"xs",children:[(0,I.jsx)("b",{children:"Email : "}),t.email]})]})]})},D=t(30059),_=t(64467),N=t(73225),M=t(61724),W=t(45973),q=t(29244),F=t(66686),J=t(26550),L=t(39261),U=t(61191),O=t(20200),B=t(53747),$=t(56818),Y=t(74533),H=function(){var e=(0,s.useState)({name:"",otherName:"",id:"",phoneNumber:"",email:"",selectedCountry:"",provinces:"",language:"",password:"",confirmpassword:"",gender:""}),n=(0,a.A)(e,2),t=n[0],l=n[1],p=(0,s.useState)(!1),x=(0,a.A)(p,2),b=x[0],w=x[1],y=(0,s.useState)(!1),C=(0,a.A)(y,2),k=C[0],S=C[1],E=(0,s.useState)([]),z=(0,a.A)(E,2),R=z[0],P=z[1],H=(0,s.useState)(null),Z=(0,a.A)(H,2),Q=Z[0],K=Z[1],T=(0,s.useState)(""),G=(0,a.A)(T,2),V=G[0],X=G[1],ee=(0,s.useState)(""),ne=(0,a.A)(ee,2),te=ne[0],re=ne[1],oe=(0,$.a)().user,ie=(0,s.useState)(!1),ae=(0,a.A)(ie,2),se=ae[0],le=ae[1],ce=(0,c.d)(),ue=(0,B.bK)(null===oe||void 0===oe?void 0:oe.token),de=function(){return S(!k)},pe=function(e){if(console.log("Event:",e),e&&e.target){var n=e.target,t=n.name,o=n.value;if(l((function(e){return(0,r.A)((0,r.A)({},e),{},(0,_.A)({},t,o))})),"selectedCountry"===t){var i=(0,L.e)(o);P(i)}}else console.log("Event or target is undefined.")},he=function(){var e=(0,i.A)((0,o.A)().mark((function e(n){var i,a,s;return(0,o.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,i={headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(oe.token)}},e.next=5,axios.post("/api/user/admission",(0,r.A)((0,r.A)({},t),{},{pic:te}),i);case 5:a=e.sent,s=a.data,K(s),l({name:"",otherName:"",id:"",phoneNumber:"",email:"",selectedCountry:"",provinces:"",language:"",password:"",confirmpassword:"",gender:""}),re(""),w(!1),P([]),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),console.error(e.t0),ce({title:"Error occurred!",description:e.t0.response.data.message||"Something went wrong.",status:"error",duration:5e3,isClosable:!0,position:"bottom"});case 18:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(n){return e.apply(this,arguments)}}(),fe=Object.entries(U.Xr).map((function(e){var n=(0,a.A)(e,2),t=(n[0],n[1]);return{value:t.name,label:t.name}})),me=Object.keys(U.eo).map((function(e){return{code:e,name:U.eo[e].name}}));(0,s.useEffect)((function(){if(t.selectedCountry){var e=function(){var e=(0,i.A)((0,o.A)().mark((function e(){var n;return(0,o.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=(0,L.e)(t.selectedCountry),P(n);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}}),[t.selectedCountry]),(0,s.useEffect)((function(){if(ue){var e=function(){var e=(0,i.A)((0,o.A)().mark((function e(){return(0,o.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,he();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return ue.on("manualRegister",e),function(){ue.off("manualRegister",e)}}}),[ue]);return(0,I.jsxs)(I.Fragment,{children:[!b&&(0,I.jsx)(u.a,{display:"flex",flexDir:"column",justifyContent:"center",alignItems:"center",overflow:"auto",width:{base:"100%",md:"80%"},boxShadow:"base",p:"4",rounded:"md",bg:"white",children:(0,I.jsxs)("form",{style:{width:"100%"},children:[(0,I.jsx)(h.E,{fontSize:"sm",fontWeight:500,bg:(0,g.dU)("green.50","green.900"),px:6,p:"3",m:1,color:"green.500",rounded:"full",children:"Register Students Manually"}),Q&&(0,I.jsxs)(h.E,{textAlign:"center",children:["\u26a0\ufe0fStudent Code: ",null===Q||void 0===Q?void 0:Q.admission,", Name: ",null===Q||void 0===Q?void 0:Q.name,", createdAt: ",(0,O.A)(null===Q||void 0===Q?void 0:Q.createdAt)," "]}),(0,I.jsxs)(N.MJ,{id:"name",isRequired:!0,children:[(0,I.jsx)(j.l,{children:"First Name "}),(0,I.jsx)(v.p,{type:"text",name:"name",placeholder:"Student's first name",value:t.name,onChange:pe})]}),(0,I.jsxs)(N.MJ,{id:"otherName",isRequired:!0,children:[(0,I.jsx)(j.l,{children:"Last Name "}),(0,I.jsx)(v.p,{type:"text",name:"otherName",placeholder:"Student's last name",value:t.otherName,onChange:pe})]}),(0,I.jsxs)(N.MJ,{id:"country",isRequired:!0,children:[(0,I.jsx)(j.l,{children:"Country"}),(0,I.jsx)(M.l,{placeholder:"Select your country",display:"flex",justifyContent:"center",alignItems:"center",width:"100%",value:t.selectedCountry,onChange:function(e){return l((0,r.A)((0,r.A)({},t),{},{selectedCountry:e.target.value}))},children:fe.map((function(e){return(0,I.jsx)("option",{value:e.value,style:{color:"black"},children:e.label},e.value)}))})]}),t.selectedCountry&&R.length>0?(0,I.jsxs)(N.MJ,{id:"provinces",isRequired:!0,children:[(0,I.jsx)(j.l,{children:"County/Province"}),(0,I.jsx)(M.l,{placeholder:"Select your province",display:"flex",justifyContent:"center",alignItems:"center",width:"100%",value:t.provinces,onChange:function(e){return l((0,r.A)((0,r.A)({},t),{},{provinces:e.target.value}))},children:R&&R.map((function(e){return(0,I.jsx)("option",{value:e.value,style:{color:"black"},children:e.name},e.value)}))})]}):(0,I.jsxs)(N.MJ,{id:"province",isRequired:!0,children:[(0,I.jsx)(j.l,{children:"County/Province/state"}),(0,I.jsx)(v.p,{type:"text",placeholder:"Province",value:t.provinces,onChange:function(e){return l((0,r.A)((0,r.A)({},t),{},{provinces:e.target.value}))}})]}),(0,I.jsxs)(N.MJ,{id:"language",isRequired:!0,children:[(0,I.jsx)(j.l,{children:"Language"}),(0,I.jsx)(M.l,{placeholder:"Select language",textColor:"grey",value:t.language,onChange:function(e){return l((0,r.A)((0,r.A)({},t),{},{language:e.target.value}))},children:me.map((function(e){return(0,I.jsx)("option",{value:e.code,children:e.name},e.code)}))})]}),(0,I.jsxs)(N.MJ,{id:"id",children:[(0,I.jsx)(j.l,{children:"ID"}),(0,I.jsx)(v.p,{type:"text",name:"id",placeholder:"Student's ID (optional)",value:t.id,onChange:pe})]}),(0,I.jsxs)(N.MJ,{id:"phoneNumber",children:[(0,I.jsx)(j.l,{children:"Phone Number"}),(0,I.jsx)(v.p,{type:"number",name:"phoneNumber",placeholder:"Student's phone number (optional)",value:t.phoneNumber,onChange:pe})]}),(0,I.jsxs)(N.MJ,{id:"email",children:[(0,I.jsx)(j.l,{children:"Email"}),(0,I.jsx)(v.p,{type:"email",name:"email",placeholder:"Student's email address (optional)",value:t.email,onChange:pe})]}),(0,I.jsxs)(N.MJ,{id:"password",isRequired:!0,children:[(0,I.jsx)(j.l,{children:"Password"}),(0,I.jsxs)(W.M,{size:"md",children:[(0,I.jsx)(v.p,{type:k?"text":"password",placeholder:"Enter Password",value:t.password,onChange:function(e){return l((0,r.A)((0,r.A)({},t),{},{password:e.target.value}))}}),(0,I.jsx)(q.t,{width:"4.5rem",children:(0,I.jsx)(f.$,{h:"1.75rem",size:"sm",onClick:de,children:k?"Hide":"Show"})})]})]}),(0,I.jsxs)(N.MJ,{id:"confirmPassword",isRequired:!0,children:[(0,I.jsx)(j.l,{children:"Confirm Password"}),(0,I.jsxs)(W.M,{size:"md",children:[(0,I.jsx)(v.p,{type:k?"text":"password",placeholder:"Confirm password",value:t.confirmpassword,onChange:function(e){return l((0,r.A)((0,r.A)({},t),{},{confirmpassword:e.target.value}))}}),(0,I.jsx)(q.t,{width:"4.5rem",children:(0,I.jsx)(f.$,{h:"1.75rem",size:"sm",onClick:de,children:k?"Hide":"Show"})})]})]}),(0,I.jsx)(F.z,{value:t.gender,onChange:function(e){return l((0,r.A)((0,r.A)({},t),{},{gender:e}))},isRequired:!0,children:(0,I.jsxs)(m.B,{direction:"row",children:[(0,I.jsx)(J.s,{value:"male",children:"Male"}),(0,I.jsx)(J.s,{value:"female",children:"Female"})]})}),(0,I.jsx)(Y.A,{setPic:re,setPicLoading:le,color:"black"}),(0,I.jsx)(f.$,{onClick:function(){return function(){var e=t.name,n=t.otherName,r=t.selectedCountry,o=t.provinces,i=t.language,a=t.password,s=t.confirmpassword,l=t.gender;e&&n&&r&&o&&i&&a&&s&&l&&te?a===s?w(!0):ce({title:"Passwords Do Not Match",status:"warning",duration:5e3,isClosable:!0,position:"bottom"}):ce({title:"Please fill all the required fields.",status:"warning"})}()},mt:4,colorScheme:"teal",isDisabled:!t.name||!t.otherName||se,isLoading:se,children:"Submit"})]})}),b&&(0,I.jsxs)(u.a,{display:"flex",flexDir:"column",justifyContent:"center",alignItems:"center",overflow:"auto",width:"100%",boxShadow:"base",p:"6",rounded:"md",bg:"white",children:[" ",(0,I.jsx)(D.ag,{options:{clientId:"AZ5Pdn0aioG6OzW6n4Q7W64LxkdOhS0wEIOAn_UmF5askK41E72ejdrsHPJoFIcg0atbN-WZG14fd6oc"},children:(0,I.jsx)(D.JV,{createOrder:function(e,n){return n.order.create({purchase_units:[{amount:{currency_code:"USD",value:4..toFixed(2)}}]})},onApprove:function(){var e=(0,i.A)((0,o.A)().mark((function e(n,t){return(0,o.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,he();case 2:return e.abrupt("return",t.order.capture().then((function(e){w(!1),ce({title:"Success",status:"success",duration:3e3,isClosable:!0,position:"bottom"})})));case 3:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),onCancel:function(){w(!1),ce({title:"Cancelled",status:"info",isClosable:!0,position:"bottom"})}})}),(0,I.jsxs)(f.$,{fontSize:"small",width:{base:"80%",md:"25%"},backgroundColor:"green.400",color:"white",onClick:function(){S(!0)},p:0,children:[(0,I.jsx)(d._,{height:5,width:"auto",src:"https://res.cloudinary.com/dvc7i8g1a/image/upload/v1694007922/mpesa_ppfs6p.png",alt:"",loading:"lazy"})," ","Pay via Mpesa"]}),k&&(0,I.jsxs)(u.a,{m:3,width:{base:"80%",md:"50%"},children:[(0,I.jsx)(v.p,{fontSize:"small",color:"green.400",fontWeight:"bold",placeholder:"Enter Your Mpesa Phone Number",textAlign:"center",type:"text",onChange:function(e){return X(e.target.value)},value:V,minLength:10,maxLength:10}),(0,I.jsx)(A.c,{p:2}),(0,I.jsx)(f.$,{width:"100%",onClick:function(){(0,B.ZU)("500",V,oe,ce),S(!1),ce({title:"Wait as message is sent",status:"loading",isClosable:!0,position:"bottom",duration:5e3})},isDisabled:V.length!==parseInt(10),colorScheme:"green",children:"Proceed"}),(0,I.jsx)(h.E,{textAlign:"center",justifyContent:"center",children:"You'll be sent a Message"})]})]})]})},Z=t(66833),Q=t(60184),K=function(e){var n,t,E=e.user,z=(0,l.Zp)(),R=(0,s.useState)(),_=(0,a.A)(R,2),N=_[0],M=_[1],W=(0,c.d)(),q=(0,s.useState)(!1),F=(0,a.A)(q,2),J=F[0],L=F[1],U=(0,s.useState)(""),O=(0,a.A)(U,2),$=O[0],Y=O[1],K=(0,s.useState)(!1),T=(0,a.A)(K,2),G=T[0],V=T[1],X=(0,s.useState)([]),ee=(0,a.A)(X,2),ne=ee[0],te=ee[1],re=(0,s.useState)(null),oe=(0,a.A)(re,2),ie=oe[0],ae=oe[1],se=(0,s.useState)(!1),le=(0,a.A)(se,2),ce=le[0],ue=le[1],de=(0,s.useState)(!1),pe=(0,a.A)(de,2),he=pe[0],fe=pe[1],me=(0,s.useState)(""),xe=(0,a.A)(me,2),ge=xe[0],ve=xe[1],be=(0,s.useState)(!1),je=(0,a.A)(be,2),we=je[0],ye=je[1],Ae=(0,s.useState)(""),Ce=(0,a.A)(Ae,2),ke=Ce[0],Se=Ce[1],Ee=(0,s.useState)(""),ze=(0,a.A)(Ee,2),Re=ze[0],Ie=ze[1],Pe=(0,s.useState)(!1),De=(0,a.A)(Pe,2),_e=De[0],Ne=De[1],Me=(0,s.useState)(null),We=(0,a.A)(Me,2),qe=We[0],Fe=We[1],Je=(0,s.useState)(""),Le=(0,a.A)(Je,2),Ue=Le[0],Oe=Le[1],Be=(0,B.bK)(E),$e=(0,s.useState)(!1),Ye=(0,a.A)($e,2),He=Ye[0],Ze=Ye[1];(0,s.useEffect)((function(){Be&&(Ze(Be.connected),Be.on("connect",(function(){Ze(!0)})),Be.on("disconnect",(function(){Ze(!1)})))}),[Be]),(0,s.useEffect)((function(){if(He)return Be.on("Upgrade",(0,i.A)((0,o.A)().mark((function e(){return(0,o.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xe();case 2:W({title:"Submitting details!",status:"loading",duration:5e3,position:"bottom"});case 3:case"end":return e.stop()}}),e)})))),function(){Be.off("Upgrade")}}));var Qe=(0,s.useCallback)((0,i.A)((0,o.A)().mark((function e(){var n,t;return(0,o.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(E.coach){e.next=2;break}return e.abrupt("return");case 2:V(!0);try{n=E.coach,t={headers:{Authorization:"Bearer ".concat(E.token)}},k.A.get("/api/clubs/".concat(n),t).then(function(){var e=(0,i.A)((0,o.A)().mark((function e(n){return(0,o.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:M(n.data),V(!1);case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()).catch((function(e){V(!1),e.response&&401===e.response.status&&(W({title:"Your session has expired",description:"Logging out in less than 8 seconds",duration:8e3,status:"loading",position:"bottom"}),setTimeout((function(){localStorage.removeItem("userInfo"),z("/")}),8e3))}))}catch(r){console.error("Error fetching Club:",r),V(!1)}case 4:case"end":return e.stop()}}),e)}))),[null===E||void 0===E?void 0:E.token,M,V]);(0,s.useEffect)((function(){E?Qe():z("/dashboard")}),[E,z]);var Ke=function(){var e=(0,i.A)((0,o.A)().mark((function e(n,t){var i,a,s;return(0,o.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i={headers:{Authorization:"Bearer ".concat(E.token)}},e.next=4,S.A.get("/api/province/accept/decline/".concat(n,"?accept=").concat(t),i);case 4:a=e.sent,s=a.data,setUser((function(e){return(0,r.A)((0,r.A)({},e),{},{provinceRequests:s.provinceRequests})})),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),W({title:"Error Occurred!",description:"Try again after sometime.",status:"error"});case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(n,t){return e.apply(this,arguments)}}(),Te=function(){var e=(0,i.A)((0,o.A)().mark((function e(n,t){var i,a,s;return(0,o.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(E){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,i={headers:{Authorization:"Bearer ".concat(E.token)}},e.next=6,S.A.get("/api/national/accept/decline/".concat(n,"?accept=").concat(t),i);case 6:a=e.sent,s=a.data,setUser((function(e){return(0,r.A)((0,r.A)({},e),{},{nationalRequests:s.nationalRequests})})),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),console.log(e.t0),W({title:"Error Occurred!",description:"Try again after sometime.",status:"error"});case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(n,t){return e.apply(this,arguments)}}(),Ge=function(){var e=(0,i.A)((0,o.A)().mark((function e(){var n,t,r;return(0,o.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ue(!1),$){e.next=4;break}return W({title:"Please enter something in search",status:"warning",duration:5e3,isClosable:!0,position:"top-left"}),e.abrupt("return");case 4:return e.prev=4,V(!0),n={headers:{Authorization:"Bearer ".concat(E.token)}},e.next=9,S.A.get("/api/user?search=".concat($),n);case 9:t=e.sent,r=t.data,V(!1),te(r),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(4),V(!1),W({title:"Error Occured!",description:"Failed to Load the Search Results",status:"error",duration:5e3,isClosable:!0,position:"bottom-left"});case 19:case"end":return e.stop()}}),e,null,[[4,15]])})));return function(){return e.apply(this,arguments)}}(),Ve=(0,s.useCallback)(function(){var e=(0,i.A)((0,o.A)().mark((function e(n){var t;return(0,o.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(E){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,t={headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(E.token)}},e.next=6,S.A.post("/api/submit/".concat(E._id,"?studentId=").concat(n),{savePhoto:ke,details:Re},t);case 6:W({title:"Submission successful!",description:"Wait for your results under 24hrs",status:"success",duration:5e3,isClosable:!0,position:"bottom"}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0),W({title:"Error occurred trying to send your work!",status:"error",duration:5e3,isClosable:!0,position:"bottom"});case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(n){return e.apply(this,arguments)}}(),[W,E,ke,Re]);(0,s.useEffect)((function(){(ke||Ue)&&Ve(Ue)}),[ke,Ue]);var Xe=function(){if(qe){Ne(!0);var e=new FormData;e.append("file",qe),e.append("upload_preset","worldsamma"),fetch("https://api.cloudinary.com/v1_1/dsdlgmgwi/image/upload",{method:"post",body:e}).then((function(e){return e.json()})).then((function(e){Se(e.url),Ne(!1)})).catch((function(e){Ne(!1),W({title:"Error Occurred uploading your passport photo.",description:"Please try again later.",duration:5e3,status:"error"})}))}};return(0,I.jsxs)(u.a,{display:"flex",width:"100%",minH:"100vh",justifyContent:"start",flexDir:"column",overflow:"auto",alignItems:"center",bg:"whitesmoke",children:[(0,I.jsx)(C.A,{}),(0,I.jsxs)(u.a,{display:"flex",flexDir:"column",width:{base:"100%",md:"80%"},bg:"whitesmoke",mt:20,fontFamily:"Arial, sans-serif",overflow:"auto",children:[(0,I.jsxs)(u.a,{display:"flex",flexWrap:"wrap",textAlign:"start",boxShadow:"base",width:"100%",p:"2",rounded:"md",bg:"whitesmoke",children:[" ",(0,I.jsx)(d._,{src:null===E||void 0===E?void 0:E.pic,alt:"Profile*",borderRadius:"full",boxSize:{base:"100px",md:"200px"},border:"4px solid white"}),(0,I.jsxs)(u.a,{fontSize:"md",children:[" ",(0,I.jsx)(p.D,{textAlign:"center",mb:4,color:"teal",children:"Profile"}),(0,I.jsxs)(u.a,{display:"flex",children:[(0,I.jsx)(h.E,{fontWeight:"bold",px:1,children:"Name:"}),null===E||void 0===E?void 0:E.name," ",null===E||void 0===E?void 0:E.otherName]}),(0,I.jsxs)(u.a,{display:"flex",children:[(0,I.jsx)(h.E,{fontWeight:"bold",px:1,children:"Code:"})," ",null!==E&&void 0!==E&&E.admission?null===E||void 0===E?void 0:E.admission:"Not enrolled: ".concat(null===E||void 0===E?void 0:E.belt)]}),(0,I.jsxs)(u.a,{display:"flex",children:[(0,I.jsx)(h.E,{fontWeight:"bold",px:1,children:"Email:"})," ",null===E||void 0===E?void 0:E.email]}),(0,I.jsxs)(u.a,{display:"flex",children:[(0,I.jsx)(h.E,{fontWeight:"bold",px:1,children:"Country:"})," ",null===E||void 0===E?void 0:E.country]}),(0,I.jsxs)(u.a,{display:"flex",children:[(0,I.jsx)(h.E,{fontWeight:"bold",px:1,children:"Province:"})," ",null===E||void 0===E?void 0:E.provinces]}),(0,I.jsxs)(u.a,{display:"flex",children:[(0,I.jsx)(h.E,{fontWeight:"bold",px:1,children:"Coach:"}),null!==E&&void 0!==E&&E.coach?" \u2714\ufe0f":"Not a coach"]}),(0,I.jsxs)(u.a,{display:"flex",flexWrap:"wrap",children:[(0,I.jsx)(h.E,{fontWeight:"bold",px:1,children:"Highest Level Attained:"})," ",null===E||void 0===E?void 0:E.belt]}),"6693a995f6295b8bd90d9301"===(null===E||void 0===E?void 0:E._id)&&(0,I.jsx)(u.a,{display:"flex",flexWrap:"wrap",children:(0,I.jsx)(f.$,{colorScheme:"teal",onClick:function(){return z("/admin-work-slot")},border:"none",m:1,children:"Admin Work Slot"})})]})]})," ",(0,I.jsx)(h.E,{width:"100%",textAlign:"center",p:"3",children:"Access all features in one place"}),(0,I.jsxs)(u.a,{display:"flex",flexWrap:"wrap",width:"100%",p:"3",fontSize:"small",children:[(0,I.jsxs)(u.a,{display:"flex",justifyContent:"center",alignItems:"center",border:"1px solid grey",borderRadius:"5px",p:"1",m:"1",children:[(0,I.jsx)(Z.dnm,{}),(0,I.jsx)(h.E,{p:"1",children:"Live stream competitions"}),(0,I.jsx)(Q.nQ7,{style:{color:"green"}})]}),(0,I.jsxs)(u.a,{display:"flex",justifyContent:"center",alignItems:"center",border:"1px solid grey",borderRadius:"5px",p:"1",m:"1",children:[(0,I.jsx)(Z.dnm,{}),(0,I.jsx)(h.E,{p:"1",children:"Become a coach = 50%+ Revenue"}),null!==E&&void 0!==E&&E.coach?(0,I.jsx)(Q.nQ7,{style:{color:"green"}}):(0,I.jsx)(Q.JhU,{})]}),(0,I.jsxs)(u.a,{display:"flex",justifyContent:"center",alignItems:"center",border:"1px solid grey",borderRadius:"5px",p:"1",m:"1",children:[(0,I.jsx)(Z.dnm,{}),(0,I.jsx)(h.E,{p:"1",children:"Become a provincial coach = 70%+ Revenue"}),null!==E&&void 0!==E&&E.coach?(0,I.jsx)(Q.nQ7,{style:{color:"green"}}):(0,I.jsx)(Q.JhU,{})]}),(0,I.jsxs)(u.a,{display:"flex",justifyContent:"center",alignItems:"center",border:"1px solid grey",borderRadius:"5px",p:"1",m:"1",children:[(0,I.jsx)(Z.dnm,{}),(0,I.jsx)(h.E,{p:"1",children:"Become a national coach = 90%+ Revenue"}),null!==E&&void 0!==E&&E.coach?(0,I.jsx)(Q.nQ7,{style:{color:"green"}}):(0,I.jsx)(Q.JhU,{})]})]}),(null===E||void 0===E?void 0:E.coach)&&(0,I.jsx)(I.Fragment,{children:(0,I.jsxs)(u.a,{display:"flex",flexDir:"column",justifyContent:"center",alignItems:"center",width:"100%",minH:"200px",overflow:"auto",children:[G?(0,I.jsxs)(m.B,{width:"100%",children:[(0,I.jsx)(x.E,{height:"20px"}),(0,I.jsx)(x.E,{height:"20px"}),(0,I.jsx)(x.E,{height:"20px"})]}):(0,I.jsxs)(u.a,{display:"flex",flexDir:"column",justifyContent:"center",alignItems:"center",overflow:"auto",width:{base:"100%",md:"60%"},boxShadow:"base",mt:2,p:"4",rounded:"md",bg:"whitesmoke",children:[(0,I.jsx)(p.D,{mb:2,children:"Club Details"}),(0,I.jsxs)(h.E,{fontSize:"sm",fontWeight:500,bg:(0,g.dU)("green.50","green.900"),p:2,px:3,color:"green.500",rounded:"full",margin:1,width:"90%",children:["Status (*",N&&N.registered?"Registered":"Not registered",")"]}),(0,I.jsxs)(h.E,{children:["Club Name: ",null===N||void 0===N?void 0:N.name]}),(0,I.jsxs)(h.E,{children:["Club Code: ",null===N||void 0===N?void 0:N.code]}),(0,I.jsxs)(f.$,{background:"transparent",_hover:{background:"transparent",color:"green"},onClick:function(){L(!J)},fontStyle:"italic",children:["Members: ",null===N||void 0===N?void 0:N.members.length]}),(0,I.jsxs)(h.E,{children:["Followers: ",null===N||void 0===N?void 0:N.followers.length]}),(0,I.jsxs)(h.E,{children:["Received Likes: ",null===N||void 0===N?void 0:N.likes.length]})]}),J&&(0,I.jsxs)(u.a,{display:"flex",flexDir:"column",justifyContent:"center",alignItems:"center",background:"white",overflow:"auto",boxShadow:"base",p:"6",mt:2,rounded:"md",bg:"whitesmoke",width:{base:"100%",md:"60%"},children:[(0,I.jsx)(p.D,{mb:2,children:"Members List"}),N.members.length>0&&N.members.map((function(e,n){return(0,I.jsxs)(h.E,{fontSize:"small",children:[n+1,". Name: ",e.name," Adm: ",e.admission]},e._id)}))]})]})}),(null===E||void 0===E?void 0:E.coach)&&(0,I.jsxs)(u.a,{display:"flex",flexDir:"column",justifyContent:"center",alignItems:"center",overflow:"auto",width:"100%",boxShadow:"base",p:"6",rounded:"md",bg:"whitesmoke",children:[(0,I.jsxs)(u.a,{textAlign:"center",width:"100%",mb:"4",children:[(0,I.jsx)(f.$,{background:"purple.400",onClick:function(){return fe(!he)},children:"Register Students Manually"}),he&&"\u2193"]}),he&&(0,I.jsxs)(u.a,{display:"flex",flexDir:"column",justifyContent:"center",alignItems:"center",overflow:"auto",width:"100%",boxShadow:"base",p:"4",rounded:"md",background:"whitesmoke",children:[" ",(0,I.jsx)(H,{})]}),(0,I.jsx)(h.E,{fontSize:"sm",fontWeight:500,bg:(0,g.dU)("green.50","green.900"),px:6,p:"3",mb:"4",color:"green.500",rounded:"full",children:"Coach's assisted student rank upgrading"}),!Re||!qe,(0,I.jsxs)(u.a,{display:"flex",pb:2,width:{base:"100%",md:"60%"},justifyContent:"center",alignItems:"center",children:[(0,I.jsx)(v.p,{placeholder:"Search by name, email, or admission",mr:2,value:$,onChange:function(e){return Y(e.target.value)},fontSize:"small"}),(0,I.jsx)(f.$,{borderRadius:20,onClick:Ge,children:"\ud83d\udd0dSearch"})]}),(0,I.jsx)(h.E,{children:"Or"}),!ie&&(0,I.jsxs)(u.a,{display:"flex",pb:2,width:{base:"100%",md:"60%"},justifyContent:"center",alignItems:"center",children:[(0,I.jsx)(b.T,{placeholder:"Enter student details",mr:2,value:Re,onChange:function(e){return Ie(e.target.value)},fontSize:"small"}),(0,I.jsx)(j.l,{children:"Picture"}),(0,I.jsx)(v.p,{type:"file",accept:"image/*",borderRadius:20,fontSize:"small",onChange:function(e){Fe(e.target.files[0])},isDisabled:_e})]}),(0,I.jsxs)(u.a,{display:"flex",flexDir:"column",overflow:"auto",width:"100%",justifyContent:"center",alignItems:"center",overflowY:"auto",children:[(0,I.jsx)(u.a,{display:ce?"none":"flex",flexDir:"column",width:"100%",maxH:"300px",overflow:"auto",children:G?(0,I.jsxs)(u.a,{display:"flex",width:"100%",padding:"6",boxShadow:"lg",bg:"whitesmoke",children:[(0,I.jsx)(w.Q,{size:"10"}),(0,I.jsx)(y.r,{mt:"4",noOfLines:4,spacing:"4",skeletonHeight:"2"})]}):null===ne||void 0===ne?void 0:ne.map((function(e){return(0,I.jsx)(P,{user:e,handleFunction:function(){ae({id:e._id,name:e.name,email:e.email,pic:e.pic}),ue(!0)}},e._id)}))}),(ce||Re&&qe)&&(0,I.jsxs)(u.a,{p:"6",children:[(0,I.jsxs)(h.E,{textAlign:"center",fontSize:"sm",fontWeight:500,bg:(0,g.dU)("green.50","green.900"),px:3,p:"2.5",mb:"4",color:"purple.500",rounded:"full",children:["Upgrading: ",null===ie||void 0===ie?void 0:ie.name," ",null===ie||void 0===ie?void 0:ie.email," ",Re,"($5 Fee)"]})," ",(0,I.jsx)(D.ag,{options:{clientId:"AZAdYFR_SbadcgOcCLYn9ajkReJTZmOCnEeAvQ3xPYAE5BMYFBHi4vDeILfNwBO-hh-8wfyGC9lNeB1I"},children:(0,I.jsx)(D.JV,{createOrder:function(e,n){return n.order.create({purchase_units:[{amount:{currency_code:"USD",value:5..toFixed(2)}}]})},onApprove:function(){var e=(0,i.A)((0,o.A)().mark((function e(n,t){return(0,o.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xe();case 2:return e.next=4,Oe(ie._id);case 4:return e.abrupt("return",t.order.capture().then((function(e){W({title:"Success",description:"Wait for WSF to send certificate to particulars.",status:"success",duration:3e3,isClosable:!0,position:"bottom"})})));case 5:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),onCancel:function(){ue(!1),W({title:"Cancelled",status:"info",isClosable:!0,position:"bottom"})}})}),(0,I.jsxs)(f.$,{fontSize:"small",width:"100%",bg:(0,g.dU)("green.100","green.900"),onClick:function(){ye(!0)},p:0,children:[(0,I.jsx)(d._,{height:5,width:"auto",src:"https://res.cloudinary.com/dvc7i8g1a/image/upload/v1694007922/mpesa_ppfs6p.png",alt:"",loading:"lazy"})," ","Pay via Mpesa"]}),we&&(0,I.jsxs)(u.a,{padding:"6",children:[(0,I.jsx)(h.E,{textAlign:"center",justifyContent:"center",fontSize:"xl",children:"Enter Your Mpesa Phone Number (KSH 450/=)"}),(0,I.jsx)(v.p,{fontSize:"small",color:"green.400",fontWeight:"bold",placeholder:"Enter phone number",textAlign:"center",type:"number",onChange:function(e){return ve(e.target.value)},value:ge,minLength:10,maxLength:10}),(0,I.jsx)(A.c,{p:2}),(0,I.jsx)(f.$,{width:"100%",onClick:function(){(0,B.ZU)("450",ge,E,W),ye(!1),W({title:"Wait as message is sent",status:"loading",isClosable:!0,position:"bottom",duration:5e3})},isDisabled:ge.length!==parseInt(10),colorScheme:"green",children:"Proceed"}),(0,I.jsx)(h.E,{textAlign:"center",justifyContent:"center",children:"You'll be sent a Message"})]})]})]})]}),(null===E||void 0===E||null===(n=E.provinceRequests)||void 0===n?void 0:n.length)>0&&(0,I.jsxs)(u.a,{textAlign:"start",fontSize:"medium",fontWeight:"bold",background:"white",overflow:"auto",boxShadow:"base",p:"4",height:"200px",rounded:"md",bg:"whitesmoke",width:"100%",children:[(0,I.jsx)(p.D,{mb:4,children:"Province Requests"}),null===E||void 0===E?void 0:E.provinceRequests.map((function(e,n){var t,r,o;return(0,I.jsxs)(h.E,{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",children:[(0,I.jsxs)(h.E,{p:1,fontStyle:"italic",width:"100%",fontSize:"x-small",children:[" ",n+1,".",null===(t=e.provincialCoach)||void 0===t?void 0:t.name," Adm:",null===(r=e.provincialCoach)||void 0===r?void 0:r.admission," Approvals:"," ",null===(o=e.approvals)||void 0===o?void 0:o.length]}),(0,I.jsx)(f.$,{borderRadius:20,background:"#A020F0",color:"white",_hover:{color:"black"},fontSize:"x-small",onClick:function(){return Ke(e._id,!0)},children:"Approve\u2714\ufe0f"}),(0,I.jsx)(f.$,{borderRadius:20,fontSize:"x-small",color:"white",_hover:{color:"black"},background:"#A020F0",m:1,onClick:function(){return Ke(e._id,!1)},children:"Decline"})]},e._id)}))]}),(null===E||void 0===E||null===(t=E.nationalRequests)||void 0===t?void 0:t.length)>0&&(0,I.jsxs)(u.a,{textAlign:"start",fontSize:"medium",fontWeight:"bold",background:"white",overflow:"auto",boxShadow:"base",p:"4",height:"200px",rounded:"md",bg:"whitesmoke",width:"100%",children:[(0,I.jsx)(p.D,{mb:4,children:"National Requests"}),null===E||void 0===E?void 0:E.nationalRequests.map((function(e,n){return(0,I.jsxs)(u.a,{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",children:[(0,I.jsxs)(h.E,{p:1,fontStyle:"italic",width:"100%",fontSize:"x-small",children:[" ",n+1,".",e.nationalCoach.name," Adm:",e.nationalCoach.admission]}),(0,I.jsx)(f.$,{borderRadius:20,background:"#A020F0",color:"white",_hover:{color:"black"},fontSize:"x-small",onClick:function(){return Te(e._id,!0)},children:"Approve\u2714\ufe0f"}),(0,I.jsx)(f.$,{borderRadius:20,fontSize:"x-small",color:"white",_hover:{color:"black"},background:"#A020F0",m:1,onClick:function(){return Te(e._id,!1)},children:"Decline"})]},e._id)}))]})]})]})}}}]);
//# sourceMappingURL=820.c81e5078.chunk.js.map