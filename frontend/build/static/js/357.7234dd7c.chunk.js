"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[357],{10554:function(e,t,n){var s=n(90675),r=n(10467),i=n(79722).A.create();i.interceptors.response.use(function(){var e=(0,r.A)((0,s.A)().mark((function e(t){return(0,s.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){return Promise.reject(e)})),t.A=i},59357:function(e,t,n){n.r(t);var s=n(60436),r=n(90675),i=n(10467),a=n(5544),o=n(65043),c=n(30502),u=n(22107),l=n(28846),d=n(5371),p=n(82459),h=n(39081),f=n(44093),m=n(10202),x=n(20972),g=n(29301),j=n(76659),b=n(19077),v=n(73225),A=n(76668),w=n(35699),k=n(10804),y=n(42837),C=n(79722),S=n(73216),I=n(10554),E=n(56818),_=n(32620),z=n(6720),D=n(70579);t.default=function(){var e=(0,o.useState)([]),t=(0,a.A)(e,2),n=t[0],F=t[1],P=(0,o.useState)(!1),M=(0,a.A)(P,2),W=M[0],$=M[1],B=(0,o.useState)(!1),N=(0,a.A)(B,2),O=N[0],R=N[1],T=(0,o.useState)(void 0),U=(0,a.A)(T,2),L=U[0],Y=U[1],G=(0,o.useState)(void 0),H=(0,a.A)(G,2),J=H[0],Q=H[1],Z=(0,o.useState)(!1),q=(0,a.A)(Z,2),K=q[0],V=q[1],X=(0,o.useState)(!1),ee=(0,a.A)(X,2),te=ee[0],ne=ee[1],se=(0,o.useState)(""),re=(0,a.A)(se,2),ie=re[0],ae=re[1],oe=(0,o.useState)(""),ce=(0,a.A)(oe,2),ue=ce[0],le=ce[1],de=(0,c.d)(),pe=(0,S.Zp)(),he=(0,E.a)(),fe=he.setMessages,me=he.user,xe=function(e,t,n){if(console.log("Rejected submission with ID: ".concat(e)),ne(!0),e&&me)try{var s={headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(me.token)}},a={publicIds:[t.split("/").pop().split(".")[0],n.split("/").pop().split(".")[0]]};I.A.post("/api/submit/delete/".concat(e),a,s).then(function(){var e=(0,i.A)((0,r.A)().mark((function e(t){return(0,r.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:F(t.data),ne(!0);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){ne(!1),e.response&&401===e.response.status&&(de({title:"Your session has expired",description:"Logging out in less than 8 seconds",duration:8e3,status:"loading",position:"bottom"}),setTimeout((function(){localStorage.removeItem("userInfo"),pe("/")}),8e3))}))}catch(o){ne(!1),console.error("Error fetching Club:",o)}},ge=(0,o.useCallback)((0,i.A)((0,r.A)().mark((function e(){var t,n,s;return(0,r.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(me){e.next=2;break}return e.abrupt("return");case 2:if(t={headers:{Authorization:"Bearer ".concat(me.token)}},!J||!ie){e.next=13;break}return e.prev=4,e.next=7,C.A.get("/api/user/certificate/".concat(ie),{sendCertificate:J},t);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),console.log(e.t0);case 12:return e.abrupt("return");case 13:return e.prev=13,e.next=16,C.A.get("/api/submit",t);case 16:n=e.sent,s=n.data,F(s),e.next=25;break;case 21:e.prev=21,e.t1=e.catch(13),console.log(e.t1),de({title:"Error Occurred!",status:"error",duration:5e3,isClosable:!0,position:"bottom"});case 25:case"end":return e.stop()}}),e,null,[[4,9],[13,21]])}))),[de,me,ie,J]);(0,o.useEffect)((function(){ge()}),[ge]);var je=function(){var e=(0,i.A)((0,r.A)().mark((function e(){var t,n,i,a;return(0,r.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ue&&me&&ie){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,t=me._id,n={headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(me.token)}},e.next=7,C.A.post("/api/message",{sender:ie,content:ue,userId:t},n);case 7:i=e.sent,a=i.data,le(""),fe((function(e){return[].concat((0,s.A)(e),[a])})),socket.emit("new message",a),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(2),console.log(e.t0),de({title:"Failed to send the Message",description:"Please try again after some time",status:"error",duration:5e3,isClosable:!0,position:"bottom"});case 18:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(){return e.apply(this,arguments)}}();return(0,D.jsxs)(u.a,{display:"flex",width:"100%",justifyContent:"start",alignItems:"center",flexDir:"column",overflowY:"auto",background:"white",p:"6",children:[" ",(0,D.jsx)(y.A,{}),(0,D.jsxs)(u.a,{display:"flex",justifyContent:"start",alignItems:"center",flexDir:"column",overflow:"auto",width:"100%",minH:"100vh",children:[(0,D.jsxs)(u.a,{mt:20,display:"flex",justifyContent:"space-around",alignItems:"center",width:"100%",mb:"4",children:[(0,D.jsx)(l.D,{children:"W.S.F"}),(0,D.jsxs)(d.s,{children:[(0,D.jsx)(_.QOw,{})," \xa0 ",(0,D.jsx)(D.Fragment,{children:"Admin"})]})]}),(0,D.jsx)(p.c,{mb:"4"}),(0,D.jsxs)(u.a,{display:"flex",justifyContent:"center",alignItems:"center",mb:"4",children:[(0,D.jsx)(h.E,{p:"6",children:"Go Live Now"}),(0,D.jsx)(z.Md6,{onClick:function(){pe("/live")},fontSize:"100px",color:"red",cursor:"pointer"})]}),(0,D.jsx)(p.c,{mb:"4"}),(0,D.jsxs)(h.E,{textAlign:"center",fontSize:"sm",fontWeight:500,bg:(0,f.dU)("green.50","green.900"),p:2,width:{base:"100%",md:"60%"},color:"green.500",rounded:"full",mb:"4",children:[n.length," submissions."]}),0===n.length&&(0,D.jsx)(h.E,{mb:"4",textAlign:"center",children:"Work will be posted here."}),n.length>0&&n.map((function(e){return(0,D.jsxs)(m.T,{m:3,spacing:4,children:[(0,D.jsxs)(u.a,{display:"flex",justifyContent:"center",alignItems:"center",ml:2,width:"100%",children:[e.coachAssisted&&(0,D.jsx)(h.E,{fontSize:"sm",fontWeight:500,bg:(0,f.dU)("green.50","green.900"),px:6,p:"3",m:1,color:"green.500",rounded:"full",children:"Coach's assisted student rank upgrading"}),(0,D.jsx)(x._,{src:e.passport,alt:"Passport",width:"100",height:"100"}),(0,D.jsxs)(u.a,{justifyContent:"start",ml:2,textAlign:"start",children:[(0,D.jsxs)(l.D,{size:"md",children:["Name: ",e.student.name," ",e.student.otherName]}),(0,D.jsxs)(h.E,{children:["Admission: ",e.student.admission]}),(0,D.jsxs)(h.E,{children:["Current Rank: ",e.student.belt]})]})]}),(0,D.jsx)(u.a,{children:(0,D.jsx)("video",{controls:!0,width:"300",height:"200",children:(0,D.jsx)("source",{src:e.video,type:"video/mp4"})})}),(0,D.jsxs)(u.a,{display:"flex",width:{base:"90%",md:"60%"},justifyContent:"space-between",children:[" ",(0,D.jsx)(g.$,{isDisabled:W,onClick:function(){R(!0)},colorScheme:"green",children:"Approve"}),(0,D.jsxs)(g.$,{isDisabled:O||e.coachAssisted,onClick:function(){$(!0)},colorScheme:"red",children:[te&&(0,D.jsx)(j.y,{size:"sm"}),"Reject"]})]}),W&&(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(b.T,{placeholder:"Please leave a message for student...",value:ue,onChange:function(e){return le(e.target.value)}}),(0,D.jsx)(g.$,{onClick:function(){je(),xe(e._id,e.passport,e.video),ae(e.student._id)},children:"Send Message"})]}),O&&(0,D.jsxs)(D.Fragment,{children:[" ",(0,D.jsxs)(v.MJ,{isInvalid:!L,children:[(0,D.jsx)(A.l,{children:"Certificate"}),(0,D.jsx)(w.p,{type:"file",accept:"application/pdf",onChange:function(e){return Y(e.target.files[0])}}),K&&(0,D.jsx)("p",{children:"Uploading passport photo..."}),(0,D.jsx)(k.Wt,{children:"Please select a certificate."})]}),(0,D.jsx)(g.$,{onClick:function(){!function(){L||de({title:"Select a certificate please.",status:"info"}),V(!0);var e=new FormData;e.append("file",L),e.append("upload_preset","worldsamma"),fetch("https://api.cloudinary.com/v1_1/dsdlgmgwi/image/upload",{method:"post",body:e}).then((function(e){return e.json()})).then((function(e){Q(e.url),V(!1)})).catch((function(e){V(!1),de({title:"Error Occurred uploading your passport photo.",description:"Please try again later.",duration:5e3,status:"error"})}))}(),xe(e._id,e.passport,e.video),ae(e.student._id)},children:"Submit"})]})]},e._id)}))]})]})}}}]);
//# sourceMappingURL=357.7234dd7c.chunk.js.map