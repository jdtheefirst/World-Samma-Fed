"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[42],{35042:function(e,n,o){o.r(n);var c=o(5544),r=o(65043),t=(o(58650),o(51064)),s=o(60184),l=o(70579);n.default=function(){var e=(0,r.useState)(null),n=(0,c.A)(e,2),o=n[0],i=n[1],u=(0,r.useState)(null),a=(0,c.A)(u,2),d=a[0],f=a[1],b=(0,r.useState)(!1),g=(0,c.A)(b,2),S=g[0],m=g[1],p=(0,r.useState)(!1),h=(0,c.A)(p,2),v=h[0],k=h[1],j=(0,r.useRef)(null),w=new WebSocket("ws://localhost:8188");w.onopen=function(){return console.log("WebSocket connected")},w.onclose=function(){return console.log("WebSocket closed")},w.onerror=function(e){return console.error("WebSocket error",e)};var W=new WebSocket("ws://167.99.44.195:8188");W.onopen=function(){return console.log("WebSocket connected")},W.onclose=function(){return console.log("WebSocket closed")},W.onerror=function(e){return console.error("WebSocket error",e)};var x=new WebSocket("ws://janus:8188");x.onopen=function(){return console.log("WebSocket connected")},x.onclose=function(){return console.log("WebSocket closed")},x.onerror=function(e){return console.error("WebSocket error",e)};var N=new WebSocket("ws://world-samma-fed-janus-1:8188");N.onopen=function(){return console.log("WebSocket connected")},N.onclose=function(){return console.log("WebSocket closed")},N.onerror=function(e){return console.error("WebSocket error",e)},(0,r.useEffect)((function(){return t.A.init({debug:"all",callback:function(){var e=new t.A({server:"ws://167.99.44.195:8188",success:function(){C(e)},error:function(e){console.error("Janus error:",e)}});i(e)}}),function(){o&&o.destroy()}}),[]);var C=function(e){e.attach({plugin:"janus.plugin.rtmp",success:function(e){f(e),console.log("RTMP plugin attached!")},error:function(e){console.error("Error attaching RTMP plugin:",e)},webrtcState:function(e){k(e),console.log("WebRTC peer connection is ",e?"up":"down")},onmessage:function(e,n){console.log("Message received from RTMP plugin:",e)},onlocalstream:function(e){j.current.srcObject=e}})};return(0,l.jsxs)("div",{className:"streaming-container",children:[(0,l.jsxs)("div",{className:"video-wrapper",children:[(0,l.jsx)("video",{ref:j,autoPlay:!0,muted:!0,className:"video-feed"}),!v&&(0,l.jsx)("div",{className:"overlay",children:"Connecting..."})]}),(0,l.jsxs)("div",{className:"control-panel",children:[(0,l.jsx)("h2",{children:"Live Stream Control"}),(0,l.jsxs)("div",{className:"status-indicators",children:[(0,l.jsx)("div",{className:"status ".concat(v?"connected":"disconnected"),children:v?"Connected":"Disconnected"}),(0,l.jsx)("div",{className:"status ".concat(S?"live":"idle"),children:S?"Live":"Idle"})]}),(0,l.jsxs)("div",{className:"controls",children:[(0,l.jsxs)("button",{onClick:function(){if(d){d.publish({stream:"rtmp://nginx:1935/stream",success:function(){console.log("Publishing to RTMP successfully!"),m(!0)},error:function(e){console.error("Error publishing to RTMP:",e)}})}else console.error("RTMP plugin not attached.")},disabled:S,className:"start-btn",children:[(0,l.jsx)(s.gSK,{})," Start Streaming"]}),(0,l.jsxs)("button",{onClick:function(){d&&(d.hangup(),m(!1))},disabled:!S,className:"stop-btn",children:[(0,l.jsx)(s.wFo,{})," Stop Streaming"]})]})]})]})}}}]);
//# sourceMappingURL=42.4dc8f009.chunk.js.map