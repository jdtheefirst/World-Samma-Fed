/*! For license information please see 579.8f9620c6.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[579],{51064:function(e,t,r){r.d(t,{A:function(){return s}});var n=r(90675),o=r(10467),i=r(5544),a=r(24765);e=r.hmd(e);var s=function(t){if("function"===typeof define&&r.amdO)define(t);else if(e.exports)e.exports=t();else if("object"===typeof window)return t()}((function(){t.sessions=new Map,t.isExtensionEnabled=function(){if(navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia)return!0;if(window.navigator.userAgent.match("Chrome")){var e=parseInt(window.navigator.userAgent.match(/Chrome\/(.*) /)[1],10),r=33;return window.navigator.userAgent.match("Linux")&&(r=35),e>=26&&e<=r||t.extension.isInstalled()}return!0};var e={extensionId:"hapfgfdkleiggjjpfpenajgdnfckjpaj",isInstalled:function(){return null!==document.querySelector("#janus-extension-installed")},getScreen:function(e){var t=window.setTimeout((function(){var t=new Error("NavigatorUserMediaError");return t.name='The required Chrome extension is not installed: click <a href="#">here</a> to install it. (NOTE: this will need you to refresh the page)',e(t)}),1e3);this.cache[t]=e,window.postMessage({type:"janusGetScreen",id:t},"*")},init:function(){var e={};this.cache=e,window.addEventListener("message",(function(t){if(t.origin==window.location.origin)if("janusGotScreen"==t.data.type&&e[t.data.id]){var r=e[t.data.id];if(delete e[t.data.id],""===t.data.sourceId){var n=new Error("NavigatorUserMediaError");n.name="You cancelled the request for permission, giving up...",r(n)}else r(null,t.data.sourceId)}else"janusGetScreenPending"==t.data.type&&window.clearTimeout(t.data.id)}))}};function t(e){if((e=e||{}).success="function"==typeof e.success?e.success:t.noop,e.error="function"==typeof e.error?e.error:t.noop,e.destroyed="function"==typeof e.destroyed?e.destroyed:t.noop,!t.initDone)return e.error("Library not initialized"),{};if(!t.isWebrtcSupported())return e.error("WebRTC not supported by this browser"),{};if(t.log("Library initialized: "+t.initDone),!e.server)return e.error("Invalid server url"),{};var r=!1,i=null,s={},c=null,d=null,u=0,p=e.server;t.isArray(p)?(t.log("Multiple servers provided ("+p.length+"), will use the first that works"),p=null,d=e.server,t.debug(d)):0===p.indexOf("ws")?(r=!0,t.log("Using WebSockets to contact Janus: "+p)):(r=!1,t.log("Using REST API to contact Janus: "+p));var l=e.iceServers||[{urls:"stun:stun.l.google.com:19302"}],f=e.iceTransportPolicy,v=e.bundlePolicy,m=!1;"undefined"!==typeof e.withCredentials&&null!==e.withCredentials&&(m=!0===e.withCredentials);var h=10;"undefined"!==typeof e.max_poll_events&&null!==e.max_poll_events&&(h=e.max_poll_events),h<1&&(h=1);var g=null;"undefined"!==typeof e.token&&null!==e.token&&(g=e.token);var y=null;"undefined"!==typeof e.apisecret&&null!==e.apisecret&&(y=e.apisecret),this.destroyOnUnload=!0,"undefined"!==typeof e.destroyOnUnload&&null!==e.destroyOnUnload&&(this.destroyOnUnload=!0===e.destroyOnUnload);var b=25e3;"undefined"!==typeof e.keepAlivePeriod&&null!==e.keepAlivePeriod&&(b=e.keepAlivePeriod),isNaN(b)&&(b=25e3);var C=6e4;function S(e){var t={high:9e5,medium:3e5,low:1e5};return"undefined"!==typeof e&&null!==e&&(e.high&&(t.high=e.high),e.medium&&(t.medium=e.medium),e.low&&(t.low=e.low)),t}"undefined"!==typeof e.longPollTimeout&&null!==e.longPollTimeout&&(C=e.longPollTimeout),isNaN(C)&&(C=6e4);var w=!1,k=null,T=new Map,R=this,P=0,x=new Map;function E(){if(null!=k)if(t.debug("Long poll..."),w){var r=p+"/"+k+"?rid="+(new Date).getTime();h&&(r=r+"&maxev="+h),g&&(r=r+"&token="+encodeURIComponent(g)),y&&(r=r+"&apisecret="+encodeURIComponent(y)),t.httpAPICall(r,{verb:"GET",withCredentials:m,success:I,timeout:C,error:function(r,n){if(t.error(r+":",n),++P>3)return w=!1,void e.error("Lost connection to the server (is it down?)");E()}})}else t.warn("Is the server down? (connected=false)")}function I(e,n){if(P=0,r||"undefined"===typeof k||null===k||!0===n||E(),r||!t.isArray(e))if("keepalive"!==e.janus)if("server_info"!==e.janus)if("ack"!==e.janus)if("success"!==e.janus)if("trickle"===e.janus){var o=e.sender;if(!o)return void t.warn("Missing sender...");var a=T.get(o);if(!a)return void t.debug("This handle is not attached to this session");var s=e.candidate;t.debug("Got a trickled candidate on session "+k),t.debug(s);var c=a.webrtcStuff;c.pc&&c.remoteSdp?(t.debug("Adding remote candidate:",s),s&&!0!==s.completed?c.pc.addIceCandidate(s):c.pc.addIceCandidate(t.endOfCandidates)):(t.debug("We didn't do setRemoteDescription (trickle got here before the offer?), caching candidate"),c.candidates||(c.candidates=[]),c.candidates.push(s),t.debug(c.candidates))}else{if("webrtcup"===e.janus){t.debug("Got a webrtcup event on session "+k),t.debug(e);var d=e.sender;if(!d)return void t.warn("Missing sender...");var u=T.get(d);return u?void u.webrtcState(!0):void t.debug("This handle is not attached to this session")}if("hangup"===e.janus){t.debug("Got a hangup event on session "+k),t.debug(e);var p=e.sender;if(!p)return void t.warn("Missing sender...");var l=T.get(p);if(!l)return void t.debug("This handle is not attached to this session");l.webrtcState(!1,e.reason),l.hangup()}else if("detached"===e.janus){t.debug("Got a detached event on session "+k),t.debug(e);var f=e.sender;if(!f)return void t.warn("Missing sender...");var v=T.get(f);if(!v)return;v.ondetached(),v.detach()}else if("media"===e.janus){t.debug("Got a media event on session "+k),t.debug(e);var m=e.sender;if(!m)return void t.warn("Missing sender...");var h=T.get(m);if(!h)return void t.debug("This handle is not attached to this session");h.mediaState(e.type,e.receiving,e.mid)}else if("slowlink"===e.janus){t.debug("Got a slowlink event on session "+k),t.debug(e);var g=e.sender;if(!g)return void t.warn("Missing sender...");var y=T.get(g);if(!y)return void t.debug("This handle is not attached to this session");y.slowLink(e.uplink,e.lost,e.mid)}else{if("error"===e.janus){t.error("Ooops: "+e.error.code+" "+e.error.reason),t.debug(e);var b=e.transaction;if(b){var C=x.get(b);C&&C(e),x.delete(b)}return}if("event"===e.janus){t.debug("Got a plugin event on session "+k),t.debug(e);var S=e.sender;if(!S)return void t.warn("Missing sender...");var w=e.plugindata;if(!w)return void t.warn("Missing plugindata...");t.debug("  -- Event is coming from "+S+" ("+w.plugin+")");var R=w.data;t.debug(R);var D=T.get(S);if(!D)return void t.warn("This handle is not attached to this session");var _=e.jsep;_&&(t.debug("Handling SDP as well..."),t.debug(_));var O=D.onmessage;O?(t.debug("Notifying application..."),O(R,_)):t.debug("No provided notification callback")}else{if("timeout"===e.janus)return t.error("Timeout on session "+k),t.debug(e),void(r&&i.close(3504,"Gateway timeout"));t.warn("Unknown message/event  '"+e.janus+"' on session "+k),t.debug(e)}}}else{t.debug("Got a success on session "+k),t.debug(e);var A=e.transaction;if(A){var j=x.get(A);j&&j(e),x.delete(A)}}else{t.debug("Got an ack on session "+k),t.debug(e);var M=e.transaction;if(M){var L=x.get(M);L&&L(e),x.delete(M)}}else{t.debug("Got info on the Janus instance"),t.debug(e);var N=e.transaction;if(N){var F=x.get(N);F&&F(e),x.delete(N)}}else t.vdebug("Got a keepalive on session "+k);else for(var V=0;V<e.length;V++)I(e[V],!0)}function D(){if(p&&r&&w){c=setTimeout(D,b);var e={janus:"keepalive",session_id:k,transaction:t.randomString(12)};g&&(e.token=g),y&&(e.apisecret=y),i.send(JSON.stringify(e))}}function _(n){var o=t.randomString(12),a={janus:"create",transaction:o};if(n.reconnect&&(w=!1,a.janus="claim",a.session_id=k,i&&(i.onopen=null,i.onerror=null,i.onclose=null,c&&(clearTimeout(c),c=null))),g&&(a.token=g),y&&(a.apisecret=y),!p&&t.isArray(d)&&(0===(p=d[u]).indexOf("ws")?(r=!0,t.log("Server #"+(u+1)+": trying WebSockets to contact Janus ("+p+")")):(r=!1,t.log("Server #"+(u+1)+": trying REST API to contact Janus ("+p+")"))),r)for(var l in i=t.newWebSocket(p,"janus-protocol"),s={error:function(){if(t.error("Error connecting to the Janus WebSockets server... "+p),t.isArray(d)&&!n.reconnect)return++u===d.length?void n.error("Error connecting to any of the provided Janus servers: Is the server down?"):(p=null,void setTimeout((function(){_(n)}),200));n.error("Error connecting to the Janus WebSockets server: Is the server down?")},open:function(){x.set(o,(function(e){if(t.debug(e),"success"!==e.janus)return t.error("Ooops: "+e.error.code+" "+e.error.reason),void n.error(e.error.reason);c=setTimeout(D,b),w=!0,k=e.session_id?e.session_id:e.data.id,n.reconnect?t.log("Claimed session: "+k):t.log("Created session: "+k),t.sessions.set(k,R),n.success()})),i.send(JSON.stringify(a))},message:function(e){I(JSON.parse(e.data))},close:function(){p&&w&&(w=!1,e.error("Lost connection to the server (is it down?)"))}})i.addEventListener(l,s[l]);else t.httpAPICall(p,{verb:"POST",withCredentials:m,body:a,success:function(e){if(t.debug(e),"success"!==e.janus)return t.error("Ooops: "+e.error.code+" "+e.error.reason),void n.error(e.error.reason);w=!0,k=e.session_id?e.session_id:e.data.id,n.reconnect?t.log("Claimed session: "+k):t.log("Created session: "+k),t.sessions.set(k,R),E(),n.success()},error:function(e,r){if(t.error(e+":",r),t.isArray(d)&&!n.reconnect)return++u===d.length?void n.error("Error connecting to any of the provided Janus servers: Is the server down?"):(p=null,void setTimeout((function(){_(n)}),200));""===r?n.error(e+": Is the server down?"):r&&r.error?n.error(e+": "+r.error.message):n.error(e+": "+r)}})}function O(e,n){if((n=n||{}).success="function"==typeof n.success?n.success:t.noop,n.error="function"==typeof n.error?n.error:t.noop,!w)return t.warn("Is the server down? (connected=false)"),void n.error("Is the server down? (connected=false)");var o=T.get(e);if(!o||!o.webrtcStuff)return t.warn("Invalid handle"),void n.error("Invalid handle");var a=n.message,s=n.jsep,c=t.randomString(12),d={janus:"message",body:a,transaction:c};if(o.token&&(d.token=o.token),y&&(d.apisecret=y),s){d.jsep={type:s.type,sdp:s.sdp},s.e2ee&&(d.jsep.e2ee=!0),"hml"!==s.rid_order&&"lmh"!==s.rid_order||(d.jsep.rid_order=s.rid_order),s.force_relay&&(d.jsep.force_relay=!0);var u=null,l=o.webrtcStuff;if(l.pc){var f=l.pc.getTransceivers();if(f&&f.length>0)for(var v in f){var h=f[v];if(h&&h.sender&&h.sender.track&&"video"===h.sender.track.kind){var g=h.sender.getParameters();g&&g.encodings&&g.encodings[0]&&g.encodings[0].scalabilityMode&&(u||(u=[]),u.push({mindex:parseInt(v),mid:h.mid,svc:g.encodings[0].scalabilityMode}))}}}u&&(d.jsep.svc=u)}if(t.debug("Sending message to plugin (handle="+e+"):"),t.debug(d),r)return d.session_id=k,d.handle_id=e,x.set(c,(function(e){if(t.debug("Message sent!"),t.debug(e),"success"===e.janus){var r=e.plugindata;if(!r)return t.warn("Request succeeded, but missing plugindata..."),void n.success();t.log("Synchronous transaction successful ("+r.plugin+")");var o=r.data;return t.debug(o),void n.success(o)}"ack"===e.janus?n.success():e.error?(t.error("Ooops: "+e.error.code+" "+e.error.reason),n.error(e.error.code+" "+e.error.reason)):(t.error("Unknown error"),n.error("Unknown error"))})),void i.send(JSON.stringify(d));t.httpAPICall(p+"/"+k+"/"+e,{verb:"POST",withCredentials:m,body:d,success:function(e){if(t.debug("Message sent!"),t.debug(e),"success"===e.janus){var r=e.plugindata;if(!r)return t.warn("Request succeeded, but missing plugindata..."),void n.success();t.log("Synchronous transaction successful ("+r.plugin+")");var o=r.data;return t.debug(o),void n.success(o)}"ack"===e.janus?n.success():e.error?(t.error("Ooops: "+e.error.code+" "+e.error.reason),n.error(e.error.code+" "+e.error.reason)):(t.error("Unknown error"),n.error("Unknown error"))},error:function(e,r){t.error(e+":",r),n.error(e+": "+r)}})}function A(e,n){if(w){var o=T.get(e);if(o&&o.webrtcStuff){var a={janus:"trickle",candidate:n,transaction:t.randomString(12)};if(o.token&&(a.token=o.token),y&&(a.apisecret=y),t.vdebug("Sending trickle candidate (handle="+e+"):"),t.vdebug(a),r)return a.session_id=k,a.handle_id=e,void i.send(JSON.stringify(a));t.httpAPICall(p+"/"+k+"/"+e,{verb:"POST",withCredentials:m,body:a,success:function(e){t.vdebug("Candidate sent!"),t.vdebug(e),"ack"===e.janus||t.error("Ooops: "+e.error.code+" "+e.error.reason)},error:function(e,r){t.error(e+":",r)}})}else t.warn("Invalid handle")}else t.warn("Is the server down? (connected=false)")}function j(e,r,n,o,i){var s=T.get(e);if(s&&s.webrtcStuff){var c=s.webrtcStuff;if(c.pc){var d=function(e){t.log("Received state change on data channel:",e);var r=e.target.label,n=e.target.protocol,o=c.dataChannel[r]?c.dataChannel[r].readyState:"null";if(t.log("State change on <"+r+"> data channel: "+o),"open"===o){if(c.dataChannel[r].pending&&c.dataChannel[r].pending.length>0){t.log("Sending pending messages on <"+r+">:",c.dataChannel[r].pending.length);var i,d=(0,a.A)(c.dataChannel[r].pending);try{for(d.s();!(i=d.n()).done;){var u=i.value;t.log("Sending data on data channel <"+r+">"),t.debug(u),c.dataChannel[r].send(u)}}catch(p){d.e(p)}finally{d.f()}c.dataChannel[r].pending=[]}s.ondataopen(r,n)}};if(o)c.dataChannel[r]=o;else{var u=c.dataChannelOptions;n&&(u.protocol=n),c.dataChannel[r]=c.pc.createDataChannel(r,u)}c.dataChannel[r].onmessage=function(e){t.log("Received message on data channel:",e);var r=e.target.label;s.ondata(e.data,r)},c.dataChannel[r].onopen=d,c.dataChannel[r].onclose=d,c.dataChannel[r].onerror=function(e){t.error("Got error on data channel:",e)},c.dataChannel[r].pending=[],i&&c.dataChannel[r].pending.push(i)}else t.warn("Invalid PeerConnection")}else t.warn("Invalid handle")}function M(e,r){(r=r||{}).success="function"==typeof r.success?r.success:t.noop,r.error="function"==typeof r.error?r.error:t.noop;var n=T.get(e);if(!n||!n.webrtcStuff)return t.warn("Invalid handle"),void r.error("Invalid handle");var o=n.webrtcStuff,i=r.text||r.data;if(!i)return t.warn("Invalid data"),void r.error("Invalid data");var a=r.label?r.label:t.dataChanDefaultLabel;return o.dataChannel[a]?"open"!==o.dataChannel[a].readyState?(o.dataChannel[a].pending.push(i),void r.success()):(t.log("Sending data on data channel <"+a+">"),t.debug(i),o.dataChannel[a].send(i),void r.success()):(j(e,a,r.protocol,!1,i,r.protocol),void r.success())}function L(e,r){(r=r||{}).success="function"==typeof r.success?r.success:t.noop,r.error="function"==typeof r.error?r.error:t.noop;var n=T.get(e);if(!n||!n.webrtcStuff)return t.warn("Invalid handle"),void r.error("Invalid handle");var o=n.webrtcStuff;if(!o.dtmfSender){if(o.pc){var i=o.pc.getSenders().find((function(e){return e.track&&"audio"===e.track.kind}));if(!i)return t.warn("Invalid DTMF configuration (no audio track)"),void r.error("Invalid DTMF configuration (no audio track)");o.dtmfSender=i.dtmf,o.dtmfSender&&(t.log("Created DTMF Sender"),o.dtmfSender.ontonechange=function(e){t.debug("Sent DTMF tone: "+e.tone)})}if(!o.dtmfSender)return t.warn("Invalid DTMF configuration"),void r.error("Invalid DTMF configuration")}var a=r.dtmf;if(!a)return t.warn("Invalid DTMF parameters"),void r.error("Invalid DTMF parameters");var s=a.tones;if(!s)return t.warn("Invalid DTMF string"),void r.error("Invalid DTMF string");var c="number"===typeof a.duration?a.duration:500,d="number"===typeof a.gap?a.gap:50;t.debug("Sending DTMF string "+s+" (duration "+c+"ms, gap "+d+"ms)"),o.dtmfSender.insertDTMF(s,c,d),r.success()}function N(e,n){(n=n||{}).success="function"==typeof n.success?n.success:t.noop,n.error="function"==typeof n.error?n.error:t.noop;var o=!0===n.noRequest;t.log("Destroying handle "+e+" (only-locally="+o+")"),oe(e);var a=T.get(e);if(!a||a.detached)return T.delete(e),void n.success();if(a.detached=!0,o)return T.delete(e),void n.success();if(!w)return t.warn("Is the server down? (connected=false)"),void n.error("Is the server down? (connected=false)");var s={janus:"detach",transaction:t.randomString(12)};if(a.token&&(s.token=a.token),y&&(s.apisecret=y),r)return s.session_id=k,s.handle_id=e,i.send(JSON.stringify(s)),T.delete(e),void n.success();t.httpAPICall(p+"/"+k+"/"+e,{verb:"POST",withCredentials:m,body:s,success:function(r){t.log("Destroyed handle:"),t.debug(r),"success"!==r.janus&&t.error("Ooops: "+r.error.code+" "+r.error.reason),T.delete(e),n.success()},error:function(r,o){t.error(r+":",o),T.delete(e),n.success()}})}function F(e,r){var n=T.get(e);if(!n||!n.webrtcStuff)throw t.warn("Invalid handle"),"Invalid handle";var o=n.webrtcStuff;if(!o.pc){var i={iceServers:l,iceTransportPolicy:f,bundlePolicy:v,sdpSemantics:"unified-plan"},s=!1;if(r.tracks){var c,d=(0,a.A)(r.tracks);try{for(d.s();!(c=d.n()).done;){var u=c.value;if(u.transforms&&(u.transforms.sender||u.transforms.receiver)){s=!0;break}}}catch(p){d.e(p)}finally{d.f()}}r.externalEncryption&&(s=!0,o.externalEncryption=!0),RTCRtpSender&&(RTCRtpSender.prototype.createEncodedStreams||RTCRtpSender.prototype.createEncodedAudioStreams&&RTCRtpSender.prototype.createEncodedVideoStreams)&&s&&(o.insertableStreams=!0,i.forceEncodedAudioInsertableStreams=!0,i.forceEncodedVideoInsertableStreams=!0,i.encodedInsertableStreams=!0),t.log("Creating PeerConnection"),o.pc=new RTCPeerConnection(i),t.debug(o.pc),o.pc.getStats&&(o.volume={},o.bitrate.value="0 kbits/sec"),t.log("Preparing local SDP and gathering candidates (trickle="+o.trickle+")"),o.pc.onconnectionstatechange=function(){o.pc&&n.connectionState(o.pc.connectionState)},o.pc.oniceconnectionstatechange=function(){o.pc&&n.iceState(o.pc.iceConnectionState)},o.pc.onicecandidate=function(n){if(!n.candidate||n.candidate.candidate&&n.candidate.candidate.indexOf("endOfCandidates")>0)t.log("End of candidates."),o.iceDone=!0,!0===o.trickle?A(e,{completed:!0}):function(e,r){r=r||{},r.success="function"==typeof r.success?r.success:t.noop,r.error="function"==typeof r.error?r.error:t.noop;var n=T.get(e);if(!n||!n.webrtcStuff)return void t.warn("Invalid handle, not sending anything");var o=n.webrtcStuff;if(t.log("Sending offer/answer SDP..."),!o.mySdp)return void t.warn("Local SDP instance is invalid, not sending anything...");o.mySdp={type:o.pc.localDescription.type,sdp:o.pc.localDescription.sdp},!1===o.trickle&&(o.mySdp.trickle=!1);t.debug(r),o.sdpSent=!0,r.success(o.mySdp)}(e,r);else{var i={candidate:n.candidate.candidate,sdpMid:n.candidate.sdpMid,sdpMLineIndex:n.candidate.sdpMLineIndex};!0===o.trickle&&A(e,i)}},o.pc.ontrack=function(e){if(t.log("Handling Remote Track",e),e.streams&&e.track){var r=e.transceiver?e.transceiver.mid:e.track.id;try{e.transceiver&&e.transceiver.mid&&e.track.id&&(n.mids||(n.mids={}),n.mids[e.track.id]=e.transceiver.mid),n.onremotetrack(e.track,r,!0,{reason:"created"})}catch(a){t.error("Error calling onremotetrack",a)}if(!e.track.onended){var i=null;t.log("Adding onended callback to track:",e.track),e.track.onended=function(r){t.log("Remote track removed:",r),clearTimeout(i);var s=o.pc?o.pc.getTransceivers():null,c=s?s.find((function(e){return e.receiver.track===r.target})):null,d=c?c.mid:r.target.id;d===r.target.id&&n.mids&&n.mids[e.track.id]&&(d=n.mids[e.track.id]);try{n.onremotetrack(r.target,d,!1,{reason:"ended"})}catch(a){t.error("Error calling onremotetrack on removal",a)}delete n.mids[e.track.id]},e.track.onmute=function(r){t.log("Remote track muted:",r),i||(i=setTimeout((function(){t.log("Removing remote track");var s=o.pc?o.pc.getTransceivers():null,c=s?s.find((function(e){return e.receiver.track===r.target})):null,d=c?c.mid:r.target.id;d===r.target.id&&n.mids&&n.mids[e.track.id]&&(d=n.mids[e.track.id]);try{n.onremotetrack(r.target,d,!1,{reason:"mute"})}catch(a){t.error("Error calling onremotetrack on mute",a)}i=null}),2520))},e.track.onunmute=function(e){if(t.log("Remote track flowing again:",e),null!=i)clearTimeout(i),i=null;else try{var r=o.pc?o.pc.getTransceivers():null,s=r?r.find((function(t){return t.receiver.track===e.target})):null,c=s?s.mid:e.target.id;n.onremotetrack(e.target,c,!0,{reason:"unmute"})}catch(a){t.error("Error calling onremotetrack on unmute",a)}}}}}}}function V(e,t,r){return G.apply(this,arguments)}function G(){return(G=(0,o.A)((0,n.A)().mark((function e(r,o,i){var s,c,d,u,p,l,f,v,m,h;return(0,n.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=i||{}).success="function"==typeof i.success?i.success:t.noop,i.error="function"==typeof i.error?i.error:ne,s=i.jsep,!o||!s){e.next=10;break}return t.error("Provided a JSEP to a createOffer"),i.error("Provided a JSEP to a createOffer"),e.abrupt("return");case 10:if(o||s&&s.type&&s.sdp){e.next=14;break}return t.error("A valid JSEP is required for createAnswer"),i.error("A valid JSEP is required for createAnswer"),e.abrupt("return");case 14:if(!i.media||i.tracks){e.next=36;break}if(i.tracks=t.mediaToTracks(i.media),!0!==i.simulcast&&!0!==i.simulcast2&&!i.svc){e.next=35;break}c=(0,a.A)(i.tracks),e.prev=18,c.s();case 20:if((d=c.n()).done){e.next=27;break}if("video"!==(u=d.value).type){e.next=25;break}return!0===i.simulcast||!0===i.simulcast2?u.simulcast=!0:i.svc&&(u.svc=i.svc),e.abrupt("break",27);case 25:e.next=20;break;case 27:e.next=32;break;case 29:e.prev=29,e.t0=e.catch(18),c.e(e.t0);case 32:return e.prev=32,c.f(),e.finish(32);case 35:t.warn("Deprecated media object passed, use tracks instead. Automatically translated to:",i.tracks);case 36:if(!i.tracks||Array.isArray(i.tracks)){e.next=40;break}return t.error("Tracks must be an array"),i.error("Tracks must be an array"),e.abrupt("return");case 40:if((p=T.get(r))&&p.webrtcStuff){e.next=45;break}return t.warn("Invalid handle"),i.error("Invalid handle"),e.abrupt("return");case 45:if((l=p.webrtcStuff).trickle=ie(i.trickle),e.prev=47,F(r,i),!o){e.next=52;break}return e.next=52,H(r,i);case 52:if(s){e.next=59;break}return e.next=55,J(r,i);case 55:f=e.sent,i.success(f),e.next=70;break;case 59:return e.next=61,l.pc.setRemoteDescription(s);case 61:if(t.log("Remote description accepted!"),l.remoteSdp=s.sdp,l.candidates&&l.candidates.length>0){for(v=0;v<l.candidates.length;v++)m=l.candidates[v],t.debug("Adding remote candidate:",m),m&&!0!==m.completed?l.pc.addIceCandidate(m):l.pc.addIceCandidate(t.endOfCandidates);l.candidates=[]}return e.next=66,H(r,i);case 66:return e.next=68,W(r,i);case 68:h=e.sent,i.success(h);case 70:e.next=76;break;case 72:e.prev=72,e.t1=e.catch(47),t.error(e.t1),i.error(e.t1);case 76:case"end":return e.stop()}}),e,null,[[18,29,32,35],[47,72]])})))).apply(this,arguments)}function U(e,r){(r=r||{}).success="function"==typeof r.success?r.success:t.noop,r.error="function"==typeof r.error?r.error:ne,r.customizeSdp="function"==typeof r.customizeSdp?r.customizeSdp:t.noop;var n=r.jsep,o=T.get(e);if(!o||!o.webrtcStuff)return t.warn("Invalid handle"),void r.error("Invalid handle");var i=o.webrtcStuff;if(n){if(!i.pc)return t.warn("Wait, no PeerConnection?? if this is an answer, use createAnswer and not handleRemoteJsep"),void r.error("No PeerConnection: if this is an answer, use createAnswer and not handleRemoteJsep");r.customizeSdp(n),i.pc.setRemoteDescription(n).then((function(){if(t.log("Remote description accepted!"),i.remoteSdp=n.sdp,i.candidates&&i.candidates.length>0){for(var e=0;e<i.candidates.length;e++){var o=i.candidates[e];t.debug("Adding remote candidate:",o),o&&!0!==o.completed?i.pc.addIceCandidate(o):i.pc.addIceCandidate(t.endOfCandidates)}i.candidates=[]}r.success()}),r.error)}else r.error("Invalid JSEP")}function J(e,t){return z.apply(this,arguments)}function z(){return(z=(0,o.A)((0,n.A)().mark((function e(r,o){var i,a,s,c,d;return(0,n.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((o=o||{}).customizeSdp="function"==typeof o.customizeSdp?o.customizeSdp:t.noop,(i=T.get(r))&&i.webrtcStuff){e.next=6;break}throw t.warn("Invalid handle"),"Invalid handle";case 6:return a=i.webrtcStuff,t.log("Creating offer (iceDone="+a.iceDone+")"),s={},!0===o.iceRestart&&(s.iceRestart=!0),t.debug(s),e.next=14,a.pc.createOffer(s);case 14:return c=e.sent,t.debug(c),d={type:"offer",sdp:c.sdp},o.customizeSdp(d),c.sdp=d.sdp,t.log("Setting local description"),a.mySdp={type:"offer",sdp:c.sdp},e.next=23,a.pc.setLocalDescription(c);case 23:if(a.mediaConstraints=s,a.iceDone||a.trickle){e.next=27;break}return t.log("Waiting for all candidates..."),e.abrupt("return",null);case 27:return(a.insertableStreams||a.externalEncryption)&&(c.e2ee=!0),e.abrupt("return",c);case 29:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(e,t){return B.apply(this,arguments)}function B(){return(B=(0,o.A)((0,n.A)().mark((function e(r,o){var i,a,s,c;return(0,n.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((o=o||{}).customizeSdp="function"==typeof o.customizeSdp?o.customizeSdp:t.noop,(i=T.get(r))&&i.webrtcStuff){e.next=6;break}throw t.warn("Invalid handle"),"Invalid handle";case 6:return a=i.webrtcStuff,t.log("Creating answer (iceDone="+a.iceDone+")"),e.next=10,a.pc.createAnswer();case 10:return s=e.sent,t.debug(s),c={type:"answer",sdp:s.sdp},o.customizeSdp(c),s.sdp=c.sdp,t.log("Setting local description"),a.mySdp={type:"answer",sdp:s.sdp},e.next=19,a.pc.setLocalDescription(s);case 19:if(a.iceDone||a.trickle){e.next=22;break}return t.log("Waiting for all candidates..."),e.abrupt("return",null);case 22:return(a.insertableStreams||a.externalEncryption)&&(s.e2ee=!0),e.abrupt("return",s);case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(e,t){return K.apply(this,arguments)}function K(){return(K=(0,o.A)((0,n.A)().mark((function e(r,o){var i,s,c;return(0,n.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((o=o||{}).success="function"==typeof o.success?o.success:t.noop,o.error="function"==typeof o.error?o.error:t.noop,!o.tracks||Array.isArray(o.tracks)){e.next=7;break}return t.error("Tracks must be an array"),o.error("Tracks must be an array"),e.abrupt("return");case 7:i=(0,a.A)(o.tracks);try{for(i.s();!(s=i.n()).done;)((c=s.value).add||!c.replace&&!c.remove)&&(c.replace=!0)}catch(n){i.e(n)}finally{i.f()}return e.prev=9,e.next=12,H(r,o);case 12:o.success(),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(9),t.error(e.t0),o.error(e.t0);case 19:case"end":return e.stop()}}),e,null,[[9,15]])})))).apply(this,arguments)}function H(e,t){return Y.apply(this,arguments)}function Y(){return(Y=(0,o.A)((0,n.A)().mark((function e(r,o){var i,s,c,d,u,p,l,f,v,m,h,g,y,b,C,w,k,R;return(0,n.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=T.get(r))&&i.webrtcStuff){e.next=4;break}throw t.warn("Invalid handle, not sending anything"),"Invalid handle";case 4:if((s=i.webrtcStuff).pc){e.next=8;break}throw t.warn("Invalid PeerConnection"),"Invalid PeerConnection";case 8:if((c=o.tracks)&&Array.isArray(c)&&0!==c.length){e.next=11;break}return e.abrupt("return");case 11:d=!1,u={},p=(0,a.A)(c),e.prev=14,p.s();case 16:if((l=p.n()).done){e.next=31;break}if(delete(f=l.value).gumGroup,f.type&&["audio","video"].includes(f.type)){e.next=21;break}return e.abrupt("continue",29);case 21:if(f.capture&&!(f.capture instanceof MediaStreamTrack)){e.next=23;break}return e.abrupt("continue",29);case 23:if(v=f.group?f.group:"default",u[v]||(u[v]={}),!u[v][f.type]){e.next=27;break}return e.abrupt("continue",29);case 27:f.gumGroup=v,u[v][f.type]=f;case 29:e.next=16;break;case 31:e.next=36;break;case 33:e.prev=33,e.t0=e.catch(14),p.e(e.t0);case 36:return e.prev=36,p.f(),e.finish(36);case 39:for(m=Object.keys(u),h=0,g=m;h<g.length;h++)y=g[h],(b=u[y]).audio&&b.video||(b.audio&&delete b.audio.gumGroup,b.video&&delete b.video.gumGroup,delete u[y]);C=!!o.jsep,w=(0,a.A)(c),e.prev=43,R=(0,n.A)().mark((function e(){var o,c,p,l,f,v,m,h,g,y,b,w,T,R,P,x,E,I,D,_,O,A,M,L,N,F,V,G,U,J,z,W,B,q,K,H;return(0,n.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((o=k.value).type){e.next=4;break}return t.warn("Missing track type:",o),e.abrupt("return",0);case 4:if("data"!==o.type){e.next=12;break}if(!s.pc.ondatachannel){e.next=8;break}return t.warn("Data channel exists already, not creating another one"),e.abrupt("return",0);case 8:return t.log("Creating default data channel"),j(r,t.dataChanDefaultLabel,null,!1),s.pc.ondatachannel=function(e){t.log("Data channel created by Janus:",e),j(r,e.channel.label,e.channel.protocol,e.channel)},e.abrupt("return",0);case 12:if("undefined"!==typeof o.add&&null!==o.add||"undefined"!==typeof o.remove&&null!==o.remove||"undefined"!==typeof o.replace&&null!==o.replace||(o.add=!0),!(o.add&&o.remove||o.add&&o.remove&&o.replace)){e.next=16;break}return t.warn("Conflicting actions for track, ignoring:",o),e.abrupt("return",0);case 16:if(o.add&&o.replace?(t.warn("Both add and replace provided, falling back to replace:",o),delete o.add):o.remove&&o.replace&&(t.warn("Both remove and replace provided, falling back to remove:",o),delete o.replace),c=o.type,"screen"===o.type&&(c="video"),p=null,l=null,o.mid?p=s.pc.getTransceivers().find((function(e){return e.mid===o.mid&&e.receiver.track.kind===c})):o.add||(p=s.pc.getTransceivers().find((function(e){return e.receiver.track.kind===c}))),!o.replace&&!o.remove){e.next=29;break}if(p){e.next=25;break}return t.warn("Couldn't find a transceiver for track:",o),e.abrupt("return",0);case 25:if(p.sender){e.next=28;break}return t.warn("No sender in the transceiver for track:",o),e.abrupt("return",0);case 28:l=p.sender;case 29:if(!C||p){e.next=34;break}if(p=s.pc.getTransceivers().find((function(e){return e.receiver.track.kind===c})),p){e.next=34;break}return t.warn("Couldn't find a transceiver for track:",o),e.abrupt("return",0);case 34:if(f=null,v=null,!o.remove&&!o.replace){e.next=41;break}return t.log("Removing track from PeerConnection",o),v=l.track?l.track.id:null,e.next=40,l.replaceTrack(null);case 40:if(v&&s.myStream){if(m=null,"audio"===c&&s.myStream.getAudioTracks()&&s.myStream.getAudioTracks().length){h=(0,a.A)(s.myStream.getAudioTracks());try{for(h.s();!(g=h.n()).done;)(y=g.value).id===v&&(m=y,t.log("Removing audio track:",m))}catch(n){h.e(n)}finally{h.f()}}else if("video"===c&&s.myStream.getVideoTracks()&&s.myStream.getVideoTracks().length){b=(0,a.A)(s.myStream.getVideoTracks());try{for(b.s();!(w=b.n()).done;)(T=w.value).id===v&&(m=T,t.log("Removing video track:",m))}catch(n){b.e(n)}finally{b.f()}}if(m){try{s.myStream.removeTrack(m),i.onlocaltrack(m,!1)}catch(Y){t.error("Error calling onlocaltrack on removal for renegotiation",Y)}if(!0!==m.dontStop)try{m.stop()}catch(Y){}}}case 41:if(!o.capture){e.next=120;break}if(!(o.gumGroup&&u[o.gumGroup]&&u[o.gumGroup].stream)){e.next=50;break}R=u[o.gumGroup].stream,f="audio"===o.type?R.getAudioTracks()[0]:R.getVideoTracks()[0],delete u[o.gumGroup].stream,delete u[o.gumGroup],delete o.gumGroup,e.next=68;break;case 50:if(!(o.capture instanceof MediaStreamTrack)){e.next=54;break}f=o.capture,e.next=68;break;case 54:if(d||(d=!0,i.consentDialog(!0)),P=t.trackConstraints(o),x=null,"audio"!==o.type&&"video"!==o.type){e.next=64;break}return o.gumGroup&&(E="audio"===o.type?"video":"audio",u[o.gumGroup]&&u[o.gumGroup][E]&&(I=u[o.gumGroup][E],D=t.trackConstraints(I),P[E]=D[E])),e.next=60,navigator.mediaDevices.getUserMedia(P);case 60:x=e.sent,o.gumGroup&&P.audio&&P.video&&(u[o.gumGroup].stream=x,delete o.gumGroup),e.next=67;break;case 64:return e.next=66,navigator.mediaDevices.getDisplayMedia(P);case 66:x=e.sent;case 67:f="audio"===o.type?x.getAudioTracks()[0]:x.getVideoTracks()[0];case 68:if(!o.replace){e.next=76;break}return e.next=71,l.replaceTrack(f);case 71:_="sendrecv",!1!==o.recv&&"inactive"!==p.direction&&"sendonly"!==p.direction||(_="sendonly"),p.setDirection?p.setDirection(_):p.direction=_,e.next=117;break;case 76:if(s.myStream||(s.myStream=new MediaStream),"audio"===c||!o.simulcast&&!o.svc?(l=s.pc.addTrack(f,s.myStream),p=s.pc.getTransceivers().find((function(e){return e.sender===l}))):o.simulcast?"firefox"!==t.webRTCAdapter.browserDetails.browser?(t.log("Enabling rid-based simulcasting:",f),O=S(o.simulcastMaxBitrates),p=s.pc.addTransceiver(f,{direction:"sendrecv",streams:[s.myStream],sendEncodings:o.sendEncodings||[{rid:"h",active:!0,scalabilityMode:"L1T2",maxBitrate:O.high},{rid:"m",active:!0,scalabilityMode:"L1T2",maxBitrate:O.medium,scaleResolutionDownBy:2},{rid:"l",active:!0,scalabilityMode:"L1T2",maxBitrate:O.low,scaleResolutionDownBy:4}]})):(t.log("Enabling Simulcasting for Firefox (RID)"),p=s.pc.addTransceiver(f,{direction:"sendrecv",streams:[s.myStream]}),(l=p?p.sender:null)&&((A=l.getParameters())||(A={}),M=S(o.simulcastMaxBitrates),A.encodings=o.sendEncodings||[{rid:"h",active:!0,maxBitrate:M.high},{rid:"m",active:!0,maxBitrate:M.medium,scaleResolutionDownBy:2},{rid:"l",active:!0,maxBitrate:M.low,scaleResolutionDownBy:4}],l.setParameters(A))):(t.log("Enabling SVC ("+o.svc+"):",f),p=s.pc.addTransceiver(f,{direction:"sendrecv",streams:[s.myStream],sendEncodings:[{scalabilityMode:o.svc}]})),l||(l=p?p.sender:null),o.codec)if("firefox"===t.webRTCAdapter.browserDetails.browser)t.warn("setCodecPreferences not supported in Firefox, ignoring codec for track:",o);else if("string"!==typeof o.codec)t.warn("Invalid codec value, ignoring for track:",o);else if(L=c+"/"+o.codec.toLowerCase(),(N=RTCRtpReceiver.getCapabilities(c).codecs.filter((function(e){return e.mimeType.toLowerCase()===L})))&&0!==N.length){if(p)try{p.setCodecPreferences(N)}catch(n){t.warn("Failed enforcing codec for this "+c+" track:",n)}}else t.warn("Codec not supported in this browser for this track, ignoring:",o);if(!o.bitrate){e.next=98;break}if(!o.simulcast&&!o.svc){e.next=85;break}t.warn("Ignoring bitrate for simulcast/SVC track, use sendEncodings for that"),e.next=98;break;case 85:if(!(isNaN(o.bitrate)||o.bitrate<0)){e.next=89;break}t.warn("Ignoring invalid bitrate for track:",o),e.next=98;break;case 89:if(!l){e.next=98;break}if((F=l.getParameters())&&F.encodings&&0!==F.encodings.length){e.next=95;break}t.warn("No encodings in the sender parameters, ignoring bitrate for track:",o),e.next=98;break;case 95:return F.encodings[0].maxBitrate=o.bitrate,e.next=98,l.setParameters(F);case 98:if("video"!==c||!o.framerate){e.next=116;break}if(!o.simulcast&&!o.svc){e.next=103;break}t.warn("Ignoring framerate for simulcast/SVC track, use sendEncodings for that"),e.next=116;break;case 103:if(!(isNaN(o.framerate)||o.framerate<0)){e.next=107;break}t.warn("Ignoring invalid framerate for track:",o),e.next=116;break;case 107:if(!l){e.next=116;break}if((V=l.getParameters())&&V.encodings&&0!==V.encodings.length){e.next=113;break}t.warn("No encodings in the sender parameters, ignoring framerate for track:",o),e.next=116;break;case 113:return V.encodings[0].maxFramerate=o.framerate,e.next=116,l.setParameters(V);case 116:o.transforms&&(l&&o.transforms.sender&&(G=null,RTCRtpSender.prototype.createEncodedStreams?G=l.createEncodedStreams():(RTCRtpSender.prototype.createAudioEncodedStreams||RTCRtpSender.prototype.createEncodedVideoStreams)&&("audio"===c?G=l.createEncodedAudioStreams():"video"===c&&(G=l.createEncodedVideoStreams())),G&&(G.readableStream&&G.writableStream?G.readableStream.pipeThrough(o.transforms.sender).pipeTo(G.writableStream):G.readable&&G.writable&&G.readable.pipeThrough(o.transforms.sender).pipeTo(G.writable))),p&&p.receiver&&o.transforms.receiver&&(U=null,RTCRtpReceiver.prototype.createEncodedStreams?U=p.receiver.createEncodedStreams():(RTCRtpReceiver.prototype.createAudioEncodedStreams||RTCRtpReceiver.prototype.createEncodedVideoStreams)&&("audio"===c?U=p.receiver.createEncodedAudioStreams():"video"===c&&(U=p.receiver.createEncodedVideoStreams())),U&&(U.readableStream&&U.writableStream?U.readableStream.pipeThrough(o.transforms.receiver).pipeTo(U.writableStream):U.readable&&U.writable&&U.readable.pipeThrough(o.transforms.receiver).pipeTo(U.writable))));case 117:f&&!0===o.dontStop&&(f.dontStop=!0),e.next=121;break;case 120:if(o.recv&&(p||(p=s.pc.addTransceiver(c)),p)){if(o.codec)if("firefox"===t.webRTCAdapter.browserDetails.browser)t.warn("setCodecPreferences not supported in Firefox, ignoring codec for track:",o);else if("string"!==typeof o.codec)t.warn("Invalid codec value, ignoring for track:",o);else if(J=c+"/"+o.codec.toLowerCase(),(z=RTCRtpReceiver.getCapabilities(c).codecs.filter((function(e){return e.mimeType.toLowerCase()===J})))&&0!==z.length)try{p.setCodecPreferences(z)}catch(n){t.warn("Failed enforcing codec for this "+c+" track:",n)}else t.warn("Codec not supported in this browser for this track, ignoring:",o);p.receiver&&o.transforms&&o.transforms.receiver&&(W=null,RTCRtpReceiver.prototype.createEncodedStreams?W=p.receiver.createEncodedStreams():(RTCRtpReceiver.prototype.createAudioEncodedStreams||RTCRtpReceiver.prototype.createEncodedVideoStreams)&&("audio"===c?W=p.receiver.createEncodedAudioStreams():"video"===c&&(W=p.receiver.createEncodedVideoStreams())),W&&(W.readableStream&&W.writableStream?W.readableStream.pipeThrough(o.transforms.receiver).pipeTo(W.writableStream):W.readable&&W.writable&&W.readable.pipeThrough(o.transforms.receiver).pipeTo(W.writable)))}case 121:if(f){s.myStream.addTrack(f),f.onended=function(e){t.log("Local track removed:",e);try{i.onlocaltrack(e.target,!1)}catch(Y){t.error("Error calling onlocaltrack following end",Y)}};try{i.onlocaltrack(f,!0)}catch(Y){t.error("Error calling onlocaltrack for track add",Y)}}p&&(B=p.direction,q=null,K=f&&p.sender.track,H=!1!==o.recv&&p.receiver.track,K&&H?q="sendrecv":K&&!H?q="sendonly":!K&&H?q="recvonly":K||H||(q="inactive"),q&&q!==B&&(t.warn("Changing direction of transceiver to "+q+" (was "+B+")",o),p.setDirection?p.setDirection(q):p.direction=q));case 123:case"end":return e.stop()}}),e)})),w.s();case 46:if((k=w.n()).done){e.next=53;break}return e.delegateYield(R(),"t1",48);case 48:if(0!==e.t1){e.next=51;break}return e.abrupt("continue",51);case 51:e.next=46;break;case 53:e.next=58;break;case 55:e.prev=55,e.t2=e.catch(43),w.e(e.t2);case 58:return e.prev=58,w.f(),e.finish(58);case 61:d&&i.consentDialog(!1);case 62:case"end":return e.stop()}}),e,null,[[14,33,36,39],[43,55,58,61]])})))).apply(this,arguments)}function Q(e){var r=T.get(e);if(!r||!r.webrtcStuff)return t.warn("Invalid handle"),null;var n=r.webrtcStuff;if(!n.pc)return t.warn("Invalid PeerConnection"),null;var o,i=[],s=n.pc.getTransceivers(),c=(0,a.A)(s);try{for(c.s();!(o=c.n()).done;){var d=o.value,u=null;d.sender&&d.sender.track&&((u={mid:d.mid}).type=d.sender.track.kind,u.id=d.sender.track.id,u.label=d.sender.track.label),u&&i.push(u)}}catch(p){c.e(p)}finally{c.f()}return i}function X(e){var r=T.get(e);if(!r||!r.webrtcStuff)return t.warn("Invalid handle"),null;var n=r.webrtcStuff;if(!n.pc)return t.warn("Invalid PeerConnection"),null;var o,i=[],s=n.pc.getTransceivers(),c=(0,a.A)(s);try{for(c.s();!(o=c.n()).done;){var d=o.value,u=null;d.receiver&&d.receiver.track&&((u={mid:d.mid}).type=d.receiver.track.kind,u.id=d.receiver.track.id,u.label=d.receiver.track.label),u&&i.push(u)}}catch(p){c.e(p)}finally{c.f()}return i}function Z(e,r,n,o){o="function"==typeof o?o:t.noop;var i=T.get(e);if(!i||!i.webrtcStuff)return t.warn("Invalid handle"),void o(0);var a=n?"remote":"local",s=i.webrtcStuff;if(s.volume[a]||(s.volume[a]={value:0}),s.pc&&s.pc.getStats&&("chrome"===t.webRTCAdapter.browserDetails.browser||"safari"===t.webRTCAdapter.browserDetails.browser)){var c=s.pc;if(r){var d=s.pc.getTransceivers().find((function(e){return e.mid===r&&"audio"===e.receiver.track.kind}));if(!d)return t.warn("No audio transceiver with mid "+r),void o(0);if(n&&!d.receiver)return t.warn("Remote transceiver track unavailable"),void o(0);if(!n&&!d.sender)return t.warn("Local transceiver track unavailable"),void o(0);c=n?d.receiver:d.sender}return c.getStats().then((function(e){e.forEach((function(e){e&&"audio"===e.kind&&(n&&!e.remoteSource||!n&&"media-source"!==e.type||o(e.audioLevel?e.audioLevel:0))}))})),s.volume[a].value}return t.warn("Getting the "+a+" volume unsupported by browser"),void o(0)}function $(e,r,n){var o=T.get(e);if(!o||!o.webrtcStuff)return t.warn("Invalid handle"),!0;var i=o.webrtcStuff;if(!i.pc)return t.warn("Invalid PeerConnection"),!0;if(!i.myStream)return t.warn("Invalid local MediaStream"),!0;if(n){if(!i.myStream.getVideoTracks()||0===i.myStream.getVideoTracks().length)return t.warn("No video track"),!0;if(r){var a=i.pc.getTransceivers().find((function(e){return e.mid===r&&"video"===e.receiver.track.kind}));return a?a.sender&&a.sender.track?!a.sender.track.enabled:(t.warn("No video sender with mid "+r),!0):(t.warn("No video transceiver with mid "+r),!0)}return!i.myStream.getVideoTracks()[0].enabled}if(!i.myStream.getAudioTracks()||0===i.myStream.getAudioTracks().length)return t.warn("No audio track"),!0;if(r){var s=i.pc.getTransceivers().find((function(e){return e.mid===r&&"audio"===e.receiver.track.kind}));return s?s.sender&&s.sender.track?!s.sender.track.enabled:(t.warn("No audio sender with mid "+r),!0):(t.warn("No audio transceiver with mid "+r),!0)}return!i.myStream.getAudioTracks()[0].enabled}function ee(e,r,n,o){var i=T.get(e);if(!i||!i.webrtcStuff)return t.warn("Invalid handle"),!1;var s=i.webrtcStuff;if(!s.pc)return t.warn("Invalid PeerConnection"),!1;if(!s.myStream)return t.warn("Invalid local MediaStream"),!1;if(n){if(!s.myStream.getVideoTracks()||0===s.myStream.getVideoTracks().length)return t.warn("No video track"),!1;if(r){var c=s.pc.getTransceivers().find((function(e){return e.mid===r&&"video"===e.receiver.track.kind}));if(!c)return t.warn("No video transceiver with mid "+r),!1;if(!c.sender||!c.sender.track)return t.warn("No video sender with mid "+r),!1;c.sender.track.enabled=!o}else{var d,u=(0,a.A)(s.myStream.getVideoTracks());try{for(u.s();!(d=u.n()).done;){d.value.enabled=!o}}catch(v){u.e(v)}finally{u.f()}}}else{if(!s.myStream.getAudioTracks()||0===s.myStream.getAudioTracks().length)return t.warn("No audio track"),!1;if(r){var p=s.pc.getTransceivers().find((function(e){return e.mid===r&&"audio"===e.receiver.track.kind}));if(!p)return t.warn("No audio transceiver with mid "+r),!1;if(!p.sender||!p.sender.track)return t.warn("No audio sender with mid "+r),!1;p.sender.track.enabled=!o}else{var l,f=(0,a.A)(s.myStream.getAudioTracks());try{for(f.s();!(l=f.n()).done;){l.value.enabled=!o}}catch(v){f.e(v)}finally{f.f()}}}return!0}function te(e,r){var n=T.get(e);if(!n||!n.webrtcStuff)return t.warn("Invalid handle"),"Invalid handle";var o=n.webrtcStuff;if(!o.pc)return"Invalid PeerConnection";if(o.pc.getStats){var i=o.pc,a=r||"default";if(r){var s=o.pc.getTransceivers().find((function(e){return e.mid===r&&"video"===e.receiver.track.kind}));if(!s)return t.warn("No video transceiver with mid "+r),"No video transceiver with mid "+r;if(!s.receiver)return t.warn("No video receiver with mid "+r),"No video receiver with mid "+r;i=s.receiver}return o.bitrate[a]||(o.bitrate[a]={timer:null,bsnow:null,bsbefore:null,tsnow:null,tsbefore:null,value:"0 kbits/sec"}),o.bitrate[a].timer?o.bitrate[a].value:(t.log("Starting bitrate timer"+(r?" for mid "+r:"")+" (via getStats)"),o.bitrate[a].timer=setInterval((function(){i.getStats().then((function(e){e.forEach((function(e){if(e){var r=!1;if(("video"===e.mediaType||"video"===e.kind||e.id.toLowerCase().indexOf("video")>-1)&&"inbound-rtp"===e.type&&e.id.indexOf("rtcp")<0?r=!0:"ssrc"!=e.type||!e.bytesReceived||"VP8"!==e.googCodecName&&""!==e.googCodecName||(r=!0),r)if(o.bitrate[a].bsnow=e.bytesReceived,o.bitrate[a].tsnow=e.timestamp,null===o.bitrate[a].bsbefore||null===o.bitrate[a].tsbefore)o.bitrate[a].bsbefore=o.bitrate[a].bsnow,o.bitrate[a].tsbefore=o.bitrate[a].tsnow;else{var n=o.bitrate[a].tsnow-o.bitrate[a].tsbefore;"safari"===t.webRTCAdapter.browserDetails.browser&&(n/=1e3);var i=Math.round(8*(o.bitrate[a].bsnow-o.bitrate[a].bsbefore)/n);"safari"===t.webRTCAdapter.browserDetails.browser&&(i=parseInt(i/1e3)),o.bitrate[a].value=i+" kbits/sec",o.bitrate[a].bsbefore=o.bitrate[a].bsnow,o.bitrate[a].tsbefore=o.bitrate[a].tsnow}}}))}))}),1e3),"0 kbits/sec")}return t.warn("Getting the video bitrate unsupported by browser"),"Feature unsupported by browser"}function re(e,r,n){var o=T.get(e);if(o&&o.webrtcStuff){var i=o.webrtcStuff;if(i.pc){var a=i.pc.getTransceivers().find((function(e){return e.mid===r}));if(a)if(a.sender){var s=a.sender.getParameters();s&&s.encodings&&0!==s.encodings.length?s.encodings.length>1?t.warn("Ignoring bitrate for simulcast track, use sendEncodings for that"):isNaN(n)||n<0?t.warn("Invalid bitrate (must be a positive integer)"):(s.encodings[0].maxBitrate=n,a.sender.setParameters(s)):t.warn("No parameters encodings")}else t.warn("No sender for transceiver with mid",r);else t.warn("No transceiver with mid",r)}else t.warn("Invalid PeerConnection")}else t.warn("Invalid handle")}function ne(e){t.error("WebRTC error:",e)}function oe(e,n){t.log("Cleaning WebRTC stuff");var o=T.get(e);if(o){var a=o.webrtcStuff;if(a){if(!0===n){var s={janus:"hangup",transaction:t.randomString(12)};o.token&&(s.token=o.token),y&&(s.apisecret=y),t.debug("Sending hangup request (handle="+e+"):"),t.debug(s),r?(s.session_id=k,s.handle_id=e,i.send(JSON.stringify(s))):t.httpAPICall(p+"/"+k+"/"+e,{verb:"POST",withCredentials:m,body:s})}for(var c in a.volume&&(a.volume.local&&a.volume.local.timer&&clearInterval(a.volume.local.timer),a.volume.remote&&a.volume.remote.timer&&clearInterval(a.volume.remote.timer)),a.bitrate)a.bitrate[c].timer&&clearInterval(a.bitrate[c].timer);a.bitrate={},!a.streamExternal&&a.myStream&&(t.log("Stopping local stream tracks"),t.stopAllTracks(a.myStream)),a.streamExternal=!1,a.myStream=null;try{a.pc.close()}catch(d){}a.pc=null,a.candidates=null,a.mySdp=null,a.remoteSdp=null,a.iceDone=!1,a.dataChannel={},a.dtmfSender=null,a.insertableStreams=!1,a.externalEncryption=!1}o.oncleanup()}}function ie(e){return t.debug("isTrickleEnabled:",e),!1!==e}_(e),this.getServer=function(){return p},this.isConnected=function(){return w},this.reconnect=function(e){(e=e||{}).success="function"==typeof e.success?e.success:t.noop,e.error="function"==typeof e.error?e.error:t.noop,e.reconnect=!0,_(e)},this.getSessionId=function(){return k},this.getInfo=function(e){!function(e){if(e=e||{},e.success="function"==typeof e.success?e.success:t.noop,e.error="function"==typeof e.error?e.error:t.noop,t.log("Getting info on Janus instance"),!w)return t.warn("Is the server down? (connected=false)"),void e.error("Is the server down? (connected=false)");var n=t.randomString(12),o={janus:"info",transaction:n};g&&(o.token=g);y&&(o.apisecret=y);if(r)return x.set(n,(function(r){t.log("Server info:"),t.debug(r),"server_info"!==r.janus&&t.error("Ooops: "+r.error.code+" "+r.error.reason),e.success(r)})),void i.send(JSON.stringify(o));t.httpAPICall(p,{verb:"POST",withCredentials:m,body:o,success:function(r){t.log("Server info:"),t.debug(r),"server_info"!==r.janus&&t.error("Ooops: "+r.error.code+" "+r.error.reason),e.success(r)},error:function(r,n){t.error(r+":",n),""===n?e.error(r+": Is the server down?"):e.error(r+": "+n)}})}(e)},this.destroy=function(n){!function(n){n=n||{},n.success="function"==typeof n.success?n.success:t.noop,n.error="function"==typeof n.error?n.error:t.noop;var o=!0===n.unload,d=!0;"undefined"!==typeof n.notifyDestroyed&&null!==n.notifyDestroyed&&(d=!0===n.notifyDestroyed);var u=!0===n.cleanupHandles;if(t.log("Destroying session "+k+" (unload="+o+")"),!k)return t.warn("No session to destroy"),n.success(),void(d&&e.destroyed());if(u){var l,f=(0,a.A)(T.keys());try{for(f.s();!(l=f.n()).done;){N(l.value,{noRequest:!0})}}catch(S){f.e(S)}finally{f.f()}}if(!w)return t.warn("Is the server down? (connected=false)"),k=null,void n.success();var v={janus:"destroy",transaction:t.randomString(12)};g&&(v.token=g);y&&(v.apisecret=y);if(o)return r?(i.onclose=null,i.close(),i=null):navigator.sendBeacon(p+"/"+k,JSON.stringify(v)),t.log("Destroyed session:"),k=null,w=!1,n.success(),void(d&&e.destroyed());if(r){v.session_id=k;var h=function(){for(var e in s)i.removeEventListener(e,s[e]);i.removeEventListener("message",b),i.removeEventListener("error",C),c&&clearTimeout(c),i.close()},b=function(t){var r=JSON.parse(t.data);r.session_id==v.session_id&&r.transaction==v.transaction&&(h(),n.success(),d&&e.destroyed())},C=function(){h(),n.error("Failed to destroy the server: Is the server down?"),d&&e.destroyed()};return i.addEventListener("message",b),i.addEventListener("error",C),void(1===i.readyState?i.send(JSON.stringify(v)):C())}t.httpAPICall(p+"/"+k,{verb:"POST",withCredentials:m,body:v,success:function(r){t.log("Destroyed session:"),t.debug(r),k=null,w=!1,"success"!==r.janus&&t.error("Ooops: "+r.error.code+" "+r.error.reason),n.success(),d&&e.destroyed()},error:function(r,o){t.error(r+":",o),k=null,w=!1,n.success(),d&&e.destroyed()}})}(n)},this.attach=function(e){!function(e){if(e=e||{},e.success="function"==typeof e.success?e.success:t.noop,e.error="function"==typeof e.error?e.error:t.noop,e.dataChannelOptions=e.dataChannelOptions||{ordered:!0},e.consentDialog="function"==typeof e.consentDialog?e.consentDialog:t.noop,e.connectionState="function"==typeof e.connectionState?e.connectionState:t.noop,e.iceState="function"==typeof e.iceState?e.iceState:t.noop,e.mediaState="function"==typeof e.mediaState?e.mediaState:t.noop,e.webrtcState="function"==typeof e.webrtcState?e.webrtcState:t.noop,e.slowLink="function"==typeof e.slowLink?e.slowLink:t.noop,e.onmessage="function"==typeof e.onmessage?e.onmessage:t.noop,e.onlocaltrack="function"==typeof e.onlocaltrack?e.onlocaltrack:t.noop,e.onremotetrack="function"==typeof e.onremotetrack?e.onremotetrack:t.noop,e.ondata="function"==typeof e.ondata?e.ondata:t.noop,e.ondataopen="function"==typeof e.ondataopen?e.ondataopen:t.noop,e.oncleanup="function"==typeof e.oncleanup?e.oncleanup:t.noop,e.ondetached="function"==typeof e.ondetached?e.ondetached:t.noop,!w)return t.warn("Is the server down? (connected=false)"),void e.error("Is the server down? (connected=false)");var n=e.plugin;if(!n)return t.error("Invalid plugin"),void e.error("Invalid plugin");var o=e.opaqueId,a=e.loopIndex,s=e.token?e.token:g,c=t.randomString(12),d={janus:"attach",plugin:n,opaque_id:o,loop_index:a,transaction:c};s&&(d.token=s);y&&(d.apisecret=y);if(r)return x.set(c,(function(r){if(t.debug(r),"success"!==r.janus)return t.error("Ooops: "+r.error.code+" "+r.error.reason),void e.error("Ooops: "+r.error.code+" "+r.error.reason);var o=r.data.id;t.log("Created handle: "+o);var i={session:R,plugin:n,id:o,token:s,detached:!1,webrtcStuff:{started:!1,myStream:null,streamExternal:!1,mySdp:null,mediaConstraints:null,pc:null,dataChannelOptions:e.dataChannelOptions,dataChannel:{},dtmfSender:null,trickle:!0,iceDone:!1,bitrate:{}},getId:function(){return o},getPlugin:function(){return n},getVolume:function(e,t){return Z(o,e,!0,t)},getRemoteVolume:function(e,t){return Z(o,e,!0,t)},getLocalVolume:function(e,t){return Z(o,e,!1,t)},isAudioMuted:function(e){return $(o,e,!1)},muteAudio:function(e){return ee(o,e,!1,!0)},unmuteAudio:function(e){return ee(o,e,!1,!1)},isVideoMuted:function(e){return $(o,e,!0)},muteVideo:function(e){return ee(o,e,!0,!0)},unmuteVideo:function(e){return ee(o,e,!0,!1)},getBitrate:function(e){return te(o,e)},setMaxBitrate:function(e,t){return re(o,e,t)},send:function(e){O(o,e)},data:function(e){M(o,e)},dtmf:function(e){L(o,e)},consentDialog:e.consentDialog,connectionState:e.connectionState,iceState:e.iceState,mediaState:e.mediaState,webrtcState:e.webrtcState,slowLink:e.slowLink,onmessage:e.onmessage,createOffer:function(e){V(o,!0,e)},createAnswer:function(e){V(o,!1,e)},handleRemoteJsep:function(e){U(o,e)},replaceTracks:function(e){q(o,e)},getLocalTracks:function(){return Q(o)},getRemoteTracks:function(){return X(o)},onlocaltrack:e.onlocaltrack,onremotetrack:e.onremotetrack,ondata:e.ondata,ondataopen:e.ondataopen,oncleanup:e.oncleanup,ondetached:e.ondetached,hangup:function(e){oe(o,!0===e)},detach:function(e){N(o,e)}};T.set(o,i),e.success(i)})),d.session_id=k,void i.send(JSON.stringify(d));t.httpAPICall(p+"/"+k,{verb:"POST",withCredentials:m,body:d,success:function(r){if(t.debug(r),"success"!==r.janus)return t.error("Ooops: "+r.error.code+" "+r.error.reason),void e.error("Ooops: "+r.error.code+" "+r.error.reason);var o=r.data.id;t.log("Created handle: "+o);var i={session:R,plugin:n,id:o,token:s,detached:!1,webrtcStuff:{started:!1,myStream:null,streamExternal:!1,mySdp:null,mediaConstraints:null,pc:null,dataChannelOptions:e.dataChannelOptions,dataChannel:{},dtmfSender:null,trickle:!0,iceDone:!1,bitrate:{}},getId:function(){return o},getPlugin:function(){return n},getVolume:function(e,t){return Z(o,e,!0,t)},getRemoteVolume:function(e,t){return Z(o,e,!0,t)},getLocalVolume:function(e,t){return Z(o,e,!1,t)},isAudioMuted:function(e){return $(o,e,!1)},muteAudio:function(e){return ee(o,e,!1,!0)},unmuteAudio:function(e){return ee(o,e,!1,!1)},isVideoMuted:function(e){return $(o,e,!0)},muteVideo:function(e){return ee(o,e,!0,!0)},unmuteVideo:function(e){return ee(o,e,!0,!1)},getBitrate:function(e){return te(o,e)},setMaxBitrate:function(e,t){return re(o,e,t)},send:function(e){O(o,e)},data:function(e){M(o,e)},dtmf:function(e){L(o,e)},consentDialog:e.consentDialog,connectionState:e.connectionState,iceState:e.iceState,mediaState:e.mediaState,webrtcState:e.webrtcState,slowLink:e.slowLink,onmessage:e.onmessage,createOffer:function(e){V(o,!0,e)},createAnswer:function(e){V(o,!1,e)},handleRemoteJsep:function(e){U(o,e)},replaceTracks:function(e){q(o,e)},getLocalTracks:function(){return Q(o)},getRemoteTracks:function(){return X(o)},onlocaltrack:e.onlocaltrack,onremotetrack:e.onremotetrack,ondata:e.ondata,ondataopen:e.ondataopen,oncleanup:e.oncleanup,ondetached:e.ondetached,hangup:function(e){oe(o,!0===e)},detach:function(e){N(o,e)}};T.set(o,i),e.success(i)},error:function(r,n){t.error(r+":",n),""===n?e.error(r+": Is the server down?"):e.error(r+": "+n)}})}(e)}}return t.useDefaultDependencies=function(r){var n=r&&r.fetch||fetch,o=r&&r.Promise||Promise,i=r&&r.WebSocket||WebSocket;return{newWebSocket:function(e,t){return new i(e,t)},extension:r&&r.extension||e,isArray:function(e){return Array.isArray(e)},webRTCAdapter:r&&r.adapter||adapter,httpAPICall:function(e,r){var i={method:r.verb,headers:{Accept:"application/json, text/plain, */*"},cache:"no-cache"};"POST"===r.verb&&(i.headers["Content-Type"]="application/json"),"undefined"!==typeof r.withCredentials&&(i.credentials=!0===r.withCredentials?"include":r.withCredentials?r.withCredentials:"omit"),r.body&&(i.body=JSON.stringify(r.body));var a=n(e,i).catch((function(e){return o.reject({message:"Probably a network error, is the server down?",error:e})}));if(r.timeout){var s=new o((function(e,t){var n=setTimeout((function(){return clearTimeout(n),t({message:"Request timed out",timeout:r.timeout})}),r.timeout)}));a=o.race([a,s])}return a.then((function(e){return e.ok?typeof r.success===typeof t.noop?e.json().then((function(e){try{r.success(e)}catch(n){t.error("Unhandled httpAPICall success callback error",n)}}),(function(t){return o.reject({message:"Failed to parse response body",error:t,response:e})})):void 0:o.reject({message:"API call failed",response:e})})).catch((function(e){typeof r.error===typeof t.noop&&r.error(e.message||"<< internal error >>",e)})),a}}},t.useOldDependencies=function(r){var n=r&&r.jQuery||jQuery,o=r&&r.WebSocket||WebSocket;return{newWebSocket:function(e,t){return new o(e,t)},isArray:function(e){return n.isArray(e)},extension:r&&r.extension||e,webRTCAdapter:r&&r.adapter||adapter,httpAPICall:function(e,r){var o="undefined"!==typeof r.body?{contentType:"application/json",data:JSON.stringify(r.body)}:{},i="undefined"!==typeof r.withCredentials?{xhrFields:{withCredentials:r.withCredentials}}:{};return n.ajax(n.extend(o,i,{url:e,type:r.verb,cache:!1,dataType:"json",async:r.async,timeout:r.timeout,success:function(e){typeof r.success===typeof t.noop&&r.success(e)},error:function(e,n,o){typeof r.error===typeof t.noop&&r.error(n,o)}}))}}},t.mediaToTracks=function(e){var t=[];if(e){if(!e.keepAudio&&!1!==e.audio&&("undefined"===typeof e.audio||e.audio||e.audioSend||e.audioRecv||e.addAudio||e.replaceAudio||e.removeAudio)){var r={type:"audio"};e.removeAudio?r.remove=!0:(e.addAudio?r.add=!0:e.replaceAudio&&(r.replace=!0),!1!==e.audioSend&&(r.capture=e.audio||!0),!1!==e.audioRecv&&(r.recv=!0)),(r.remove||r.capture||r.recv)&&t.push(r)}if(!e.keepVideo&&!1!==e.video&&("undefined"===typeof e.video||e.video||e.videoSend||e.videoRecv||e.addVideo||e.replaceVideo||e.removeVideo)){var n={type:"video"};e.removeVideo?n.remove=!0:(e.addVideo?n.add=!0:e.replaceVideo&&(n.replace=!0),!1!==e.videoSend&&(n.capture=e.video||!0,["screen","window","desktop"].includes(n.capture)&&(n.type="screen",n.capture={video:{}},e.screenshareFrameRate&&(n.capture.frameRate=e.screenshareFrameRate),e.screenshareHeight&&(n.capture.height=e.screenshareHeight),e.screenshareWidth&&(n.capture.width=e.screenshareWidth))),!1!==e.videoRecv&&(n.recv=!0)),(n.remove||n.capture||n.recv)&&t.push(n)}e.data&&t.push({type:"data"})}else t.push({type:"audio",capture:!0,recv:!0}),t.push({type:"video",capture:!0,recv:!0});return t},t.trackConstraints=function(e){var r={};if(!e||!e.capture)return r;if("audio"===e.type)r.audio=e.capture;else if("video"===e.type)if((e.simulcast||e.svc)&&!0===e.capture&&(e.capture="hires"),!0===e.capture||"object"===typeof e.capture)r.video=e.capture;else{var n=0,o=0;"lowres"===e.capture?(n=320,o=240):"lowres-16:9"===e.capture?(n=320,o=180):"hires"===e.capture||"hires-16:9"===e.capture||"hdres"===e.capture?(n=1280,o=720):"fhdres"===e.capture?(n=1920,o=1080):"4kres"===e.capture?(n=3840,o=2160):"stdres"===e.capture?(n=640,o=480):"stdres-16:9"===e.capture?(n=640,o=360):(t.log("Default video setting is stdres 4:3"),n=640,o=480),r.video={width:{ideal:n},height:{ideal:o}}}else"screen"===e.type&&(r.video=e.capture);return r},t.noop=function(){},t.dataChanDefaultLabel="JanusDataChannel",t.endOfCandidates=null,t.stopAllTracks=function(e){try{var r,n=e.getTracks(),o=(0,a.A)(n);try{for(o.s();!(r=o.n()).done;){var i=r.value;t.log(i),i&&!0!==i.dontStop&&i.stop()}}catch(s){o.e(s)}finally{o.f()}}catch(c){}},t.init=function(e){if((e=e||{}).callback="function"==typeof e.callback?e.callback:t.noop,t.initDone)e.callback();else{if("undefined"==typeof console.log&&(console.log=function(){}),t.trace=t.noop,t.debug=t.noop,t.vdebug=t.noop,t.log=t.noop,t.warn=t.noop,t.error=t.noop,!0===e.debug||"all"===e.debug)t.trace=console.trace.bind(console),t.debug=console.debug.bind(console),t.vdebug=console.debug.bind(console),t.log=console.log.bind(console),t.warn=console.warn.bind(console),t.error=console.error.bind(console);else if(Array.isArray(e.debug)){var r,n=(0,a.A)(e.debug);try{for(n.s();!(r=n.n()).done;){switch(r.value){case"trace":t.trace=console.trace.bind(console);break;case"debug":t.debug=console.debug.bind(console);break;case"vdebug":t.vdebug=console.debug.bind(console);break;case"log":t.log=console.log.bind(console);break;case"warn":t.warn=console.warn.bind(console);break;case"error":t.error=console.error.bind(console)}}}catch(f){n.e(f)}finally{n.f()}}t.log("Initializing library");var o=e.dependencies||t.useDefaultDependencies();t.isArray=o.isArray,t.webRTCAdapter=o.webRTCAdapter,t.httpAPICall=o.httpAPICall,t.newWebSocket=o.newWebSocket,t.extension=o.extension,t.extension.init(),t.listDevices=function(e,r){e="function"==typeof e?e:t.noop,r||(r={audio:!0,video:!0}),t.isGetUserMediaAvailable()?navigator.mediaDevices.getUserMedia(r).then((function(r){navigator.mediaDevices.enumerateDevices().then((function(n){t.debug(n),e(n),t.stopAllTracks(r)}))})).catch((function(r){t.error(r),e([])})):(t.warn("navigator.mediaDevices unavailable"),e([]))},t.attachMediaStream=function(e,r){try{e.srcObject=r}catch(n){try{e.src=URL.createObjectURL(r)}catch(n){t.error("Error attaching stream to element",n)}}},t.reattachMediaStream=function(e,r){try{e.srcObject=r.srcObject}catch(n){try{e.src=r.src}catch(n){t.error("Error reattaching stream to element",n)}}};var s=["iPad","iPhone","iPod"].indexOf(navigator.platform)>=0?"pagehide":"beforeunload",c=window["on"+s];if(window.addEventListener(s,(function(){t.log("Closing window");var e,r=(0,a.A)(t.sessions);try{for(r.s();!(e=r.n()).done;){var n=(0,i.A)(e.value,2),o=n[0],s=n[1];s&&s.destroyOnUnload&&(t.log("Destroying session "+o),s.destroy({unload:!0,notifyDestroyed:!1}))}}catch(f){r.e(f)}finally{r.f()}c&&"function"==typeof c&&c()})),t.safariVp8=!1,t.safariVp9=!1,"safari"===t.webRTCAdapter.browserDetails.browser&&t.webRTCAdapter.browserDetails.version>=605)if(RTCRtpSender&&RTCRtpSender.getCapabilities&&RTCRtpSender.getCapabilities("video")&&RTCRtpSender.getCapabilities("video").codecs&&RTCRtpSender.getCapabilities("video").codecs.length){var d,u=(0,a.A)(RTCRtpSender.getCapabilities("video").codecs);try{for(u.s();!(d=u.n()).done;){var p=d.value;p&&p.mimeType&&"video/vp8"===p.mimeType.toLowerCase()?t.safariVp8=!0:p&&p.mimeType&&"video/vp9"===p.mimeType.toLowerCase()&&(t.safariVp9=!0)}}catch(f){u.e(f)}finally{u.f()}t.safariVp8?t.log("This version of Safari supports VP8"):t.warn("This version of Safari does NOT support VP8: if you're using a Technology Preview, try enabling the 'WebRTC VP8 codec' setting in the 'Experimental Features' Develop menu")}else{var l=new RTCPeerConnection({});l.createOffer({offerToReceiveVideo:!0}).then((function(e){t.safariVp8=-1!==e.sdp.indexOf("VP8"),t.safariVp9=-1!==e.sdp.indexOf("VP9"),t.safariVp8?t.log("This version of Safari supports VP8"):t.warn("This version of Safari does NOT support VP8: if you're using a Technology Preview, try enabling the 'WebRTC VP8 codec' setting in the 'Experimental Features' Develop menu"),l.close(),l=null}))}t.initDone=!0,e.callback()}},t.isWebrtcSupported=function(){return!!window.RTCPeerConnection},t.isGetUserMediaAvailable=function(){return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia},t.randomString=function(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r="",n=0;n<e;n++){var o=Math.floor(62*Math.random());r+=t.charAt(o)}return r},t}))},68824:function(e){var t={generateIdentifier:function(){return Math.random().toString(36).substring(2,12)}};t.localCName=t.generateIdentifier(),t.splitLines=function(e){return e.trim().split("\n").map((function(e){return e.trim()}))},t.splitSections=function(e){return e.split("\nm=").map((function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"}))},t.getDescription=function(e){var r=t.splitSections(e);return r&&r[0]},t.getMediaSections=function(e){var r=t.splitSections(e);return r.shift(),r},t.matchPrefix=function(e,r){return t.splitLines(e).filter((function(e){return 0===e.indexOf(r)}))},t.parseCandidate=function(e){for(var t,r={foundation:(t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" "))[0],component:{1:"rtp",2:"rtcp"}[t[1]]||t[1],protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},n=8;n<t.length;n+=2)switch(t[n]){case"raddr":r.relatedAddress=t[n+1];break;case"rport":r.relatedPort=parseInt(t[n+1],10);break;case"tcptype":r.tcpType=t[n+1];break;case"ufrag":r.ufrag=t[n+1],r.usernameFragment=t[n+1];break;default:void 0===r[t[n]]&&(r[t[n]]=t[n+1])}return r},t.writeCandidate=function(e){var t=[];t.push(e.foundation);var r=e.component;"rtp"===r?t.push(1):"rtcp"===r?t.push(2):t.push(r),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var n=e.type;return t.push("typ"),t.push(n),"host"!==n&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},t.parseIceOptions=function(e){return e.substring(14).split(" ")},t.parseRtpMap=function(e){var t=e.substring(9).split(" "),r={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),r.name=t[0],r.clockRate=parseInt(t[1],10),r.channels=3===t.length?parseInt(t[2],10):1,r.numChannels=r.channels,r},t.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var r=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==r?"/"+r:"")+"\r\n"},t.parseExtmap=function(e){var t=e.substring(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1],attributes:t.slice(2).join(" ")}},t.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+(e.attributes?" "+e.attributes:"")+"\r\n"},t.parseFmtp=function(e){for(var t,r={},n=e.substring(e.indexOf(" ")+1).split(";"),o=0;o<n.length;o++)r[(t=n[o].trim().split("="))[0].trim()]=t[1];return r},t.writeFmtp=function(e){var t="",r=e.payloadType;if(void 0!==e.preferredPayloadType&&(r=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var n=[];Object.keys(e.parameters).forEach((function(t){void 0!==e.parameters[t]?n.push(t+"="+e.parameters[t]):n.push(t)})),t+="a=fmtp:"+r+" "+n.join(";")+"\r\n"}return t},t.parseRtcpFb=function(e){var t=e.substring(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},t.writeRtcpFb=function(e){var t="",r=e.payloadType;return void 0!==e.preferredPayloadType&&(r=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((function(e){t+="a=rtcp-fb:"+r+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},t.parseSsrcMedia=function(e){var t=e.indexOf(" "),r={ssrc:parseInt(e.substring(7,t),10)},n=e.indexOf(":",t);return n>-1?(r.attribute=e.substring(t+1,n),r.value=e.substring(n+1)):r.attribute=e.substring(t+1),r},t.parseSsrcGroup=function(e){var t=e.substring(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((function(e){return parseInt(e,10)}))}},t.getMid=function(e){var r=t.matchPrefix(e,"a=mid:")[0];if(r)return r.substring(6)},t.parseFingerprint=function(e){var t=e.substring(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1].toUpperCase()}},t.getDtlsParameters=function(e,r){return{role:"auto",fingerprints:t.matchPrefix(e+r,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(e,t){var r="a=setup:"+t+"\r\n";return e.fingerprints.forEach((function(e){r+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),r},t.parseCryptoLine=function(e){var t=e.substring(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},t.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"===typeof e.keyParams?t.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},t.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;var t=e.substring(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},t.getCryptoParameters=function(e,r){return t.matchPrefix(e+r,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(e,r){var n=t.matchPrefix(e+r,"a=ice-ufrag:")[0],o=t.matchPrefix(e+r,"a=ice-pwd:")[0];return n&&o?{usernameFragment:n.substring(12),password:o.substring(10)}:null},t.writeIceParameters=function(e){var t="a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n";return e.iceLite&&(t+="a=ice-lite\r\n"),t},t.parseRtpParameters=function(e){var r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},n=t.splitLines(e)[0].split(" ");r.profile=n[2];for(var o=3;o<n.length;o++){var i=n[o],a=t.matchPrefix(e,"a=rtpmap:"+i+" ")[0];if(a){var s=t.parseRtpMap(a),c=t.matchPrefix(e,"a=fmtp:"+i+" ");switch(s.parameters=c.length?t.parseFmtp(c[0]):{},s.rtcpFeedback=t.matchPrefix(e,"a=rtcp-fb:"+i+" ").map(t.parseRtcpFb),r.codecs.push(s),s.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(s.name.toUpperCase())}}}t.matchPrefix(e,"a=extmap:").forEach((function(e){r.headerExtensions.push(t.parseExtmap(e))}));var d=t.matchPrefix(e,"a=rtcp-fb:* ").map(t.parseRtcpFb);return r.codecs.forEach((function(e){d.forEach((function(t){e.rtcpFeedback.find((function(e){return e.type===t.type&&e.parameter===t.parameter}))||e.rtcpFeedback.push(t)}))})),r},t.writeRtpDescription=function(e,r){var n="";n+="m="+e+" ",n+=r.codecs.length>0?"9":"0",n+=" "+(r.profile||"UDP/TLS/RTP/SAVPF")+" ",n+=r.codecs.map((function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType})).join(" ")+"\r\n",n+="c=IN IP4 0.0.0.0\r\n",n+="a=rtcp:9 IN IP4 0.0.0.0\r\n",r.codecs.forEach((function(e){n+=t.writeRtpMap(e),n+=t.writeFmtp(e),n+=t.writeRtcpFb(e)}));var o=0;return r.codecs.forEach((function(e){e.maxptime>o&&(o=e.maxptime)})),o>0&&(n+="a=maxptime:"+o+"\r\n"),r.headerExtensions&&r.headerExtensions.forEach((function(e){n+=t.writeExtmap(e)})),n},t.parseRtpEncodingParameters=function(e){var r,n=[],o=t.parseRtpParameters(e),i=-1!==o.fecMechanisms.indexOf("RED"),a=-1!==o.fecMechanisms.indexOf("ULPFEC"),s=t.matchPrefix(e,"a=ssrc:").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute})),c=s.length>0&&s[0].ssrc,d=t.matchPrefix(e,"a=ssrc-group:FID").map((function(e){return e.substring(17).split(" ").map((function(e){return parseInt(e,10)}))}));d.length>0&&d[0].length>1&&d[0][0]===c&&(r=d[0][1]),o.codecs.forEach((function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var t={ssrc:c,codecPayloadType:parseInt(e.parameters.apt,10)};c&&r&&(t.rtx={ssrc:r}),n.push(t),i&&((t=JSON.parse(JSON.stringify(t))).fec={ssrc:c,mechanism:a?"red+ulpfec":"red"},n.push(t))}})),0===n.length&&c&&n.push({ssrc:c});var u=t.matchPrefix(e,"b=");return u.length&&(u=0===u[0].indexOf("b=TIAS:")?parseInt(u[0].substring(7),10):0===u[0].indexOf("b=AS:")?1e3*parseInt(u[0].substring(5),10)*.95-16e3:void 0,n.forEach((function(e){e.maxBitrate=u}))),n},t.parseRtcpParameters=function(e){var r={},n=t.matchPrefix(e,"a=ssrc:").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute}))[0];n&&(r.cname=n.value,r.ssrc=n.ssrc);var o=t.matchPrefix(e,"a=rtcp-rsize");r.reducedSize=o.length>0,r.compound=0===o.length;var i=t.matchPrefix(e,"a=rtcp-mux");return r.mux=i.length>0,r},t.writeRtcpParameters=function(e){var t="";return e.reducedSize&&(t+="a=rtcp-rsize\r\n"),e.mux&&(t+="a=rtcp-mux\r\n"),void 0!==e.ssrc&&e.cname&&(t+="a=ssrc:"+e.ssrc+" cname:"+e.cname+"\r\n"),t},t.parseMsid=function(e){var r,n=t.matchPrefix(e,"a=msid:");if(1===n.length)return{stream:(r=n[0].substring(7).split(" "))[0],track:r[1]};var o=t.matchPrefix(e,"a=ssrc:").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return"msid"===e.attribute}));return o.length>0?{stream:(r=o[0].value.split(" "))[0],track:r[1]}:void 0},t.parseSctpDescription=function(e){var r,n=t.parseMLine(e),o=t.matchPrefix(e,"a=max-message-size:");o.length>0&&(r=parseInt(o[0].substring(19),10)),isNaN(r)&&(r=65536);var i=t.matchPrefix(e,"a=sctp-port:");if(i.length>0)return{port:parseInt(i[0].substring(12),10),protocol:n.fmt,maxMessageSize:r};var a=t.matchPrefix(e,"a=sctpmap:");if(a.length>0){var s=a[0].substring(10).split(" ");return{port:parseInt(s[0],10),protocol:s[1],maxMessageSize:r}}},t.writeSctpDescription=function(e,t){var r=[];return r="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&r.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),r.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,22)},t.writeSessionBoilerplate=function(e,r,n){var o=void 0!==r?r:2;return"v=0\r\no="+(n||"thisisadapterortc")+" "+(e||t.generateSessionId())+" "+o+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},t.getDirection=function(e,r){for(var n=t.splitLines(e),o=0;o<n.length;o++)switch(n[o]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return n[o].substring(2)}return r?t.getDirection(r):"sendrecv"},t.getKind=function(e){return t.splitLines(e)[0].split(" ")[0].substring(2)},t.isRejected=function(e){return"0"===e.split(" ",2)[1]},t.parseMLine=function(e){var r=t.splitLines(e)[0].substring(2).split(" ");return{kind:r[0],port:parseInt(r[1],10),protocol:r[2],fmt:r.slice(3).join(" ")}},t.parseOLine=function(e){var r=t.matchPrefix(e,"o=")[0].substring(2).split(" ");return{username:r[0],sessionId:r[1],sessionVersion:parseInt(r[2],10),netType:r[3],addressType:r[4],address:r[5]}},t.isValidSDP=function(e){if("string"!==typeof e||0===e.length)return!1;for(var r=t.splitLines(e),n=0;n<r.length;n++)if(r[n].length<2||"="!==r[n].charAt(1))return!1;return!0},e.exports=t},58650:function(e,t,r){var n={};r.r(n),r.d(n,{fixNegotiationNeeded:function(){return I},shimAddTrackRemoveTrack:function(){return x},shimAddTrackRemoveTrackWithNative:function(){return P},shimGetSendersWithDtmf:function(){return T},shimGetUserMedia:function(){return S},shimMediaStream:function(){return w},shimOnTrack:function(){return k},shimPeerConnection:function(){return E},shimSenderReceiverGetStats:function(){return R}});var o={};r.r(o),r.d(o,{shimAddTransceiver:function(){return V},shimCreateAnswer:function(){return J},shimCreateOffer:function(){return U},shimGetDisplayMedia:function(){return O},shimGetParameters:function(){return G},shimGetUserMedia:function(){return _},shimOnTrack:function(){return A},shimPeerConnection:function(){return j},shimRTCDataChannel:function(){return F},shimReceiverGetStats:function(){return L},shimRemoveStream:function(){return N},shimSenderGetStats:function(){return M}});var i={};r.r(i),r.d(i,{shimAudioContext:function(){return X},shimCallbacksAPI:function(){return B},shimConstraints:function(){return K},shimCreateOfferLegacy:function(){return Q},shimGetUserMedia:function(){return q},shimLocalStreamsAPI:function(){return z},shimRTCIceServerUrls:function(){return H},shimRemoteStreamsAPI:function(){return W},shimTrackEventTransceiver:function(){return Y}});var a={};r.r(a),r.d(a,{removeExtmapAllowMixed:function(){return ie},shimAddIceCandidateNullOrEmpty:function(){return ae},shimConnectionState:function(){return oe},shimMaxMessageSize:function(){return re},shimParameterlessSetLocalDescription:function(){return se},shimRTCIceCandidate:function(){return ee},shimRTCIceCandidateRelayProtocol:function(){return te},shimSendThrowTypeError:function(){return ne}});var s=r(64467),c=!0,d=!0;function u(e,t,r){var n=e.match(t);return n&&n.length>=r&&parseInt(n[r],10)}function p(e,t,r){if(e.RTCPeerConnection){var n=e.RTCPeerConnection.prototype,o=n.addEventListener;n.addEventListener=function(e,n){if(e!==t)return o.apply(this,arguments);var i=function(e){var t=r(e);t&&(n.handleEvent?n.handleEvent(t):n(t))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(n,i),o.apply(this,[e,i])};var i=n.removeEventListener;n.removeEventListener=function(e,r){if(e!==t||!this._eventMap||!this._eventMap[t])return i.apply(this,arguments);if(!this._eventMap[t].has(r))return i.apply(this,arguments);var n=this._eventMap[t].get(r);return this._eventMap[t].delete(r),0===this._eventMap[t].size&&delete this._eventMap[t],0===Object.keys(this._eventMap).length&&delete this._eventMap,i.apply(this,[e,n])},Object.defineProperty(n,"on"+t,{get:function(){return this["_on"+t]},set:function(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}}function l(e){return"boolean"!==typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(c=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function f(e){return"boolean"!==typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(d=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function v(){if("object"===typeof window){if(c)return;"undefined"!==typeof console&&"function"===typeof console.log&&console.log.apply(console,arguments)}}function m(e,t){d&&console.warn(e+" is deprecated, please use "+t+" instead.")}function h(e){return"[object Object]"===Object.prototype.toString.call(e)}function g(e){return h(e)?Object.keys(e).reduce((function(t,r){var n=h(e[r]),o=n?g(e[r]):e[r],i=n&&!Object.keys(o).length;return void 0===o||i?t:Object.assign(t,(0,s.A)({},r,o))}),{}):e}function y(e,t,r){t&&!r.has(t.id)&&(r.set(t.id,t),Object.keys(t).forEach((function(n){n.endsWith("Id")?y(e,e.get(t[n]),r):n.endsWith("Ids")&&t[n].forEach((function(t){y(e,e.get(t),r)}))})))}function b(e,t,r){var n=r?"outbound-rtp":"inbound-rtp",o=new Map;if(null===t)return o;var i=[];return e.forEach((function(e){"track"===e.type&&e.trackIdentifier===t.id&&i.push(e)})),i.forEach((function(t){e.forEach((function(r){r.type===n&&r.trackId===t.id&&y(e,r,o)}))})),o}var C=v;function S(e,t){var r=e&&e.navigator;if(r.mediaDevices){var n=function(e){if("object"!==typeof e||e.mandatory||e.optional)return e;var t={};return Object.keys(e).forEach((function(r){if("require"!==r&&"advanced"!==r&&"mediaSource"!==r){var n="object"===typeof e[r]?e[r]:{ideal:e[r]};void 0!==n.exact&&"number"===typeof n.exact&&(n.min=n.max=n.exact);var o=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==n.ideal){t.optional=t.optional||[];var i={};"number"===typeof n.ideal?(i[o("min",r)]=n.ideal,t.optional.push(i),(i={})[o("max",r)]=n.ideal,t.optional.push(i)):(i[o("",r)]=n.ideal,t.optional.push(i))}void 0!==n.exact&&"number"!==typeof n.exact?(t.mandatory=t.mandatory||{},t.mandatory[o("",r)]=n.exact):["min","max"].forEach((function(e){void 0!==n[e]&&(t.mandatory=t.mandatory||{},t.mandatory[o(e,r)]=n[e])}))}})),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},o=function(e,o){if(t.version>=61)return o(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"===typeof e.audio){var i=function(e,t,r){t in e&&!(r in e)&&(e[r]=e[t],delete e[t])};i((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),i(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=n(e.audio)}if(e&&"object"===typeof e.video){var a=e.video.facingMode;a=a&&("object"===typeof a?a:{ideal:a});var s,c=t.version<66;if(a&&("user"===a.exact||"environment"===a.exact||"user"===a.ideal||"environment"===a.ideal)&&(!r.mediaDevices.getSupportedConstraints||!r.mediaDevices.getSupportedConstraints().facingMode||c))if(delete e.video.facingMode,"environment"===a.exact||"environment"===a.ideal?s=["back","rear"]:"user"!==a.exact&&"user"!==a.ideal||(s=["front"]),s)return r.mediaDevices.enumerateDevices().then((function(t){var r=(t=t.filter((function(e){return"videoinput"===e.kind}))).find((function(e){return s.some((function(t){return e.label.toLowerCase().includes(t)}))}));return!r&&t.length&&s.includes("back")&&(r=t[t.length-1]),r&&(e.video.deviceId=a.exact?{exact:r.deviceId}:{ideal:r.deviceId}),e.video=n(e.video),C("chrome: "+JSON.stringify(e)),o(e)}));e.video=n(e.video)}return C("chrome: "+JSON.stringify(e)),o(e)},i=function(e){return t.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}};if(r.getUserMedia=function(e,t,n){o(e,(function(e){r.webkitGetUserMedia(e,t,(function(e){n&&n(i(e))}))}))}.bind(r),r.mediaDevices.getUserMedia){var a=r.mediaDevices.getUserMedia.bind(r.mediaDevices);r.mediaDevices.getUserMedia=function(e){return o(e,(function(e){return a(e).then((function(t){if(e.audio&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length)throw t.getTracks().forEach((function(e){e.stop()})),new DOMException("","NotFoundError");return t}),(function(e){return Promise.reject(i(e))}))}))}}}}function w(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function k(e){if("object"===typeof e&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var r=this;return this._ontrackpoly||(this._ontrackpoly=function(t){t.stream.addEventListener("addtrack",(function(n){var o;o=e.RTCPeerConnection.prototype.getReceivers?r.getReceivers().find((function(e){return e.track&&e.track.id===n.track.id})):{track:n.track};var i=new Event("track");i.track=n.track,i.receiver=o,i.transceiver={receiver:o},i.streams=[t.stream],r.dispatchEvent(i)})),t.stream.getTracks().forEach((function(n){var o;o=e.RTCPeerConnection.prototype.getReceivers?r.getReceivers().find((function(e){return e.track&&e.track.id===n.id})):{track:n};var i=new Event("track");i.track=n,i.receiver=o,i.transceiver={receiver:o},i.streams=[t.stream],r.dispatchEvent(i)}))},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else p(e,"track",(function(e){return e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e}))}function T(e){if("object"===typeof e&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){var t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var r=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){var o=r.apply(this,arguments);return o||(o=t(this,e),this._senders.push(o)),o};var n=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){n.apply(this,arguments);var t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}var o=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var r=this;this._senders=this._senders||[],o.apply(this,[e]),e.getTracks().forEach((function(e){r._senders.push(t(r,e))}))};var i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._senders=this._senders||[],i.apply(this,[e]),e.getTracks().forEach((function(e){var r=t._senders.find((function(t){return t.track===e}));r&&t._senders.splice(t._senders.indexOf(r),1)}))}}else if("object"===typeof e&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){var a=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){var e=this,t=a.apply(this,[]);return t.forEach((function(t){return t._pc=e})),t},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function R(e){if("object"===typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver){if(!("getStats"in e.RTCRtpSender.prototype)){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,r=t.apply(this,[]);return r.forEach((function(t){return t._pc=e})),r});var r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=r.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){var e=this;return this._pc.getStats().then((function(t){return b(t,e.track,!0)}))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){var n=e.RTCPeerConnection.prototype.getReceivers;n&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,t=n.apply(this,[]);return t.forEach((function(t){return t._pc=e})),t}),p(e,"track",(function(e){return e.receiver._pc=e.srcElement,e})),e.RTCRtpReceiver.prototype.getStats=function(){var e=this;return this._pc.getStats().then((function(t){return b(t,e.track,!1)}))}}if("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype){var o=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){var t,r,n,i=arguments[0];return this.getSenders().forEach((function(e){e.track===i&&(t?n=!0:t=e)})),this.getReceivers().forEach((function(e){return e.track===i&&(r?n=!0:r=e),e.track===i})),n||t&&r?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):t?t.getStats():r?r.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return o.apply(this,arguments)}}}}function P(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map((function(t){return e._shimmedLocalStreams[t][0]}))};var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){if(!r)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var n=t.apply(this,arguments);return this._shimmedLocalStreams[r.id]?-1===this._shimmedLocalStreams[r.id].indexOf(n)&&this._shimmedLocalStreams[r.id].push(n):this._shimmedLocalStreams[r.id]=[r,n],n};var r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var t=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach((function(e){if(t.getSenders().find((function(t){return t.track===e})))throw new DOMException("Track already exists.","InvalidAccessError")}));var n=this.getSenders();r.apply(this,arguments);var o=this.getSenders().filter((function(e){return-1===n.indexOf(e)}));this._shimmedLocalStreams[e.id]=[e].concat(o)};var n=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],n.apply(this,arguments)};var o=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach((function(r){var n=t._shimmedLocalStreams[r].indexOf(e);-1!==n&&t._shimmedLocalStreams[r].splice(n,1),1===t._shimmedLocalStreams[r].length&&delete t._shimmedLocalStreams[r]})),o.apply(this,arguments)}}function x(e,t){if(e.RTCPeerConnection){if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return P(e);var r=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this,t=r.apply(this);return this._reverseStreams=this._reverseStreams||{},t.map((function(t){return e._reverseStreams[t.id]}))};var n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){var r=this;if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach((function(e){if(r.getSenders().find((function(t){return t.track===e})))throw new DOMException("Track already exists.","InvalidAccessError")})),!this._reverseStreams[t.id]){var o=new e.MediaStream(t.getTracks());this._streams[t.id]=o,this._reverseStreams[o.id]=t,t=o}n.apply(this,[t])};var o=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},o.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,r){var n=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var o=[].slice.call(arguments,1);if(1!==o.length||!o[0].getTracks().find((function(e){return e===t})))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find((function(e){return e.track===t})))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};var i=this._streams[r.id];if(i)i.addTrack(t),Promise.resolve().then((function(){n.dispatchEvent(new Event("negotiationneeded"))}));else{var a=new e.MediaStream([t]);this._streams[r.id]=a,this._reverseStreams[a.id]=r,this.addStream(a)}return this.getSenders().find((function(e){return e.track===t}))},["createOffer","createAnswer"].forEach((function(t){var r=e.RTCPeerConnection.prototype[t],n=(0,s.A)({},t,(function(){var e=this,t=arguments;return arguments.length&&"function"===typeof arguments[0]?r.apply(this,[function(r){var n=c(e,r);t[0].apply(null,[n])},function(e){t[1]&&t[1].apply(null,e)},arguments[2]]):r.apply(this,arguments).then((function(t){return c(e,t)}))}));e.RTCPeerConnection.prototype[t]=n[t]}));var i=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=function(e,t){var r=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((function(t){var n=e._reverseStreams[t],o=e._streams[n.id];r=r.replace(new RegExp(n.id,"g"),o.id)})),new RTCSessionDescription({type:t.type,sdp:r})}(this,arguments[0]),i.apply(this,arguments)):i.apply(this,arguments)};var a=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get:function(){var e=a.get.apply(this);return""===e.type?e:c(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){var t,r=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(e._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{},Object.keys(this._streams).forEach((function(n){r._streams[n].getTracks().find((function(t){return e.track===t}))&&(t=r._streams[n])})),t&&(1===t.getTracks().length?this.removeStream(this._reverseStreams[t.id]):t.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function c(e,t){var r=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((function(t){var n=e._reverseStreams[t],o=e._streams[n.id];r=r.replace(new RegExp(o.id,"g"),n.id)})),new RTCSessionDescription({type:t.type,sdp:r})}}function E(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var r=e.RTCPeerConnection.prototype[t],n=(0,s.A)({},t,(function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}));e.RTCPeerConnection.prototype[t]=n[t]}))}function I(e,t){p(e,"negotiationneeded",(function(e){var r=e.target;if(!(t.version<72||r.getConfiguration&&"plan-b"===r.getConfiguration().sdpSemantics)||"stable"===r.signalingState)return e}))}var D=r(60436);function _(e,t){var r=e&&e.navigator,n=e&&e.MediaStreamTrack;if(r.getUserMedia=function(e,t,n){m("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),r.mediaDevices.getUserMedia(e).then(t,n)},!(t.version>55&&"autoGainControl"in r.mediaDevices.getSupportedConstraints())){var o=function(e,t,r){t in e&&!(r in e)&&(e[r]=e[t],delete e[t])},i=r.mediaDevices.getUserMedia.bind(r.mediaDevices);if(r.mediaDevices.getUserMedia=function(e){return"object"===typeof e&&"object"===typeof e.audio&&(e=JSON.parse(JSON.stringify(e)),o(e.audio,"autoGainControl","mozAutoGainControl"),o(e.audio,"noiseSuppression","mozNoiseSuppression")),i(e)},n&&n.prototype.getSettings){var a=n.prototype.getSettings;n.prototype.getSettings=function(){var e=a.apply(this,arguments);return o(e,"mozAutoGainControl","autoGainControl"),o(e,"mozNoiseSuppression","noiseSuppression"),e}}if(n&&n.prototype.applyConstraints){var s=n.prototype.applyConstraints;n.prototype.applyConstraints=function(e){return"audio"===this.kind&&"object"===typeof e&&(e=JSON.parse(JSON.stringify(e)),o(e,"autoGainControl","mozAutoGainControl"),o(e,"noiseSuppression","mozNoiseSuppression")),s.apply(this,[e])}}}}function O(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(r){if(!r||!r.video){var n=new DOMException("getDisplayMedia without video constraints is undefined");return n.name="NotFoundError",n.code=8,Promise.reject(n)}return!0===r.video?r.video={mediaSource:t}:r.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(r)})}function A(e){"object"===typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function j(e,t){if("object"===typeof e&&(e.RTCPeerConnection||e.mozRTCPeerConnection)){!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var r=e.RTCPeerConnection.prototype[t],n=(0,s.A)({},t,(function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}));e.RTCPeerConnection.prototype[t]=n[t]}));var r={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},n=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var e=Array.prototype.slice.call(arguments),o=e[0],i=e[1],a=e[2];return n.apply(this,[o||null]).then((function(e){if(t.version<53&&!i)try{e.forEach((function(e){e.type=r[e.type]||e.type}))}catch(n){if("TypeError"!==n.name)throw n;e.forEach((function(t,n){e.set(n,Object.assign({},t,{type:r[t.type]||t.type}))}))}return e})).then(i,a)}}}function M(e){if("object"===typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpSender.prototype))){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,r=t.apply(this,[]);return r.forEach((function(t){return t._pc=e})),r});var r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=r.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}}function L(e){if("object"===typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpReceiver.prototype))){var t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,r=t.apply(this,[]);return r.forEach((function(t){return t._pc=e})),r}),p(e,"track",(function(e){return e.receiver._pc=e.srcElement,e})),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}}function N(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;m("removeStream","removeTrack"),this.getSenders().forEach((function(r){r.track&&e.getTracks().includes(r.track)&&t.removeTrack(r)}))})}function F(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function V(e){if("object"===typeof e&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];var e=arguments[1]&&arguments[1].sendEncodings;void 0===e&&(e=[]);var r=(e=(0,D.A)(e)).length>0;r&&e.forEach((function(e){if("rid"in e){if(!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.")}if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")}));var n=t.apply(this,arguments);if(r){var o=n.sender,i=o.getParameters();(!("encodings"in i)||1===i.encodings.length&&0===Object.keys(i.encodings[0]).length)&&(i.encodings=e,o.sendEncodings=e,this.setParametersPromises.push(o.setParameters(i).then((function(){delete o.sendEncodings})).catch((function(){delete o.sendEncodings}))))}return n})}}function G(e){if("object"===typeof e&&e.RTCRtpSender){var t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){var e=t.apply(this,arguments);return"encodings"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}}function U(e){if("object"===typeof e&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){var e=arguments,r=this;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((function(){return t.apply(r,e)})).finally((function(){r.setParametersPromises=[]})):t.apply(this,arguments)}}}function J(e){if("object"===typeof e&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){var e=arguments,r=this;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((function(){return t.apply(r,e)})).finally((function(){r.setParametersPromises=[]})):t.apply(this,arguments)}}}function z(e){if("object"===typeof e&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){var r=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach((function(n){return t.call(r,n,e)})),e.getVideoTracks().forEach((function(n){return t.call(r,n,e)}))},e.RTCPeerConnection.prototype.addTrack=function(e){for(var r=this,n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];return o&&o.forEach((function(e){r._localStreams?r._localStreams.includes(e)||r._localStreams.push(e):r._localStreams=[e]})),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._localStreams||(this._localStreams=[]);var r=this._localStreams.indexOf(e);if(-1!==r){this._localStreams.splice(r,1);var n=e.getTracks();this.getSenders().forEach((function(e){n.includes(e.track)&&t.removeTrack(e)}))}})}}function W(e){if("object"===typeof e&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(e){var t=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=function(e){e.streams.forEach((function(e){if(t._remoteStreams||(t._remoteStreams=[]),!t._remoteStreams.includes(e)){t._remoteStreams.push(e);var r=new Event("addstream");r.stream=e,t.dispatchEvent(r)}}))})}});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach((function(t){if(e._remoteStreams||(e._remoteStreams=[]),!(e._remoteStreams.indexOf(t)>=0)){e._remoteStreams.push(t);var r=new Event("addstream");r.stream=t,e.dispatchEvent(r)}}))}),t.apply(e,arguments)}}}function B(e){if("object"===typeof e&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype,r=t.createOffer,n=t.createAnswer,o=t.setLocalDescription,i=t.setRemoteDescription,a=t.addIceCandidate;t.createOffer=function(e,t){var n=arguments.length>=2?arguments[2]:arguments[0],o=r.apply(this,[n]);return t?(o.then(e,t),Promise.resolve()):o},t.createAnswer=function(e,t){var r=arguments.length>=2?arguments[2]:arguments[0],o=n.apply(this,[r]);return t?(o.then(e,t),Promise.resolve()):o};var s=function(e,t,r){var n=o.apply(this,[e]);return r?(n.then(t,r),Promise.resolve()):n};t.setLocalDescription=s,s=function(e,t,r){var n=i.apply(this,[e]);return r?(n.then(t,r),Promise.resolve()):n},t.setRemoteDescription=s,s=function(e,t,r){var n=a.apply(this,[e]);return r?(n.then(t,r),Promise.resolve()):n},t.addIceCandidate=s}}function q(e){var t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){var r=t.mediaDevices,n=r.getUserMedia.bind(r);t.mediaDevices.getUserMedia=function(e){return n(K(e))}}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,r,n){t.mediaDevices.getUserMedia(e).then(r,n)}.bind(t))}function K(e){return e&&void 0!==e.video?Object.assign({},e,{video:g(e.video)}):e}function H(e){if(e.RTCPeerConnection){var t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,r){if(e&&e.iceServers){for(var n=[],o=0;o<e.iceServers.length;o++){var i=e.iceServers[o];void 0===i.urls&&i.url?(m("RTCIceServer.url","RTCIceServer.urls"),(i=JSON.parse(JSON.stringify(i))).urls=i.url,delete i.url,n.push(i)):n.push(e.iceServers[o])}e.iceServers=n}return new t(e,r)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return t.generateCertificate}})}}function Y(e){"object"===typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function Q(e){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){"undefined"!==typeof e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);var r=this.getTransceivers().find((function(e){return"audio"===e.receiver.track.kind}));!1===e.offerToReceiveAudio&&r?"sendrecv"===r.direction?r.setDirection?r.setDirection("sendonly"):r.direction="sendonly":"recvonly"===r.direction&&(r.setDirection?r.setDirection("inactive"):r.direction="inactive"):!0!==e.offerToReceiveAudio||r||this.addTransceiver("audio",{direction:"recvonly"}),"undefined"!==typeof e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);var n=this.getTransceivers().find((function(e){return"video"===e.receiver.track.kind}));!1===e.offerToReceiveVideo&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==e.offerToReceiveVideo||n||this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function X(e){"object"!==typeof e||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}var Z=r(68824),$=r.n(Z);function ee(e){if(!(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)){var t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"===typeof e&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substring(2)),e.candidate&&e.candidate.length){var r=new t(e),n=$().parseCandidate(e.candidate);for(var o in n)o in r||Object.defineProperty(r,o,{value:n[o]});return r.toJSON=function(){return{candidate:r.candidate,sdpMid:r.sdpMid,sdpMLineIndex:r.sdpMLineIndex,usernameFragment:r.usernameFragment}},r}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,p(e,"icecandidate",(function(t){return t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t}))}}function te(e){!e.RTCIceCandidate||e.RTCIceCandidate&&"relayProtocol"in e.RTCIceCandidate.prototype||p(e,"icecandidate",(function(e){if(e.candidate){var t=$().parseCandidate(e.candidate.candidate);"relay"===t.type&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[t.priority>>24])}return e}))}function re(e,t){if(e.RTCPeerConnection){"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get:function(){return"undefined"===typeof this._sctp?null:this._sctp}});var r=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){(this._sctp=null,"chrome"===t.browser&&t.version>=76)&&("plan-b"===this.getConfiguration().sdpSemantics&&Object.defineProperty(this,"sctp",{get:function(){return"undefined"===typeof this._sctp?null:this._sctp},enumerable:!0,configurable:!0}));if(function(e){if(!e||!e.sdp)return!1;var t=$().splitSections(e.sdp);return t.shift(),t.some((function(e){var t=$().parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")}))}(arguments[0])){var e,n=function(e){var t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;var r=parseInt(t[1],10);return r!==r?-1:r}(arguments[0]),o=function(e){var r=65536;return"firefox"===t.browser&&(r=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),r}(n),i=function(e,r){var n=65536;"firefox"===t.browser&&57===t.version&&(n=65535);var o=$().matchPrefix(e.sdp,"a=max-message-size:");return o.length>0?n=parseInt(o[0].substring(19),10):"firefox"===t.browser&&-1!==r&&(n=2147483637),n}(arguments[0],n);e=0===o&&0===i?Number.POSITIVE_INFINITY:0===o||0===i?Math.max(o,i):Math.min(o,i);var a={};Object.defineProperty(a,"maxMessageSize",{get:function(){return e}}),this._sctp=a}return r.apply(this,arguments)}}}function ne(e){if(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype){var t=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){var e=t.apply(this,arguments);return r(e,this),e},p(e,"datachannel",(function(e){return r(e.channel,e.target),e}))}function r(e,t){var r=e.send;e.send=function(){var n=arguments[0],o=n.length||n.size||n.byteLength;if("open"===e.readyState&&t.sctp&&o>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return r.apply(e,arguments)}}}function oe(e){if(e.RTCPeerConnection&&!("connectionState"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get:function(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get:function(){return this._onconnectionstatechange||null},set:function(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach((function(e){var r=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=function(e){var t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;var r=new Event("connectionstatechange",e);t.dispatchEvent(r)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}}))}}function ie(e,t){if(e.RTCPeerConnection&&!("chrome"===t.browser&&t.version>=71)&&!("safari"===t.browser&&t.version>=605)){var r=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(t){if(t&&t.sdp&&-1!==t.sdp.indexOf("\na=extmap-allow-mixed")){var n=t.sdp.split("\n").filter((function(e){return"a=extmap-allow-mixed"!==e.trim()})).join("\n");e.RTCSessionDescription&&t instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:t.type,sdp:n}):t.sdp=n}return r.apply(this,arguments)}}}function ae(e,t){if(e.RTCPeerConnection&&e.RTCPeerConnection.prototype){var r=e.RTCPeerConnection.prototype.addIceCandidate;r&&0!==r.length&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===t.browser&&t.version<78||"firefox"===t.browser&&t.version<68||"safari"===t.browser)&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():r.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}}function se(e,t){if(e.RTCPeerConnection&&e.RTCPeerConnection.prototype){var r=e.RTCPeerConnection.prototype.setLocalDescription;r&&0!==r.length&&(e.RTCPeerConnection.prototype.setLocalDescription=function(){var e=this,t=arguments[0]||{};if("object"!==typeof t||t.type&&t.sdp)return r.apply(this,arguments);if(!(t={type:t.type,sdp:t.sdp}).type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":t.type="offer";break;default:t.type="answer"}return t.sdp||"offer"!==t.type&&"answer"!==t.type?r.apply(this,[t]):("offer"===t.type?this.createOffer:this.createAnswer).apply(this).then((function(t){return r.apply(e,[t])}))})}}!function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).window,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0},r=v,s=function(e){var t={browser:null,version:null};if("undefined"===typeof e||!e.navigator||!e.navigator.userAgent)return t.browser="Not a browser.",t;var r=e.navigator;if(r.userAgentData&&r.userAgentData.brands){var n=r.userAgentData.brands.find((function(e){return"Chromium"===e.brand}));if(n)return{browser:"chrome",version:parseInt(n.version,10)}}if(r.mozGetUserMedia)t.browser="firefox",t.version=u(r.userAgent,/Firefox\/(\d+)\./,1);else if(r.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection)t.browser="chrome",t.version=u(r.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else{if(!e.RTCPeerConnection||!r.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=u(r.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return t}(e),c={browserDetails:s,commonShim:a,extractVersion:u,disableLog:l,disableWarnings:f,sdp:Z};switch(s.browser){case"chrome":if(!n||!E||!t.shimChrome)return r("Chrome shim is not included in this adapter release."),c;if(null===s.version)return r("Chrome shim can not determine version, not shimming."),c;r("adapter.js shimming chrome."),c.browserShim=n,ae(e,s),se(e),S(e,s),w(e),E(e,s),k(e),x(e,s),T(e),R(e),I(e,s),ee(e),te(e),oe(e),re(e,s),ne(e),ie(e,s);break;case"firefox":if(!o||!j||!t.shimFirefox)return r("Firefox shim is not included in this adapter release."),c;r("adapter.js shimming firefox."),c.browserShim=o,ae(e,s),se(e),_(e,s),j(e,s),A(e),N(e),M(e),L(e),F(e),V(e),G(e),U(e),J(e),ee(e),oe(e),re(e,s),ne(e);break;case"safari":if(!i||!t.shimSafari)return r("Safari shim is not included in this adapter release."),c;r("adapter.js shimming safari."),c.browserShim=i,ae(e,s),se(e),H(e),Q(e),B(e),z(e),W(e),Y(e),q(e),X(e),ee(e),te(e),re(e,s),ne(e),ie(e,s);break;default:r("Unsupported browser!")}}({window:"undefined"===typeof window?void 0:window})},10467:function(e,t,r){function n(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function o(e){return function(){var t=this,r=arguments;return new Promise((function(o,i){var a=e.apply(t,r);function s(e){n(a,o,i,s,c,"next",e)}function c(e){n(a,o,i,s,c,"throw",e)}s(void 0)}))}}r.d(t,{A:function(){return o}})},90675:function(e,t,r){r.d(t,{A:function(){return o}});var n=r(82284);function o(){o=function(){return t};var e,t={},r=Object.prototype,i=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},s="function"==typeof Symbol?Symbol:{},c=s.iterator||"@@iterator",d=s.asyncIterator||"@@asyncIterator",u=s.toStringTag||"@@toStringTag";function p(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{p({},"")}catch(e){p=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var o=t&&t.prototype instanceof b?t:b,i=Object.create(o.prototype),s=new O(n||[]);return a(i,"_invoke",{value:E(e,r,s)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var v="suspendedStart",m="suspendedYield",h="executing",g="completed",y={};function b(){}function C(){}function S(){}var w={};p(w,c,(function(){return this}));var k=Object.getPrototypeOf,T=k&&k(k(A([])));T&&T!==r&&i.call(T,c)&&(w=T);var R=S.prototype=b.prototype=Object.create(w);function P(e){["next","throw","return"].forEach((function(t){p(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,a,s,c){var d=f(e[o],e,a);if("throw"!==d.type){var u=d.arg,p=u.value;return p&&"object"==(0,n.A)(p)&&i.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,s,c)}),(function(e){r("throw",e,s,c)})):t.resolve(p).then((function(e){u.value=e,s(u)}),(function(e){return r("throw",e,s,c)}))}c(d.arg)}var o;a(this,"_invoke",{value:function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}})}function E(t,r,n){var o=v;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===g){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=I(s,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===v)throw o=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var d=f(t,r,n);if("normal"===d.type){if(o=n.done?g:m,d.arg===y)continue;return{value:d.arg,done:n.done}}"throw"===d.type&&(o=g,n.method="throw",n.arg=d.arg)}}}function I(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,I(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=f(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function D(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(D,this),this.reset(!0)}function A(t){if(t||""===t){var r=t[c];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(i.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError((0,n.A)(t)+" is not iterable")}return C.prototype=S,a(R,"constructor",{value:S,configurable:!0}),a(S,"constructor",{value:C,configurable:!0}),C.displayName=p(S,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===C||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,S):(e.__proto__=S,p(e,u,"GeneratorFunction")),e.prototype=Object.create(R),e},t.awrap=function(e){return{__await:e}},P(x.prototype),p(x.prototype,d,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},P(R),p(R,u,"Generator"),p(R,c,(function(){return this})),p(R,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=A,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return s.type="throw",s.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=i.call(a,"catchLoc"),d=i.call(a,"finallyLoc");if(c&&d){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!d)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),_(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:A(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}},13441:function(e,t,r){r.d(t,{k5:function(){return f}});var n=r(65043),o={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},i=n.createContext&&n.createContext(o),a=["attr","size","title"];function s(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c.apply(this,arguments)}function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e){return e&&e.map((function(e,t){return n.createElement(e.tag,u({key:t},e.attr),l(e.child))}))}function f(e){return function(t){return n.createElement(v,c({attr:u({},e.attr)},t),l(e.child))}}function v(e){var t=function(t){var r,o=e.attr,i=e.size,d=e.title,p=s(e,a),l=i||t.size||"1em";return t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className),n.createElement("svg",c({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,o,p,{className:r,style:u(u({color:e.color||t.color},t.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),d&&n.createElement("title",null,d),e.children)};return void 0!==i?n.createElement(i.Consumer,null,(function(e){return t(e)})):t(o)}}}]);
//# sourceMappingURL=579.8f9620c6.chunk.js.map