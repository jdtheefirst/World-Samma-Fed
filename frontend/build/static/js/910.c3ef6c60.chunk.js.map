{"version":3,"file":"static/js/910.c3ef6c60.chunk.js","mappings":"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","sources":["../node_modules/bluebird/js/browser/bluebird.js","../node_modules/es5-ext/global.js","../node_modules/eventemitter2/lib/eventemitter2.js","../node_modules/janus-gateway-js/node_modules/webrtc-adapter/src/js/adapter_core.js","../node_modules/janus-gateway-js/node_modules/webrtc-adapter/src/js/chrome/chrome_shim.js","../node_modules/janus-gateway-js/node_modules/webrtc-adapter/src/js/chrome/getusermedia.js","../node_modules/janus-gateway-js/node_modules/webrtc-adapter/src/js/edge/edge_sdp.js","../node_modules/janus-gateway-js/node_modules/webrtc-adapter/src/js/edge/edge_shim.js","../node_modules/janus-gateway-js/node_modules/webrtc-adapter/src/js/firefox/firefox_shim.js","../node_modules/janus-gateway-js/node_modules/webrtc-adapter/src/js/firefox/getusermedia.js","../node_modules/janus-gateway-js/node_modules/webrtc-adapter/src/js/safari/safari_shim.js","../node_modules/janus-gateway-js/node_modules/webrtc-adapter/src/js/utils.js","../node_modules/janus-gateway-js/src/client.js","../node_modules/janus-gateway-js/src/connection.js","../node_modules/janus-gateway-js/src/error.js","../node_modules/janus-gateway-js/src/event-emitter.js","../node_modules/janus-gateway-js/src/helpers.js","../node_modules/janus-gateway-js/src/index.js","../node_modules/janus-gateway-js/src/janus-message.js","../node_modules/janus-gateway-js/src/janus-plugin-message.js","../node_modules/janus-gateway-js/src/plugin.js","../node_modules/janus-gateway-js/src/session.js","../node_modules/janus-gateway-js/src/timer.js","../node_modules/janus-gateway-js/src/traits/t-transaction-gateway.js","../node_modules/janus-gateway-js/src/transaction.js","../node_modules/janus-gateway-js/src/transactions.js","../node_modules/janus-gateway-js/src/webrtc/media-audio-plugin.js","../node_modules/janus-gateway-js/src/webrtc/media-devices-shim.js","../node_modules/janus-gateway-js/src/webrtc/media-entity-plugin.js","../node_modules/janus-gateway-js/src/webrtc/media-plugin.js","../node_modules/janus-gateway-js/src/webrtc/media-stream-plugin.js","../node_modules/janus-gateway-js/src/webrtc/plugin/audiobridge-plugin.js","../node_modules/janus-gateway-js/src/webrtc/plugin/audioroom-plugin.js","../node_modules/janus-gateway-js/src/webrtc/plugin/rtpbroadcast-plugin.js","../node_modules/janus-gateway-js/src/webrtc/plugin/streaming-plugin.js","../node_modules/janus-gateway-js/src/websocket-connection.js","../node_modules/sdp/sdp.js","../node_modules/webrtc-adapter/src/js/utils.js","../node_modules/webrtc-adapter/src/js/chrome/getusermedia.js","../node_modules/webrtc-adapter/src/js/chrome/chrome_shim.js","../node_modules/webrtc-adapter/src/js/firefox/getusermedia.js","../node_modules/webrtc-adapter/src/js/firefox/getdisplaymedia.js","../node_modules/webrtc-adapter/src/js/firefox/firefox_shim.js","../node_modules/webrtc-adapter/src/js/safari/safari_shim.js","../node_modules/webrtc-adapter/src/js/common_shim.js","../node_modules/webrtc-adapter/src/js/adapter_factory.js","../node_modules/webrtc-adapter/src/js/adapter_core.js","../node_modules/webrtcsupport/index-browser.js","../node_modules/websocket/lib/browser.js","../node_modules/websocket/lib/version.js","../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","../node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js","../node_modules/react-icons/lib/iconsManifest.mjs","../node_modules/react-icons/lib/iconContext.mjs","../node_modules/react-icons/lib/iconBase.mjs"],"sourcesContent":["/* @preserve\n * The MIT License (MIT)\n * \n * Copyright (c) 2013-2018 Petka Antonov\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n * \n */\n/**\n * bluebird build version 3.7.2\n * Features enabled: core, race, call_get, generators, map, nodeify, promisify, props, reduce, settle, some, using, timers, filter, any, each\n*/\n!function(e){if(\"object\"==typeof exports&&\"undefined\"!=typeof module)module.exports=e();else if(\"function\"==typeof define&&define.amd)define([],e);else{var f;\"undefined\"!=typeof window?f=window:\"undefined\"!=typeof global?f=global:\"undefined\"!=typeof self&&(f=self),f.Promise=e()}}(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof _dereq_==\"function\"&&_dereq_;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof _dereq_==\"function\"&&_dereq_;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise) {\nvar SomePromiseArray = Promise._SomePromiseArray;\nfunction any(promises) {\n    var ret = new SomePromiseArray(promises);\n    var promise = ret.promise();\n    ret.setHowMany(1);\n    ret.setUnwrap();\n    ret.init();\n    return promise;\n}\n\nPromise.any = function (promises) {\n    return any(promises);\n};\n\nPromise.prototype.any = function () {\n    return any(this);\n};\n\n};\n\n},{}],2:[function(_dereq_,module,exports){\n\"use strict\";\nvar firstLineError;\ntry {throw new Error(); } catch (e) {firstLineError = e;}\nvar schedule = _dereq_(\"./schedule\");\nvar Queue = _dereq_(\"./queue\");\n\nfunction Async() {\n    this._customScheduler = false;\n    this._isTickUsed = false;\n    this._lateQueue = new Queue(16);\n    this._normalQueue = new Queue(16);\n    this._haveDrainedQueues = false;\n    var self = this;\n    this.drainQueues = function () {\n        self._drainQueues();\n    };\n    this._schedule = schedule;\n}\n\nAsync.prototype.setScheduler = function(fn) {\n    var prev = this._schedule;\n    this._schedule = fn;\n    this._customScheduler = true;\n    return prev;\n};\n\nAsync.prototype.hasCustomScheduler = function() {\n    return this._customScheduler;\n};\n\nAsync.prototype.haveItemsQueued = function () {\n    return this._isTickUsed || this._haveDrainedQueues;\n};\n\n\nAsync.prototype.fatalError = function(e, isNode) {\n    if (isNode) {\n        process.stderr.write(\"Fatal \" + (e instanceof Error ? e.stack : e) +\n            \"\\n\");\n        process.exit(2);\n    } else {\n        this.throwLater(e);\n    }\n};\n\nAsync.prototype.throwLater = function(fn, arg) {\n    if (arguments.length === 1) {\n        arg = fn;\n        fn = function () { throw arg; };\n    }\n    if (typeof setTimeout !== \"undefined\") {\n        setTimeout(function() {\n            fn(arg);\n        }, 0);\n    } else try {\n        this._schedule(function() {\n            fn(arg);\n        });\n    } catch (e) {\n        throw new Error(\"No async scheduler available\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n};\n\nfunction AsyncInvokeLater(fn, receiver, arg) {\n    this._lateQueue.push(fn, receiver, arg);\n    this._queueTick();\n}\n\nfunction AsyncInvoke(fn, receiver, arg) {\n    this._normalQueue.push(fn, receiver, arg);\n    this._queueTick();\n}\n\nfunction AsyncSettlePromises(promise) {\n    this._normalQueue._pushOne(promise);\n    this._queueTick();\n}\n\nAsync.prototype.invokeLater = AsyncInvokeLater;\nAsync.prototype.invoke = AsyncInvoke;\nAsync.prototype.settlePromises = AsyncSettlePromises;\n\n\nfunction _drainQueue(queue) {\n    while (queue.length() > 0) {\n        _drainQueueStep(queue);\n    }\n}\n\nfunction _drainQueueStep(queue) {\n    var fn = queue.shift();\n    if (typeof fn !== \"function\") {\n        fn._settlePromises();\n    } else {\n        var receiver = queue.shift();\n        var arg = queue.shift();\n        fn.call(receiver, arg);\n    }\n}\n\nAsync.prototype._drainQueues = function () {\n    _drainQueue(this._normalQueue);\n    this._reset();\n    this._haveDrainedQueues = true;\n    _drainQueue(this._lateQueue);\n};\n\nAsync.prototype._queueTick = function () {\n    if (!this._isTickUsed) {\n        this._isTickUsed = true;\n        this._schedule(this.drainQueues);\n    }\n};\n\nAsync.prototype._reset = function () {\n    this._isTickUsed = false;\n};\n\nmodule.exports = Async;\nmodule.exports.firstLineError = firstLineError;\n\n},{\"./queue\":26,\"./schedule\":29}],3:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL, tryConvertToPromise, debug) {\nvar calledBind = false;\nvar rejectThis = function(_, e) {\n    this._reject(e);\n};\n\nvar targetRejected = function(e, context) {\n    context.promiseRejectionQueued = true;\n    context.bindingPromise._then(rejectThis, rejectThis, null, this, e);\n};\n\nvar bindingResolved = function(thisArg, context) {\n    if (((this._bitField & 50397184) === 0)) {\n        this._resolveCallback(context.target);\n    }\n};\n\nvar bindingRejected = function(e, context) {\n    if (!context.promiseRejectionQueued) this._reject(e);\n};\n\nPromise.prototype.bind = function (thisArg) {\n    if (!calledBind) {\n        calledBind = true;\n        Promise.prototype._propagateFrom = debug.propagateFromFunction();\n        Promise.prototype._boundValue = debug.boundValueFunction();\n    }\n    var maybePromise = tryConvertToPromise(thisArg);\n    var ret = new Promise(INTERNAL);\n    ret._propagateFrom(this, 1);\n    var target = this._target();\n    ret._setBoundTo(maybePromise);\n    if (maybePromise instanceof Promise) {\n        var context = {\n            promiseRejectionQueued: false,\n            promise: ret,\n            target: target,\n            bindingPromise: maybePromise\n        };\n        target._then(INTERNAL, targetRejected, undefined, ret, context);\n        maybePromise._then(\n            bindingResolved, bindingRejected, undefined, ret, context);\n        ret._setOnCancel(maybePromise);\n    } else {\n        ret._resolveCallback(target);\n    }\n    return ret;\n};\n\nPromise.prototype._setBoundTo = function (obj) {\n    if (obj !== undefined) {\n        this._bitField = this._bitField | 2097152;\n        this._boundTo = obj;\n    } else {\n        this._bitField = this._bitField & (~2097152);\n    }\n};\n\nPromise.prototype._isBound = function () {\n    return (this._bitField & 2097152) === 2097152;\n};\n\nPromise.bind = function (thisArg, value) {\n    return Promise.resolve(value).bind(thisArg);\n};\n};\n\n},{}],4:[function(_dereq_,module,exports){\n\"use strict\";\nvar old;\nif (typeof Promise !== \"undefined\") old = Promise;\nfunction noConflict() {\n    try { if (Promise === bluebird) Promise = old; }\n    catch (e) {}\n    return bluebird;\n}\nvar bluebird = _dereq_(\"./promise\")();\nbluebird.noConflict = noConflict;\nmodule.exports = bluebird;\n\n},{\"./promise\":22}],5:[function(_dereq_,module,exports){\n\"use strict\";\nvar cr = Object.create;\nif (cr) {\n    var callerCache = cr(null);\n    var getterCache = cr(null);\n    callerCache[\" size\"] = getterCache[\" size\"] = 0;\n}\n\nmodule.exports = function(Promise) {\nvar util = _dereq_(\"./util\");\nvar canEvaluate = util.canEvaluate;\nvar isIdentifier = util.isIdentifier;\n\nvar getMethodCaller;\nvar getGetter;\nif (!true) {\nvar makeMethodCaller = function (methodName) {\n    return new Function(\"ensureMethod\", \"                                    \\n\\\n        return function(obj) {                                               \\n\\\n            'use strict'                                                     \\n\\\n            var len = this.length;                                           \\n\\\n            ensureMethod(obj, 'methodName');                                 \\n\\\n            switch(len) {                                                    \\n\\\n                case 1: return obj.methodName(this[0]);                      \\n\\\n                case 2: return obj.methodName(this[0], this[1]);             \\n\\\n                case 3: return obj.methodName(this[0], this[1], this[2]);    \\n\\\n                case 0: return obj.methodName();                             \\n\\\n                default:                                                     \\n\\\n                    return obj.methodName.apply(obj, this);                  \\n\\\n            }                                                                \\n\\\n        };                                                                   \\n\\\n        \".replace(/methodName/g, methodName))(ensureMethod);\n};\n\nvar makeGetter = function (propertyName) {\n    return new Function(\"obj\", \"                                             \\n\\\n        'use strict';                                                        \\n\\\n        return obj.propertyName;                                             \\n\\\n        \".replace(\"propertyName\", propertyName));\n};\n\nvar getCompiled = function(name, compiler, cache) {\n    var ret = cache[name];\n    if (typeof ret !== \"function\") {\n        if (!isIdentifier(name)) {\n            return null;\n        }\n        ret = compiler(name);\n        cache[name] = ret;\n        cache[\" size\"]++;\n        if (cache[\" size\"] > 512) {\n            var keys = Object.keys(cache);\n            for (var i = 0; i < 256; ++i) delete cache[keys[i]];\n            cache[\" size\"] = keys.length - 256;\n        }\n    }\n    return ret;\n};\n\ngetMethodCaller = function(name) {\n    return getCompiled(name, makeMethodCaller, callerCache);\n};\n\ngetGetter = function(name) {\n    return getCompiled(name, makeGetter, getterCache);\n};\n}\n\nfunction ensureMethod(obj, methodName) {\n    var fn;\n    if (obj != null) fn = obj[methodName];\n    if (typeof fn !== \"function\") {\n        var message = \"Object \" + util.classString(obj) + \" has no method '\" +\n            util.toString(methodName) + \"'\";\n        throw new Promise.TypeError(message);\n    }\n    return fn;\n}\n\nfunction caller(obj) {\n    var methodName = this.pop();\n    var fn = ensureMethod(obj, methodName);\n    return fn.apply(obj, this);\n}\nPromise.prototype.call = function (methodName) {\n    var args = [].slice.call(arguments, 1);;\n    if (!true) {\n        if (canEvaluate) {\n            var maybeCaller = getMethodCaller(methodName);\n            if (maybeCaller !== null) {\n                return this._then(\n                    maybeCaller, undefined, undefined, args, undefined);\n            }\n        }\n    }\n    args.push(methodName);\n    return this._then(caller, undefined, undefined, args, undefined);\n};\n\nfunction namedGetter(obj) {\n    return obj[this];\n}\nfunction indexedGetter(obj) {\n    var index = +this;\n    if (index < 0) index = Math.max(0, index + obj.length);\n    return obj[index];\n}\nPromise.prototype.get = function (propertyName) {\n    var isIndex = (typeof propertyName === \"number\");\n    var getter;\n    if (!isIndex) {\n        if (canEvaluate) {\n            var maybeGetter = getGetter(propertyName);\n            getter = maybeGetter !== null ? maybeGetter : namedGetter;\n        } else {\n            getter = namedGetter;\n        }\n    } else {\n        getter = indexedGetter;\n    }\n    return this._then(getter, undefined, undefined, propertyName, undefined);\n};\n};\n\n},{\"./util\":36}],6:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, PromiseArray, apiRejection, debug) {\nvar util = _dereq_(\"./util\");\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\nvar async = Promise._async;\n\nPromise.prototype[\"break\"] = Promise.prototype.cancel = function() {\n    if (!debug.cancellation()) return this._warn(\"cancellation is disabled\");\n\n    var promise = this;\n    var child = promise;\n    while (promise._isCancellable()) {\n        if (!promise._cancelBy(child)) {\n            if (child._isFollowing()) {\n                child._followee().cancel();\n            } else {\n                child._cancelBranched();\n            }\n            break;\n        }\n\n        var parent = promise._cancellationParent;\n        if (parent == null || !parent._isCancellable()) {\n            if (promise._isFollowing()) {\n                promise._followee().cancel();\n            } else {\n                promise._cancelBranched();\n            }\n            break;\n        } else {\n            if (promise._isFollowing()) promise._followee().cancel();\n            promise._setWillBeCancelled();\n            child = promise;\n            promise = parent;\n        }\n    }\n};\n\nPromise.prototype._branchHasCancelled = function() {\n    this._branchesRemainingToCancel--;\n};\n\nPromise.prototype._enoughBranchesHaveCancelled = function() {\n    return this._branchesRemainingToCancel === undefined ||\n           this._branchesRemainingToCancel <= 0;\n};\n\nPromise.prototype._cancelBy = function(canceller) {\n    if (canceller === this) {\n        this._branchesRemainingToCancel = 0;\n        this._invokeOnCancel();\n        return true;\n    } else {\n        this._branchHasCancelled();\n        if (this._enoughBranchesHaveCancelled()) {\n            this._invokeOnCancel();\n            return true;\n        }\n    }\n    return false;\n};\n\nPromise.prototype._cancelBranched = function() {\n    if (this._enoughBranchesHaveCancelled()) {\n        this._cancel();\n    }\n};\n\nPromise.prototype._cancel = function() {\n    if (!this._isCancellable()) return;\n    this._setCancelled();\n    async.invoke(this._cancelPromises, this, undefined);\n};\n\nPromise.prototype._cancelPromises = function() {\n    if (this._length() > 0) this._settlePromises();\n};\n\nPromise.prototype._unsetOnCancel = function() {\n    this._onCancelField = undefined;\n};\n\nPromise.prototype._isCancellable = function() {\n    return this.isPending() && !this._isCancelled();\n};\n\nPromise.prototype.isCancellable = function() {\n    return this.isPending() && !this.isCancelled();\n};\n\nPromise.prototype._doInvokeOnCancel = function(onCancelCallback, internalOnly) {\n    if (util.isArray(onCancelCallback)) {\n        for (var i = 0; i < onCancelCallback.length; ++i) {\n            this._doInvokeOnCancel(onCancelCallback[i], internalOnly);\n        }\n    } else if (onCancelCallback !== undefined) {\n        if (typeof onCancelCallback === \"function\") {\n            if (!internalOnly) {\n                var e = tryCatch(onCancelCallback).call(this._boundValue());\n                if (e === errorObj) {\n                    this._attachExtraTrace(e.e);\n                    async.throwLater(e.e);\n                }\n            }\n        } else {\n            onCancelCallback._resultCancelled(this);\n        }\n    }\n};\n\nPromise.prototype._invokeOnCancel = function() {\n    var onCancelCallback = this._onCancel();\n    this._unsetOnCancel();\n    async.invoke(this._doInvokeOnCancel, this, onCancelCallback);\n};\n\nPromise.prototype._invokeInternalOnCancel = function() {\n    if (this._isCancellable()) {\n        this._doInvokeOnCancel(this._onCancel(), true);\n        this._unsetOnCancel();\n    }\n};\n\nPromise.prototype._resultCancelled = function() {\n    this.cancel();\n};\n\n};\n\n},{\"./util\":36}],7:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(NEXT_FILTER) {\nvar util = _dereq_(\"./util\");\nvar getKeys = _dereq_(\"./es5\").keys;\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\n\nfunction catchFilter(instances, cb, promise) {\n    return function(e) {\n        var boundTo = promise._boundValue();\n        predicateLoop: for (var i = 0; i < instances.length; ++i) {\n            var item = instances[i];\n\n            if (item === Error ||\n                (item != null && item.prototype instanceof Error)) {\n                if (e instanceof item) {\n                    return tryCatch(cb).call(boundTo, e);\n                }\n            } else if (typeof item === \"function\") {\n                var matchesPredicate = tryCatch(item).call(boundTo, e);\n                if (matchesPredicate === errorObj) {\n                    return matchesPredicate;\n                } else if (matchesPredicate) {\n                    return tryCatch(cb).call(boundTo, e);\n                }\n            } else if (util.isObject(e)) {\n                var keys = getKeys(item);\n                for (var j = 0; j < keys.length; ++j) {\n                    var key = keys[j];\n                    if (item[key] != e[key]) {\n                        continue predicateLoop;\n                    }\n                }\n                return tryCatch(cb).call(boundTo, e);\n            }\n        }\n        return NEXT_FILTER;\n    };\n}\n\nreturn catchFilter;\n};\n\n},{\"./es5\":13,\"./util\":36}],8:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise) {\nvar longStackTraces = false;\nvar contextStack = [];\n\nPromise.prototype._promiseCreated = function() {};\nPromise.prototype._pushContext = function() {};\nPromise.prototype._popContext = function() {return null;};\nPromise._peekContext = Promise.prototype._peekContext = function() {};\n\nfunction Context() {\n    this._trace = new Context.CapturedTrace(peekContext());\n}\nContext.prototype._pushContext = function () {\n    if (this._trace !== undefined) {\n        this._trace._promiseCreated = null;\n        contextStack.push(this._trace);\n    }\n};\n\nContext.prototype._popContext = function () {\n    if (this._trace !== undefined) {\n        var trace = contextStack.pop();\n        var ret = trace._promiseCreated;\n        trace._promiseCreated = null;\n        return ret;\n    }\n    return null;\n};\n\nfunction createContext() {\n    if (longStackTraces) return new Context();\n}\n\nfunction peekContext() {\n    var lastIndex = contextStack.length - 1;\n    if (lastIndex >= 0) {\n        return contextStack[lastIndex];\n    }\n    return undefined;\n}\nContext.CapturedTrace = null;\nContext.create = createContext;\nContext.deactivateLongStackTraces = function() {};\nContext.activateLongStackTraces = function() {\n    var Promise_pushContext = Promise.prototype._pushContext;\n    var Promise_popContext = Promise.prototype._popContext;\n    var Promise_PeekContext = Promise._peekContext;\n    var Promise_peekContext = Promise.prototype._peekContext;\n    var Promise_promiseCreated = Promise.prototype._promiseCreated;\n    Context.deactivateLongStackTraces = function() {\n        Promise.prototype._pushContext = Promise_pushContext;\n        Promise.prototype._popContext = Promise_popContext;\n        Promise._peekContext = Promise_PeekContext;\n        Promise.prototype._peekContext = Promise_peekContext;\n        Promise.prototype._promiseCreated = Promise_promiseCreated;\n        longStackTraces = false;\n    };\n    longStackTraces = true;\n    Promise.prototype._pushContext = Context.prototype._pushContext;\n    Promise.prototype._popContext = Context.prototype._popContext;\n    Promise._peekContext = Promise.prototype._peekContext = peekContext;\n    Promise.prototype._promiseCreated = function() {\n        var ctx = this._peekContext();\n        if (ctx && ctx._promiseCreated == null) ctx._promiseCreated = this;\n    };\n};\nreturn Context;\n};\n\n},{}],9:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, Context,\n    enableAsyncHooks, disableAsyncHooks) {\nvar async = Promise._async;\nvar Warning = _dereq_(\"./errors\").Warning;\nvar util = _dereq_(\"./util\");\nvar es5 = _dereq_(\"./es5\");\nvar canAttachTrace = util.canAttachTrace;\nvar unhandledRejectionHandled;\nvar possiblyUnhandledRejection;\nvar bluebirdFramePattern =\n    /[\\\\\\/]bluebird[\\\\\\/]js[\\\\\\/](release|debug|instrumented)/;\nvar nodeFramePattern = /\\((?:timers\\.js):\\d+:\\d+\\)/;\nvar parseLinePattern = /[\\/<\\(](.+?):(\\d+):(\\d+)\\)?\\s*$/;\nvar stackFramePattern = null;\nvar formatStack = null;\nvar indentStackFrames = false;\nvar printWarning;\nvar debugging = !!(util.env(\"BLUEBIRD_DEBUG\") != 0 &&\n                        (true ||\n                         util.env(\"BLUEBIRD_DEBUG\") ||\n                         util.env(\"NODE_ENV\") === \"development\"));\n\nvar warnings = !!(util.env(\"BLUEBIRD_WARNINGS\") != 0 &&\n    (debugging || util.env(\"BLUEBIRD_WARNINGS\")));\n\nvar longStackTraces = !!(util.env(\"BLUEBIRD_LONG_STACK_TRACES\") != 0 &&\n    (debugging || util.env(\"BLUEBIRD_LONG_STACK_TRACES\")));\n\nvar wForgottenReturn = util.env(\"BLUEBIRD_W_FORGOTTEN_RETURN\") != 0 &&\n    (warnings || !!util.env(\"BLUEBIRD_W_FORGOTTEN_RETURN\"));\n\nvar deferUnhandledRejectionCheck;\n(function() {\n    var promises = [];\n\n    function unhandledRejectionCheck() {\n        for (var i = 0; i < promises.length; ++i) {\n            promises[i]._notifyUnhandledRejection();\n        }\n        unhandledRejectionClear();\n    }\n\n    function unhandledRejectionClear() {\n        promises.length = 0;\n    }\n\n    deferUnhandledRejectionCheck = function(promise) {\n        promises.push(promise);\n        setTimeout(unhandledRejectionCheck, 1);\n    };\n\n    es5.defineProperty(Promise, \"_unhandledRejectionCheck\", {\n        value: unhandledRejectionCheck\n    });\n    es5.defineProperty(Promise, \"_unhandledRejectionClear\", {\n        value: unhandledRejectionClear\n    });\n})();\n\nPromise.prototype.suppressUnhandledRejections = function() {\n    var target = this._target();\n    target._bitField = ((target._bitField & (~1048576)) |\n                      524288);\n};\n\nPromise.prototype._ensurePossibleRejectionHandled = function () {\n    if ((this._bitField & 524288) !== 0) return;\n    this._setRejectionIsUnhandled();\n    deferUnhandledRejectionCheck(this);\n};\n\nPromise.prototype._notifyUnhandledRejectionIsHandled = function () {\n    fireRejectionEvent(\"rejectionHandled\",\n                                  unhandledRejectionHandled, undefined, this);\n};\n\nPromise.prototype._setReturnedNonUndefined = function() {\n    this._bitField = this._bitField | 268435456;\n};\n\nPromise.prototype._returnedNonUndefined = function() {\n    return (this._bitField & 268435456) !== 0;\n};\n\nPromise.prototype._notifyUnhandledRejection = function () {\n    if (this._isRejectionUnhandled()) {\n        var reason = this._settledValue();\n        this._setUnhandledRejectionIsNotified();\n        fireRejectionEvent(\"unhandledRejection\",\n                                      possiblyUnhandledRejection, reason, this);\n    }\n};\n\nPromise.prototype._setUnhandledRejectionIsNotified = function () {\n    this._bitField = this._bitField | 262144;\n};\n\nPromise.prototype._unsetUnhandledRejectionIsNotified = function () {\n    this._bitField = this._bitField & (~262144);\n};\n\nPromise.prototype._isUnhandledRejectionNotified = function () {\n    return (this._bitField & 262144) > 0;\n};\n\nPromise.prototype._setRejectionIsUnhandled = function () {\n    this._bitField = this._bitField | 1048576;\n};\n\nPromise.prototype._unsetRejectionIsUnhandled = function () {\n    this._bitField = this._bitField & (~1048576);\n    if (this._isUnhandledRejectionNotified()) {\n        this._unsetUnhandledRejectionIsNotified();\n        this._notifyUnhandledRejectionIsHandled();\n    }\n};\n\nPromise.prototype._isRejectionUnhandled = function () {\n    return (this._bitField & 1048576) > 0;\n};\n\nPromise.prototype._warn = function(message, shouldUseOwnTrace, promise) {\n    return warn(message, shouldUseOwnTrace, promise || this);\n};\n\nPromise.onPossiblyUnhandledRejection = function (fn) {\n    var context = Promise._getContext();\n    possiblyUnhandledRejection = util.contextBind(context, fn);\n};\n\nPromise.onUnhandledRejectionHandled = function (fn) {\n    var context = Promise._getContext();\n    unhandledRejectionHandled = util.contextBind(context, fn);\n};\n\nvar disableLongStackTraces = function() {};\nPromise.longStackTraces = function () {\n    if (async.haveItemsQueued() && !config.longStackTraces) {\n        throw new Error(\"cannot enable long stack traces after promises have been created\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    if (!config.longStackTraces && longStackTracesIsSupported()) {\n        var Promise_captureStackTrace = Promise.prototype._captureStackTrace;\n        var Promise_attachExtraTrace = Promise.prototype._attachExtraTrace;\n        var Promise_dereferenceTrace = Promise.prototype._dereferenceTrace;\n        config.longStackTraces = true;\n        disableLongStackTraces = function() {\n            if (async.haveItemsQueued() && !config.longStackTraces) {\n                throw new Error(\"cannot enable long stack traces after promises have been created\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n            }\n            Promise.prototype._captureStackTrace = Promise_captureStackTrace;\n            Promise.prototype._attachExtraTrace = Promise_attachExtraTrace;\n            Promise.prototype._dereferenceTrace = Promise_dereferenceTrace;\n            Context.deactivateLongStackTraces();\n            config.longStackTraces = false;\n        };\n        Promise.prototype._captureStackTrace = longStackTracesCaptureStackTrace;\n        Promise.prototype._attachExtraTrace = longStackTracesAttachExtraTrace;\n        Promise.prototype._dereferenceTrace = longStackTracesDereferenceTrace;\n        Context.activateLongStackTraces();\n    }\n};\n\nPromise.hasLongStackTraces = function () {\n    return config.longStackTraces && longStackTracesIsSupported();\n};\n\n\nvar legacyHandlers = {\n    unhandledrejection: {\n        before: function() {\n            var ret = util.global.onunhandledrejection;\n            util.global.onunhandledrejection = null;\n            return ret;\n        },\n        after: function(fn) {\n            util.global.onunhandledrejection = fn;\n        }\n    },\n    rejectionhandled: {\n        before: function() {\n            var ret = util.global.onrejectionhandled;\n            util.global.onrejectionhandled = null;\n            return ret;\n        },\n        after: function(fn) {\n            util.global.onrejectionhandled = fn;\n        }\n    }\n};\n\nvar fireDomEvent = (function() {\n    var dispatch = function(legacy, e) {\n        if (legacy) {\n            var fn;\n            try {\n                fn = legacy.before();\n                return !util.global.dispatchEvent(e);\n            } finally {\n                legacy.after(fn);\n            }\n        } else {\n            return !util.global.dispatchEvent(e);\n        }\n    };\n    try {\n        if (typeof CustomEvent === \"function\") {\n            var event = new CustomEvent(\"CustomEvent\");\n            util.global.dispatchEvent(event);\n            return function(name, event) {\n                name = name.toLowerCase();\n                var eventData = {\n                    detail: event,\n                    cancelable: true\n                };\n                var domEvent = new CustomEvent(name, eventData);\n                es5.defineProperty(\n                    domEvent, \"promise\", {value: event.promise});\n                es5.defineProperty(\n                    domEvent, \"reason\", {value: event.reason});\n\n                return dispatch(legacyHandlers[name], domEvent);\n            };\n        } else if (typeof Event === \"function\") {\n            var event = new Event(\"CustomEvent\");\n            util.global.dispatchEvent(event);\n            return function(name, event) {\n                name = name.toLowerCase();\n                var domEvent = new Event(name, {\n                    cancelable: true\n                });\n                domEvent.detail = event;\n                es5.defineProperty(domEvent, \"promise\", {value: event.promise});\n                es5.defineProperty(domEvent, \"reason\", {value: event.reason});\n                return dispatch(legacyHandlers[name], domEvent);\n            };\n        } else {\n            var event = document.createEvent(\"CustomEvent\");\n            event.initCustomEvent(\"testingtheevent\", false, true, {});\n            util.global.dispatchEvent(event);\n            return function(name, event) {\n                name = name.toLowerCase();\n                var domEvent = document.createEvent(\"CustomEvent\");\n                domEvent.initCustomEvent(name, false, true,\n                    event);\n                return dispatch(legacyHandlers[name], domEvent);\n            };\n        }\n    } catch (e) {}\n    return function() {\n        return false;\n    };\n})();\n\nvar fireGlobalEvent = (function() {\n    if (util.isNode) {\n        return function() {\n            return process.emit.apply(process, arguments);\n        };\n    } else {\n        if (!util.global) {\n            return function() {\n                return false;\n            };\n        }\n        return function(name) {\n            var methodName = \"on\" + name.toLowerCase();\n            var method = util.global[methodName];\n            if (!method) return false;\n            method.apply(util.global, [].slice.call(arguments, 1));\n            return true;\n        };\n    }\n})();\n\nfunction generatePromiseLifecycleEventObject(name, promise) {\n    return {promise: promise};\n}\n\nvar eventToObjectGenerator = {\n    promiseCreated: generatePromiseLifecycleEventObject,\n    promiseFulfilled: generatePromiseLifecycleEventObject,\n    promiseRejected: generatePromiseLifecycleEventObject,\n    promiseResolved: generatePromiseLifecycleEventObject,\n    promiseCancelled: generatePromiseLifecycleEventObject,\n    promiseChained: function(name, promise, child) {\n        return {promise: promise, child: child};\n    },\n    warning: function(name, warning) {\n        return {warning: warning};\n    },\n    unhandledRejection: function (name, reason, promise) {\n        return {reason: reason, promise: promise};\n    },\n    rejectionHandled: generatePromiseLifecycleEventObject\n};\n\nvar activeFireEvent = function (name) {\n    var globalEventFired = false;\n    try {\n        globalEventFired = fireGlobalEvent.apply(null, arguments);\n    } catch (e) {\n        async.throwLater(e);\n        globalEventFired = true;\n    }\n\n    var domEventFired = false;\n    try {\n        domEventFired = fireDomEvent(name,\n                    eventToObjectGenerator[name].apply(null, arguments));\n    } catch (e) {\n        async.throwLater(e);\n        domEventFired = true;\n    }\n\n    return domEventFired || globalEventFired;\n};\n\nPromise.config = function(opts) {\n    opts = Object(opts);\n    if (\"longStackTraces\" in opts) {\n        if (opts.longStackTraces) {\n            Promise.longStackTraces();\n        } else if (!opts.longStackTraces && Promise.hasLongStackTraces()) {\n            disableLongStackTraces();\n        }\n    }\n    if (\"warnings\" in opts) {\n        var warningsOption = opts.warnings;\n        config.warnings = !!warningsOption;\n        wForgottenReturn = config.warnings;\n\n        if (util.isObject(warningsOption)) {\n            if (\"wForgottenReturn\" in warningsOption) {\n                wForgottenReturn = !!warningsOption.wForgottenReturn;\n            }\n        }\n    }\n    if (\"cancellation\" in opts && opts.cancellation && !config.cancellation) {\n        if (async.haveItemsQueued()) {\n            throw new Error(\n                \"cannot enable cancellation after promises are in use\");\n        }\n        Promise.prototype._clearCancellationData =\n            cancellationClearCancellationData;\n        Promise.prototype._propagateFrom = cancellationPropagateFrom;\n        Promise.prototype._onCancel = cancellationOnCancel;\n        Promise.prototype._setOnCancel = cancellationSetOnCancel;\n        Promise.prototype._attachCancellationCallback =\n            cancellationAttachCancellationCallback;\n        Promise.prototype._execute = cancellationExecute;\n        propagateFromFunction = cancellationPropagateFrom;\n        config.cancellation = true;\n    }\n    if (\"monitoring\" in opts) {\n        if (opts.monitoring && !config.monitoring) {\n            config.monitoring = true;\n            Promise.prototype._fireEvent = activeFireEvent;\n        } else if (!opts.monitoring && config.monitoring) {\n            config.monitoring = false;\n            Promise.prototype._fireEvent = defaultFireEvent;\n        }\n    }\n    if (\"asyncHooks\" in opts && util.nodeSupportsAsyncResource) {\n        var prev = config.asyncHooks;\n        var cur = !!opts.asyncHooks;\n        if (prev !== cur) {\n            config.asyncHooks = cur;\n            if (cur) {\n                enableAsyncHooks();\n            } else {\n                disableAsyncHooks();\n            }\n        }\n    }\n    return Promise;\n};\n\nfunction defaultFireEvent() { return false; }\n\nPromise.prototype._fireEvent = defaultFireEvent;\nPromise.prototype._execute = function(executor, resolve, reject) {\n    try {\n        executor(resolve, reject);\n    } catch (e) {\n        return e;\n    }\n};\nPromise.prototype._onCancel = function () {};\nPromise.prototype._setOnCancel = function (handler) { ; };\nPromise.prototype._attachCancellationCallback = function(onCancel) {\n    ;\n};\nPromise.prototype._captureStackTrace = function () {};\nPromise.prototype._attachExtraTrace = function () {};\nPromise.prototype._dereferenceTrace = function () {};\nPromise.prototype._clearCancellationData = function() {};\nPromise.prototype._propagateFrom = function (parent, flags) {\n    ;\n    ;\n};\n\nfunction cancellationExecute(executor, resolve, reject) {\n    var promise = this;\n    try {\n        executor(resolve, reject, function(onCancel) {\n            if (typeof onCancel !== \"function\") {\n                throw new TypeError(\"onCancel must be a function, got: \" +\n                                    util.toString(onCancel));\n            }\n            promise._attachCancellationCallback(onCancel);\n        });\n    } catch (e) {\n        return e;\n    }\n}\n\nfunction cancellationAttachCancellationCallback(onCancel) {\n    if (!this._isCancellable()) return this;\n\n    var previousOnCancel = this._onCancel();\n    if (previousOnCancel !== undefined) {\n        if (util.isArray(previousOnCancel)) {\n            previousOnCancel.push(onCancel);\n        } else {\n            this._setOnCancel([previousOnCancel, onCancel]);\n        }\n    } else {\n        this._setOnCancel(onCancel);\n    }\n}\n\nfunction cancellationOnCancel() {\n    return this._onCancelField;\n}\n\nfunction cancellationSetOnCancel(onCancel) {\n    this._onCancelField = onCancel;\n}\n\nfunction cancellationClearCancellationData() {\n    this._cancellationParent = undefined;\n    this._onCancelField = undefined;\n}\n\nfunction cancellationPropagateFrom(parent, flags) {\n    if ((flags & 1) !== 0) {\n        this._cancellationParent = parent;\n        var branchesRemainingToCancel = parent._branchesRemainingToCancel;\n        if (branchesRemainingToCancel === undefined) {\n            branchesRemainingToCancel = 0;\n        }\n        parent._branchesRemainingToCancel = branchesRemainingToCancel + 1;\n    }\n    if ((flags & 2) !== 0 && parent._isBound()) {\n        this._setBoundTo(parent._boundTo);\n    }\n}\n\nfunction bindingPropagateFrom(parent, flags) {\n    if ((flags & 2) !== 0 && parent._isBound()) {\n        this._setBoundTo(parent._boundTo);\n    }\n}\nvar propagateFromFunction = bindingPropagateFrom;\n\nfunction boundValueFunction() {\n    var ret = this._boundTo;\n    if (ret !== undefined) {\n        if (ret instanceof Promise) {\n            if (ret.isFulfilled()) {\n                return ret.value();\n            } else {\n                return undefined;\n            }\n        }\n    }\n    return ret;\n}\n\nfunction longStackTracesCaptureStackTrace() {\n    this._trace = new CapturedTrace(this._peekContext());\n}\n\nfunction longStackTracesAttachExtraTrace(error, ignoreSelf) {\n    if (canAttachTrace(error)) {\n        var trace = this._trace;\n        if (trace !== undefined) {\n            if (ignoreSelf) trace = trace._parent;\n        }\n        if (trace !== undefined) {\n            trace.attachExtraTrace(error);\n        } else if (!error.__stackCleaned__) {\n            var parsed = parseStackAndMessage(error);\n            util.notEnumerableProp(error, \"stack\",\n                parsed.message + \"\\n\" + parsed.stack.join(\"\\n\"));\n            util.notEnumerableProp(error, \"__stackCleaned__\", true);\n        }\n    }\n}\n\nfunction longStackTracesDereferenceTrace() {\n    this._trace = undefined;\n}\n\nfunction checkForgottenReturns(returnValue, promiseCreated, name, promise,\n                               parent) {\n    if (returnValue === undefined && promiseCreated !== null &&\n        wForgottenReturn) {\n        if (parent !== undefined && parent._returnedNonUndefined()) return;\n        if ((promise._bitField & 65535) === 0) return;\n\n        if (name) name = name + \" \";\n        var handlerLine = \"\";\n        var creatorLine = \"\";\n        if (promiseCreated._trace) {\n            var traceLines = promiseCreated._trace.stack.split(\"\\n\");\n            var stack = cleanStack(traceLines);\n            for (var i = stack.length - 1; i >= 0; --i) {\n                var line = stack[i];\n                if (!nodeFramePattern.test(line)) {\n                    var lineMatches = line.match(parseLinePattern);\n                    if (lineMatches) {\n                        handlerLine  = \"at \" + lineMatches[1] +\n                            \":\" + lineMatches[2] + \":\" + lineMatches[3] + \" \";\n                    }\n                    break;\n                }\n            }\n\n            if (stack.length > 0) {\n                var firstUserLine = stack[0];\n                for (var i = 0; i < traceLines.length; ++i) {\n\n                    if (traceLines[i] === firstUserLine) {\n                        if (i > 0) {\n                            creatorLine = \"\\n\" + traceLines[i - 1];\n                        }\n                        break;\n                    }\n                }\n\n            }\n        }\n        var msg = \"a promise was created in a \" + name +\n            \"handler \" + handlerLine + \"but was not returned from it, \" +\n            \"see http://goo.gl/rRqMUw\" +\n            creatorLine;\n        promise._warn(msg, true, promiseCreated);\n    }\n}\n\nfunction deprecated(name, replacement) {\n    var message = name +\n        \" is deprecated and will be removed in a future version.\";\n    if (replacement) message += \" Use \" + replacement + \" instead.\";\n    return warn(message);\n}\n\nfunction warn(message, shouldUseOwnTrace, promise) {\n    if (!config.warnings) return;\n    var warning = new Warning(message);\n    var ctx;\n    if (shouldUseOwnTrace) {\n        promise._attachExtraTrace(warning);\n    } else if (config.longStackTraces && (ctx = Promise._peekContext())) {\n        ctx.attachExtraTrace(warning);\n    } else {\n        var parsed = parseStackAndMessage(warning);\n        warning.stack = parsed.message + \"\\n\" + parsed.stack.join(\"\\n\");\n    }\n\n    if (!activeFireEvent(\"warning\", warning)) {\n        formatAndLogError(warning, \"\", true);\n    }\n}\n\nfunction reconstructStack(message, stacks) {\n    for (var i = 0; i < stacks.length - 1; ++i) {\n        stacks[i].push(\"From previous event:\");\n        stacks[i] = stacks[i].join(\"\\n\");\n    }\n    if (i < stacks.length) {\n        stacks[i] = stacks[i].join(\"\\n\");\n    }\n    return message + \"\\n\" + stacks.join(\"\\n\");\n}\n\nfunction removeDuplicateOrEmptyJumps(stacks) {\n    for (var i = 0; i < stacks.length; ++i) {\n        if (stacks[i].length === 0 ||\n            ((i + 1 < stacks.length) && stacks[i][0] === stacks[i+1][0])) {\n            stacks.splice(i, 1);\n            i--;\n        }\n    }\n}\n\nfunction removeCommonRoots(stacks) {\n    var current = stacks[0];\n    for (var i = 1; i < stacks.length; ++i) {\n        var prev = stacks[i];\n        var currentLastIndex = current.length - 1;\n        var currentLastLine = current[currentLastIndex];\n        var commonRootMeetPoint = -1;\n\n        for (var j = prev.length - 1; j >= 0; --j) {\n            if (prev[j] === currentLastLine) {\n                commonRootMeetPoint = j;\n                break;\n            }\n        }\n\n        for (var j = commonRootMeetPoint; j >= 0; --j) {\n            var line = prev[j];\n            if (current[currentLastIndex] === line) {\n                current.pop();\n                currentLastIndex--;\n            } else {\n                break;\n            }\n        }\n        current = prev;\n    }\n}\n\nfunction cleanStack(stack) {\n    var ret = [];\n    for (var i = 0; i < stack.length; ++i) {\n        var line = stack[i];\n        var isTraceLine = \"    (No stack trace)\" === line ||\n            stackFramePattern.test(line);\n        var isInternalFrame = isTraceLine && shouldIgnore(line);\n        if (isTraceLine && !isInternalFrame) {\n            if (indentStackFrames && line.charAt(0) !== \" \") {\n                line = \"    \" + line;\n            }\n            ret.push(line);\n        }\n    }\n    return ret;\n}\n\nfunction stackFramesAsArray(error) {\n    var stack = error.stack.replace(/\\s+$/g, \"\").split(\"\\n\");\n    for (var i = 0; i < stack.length; ++i) {\n        var line = stack[i];\n        if (\"    (No stack trace)\" === line || stackFramePattern.test(line)) {\n            break;\n        }\n    }\n    if (i > 0 && error.name != \"SyntaxError\") {\n        stack = stack.slice(i);\n    }\n    return stack;\n}\n\nfunction parseStackAndMessage(error) {\n    var stack = error.stack;\n    var message = error.toString();\n    stack = typeof stack === \"string\" && stack.length > 0\n                ? stackFramesAsArray(error) : [\"    (No stack trace)\"];\n    return {\n        message: message,\n        stack: error.name == \"SyntaxError\" ? stack : cleanStack(stack)\n    };\n}\n\nfunction formatAndLogError(error, title, isSoft) {\n    if (typeof console !== \"undefined\") {\n        var message;\n        if (util.isObject(error)) {\n            var stack = error.stack;\n            message = title + formatStack(stack, error);\n        } else {\n            message = title + String(error);\n        }\n        if (typeof printWarning === \"function\") {\n            printWarning(message, isSoft);\n        } else if (typeof console.log === \"function\" ||\n            typeof console.log === \"object\") {\n            console.log(message);\n        }\n    }\n}\n\nfunction fireRejectionEvent(name, localHandler, reason, promise) {\n    var localEventFired = false;\n    try {\n        if (typeof localHandler === \"function\") {\n            localEventFired = true;\n            if (name === \"rejectionHandled\") {\n                localHandler(promise);\n            } else {\n                localHandler(reason, promise);\n            }\n        }\n    } catch (e) {\n        async.throwLater(e);\n    }\n\n    if (name === \"unhandledRejection\") {\n        if (!activeFireEvent(name, reason, promise) && !localEventFired) {\n            formatAndLogError(reason, \"Unhandled rejection \");\n        }\n    } else {\n        activeFireEvent(name, promise);\n    }\n}\n\nfunction formatNonError(obj) {\n    var str;\n    if (typeof obj === \"function\") {\n        str = \"[function \" +\n            (obj.name || \"anonymous\") +\n            \"]\";\n    } else {\n        str = obj && typeof obj.toString === \"function\"\n            ? obj.toString() : util.toString(obj);\n        var ruselessToString = /\\[object [a-zA-Z0-9$_]+\\]/;\n        if (ruselessToString.test(str)) {\n            try {\n                var newStr = JSON.stringify(obj);\n                str = newStr;\n            }\n            catch(e) {\n\n            }\n        }\n        if (str.length === 0) {\n            str = \"(empty array)\";\n        }\n    }\n    return (\"(<\" + snip(str) + \">, no stack trace)\");\n}\n\nfunction snip(str) {\n    var maxChars = 41;\n    if (str.length < maxChars) {\n        return str;\n    }\n    return str.substr(0, maxChars - 3) + \"...\";\n}\n\nfunction longStackTracesIsSupported() {\n    return typeof captureStackTrace === \"function\";\n}\n\nvar shouldIgnore = function() { return false; };\nvar parseLineInfoRegex = /[\\/<\\(]([^:\\/]+):(\\d+):(?:\\d+)\\)?\\s*$/;\nfunction parseLineInfo(line) {\n    var matches = line.match(parseLineInfoRegex);\n    if (matches) {\n        return {\n            fileName: matches[1],\n            line: parseInt(matches[2], 10)\n        };\n    }\n}\n\nfunction setBounds(firstLineError, lastLineError) {\n    if (!longStackTracesIsSupported()) return;\n    var firstStackLines = (firstLineError.stack || \"\").split(\"\\n\");\n    var lastStackLines = (lastLineError.stack || \"\").split(\"\\n\");\n    var firstIndex = -1;\n    var lastIndex = -1;\n    var firstFileName;\n    var lastFileName;\n    for (var i = 0; i < firstStackLines.length; ++i) {\n        var result = parseLineInfo(firstStackLines[i]);\n        if (result) {\n            firstFileName = result.fileName;\n            firstIndex = result.line;\n            break;\n        }\n    }\n    for (var i = 0; i < lastStackLines.length; ++i) {\n        var result = parseLineInfo(lastStackLines[i]);\n        if (result) {\n            lastFileName = result.fileName;\n            lastIndex = result.line;\n            break;\n        }\n    }\n    if (firstIndex < 0 || lastIndex < 0 || !firstFileName || !lastFileName ||\n        firstFileName !== lastFileName || firstIndex >= lastIndex) {\n        return;\n    }\n\n    shouldIgnore = function(line) {\n        if (bluebirdFramePattern.test(line)) return true;\n        var info = parseLineInfo(line);\n        if (info) {\n            if (info.fileName === firstFileName &&\n                (firstIndex <= info.line && info.line <= lastIndex)) {\n                return true;\n            }\n        }\n        return false;\n    };\n}\n\nfunction CapturedTrace(parent) {\n    this._parent = parent;\n    this._promisesCreated = 0;\n    var length = this._length = 1 + (parent === undefined ? 0 : parent._length);\n    captureStackTrace(this, CapturedTrace);\n    if (length > 32) this.uncycle();\n}\nutil.inherits(CapturedTrace, Error);\nContext.CapturedTrace = CapturedTrace;\n\nCapturedTrace.prototype.uncycle = function() {\n    var length = this._length;\n    if (length < 2) return;\n    var nodes = [];\n    var stackToIndex = {};\n\n    for (var i = 0, node = this; node !== undefined; ++i) {\n        nodes.push(node);\n        node = node._parent;\n    }\n    length = this._length = i;\n    for (var i = length - 1; i >= 0; --i) {\n        var stack = nodes[i].stack;\n        if (stackToIndex[stack] === undefined) {\n            stackToIndex[stack] = i;\n        }\n    }\n    for (var i = 0; i < length; ++i) {\n        var currentStack = nodes[i].stack;\n        var index = stackToIndex[currentStack];\n        if (index !== undefined && index !== i) {\n            if (index > 0) {\n                nodes[index - 1]._parent = undefined;\n                nodes[index - 1]._length = 1;\n            }\n            nodes[i]._parent = undefined;\n            nodes[i]._length = 1;\n            var cycleEdgeNode = i > 0 ? nodes[i - 1] : this;\n\n            if (index < length - 1) {\n                cycleEdgeNode._parent = nodes[index + 1];\n                cycleEdgeNode._parent.uncycle();\n                cycleEdgeNode._length =\n                    cycleEdgeNode._parent._length + 1;\n            } else {\n                cycleEdgeNode._parent = undefined;\n                cycleEdgeNode._length = 1;\n            }\n            var currentChildLength = cycleEdgeNode._length + 1;\n            for (var j = i - 2; j >= 0; --j) {\n                nodes[j]._length = currentChildLength;\n                currentChildLength++;\n            }\n            return;\n        }\n    }\n};\n\nCapturedTrace.prototype.attachExtraTrace = function(error) {\n    if (error.__stackCleaned__) return;\n    this.uncycle();\n    var parsed = parseStackAndMessage(error);\n    var message = parsed.message;\n    var stacks = [parsed.stack];\n\n    var trace = this;\n    while (trace !== undefined) {\n        stacks.push(cleanStack(trace.stack.split(\"\\n\")));\n        trace = trace._parent;\n    }\n    removeCommonRoots(stacks);\n    removeDuplicateOrEmptyJumps(stacks);\n    util.notEnumerableProp(error, \"stack\", reconstructStack(message, stacks));\n    util.notEnumerableProp(error, \"__stackCleaned__\", true);\n};\n\nvar captureStackTrace = (function stackDetection() {\n    var v8stackFramePattern = /^\\s*at\\s*/;\n    var v8stackFormatter = function(stack, error) {\n        if (typeof stack === \"string\") return stack;\n\n        if (error.name !== undefined &&\n            error.message !== undefined) {\n            return error.toString();\n        }\n        return formatNonError(error);\n    };\n\n    if (typeof Error.stackTraceLimit === \"number\" &&\n        typeof Error.captureStackTrace === \"function\") {\n        Error.stackTraceLimit += 6;\n        stackFramePattern = v8stackFramePattern;\n        formatStack = v8stackFormatter;\n        var captureStackTrace = Error.captureStackTrace;\n\n        shouldIgnore = function(line) {\n            return bluebirdFramePattern.test(line);\n        };\n        return function(receiver, ignoreUntil) {\n            Error.stackTraceLimit += 6;\n            captureStackTrace(receiver, ignoreUntil);\n            Error.stackTraceLimit -= 6;\n        };\n    }\n    var err = new Error();\n\n    if (typeof err.stack === \"string\" &&\n        err.stack.split(\"\\n\")[0].indexOf(\"stackDetection@\") >= 0) {\n        stackFramePattern = /@/;\n        formatStack = v8stackFormatter;\n        indentStackFrames = true;\n        return function captureStackTrace(o) {\n            o.stack = new Error().stack;\n        };\n    }\n\n    var hasStackAfterThrow;\n    try { throw new Error(); }\n    catch(e) {\n        hasStackAfterThrow = (\"stack\" in e);\n    }\n    if (!(\"stack\" in err) && hasStackAfterThrow &&\n        typeof Error.stackTraceLimit === \"number\") {\n        stackFramePattern = v8stackFramePattern;\n        formatStack = v8stackFormatter;\n        return function captureStackTrace(o) {\n            Error.stackTraceLimit += 6;\n            try { throw new Error(); }\n            catch(e) { o.stack = e.stack; }\n            Error.stackTraceLimit -= 6;\n        };\n    }\n\n    formatStack = function(stack, error) {\n        if (typeof stack === \"string\") return stack;\n\n        if ((typeof error === \"object\" ||\n            typeof error === \"function\") &&\n            error.name !== undefined &&\n            error.message !== undefined) {\n            return error.toString();\n        }\n        return formatNonError(error);\n    };\n\n    return null;\n\n})([]);\n\nif (typeof console !== \"undefined\" && typeof console.warn !== \"undefined\") {\n    printWarning = function (message) {\n        console.warn(message);\n    };\n    if (util.isNode && process.stderr.isTTY) {\n        printWarning = function(message, isSoft) {\n            var color = isSoft ? \"\\u001b[33m\" : \"\\u001b[31m\";\n            console.warn(color + message + \"\\u001b[0m\\n\");\n        };\n    } else if (!util.isNode && typeof (new Error().stack) === \"string\") {\n        printWarning = function(message, isSoft) {\n            console.warn(\"%c\" + message,\n                        isSoft ? \"color: darkorange\" : \"color: red\");\n        };\n    }\n}\n\nvar config = {\n    warnings: warnings,\n    longStackTraces: false,\n    cancellation: false,\n    monitoring: false,\n    asyncHooks: false\n};\n\nif (longStackTraces) Promise.longStackTraces();\n\nreturn {\n    asyncHooks: function() {\n        return config.asyncHooks;\n    },\n    longStackTraces: function() {\n        return config.longStackTraces;\n    },\n    warnings: function() {\n        return config.warnings;\n    },\n    cancellation: function() {\n        return config.cancellation;\n    },\n    monitoring: function() {\n        return config.monitoring;\n    },\n    propagateFromFunction: function() {\n        return propagateFromFunction;\n    },\n    boundValueFunction: function() {\n        return boundValueFunction;\n    },\n    checkForgottenReturns: checkForgottenReturns,\n    setBounds: setBounds,\n    warn: warn,\n    deprecated: deprecated,\n    CapturedTrace: CapturedTrace,\n    fireDomEvent: fireDomEvent,\n    fireGlobalEvent: fireGlobalEvent\n};\n};\n\n},{\"./errors\":12,\"./es5\":13,\"./util\":36}],10:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise) {\nfunction returner() {\n    return this.value;\n}\nfunction thrower() {\n    throw this.reason;\n}\n\nPromise.prototype[\"return\"] =\nPromise.prototype.thenReturn = function (value) {\n    if (value instanceof Promise) value.suppressUnhandledRejections();\n    return this._then(\n        returner, undefined, undefined, {value: value}, undefined);\n};\n\nPromise.prototype[\"throw\"] =\nPromise.prototype.thenThrow = function (reason) {\n    return this._then(\n        thrower, undefined, undefined, {reason: reason}, undefined);\n};\n\nPromise.prototype.catchThrow = function (reason) {\n    if (arguments.length <= 1) {\n        return this._then(\n            undefined, thrower, undefined, {reason: reason}, undefined);\n    } else {\n        var _reason = arguments[1];\n        var handler = function() {throw _reason;};\n        return this.caught(reason, handler);\n    }\n};\n\nPromise.prototype.catchReturn = function (value) {\n    if (arguments.length <= 1) {\n        if (value instanceof Promise) value.suppressUnhandledRejections();\n        return this._then(\n            undefined, returner, undefined, {value: value}, undefined);\n    } else {\n        var _value = arguments[1];\n        if (_value instanceof Promise) _value.suppressUnhandledRejections();\n        var handler = function() {return _value;};\n        return this.caught(value, handler);\n    }\n};\n};\n\n},{}],11:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL) {\nvar PromiseReduce = Promise.reduce;\nvar PromiseAll = Promise.all;\n\nfunction promiseAllThis() {\n    return PromiseAll(this);\n}\n\nfunction PromiseMapSeries(promises, fn) {\n    return PromiseReduce(promises, fn, INTERNAL, INTERNAL);\n}\n\nPromise.prototype.each = function (fn) {\n    return PromiseReduce(this, fn, INTERNAL, 0)\n              ._then(promiseAllThis, undefined, undefined, this, undefined);\n};\n\nPromise.prototype.mapSeries = function (fn) {\n    return PromiseReduce(this, fn, INTERNAL, INTERNAL);\n};\n\nPromise.each = function (promises, fn) {\n    return PromiseReduce(promises, fn, INTERNAL, 0)\n              ._then(promiseAllThis, undefined, undefined, promises, undefined);\n};\n\nPromise.mapSeries = PromiseMapSeries;\n};\n\n\n},{}],12:[function(_dereq_,module,exports){\n\"use strict\";\nvar es5 = _dereq_(\"./es5\");\nvar Objectfreeze = es5.freeze;\nvar util = _dereq_(\"./util\");\nvar inherits = util.inherits;\nvar notEnumerableProp = util.notEnumerableProp;\n\nfunction subError(nameProperty, defaultMessage) {\n    function SubError(message) {\n        if (!(this instanceof SubError)) return new SubError(message);\n        notEnumerableProp(this, \"message\",\n            typeof message === \"string\" ? message : defaultMessage);\n        notEnumerableProp(this, \"name\", nameProperty);\n        if (Error.captureStackTrace) {\n            Error.captureStackTrace(this, this.constructor);\n        } else {\n            Error.call(this);\n        }\n    }\n    inherits(SubError, Error);\n    return SubError;\n}\n\nvar _TypeError, _RangeError;\nvar Warning = subError(\"Warning\", \"warning\");\nvar CancellationError = subError(\"CancellationError\", \"cancellation error\");\nvar TimeoutError = subError(\"TimeoutError\", \"timeout error\");\nvar AggregateError = subError(\"AggregateError\", \"aggregate error\");\ntry {\n    _TypeError = TypeError;\n    _RangeError = RangeError;\n} catch(e) {\n    _TypeError = subError(\"TypeError\", \"type error\");\n    _RangeError = subError(\"RangeError\", \"range error\");\n}\n\nvar methods = (\"join pop push shift unshift slice filter forEach some \" +\n    \"every map indexOf lastIndexOf reduce reduceRight sort reverse\").split(\" \");\n\nfor (var i = 0; i < methods.length; ++i) {\n    if (typeof Array.prototype[methods[i]] === \"function\") {\n        AggregateError.prototype[methods[i]] = Array.prototype[methods[i]];\n    }\n}\n\nes5.defineProperty(AggregateError.prototype, \"length\", {\n    value: 0,\n    configurable: false,\n    writable: true,\n    enumerable: true\n});\nAggregateError.prototype[\"isOperational\"] = true;\nvar level = 0;\nAggregateError.prototype.toString = function() {\n    var indent = Array(level * 4 + 1).join(\" \");\n    var ret = \"\\n\" + indent + \"AggregateError of:\" + \"\\n\";\n    level++;\n    indent = Array(level * 4 + 1).join(\" \");\n    for (var i = 0; i < this.length; ++i) {\n        var str = this[i] === this ? \"[Circular AggregateError]\" : this[i] + \"\";\n        var lines = str.split(\"\\n\");\n        for (var j = 0; j < lines.length; ++j) {\n            lines[j] = indent + lines[j];\n        }\n        str = lines.join(\"\\n\");\n        ret += str + \"\\n\";\n    }\n    level--;\n    return ret;\n};\n\nfunction OperationalError(message) {\n    if (!(this instanceof OperationalError))\n        return new OperationalError(message);\n    notEnumerableProp(this, \"name\", \"OperationalError\");\n    notEnumerableProp(this, \"message\", message);\n    this.cause = message;\n    this[\"isOperational\"] = true;\n\n    if (message instanceof Error) {\n        notEnumerableProp(this, \"message\", message.message);\n        notEnumerableProp(this, \"stack\", message.stack);\n    } else if (Error.captureStackTrace) {\n        Error.captureStackTrace(this, this.constructor);\n    }\n\n}\ninherits(OperationalError, Error);\n\nvar errorTypes = Error[\"__BluebirdErrorTypes__\"];\nif (!errorTypes) {\n    errorTypes = Objectfreeze({\n        CancellationError: CancellationError,\n        TimeoutError: TimeoutError,\n        OperationalError: OperationalError,\n        RejectionError: OperationalError,\n        AggregateError: AggregateError\n    });\n    es5.defineProperty(Error, \"__BluebirdErrorTypes__\", {\n        value: errorTypes,\n        writable: false,\n        enumerable: false,\n        configurable: false\n    });\n}\n\nmodule.exports = {\n    Error: Error,\n    TypeError: _TypeError,\n    RangeError: _RangeError,\n    CancellationError: errorTypes.CancellationError,\n    OperationalError: errorTypes.OperationalError,\n    TimeoutError: errorTypes.TimeoutError,\n    AggregateError: errorTypes.AggregateError,\n    Warning: Warning\n};\n\n},{\"./es5\":13,\"./util\":36}],13:[function(_dereq_,module,exports){\nvar isES5 = (function(){\n    \"use strict\";\n    return this === undefined;\n})();\n\nif (isES5) {\n    module.exports = {\n        freeze: Object.freeze,\n        defineProperty: Object.defineProperty,\n        getDescriptor: Object.getOwnPropertyDescriptor,\n        keys: Object.keys,\n        names: Object.getOwnPropertyNames,\n        getPrototypeOf: Object.getPrototypeOf,\n        isArray: Array.isArray,\n        isES5: isES5,\n        propertyIsWritable: function(obj, prop) {\n            var descriptor = Object.getOwnPropertyDescriptor(obj, prop);\n            return !!(!descriptor || descriptor.writable || descriptor.set);\n        }\n    };\n} else {\n    var has = {}.hasOwnProperty;\n    var str = {}.toString;\n    var proto = {}.constructor.prototype;\n\n    var ObjectKeys = function (o) {\n        var ret = [];\n        for (var key in o) {\n            if (has.call(o, key)) {\n                ret.push(key);\n            }\n        }\n        return ret;\n    };\n\n    var ObjectGetDescriptor = function(o, key) {\n        return {value: o[key]};\n    };\n\n    var ObjectDefineProperty = function (o, key, desc) {\n        o[key] = desc.value;\n        return o;\n    };\n\n    var ObjectFreeze = function (obj) {\n        return obj;\n    };\n\n    var ObjectGetPrototypeOf = function (obj) {\n        try {\n            return Object(obj).constructor.prototype;\n        }\n        catch (e) {\n            return proto;\n        }\n    };\n\n    var ArrayIsArray = function (obj) {\n        try {\n            return str.call(obj) === \"[object Array]\";\n        }\n        catch(e) {\n            return false;\n        }\n    };\n\n    module.exports = {\n        isArray: ArrayIsArray,\n        keys: ObjectKeys,\n        names: ObjectKeys,\n        defineProperty: ObjectDefineProperty,\n        getDescriptor: ObjectGetDescriptor,\n        freeze: ObjectFreeze,\n        getPrototypeOf: ObjectGetPrototypeOf,\n        isES5: isES5,\n        propertyIsWritable: function() {\n            return true;\n        }\n    };\n}\n\n},{}],14:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL) {\nvar PromiseMap = Promise.map;\n\nPromise.prototype.filter = function (fn, options) {\n    return PromiseMap(this, fn, options, INTERNAL);\n};\n\nPromise.filter = function (promises, fn, options) {\n    return PromiseMap(promises, fn, options, INTERNAL);\n};\n};\n\n},{}],15:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, tryConvertToPromise, NEXT_FILTER) {\nvar util = _dereq_(\"./util\");\nvar CancellationError = Promise.CancellationError;\nvar errorObj = util.errorObj;\nvar catchFilter = _dereq_(\"./catch_filter\")(NEXT_FILTER);\n\nfunction PassThroughHandlerContext(promise, type, handler) {\n    this.promise = promise;\n    this.type = type;\n    this.handler = handler;\n    this.called = false;\n    this.cancelPromise = null;\n}\n\nPassThroughHandlerContext.prototype.isFinallyHandler = function() {\n    return this.type === 0;\n};\n\nfunction FinallyHandlerCancelReaction(finallyHandler) {\n    this.finallyHandler = finallyHandler;\n}\n\nFinallyHandlerCancelReaction.prototype._resultCancelled = function() {\n    checkCancel(this.finallyHandler);\n};\n\nfunction checkCancel(ctx, reason) {\n    if (ctx.cancelPromise != null) {\n        if (arguments.length > 1) {\n            ctx.cancelPromise._reject(reason);\n        } else {\n            ctx.cancelPromise._cancel();\n        }\n        ctx.cancelPromise = null;\n        return true;\n    }\n    return false;\n}\n\nfunction succeed() {\n    return finallyHandler.call(this, this.promise._target()._settledValue());\n}\nfunction fail(reason) {\n    if (checkCancel(this, reason)) return;\n    errorObj.e = reason;\n    return errorObj;\n}\nfunction finallyHandler(reasonOrValue) {\n    var promise = this.promise;\n    var handler = this.handler;\n\n    if (!this.called) {\n        this.called = true;\n        var ret = this.isFinallyHandler()\n            ? handler.call(promise._boundValue())\n            : handler.call(promise._boundValue(), reasonOrValue);\n        if (ret === NEXT_FILTER) {\n            return ret;\n        } else if (ret !== undefined) {\n            promise._setReturnedNonUndefined();\n            var maybePromise = tryConvertToPromise(ret, promise);\n            if (maybePromise instanceof Promise) {\n                if (this.cancelPromise != null) {\n                    if (maybePromise._isCancelled()) {\n                        var reason =\n                            new CancellationError(\"late cancellation observer\");\n                        promise._attachExtraTrace(reason);\n                        errorObj.e = reason;\n                        return errorObj;\n                    } else if (maybePromise.isPending()) {\n                        maybePromise._attachCancellationCallback(\n                            new FinallyHandlerCancelReaction(this));\n                    }\n                }\n                return maybePromise._then(\n                    succeed, fail, undefined, this, undefined);\n            }\n        }\n    }\n\n    if (promise.isRejected()) {\n        checkCancel(this);\n        errorObj.e = reasonOrValue;\n        return errorObj;\n    } else {\n        checkCancel(this);\n        return reasonOrValue;\n    }\n}\n\nPromise.prototype._passThrough = function(handler, type, success, fail) {\n    if (typeof handler !== \"function\") return this.then();\n    return this._then(success,\n                      fail,\n                      undefined,\n                      new PassThroughHandlerContext(this, type, handler),\n                      undefined);\n};\n\nPromise.prototype.lastly =\nPromise.prototype[\"finally\"] = function (handler) {\n    return this._passThrough(handler,\n                             0,\n                             finallyHandler,\n                             finallyHandler);\n};\n\n\nPromise.prototype.tap = function (handler) {\n    return this._passThrough(handler, 1, finallyHandler);\n};\n\nPromise.prototype.tapCatch = function (handlerOrPredicate) {\n    var len = arguments.length;\n    if(len === 1) {\n        return this._passThrough(handlerOrPredicate,\n                                 1,\n                                 undefined,\n                                 finallyHandler);\n    } else {\n         var catchInstances = new Array(len - 1),\n            j = 0, i;\n        for (i = 0; i < len - 1; ++i) {\n            var item = arguments[i];\n            if (util.isObject(item)) {\n                catchInstances[j++] = item;\n            } else {\n                return Promise.reject(new TypeError(\n                    \"tapCatch statement predicate: \"\n                    + \"expecting an object but got \" + util.classString(item)\n                ));\n            }\n        }\n        catchInstances.length = j;\n        var handler = arguments[i];\n        return this._passThrough(catchFilter(catchInstances, handler, this),\n                                 1,\n                                 undefined,\n                                 finallyHandler);\n    }\n\n};\n\nreturn PassThroughHandlerContext;\n};\n\n},{\"./catch_filter\":7,\"./util\":36}],16:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise,\n                          apiRejection,\n                          INTERNAL,\n                          tryConvertToPromise,\n                          Proxyable,\n                          debug) {\nvar errors = _dereq_(\"./errors\");\nvar TypeError = errors.TypeError;\nvar util = _dereq_(\"./util\");\nvar errorObj = util.errorObj;\nvar tryCatch = util.tryCatch;\nvar yieldHandlers = [];\n\nfunction promiseFromYieldHandler(value, yieldHandlers, traceParent) {\n    for (var i = 0; i < yieldHandlers.length; ++i) {\n        traceParent._pushContext();\n        var result = tryCatch(yieldHandlers[i])(value);\n        traceParent._popContext();\n        if (result === errorObj) {\n            traceParent._pushContext();\n            var ret = Promise.reject(errorObj.e);\n            traceParent._popContext();\n            return ret;\n        }\n        var maybePromise = tryConvertToPromise(result, traceParent);\n        if (maybePromise instanceof Promise) return maybePromise;\n    }\n    return null;\n}\n\nfunction PromiseSpawn(generatorFunction, receiver, yieldHandler, stack) {\n    if (debug.cancellation()) {\n        var internal = new Promise(INTERNAL);\n        var _finallyPromise = this._finallyPromise = new Promise(INTERNAL);\n        this._promise = internal.lastly(function() {\n            return _finallyPromise;\n        });\n        internal._captureStackTrace();\n        internal._setOnCancel(this);\n    } else {\n        var promise = this._promise = new Promise(INTERNAL);\n        promise._captureStackTrace();\n    }\n    this._stack = stack;\n    this._generatorFunction = generatorFunction;\n    this._receiver = receiver;\n    this._generator = undefined;\n    this._yieldHandlers = typeof yieldHandler === \"function\"\n        ? [yieldHandler].concat(yieldHandlers)\n        : yieldHandlers;\n    this._yieldedPromise = null;\n    this._cancellationPhase = false;\n}\nutil.inherits(PromiseSpawn, Proxyable);\n\nPromiseSpawn.prototype._isResolved = function() {\n    return this._promise === null;\n};\n\nPromiseSpawn.prototype._cleanup = function() {\n    this._promise = this._generator = null;\n    if (debug.cancellation() && this._finallyPromise !== null) {\n        this._finallyPromise._fulfill();\n        this._finallyPromise = null;\n    }\n};\n\nPromiseSpawn.prototype._promiseCancelled = function() {\n    if (this._isResolved()) return;\n    var implementsReturn = typeof this._generator[\"return\"] !== \"undefined\";\n\n    var result;\n    if (!implementsReturn) {\n        var reason = new Promise.CancellationError(\n            \"generator .return() sentinel\");\n        Promise.coroutine.returnSentinel = reason;\n        this._promise._attachExtraTrace(reason);\n        this._promise._pushContext();\n        result = tryCatch(this._generator[\"throw\"]).call(this._generator,\n                                                         reason);\n        this._promise._popContext();\n    } else {\n        this._promise._pushContext();\n        result = tryCatch(this._generator[\"return\"]).call(this._generator,\n                                                          undefined);\n        this._promise._popContext();\n    }\n    this._cancellationPhase = true;\n    this._yieldedPromise = null;\n    this._continue(result);\n};\n\nPromiseSpawn.prototype._promiseFulfilled = function(value) {\n    this._yieldedPromise = null;\n    this._promise._pushContext();\n    var result = tryCatch(this._generator.next).call(this._generator, value);\n    this._promise._popContext();\n    this._continue(result);\n};\n\nPromiseSpawn.prototype._promiseRejected = function(reason) {\n    this._yieldedPromise = null;\n    this._promise._attachExtraTrace(reason);\n    this._promise._pushContext();\n    var result = tryCatch(this._generator[\"throw\"])\n        .call(this._generator, reason);\n    this._promise._popContext();\n    this._continue(result);\n};\n\nPromiseSpawn.prototype._resultCancelled = function() {\n    if (this._yieldedPromise instanceof Promise) {\n        var promise = this._yieldedPromise;\n        this._yieldedPromise = null;\n        promise.cancel();\n    }\n};\n\nPromiseSpawn.prototype.promise = function () {\n    return this._promise;\n};\n\nPromiseSpawn.prototype._run = function () {\n    this._generator = this._generatorFunction.call(this._receiver);\n    this._receiver =\n        this._generatorFunction = undefined;\n    this._promiseFulfilled(undefined);\n};\n\nPromiseSpawn.prototype._continue = function (result) {\n    var promise = this._promise;\n    if (result === errorObj) {\n        this._cleanup();\n        if (this._cancellationPhase) {\n            return promise.cancel();\n        } else {\n            return promise._rejectCallback(result.e, false);\n        }\n    }\n\n    var value = result.value;\n    if (result.done === true) {\n        this._cleanup();\n        if (this._cancellationPhase) {\n            return promise.cancel();\n        } else {\n            return promise._resolveCallback(value);\n        }\n    } else {\n        var maybePromise = tryConvertToPromise(value, this._promise);\n        if (!(maybePromise instanceof Promise)) {\n            maybePromise =\n                promiseFromYieldHandler(maybePromise,\n                                        this._yieldHandlers,\n                                        this._promise);\n            if (maybePromise === null) {\n                this._promiseRejected(\n                    new TypeError(\n                        \"A value %s was yielded that could not be treated as a promise\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\\u000a\".replace(\"%s\", String(value)) +\n                        \"From coroutine:\\u000a\" +\n                        this._stack.split(\"\\n\").slice(1, -7).join(\"\\n\")\n                    )\n                );\n                return;\n            }\n        }\n        maybePromise = maybePromise._target();\n        var bitField = maybePromise._bitField;\n        ;\n        if (((bitField & 50397184) === 0)) {\n            this._yieldedPromise = maybePromise;\n            maybePromise._proxy(this, null);\n        } else if (((bitField & 33554432) !== 0)) {\n            Promise._async.invoke(\n                this._promiseFulfilled, this, maybePromise._value()\n            );\n        } else if (((bitField & 16777216) !== 0)) {\n            Promise._async.invoke(\n                this._promiseRejected, this, maybePromise._reason()\n            );\n        } else {\n            this._promiseCancelled();\n        }\n    }\n};\n\nPromise.coroutine = function (generatorFunction, options) {\n    if (typeof generatorFunction !== \"function\") {\n        throw new TypeError(\"generatorFunction must be a function\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    var yieldHandler = Object(options).yieldHandler;\n    var PromiseSpawn$ = PromiseSpawn;\n    var stack = new Error().stack;\n    return function () {\n        var generator = generatorFunction.apply(this, arguments);\n        var spawn = new PromiseSpawn$(undefined, undefined, yieldHandler,\n                                      stack);\n        var ret = spawn.promise();\n        spawn._generator = generator;\n        spawn._promiseFulfilled(undefined);\n        return ret;\n    };\n};\n\nPromise.coroutine.addYieldHandler = function(fn) {\n    if (typeof fn !== \"function\") {\n        throw new TypeError(\"expecting a function but got \" + util.classString(fn));\n    }\n    yieldHandlers.push(fn);\n};\n\nPromise.spawn = function (generatorFunction) {\n    debug.deprecated(\"Promise.spawn()\", \"Promise.coroutine()\");\n    if (typeof generatorFunction !== \"function\") {\n        return apiRejection(\"generatorFunction must be a function\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    var spawn = new PromiseSpawn(generatorFunction, this);\n    var ret = spawn.promise();\n    spawn._run(Promise.spawn);\n    return ret;\n};\n};\n\n},{\"./errors\":12,\"./util\":36}],17:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports =\nfunction(Promise, PromiseArray, tryConvertToPromise, INTERNAL, async) {\nvar util = _dereq_(\"./util\");\nvar canEvaluate = util.canEvaluate;\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\nvar reject;\n\nif (!true) {\nif (canEvaluate) {\n    var thenCallback = function(i) {\n        return new Function(\"value\", \"holder\", \"                             \\n\\\n            'use strict';                                                    \\n\\\n            holder.pIndex = value;                                           \\n\\\n            holder.checkFulfillment(this);                                   \\n\\\n            \".replace(/Index/g, i));\n    };\n\n    var promiseSetter = function(i) {\n        return new Function(\"promise\", \"holder\", \"                           \\n\\\n            'use strict';                                                    \\n\\\n            holder.pIndex = promise;                                         \\n\\\n            \".replace(/Index/g, i));\n    };\n\n    var generateHolderClass = function(total) {\n        var props = new Array(total);\n        for (var i = 0; i < props.length; ++i) {\n            props[i] = \"this.p\" + (i+1);\n        }\n        var assignment = props.join(\" = \") + \" = null;\";\n        var cancellationCode= \"var promise;\\n\" + props.map(function(prop) {\n            return \"                                                         \\n\\\n                promise = \" + prop + \";                                      \\n\\\n                if (promise instanceof Promise) {                            \\n\\\n                    promise.cancel();                                        \\n\\\n                }                                                            \\n\\\n            \";\n        }).join(\"\\n\");\n        var passedArguments = props.join(\", \");\n        var name = \"Holder$\" + total;\n\n\n        var code = \"return function(tryCatch, errorObj, Promise, async) {    \\n\\\n            'use strict';                                                    \\n\\\n            function [TheName](fn) {                                         \\n\\\n                [TheProperties]                                              \\n\\\n                this.fn = fn;                                                \\n\\\n                this.asyncNeeded = true;                                     \\n\\\n                this.now = 0;                                                \\n\\\n            }                                                                \\n\\\n                                                                             \\n\\\n            [TheName].prototype._callFunction = function(promise) {          \\n\\\n                promise._pushContext();                                      \\n\\\n                var ret = tryCatch(this.fn)([ThePassedArguments]);           \\n\\\n                promise._popContext();                                       \\n\\\n                if (ret === errorObj) {                                      \\n\\\n                    promise._rejectCallback(ret.e, false);                   \\n\\\n                } else {                                                     \\n\\\n                    promise._resolveCallback(ret);                           \\n\\\n                }                                                            \\n\\\n            };                                                               \\n\\\n                                                                             \\n\\\n            [TheName].prototype.checkFulfillment = function(promise) {       \\n\\\n                var now = ++this.now;                                        \\n\\\n                if (now === [TheTotal]) {                                    \\n\\\n                    if (this.asyncNeeded) {                                  \\n\\\n                        async.invoke(this._callFunction, this, promise);     \\n\\\n                    } else {                                                 \\n\\\n                        this._callFunction(promise);                         \\n\\\n                    }                                                        \\n\\\n                                                                             \\n\\\n                }                                                            \\n\\\n            };                                                               \\n\\\n                                                                             \\n\\\n            [TheName].prototype._resultCancelled = function() {              \\n\\\n                [CancellationCode]                                           \\n\\\n            };                                                               \\n\\\n                                                                             \\n\\\n            return [TheName];                                                \\n\\\n        }(tryCatch, errorObj, Promise, async);                               \\n\\\n        \";\n\n        code = code.replace(/\\[TheName\\]/g, name)\n            .replace(/\\[TheTotal\\]/g, total)\n            .replace(/\\[ThePassedArguments\\]/g, passedArguments)\n            .replace(/\\[TheProperties\\]/g, assignment)\n            .replace(/\\[CancellationCode\\]/g, cancellationCode);\n\n        return new Function(\"tryCatch\", \"errorObj\", \"Promise\", \"async\", code)\n                           (tryCatch, errorObj, Promise, async);\n    };\n\n    var holderClasses = [];\n    var thenCallbacks = [];\n    var promiseSetters = [];\n\n    for (var i = 0; i < 8; ++i) {\n        holderClasses.push(generateHolderClass(i + 1));\n        thenCallbacks.push(thenCallback(i + 1));\n        promiseSetters.push(promiseSetter(i + 1));\n    }\n\n    reject = function (reason) {\n        this._reject(reason);\n    };\n}}\n\nPromise.join = function () {\n    var last = arguments.length - 1;\n    var fn;\n    if (last > 0 && typeof arguments[last] === \"function\") {\n        fn = arguments[last];\n        if (!true) {\n            if (last <= 8 && canEvaluate) {\n                var ret = new Promise(INTERNAL);\n                ret._captureStackTrace();\n                var HolderClass = holderClasses[last - 1];\n                var holder = new HolderClass(fn);\n                var callbacks = thenCallbacks;\n\n                for (var i = 0; i < last; ++i) {\n                    var maybePromise = tryConvertToPromise(arguments[i], ret);\n                    if (maybePromise instanceof Promise) {\n                        maybePromise = maybePromise._target();\n                        var bitField = maybePromise._bitField;\n                        ;\n                        if (((bitField & 50397184) === 0)) {\n                            maybePromise._then(callbacks[i], reject,\n                                               undefined, ret, holder);\n                            promiseSetters[i](maybePromise, holder);\n                            holder.asyncNeeded = false;\n                        } else if (((bitField & 33554432) !== 0)) {\n                            callbacks[i].call(ret,\n                                              maybePromise._value(), holder);\n                        } else if (((bitField & 16777216) !== 0)) {\n                            ret._reject(maybePromise._reason());\n                        } else {\n                            ret._cancel();\n                        }\n                    } else {\n                        callbacks[i].call(ret, maybePromise, holder);\n                    }\n                }\n\n                if (!ret._isFateSealed()) {\n                    if (holder.asyncNeeded) {\n                        var context = Promise._getContext();\n                        holder.fn = util.contextBind(context, holder.fn);\n                    }\n                    ret._setAsyncGuaranteed();\n                    ret._setOnCancel(holder);\n                }\n                return ret;\n            }\n        }\n    }\n    var args = [].slice.call(arguments);;\n    if (fn) args.pop();\n    var ret = new PromiseArray(args).promise();\n    return fn !== undefined ? ret.spread(fn) : ret;\n};\n\n};\n\n},{\"./util\":36}],18:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise,\n                          PromiseArray,\n                          apiRejection,\n                          tryConvertToPromise,\n                          INTERNAL,\n                          debug) {\nvar util = _dereq_(\"./util\");\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\nvar async = Promise._async;\n\nfunction MappingPromiseArray(promises, fn, limit, _filter) {\n    this.constructor$(promises);\n    this._promise._captureStackTrace();\n    var context = Promise._getContext();\n    this._callback = util.contextBind(context, fn);\n    this._preservedValues = _filter === INTERNAL\n        ? new Array(this.length())\n        : null;\n    this._limit = limit;\n    this._inFlight = 0;\n    this._queue = [];\n    async.invoke(this._asyncInit, this, undefined);\n    if (util.isArray(promises)) {\n        for (var i = 0; i < promises.length; ++i) {\n            var maybePromise = promises[i];\n            if (maybePromise instanceof Promise) {\n                maybePromise.suppressUnhandledRejections();\n            }\n        }\n    }\n}\nutil.inherits(MappingPromiseArray, PromiseArray);\n\nMappingPromiseArray.prototype._asyncInit = function() {\n    this._init$(undefined, -2);\n};\n\nMappingPromiseArray.prototype._init = function () {};\n\nMappingPromiseArray.prototype._promiseFulfilled = function (value, index) {\n    var values = this._values;\n    var length = this.length();\n    var preservedValues = this._preservedValues;\n    var limit = this._limit;\n\n    if (index < 0) {\n        index = (index * -1) - 1;\n        values[index] = value;\n        if (limit >= 1) {\n            this._inFlight--;\n            this._drainQueue();\n            if (this._isResolved()) return true;\n        }\n    } else {\n        if (limit >= 1 && this._inFlight >= limit) {\n            values[index] = value;\n            this._queue.push(index);\n            return false;\n        }\n        if (preservedValues !== null) preservedValues[index] = value;\n\n        var promise = this._promise;\n        var callback = this._callback;\n        var receiver = promise._boundValue();\n        promise._pushContext();\n        var ret = tryCatch(callback).call(receiver, value, index, length);\n        var promiseCreated = promise._popContext();\n        debug.checkForgottenReturns(\n            ret,\n            promiseCreated,\n            preservedValues !== null ? \"Promise.filter\" : \"Promise.map\",\n            promise\n        );\n        if (ret === errorObj) {\n            this._reject(ret.e);\n            return true;\n        }\n\n        var maybePromise = tryConvertToPromise(ret, this._promise);\n        if (maybePromise instanceof Promise) {\n            maybePromise = maybePromise._target();\n            var bitField = maybePromise._bitField;\n            ;\n            if (((bitField & 50397184) === 0)) {\n                if (limit >= 1) this._inFlight++;\n                values[index] = maybePromise;\n                maybePromise._proxy(this, (index + 1) * -1);\n                return false;\n            } else if (((bitField & 33554432) !== 0)) {\n                ret = maybePromise._value();\n            } else if (((bitField & 16777216) !== 0)) {\n                this._reject(maybePromise._reason());\n                return true;\n            } else {\n                this._cancel();\n                return true;\n            }\n        }\n        values[index] = ret;\n    }\n    var totalResolved = ++this._totalResolved;\n    if (totalResolved >= length) {\n        if (preservedValues !== null) {\n            this._filter(values, preservedValues);\n        } else {\n            this._resolve(values);\n        }\n        return true;\n    }\n    return false;\n};\n\nMappingPromiseArray.prototype._drainQueue = function () {\n    var queue = this._queue;\n    var limit = this._limit;\n    var values = this._values;\n    while (queue.length > 0 && this._inFlight < limit) {\n        if (this._isResolved()) return;\n        var index = queue.pop();\n        this._promiseFulfilled(values[index], index);\n    }\n};\n\nMappingPromiseArray.prototype._filter = function (booleans, values) {\n    var len = values.length;\n    var ret = new Array(len);\n    var j = 0;\n    for (var i = 0; i < len; ++i) {\n        if (booleans[i]) ret[j++] = values[i];\n    }\n    ret.length = j;\n    this._resolve(ret);\n};\n\nMappingPromiseArray.prototype.preservedValues = function () {\n    return this._preservedValues;\n};\n\nfunction map(promises, fn, options, _filter) {\n    if (typeof fn !== \"function\") {\n        return apiRejection(\"expecting a function but got \" + util.classString(fn));\n    }\n\n    var limit = 0;\n    if (options !== undefined) {\n        if (typeof options === \"object\" && options !== null) {\n            if (typeof options.concurrency !== \"number\") {\n                return Promise.reject(\n                    new TypeError(\"'concurrency' must be a number but it is \" +\n                                    util.classString(options.concurrency)));\n            }\n            limit = options.concurrency;\n        } else {\n            return Promise.reject(new TypeError(\n                            \"options argument must be an object but it is \" +\n                             util.classString(options)));\n        }\n    }\n    limit = typeof limit === \"number\" &&\n        isFinite(limit) && limit >= 1 ? limit : 0;\n    return new MappingPromiseArray(promises, fn, limit, _filter).promise();\n}\n\nPromise.prototype.map = function (fn, options) {\n    return map(this, fn, options, null);\n};\n\nPromise.map = function (promises, fn, options, _filter) {\n    return map(promises, fn, options, _filter);\n};\n\n\n};\n\n},{\"./util\":36}],19:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports =\nfunction(Promise, INTERNAL, tryConvertToPromise, apiRejection, debug) {\nvar util = _dereq_(\"./util\");\nvar tryCatch = util.tryCatch;\n\nPromise.method = function (fn) {\n    if (typeof fn !== \"function\") {\n        throw new Promise.TypeError(\"expecting a function but got \" + util.classString(fn));\n    }\n    return function () {\n        var ret = new Promise(INTERNAL);\n        ret._captureStackTrace();\n        ret._pushContext();\n        var value = tryCatch(fn).apply(this, arguments);\n        var promiseCreated = ret._popContext();\n        debug.checkForgottenReturns(\n            value, promiseCreated, \"Promise.method\", ret);\n        ret._resolveFromSyncValue(value);\n        return ret;\n    };\n};\n\nPromise.attempt = Promise[\"try\"] = function (fn) {\n    if (typeof fn !== \"function\") {\n        return apiRejection(\"expecting a function but got \" + util.classString(fn));\n    }\n    var ret = new Promise(INTERNAL);\n    ret._captureStackTrace();\n    ret._pushContext();\n    var value;\n    if (arguments.length > 1) {\n        debug.deprecated(\"calling Promise.try with more than 1 argument\");\n        var arg = arguments[1];\n        var ctx = arguments[2];\n        value = util.isArray(arg) ? tryCatch(fn).apply(ctx, arg)\n                                  : tryCatch(fn).call(ctx, arg);\n    } else {\n        value = tryCatch(fn)();\n    }\n    var promiseCreated = ret._popContext();\n    debug.checkForgottenReturns(\n        value, promiseCreated, \"Promise.try\", ret);\n    ret._resolveFromSyncValue(value);\n    return ret;\n};\n\nPromise.prototype._resolveFromSyncValue = function (value) {\n    if (value === util.errorObj) {\n        this._rejectCallback(value.e, false);\n    } else {\n        this._resolveCallback(value, true);\n    }\n};\n};\n\n},{\"./util\":36}],20:[function(_dereq_,module,exports){\n\"use strict\";\nvar util = _dereq_(\"./util\");\nvar maybeWrapAsError = util.maybeWrapAsError;\nvar errors = _dereq_(\"./errors\");\nvar OperationalError = errors.OperationalError;\nvar es5 = _dereq_(\"./es5\");\n\nfunction isUntypedError(obj) {\n    return obj instanceof Error &&\n        es5.getPrototypeOf(obj) === Error.prototype;\n}\n\nvar rErrorKey = /^(?:name|message|stack|cause)$/;\nfunction wrapAsOperationalError(obj) {\n    var ret;\n    if (isUntypedError(obj)) {\n        ret = new OperationalError(obj);\n        ret.name = obj.name;\n        ret.message = obj.message;\n        ret.stack = obj.stack;\n        var keys = es5.keys(obj);\n        for (var i = 0; i < keys.length; ++i) {\n            var key = keys[i];\n            if (!rErrorKey.test(key)) {\n                ret[key] = obj[key];\n            }\n        }\n        return ret;\n    }\n    util.markAsOriginatingFromRejection(obj);\n    return obj;\n}\n\nfunction nodebackForPromise(promise, multiArgs) {\n    return function(err, value) {\n        if (promise === null) return;\n        if (err) {\n            var wrapped = wrapAsOperationalError(maybeWrapAsError(err));\n            promise._attachExtraTrace(wrapped);\n            promise._reject(wrapped);\n        } else if (!multiArgs) {\n            promise._fulfill(value);\n        } else {\n            var args = [].slice.call(arguments, 1);;\n            promise._fulfill(args);\n        }\n        promise = null;\n    };\n}\n\nmodule.exports = nodebackForPromise;\n\n},{\"./errors\":12,\"./es5\":13,\"./util\":36}],21:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise) {\nvar util = _dereq_(\"./util\");\nvar async = Promise._async;\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\n\nfunction spreadAdapter(val, nodeback) {\n    var promise = this;\n    if (!util.isArray(val)) return successAdapter.call(promise, val, nodeback);\n    var ret =\n        tryCatch(nodeback).apply(promise._boundValue(), [null].concat(val));\n    if (ret === errorObj) {\n        async.throwLater(ret.e);\n    }\n}\n\nfunction successAdapter(val, nodeback) {\n    var promise = this;\n    var receiver = promise._boundValue();\n    var ret = val === undefined\n        ? tryCatch(nodeback).call(receiver, null)\n        : tryCatch(nodeback).call(receiver, null, val);\n    if (ret === errorObj) {\n        async.throwLater(ret.e);\n    }\n}\nfunction errorAdapter(reason, nodeback) {\n    var promise = this;\n    if (!reason) {\n        var newReason = new Error(reason + \"\");\n        newReason.cause = reason;\n        reason = newReason;\n    }\n    var ret = tryCatch(nodeback).call(promise._boundValue(), reason);\n    if (ret === errorObj) {\n        async.throwLater(ret.e);\n    }\n}\n\nPromise.prototype.asCallback = Promise.prototype.nodeify = function (nodeback,\n                                                                     options) {\n    if (typeof nodeback == \"function\") {\n        var adapter = successAdapter;\n        if (options !== undefined && Object(options).spread) {\n            adapter = spreadAdapter;\n        }\n        this._then(\n            adapter,\n            errorAdapter,\n            undefined,\n            this,\n            nodeback\n        );\n    }\n    return this;\n};\n};\n\n},{\"./util\":36}],22:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function() {\nvar makeSelfResolutionError = function () {\n    return new TypeError(\"circular promise resolution chain\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n};\nvar reflectHandler = function() {\n    return new Promise.PromiseInspection(this._target());\n};\nvar apiRejection = function(msg) {\n    return Promise.reject(new TypeError(msg));\n};\nfunction Proxyable() {}\nvar UNDEFINED_BINDING = {};\nvar util = _dereq_(\"./util\");\nutil.setReflectHandler(reflectHandler);\n\nvar getDomain = function() {\n    var domain = process.domain;\n    if (domain === undefined) {\n        return null;\n    }\n    return domain;\n};\nvar getContextDefault = function() {\n    return null;\n};\nvar getContextDomain = function() {\n    return {\n        domain: getDomain(),\n        async: null\n    };\n};\nvar AsyncResource = util.isNode && util.nodeSupportsAsyncResource ?\n    _dereq_(\"async_hooks\").AsyncResource : null;\nvar getContextAsyncHooks = function() {\n    return {\n        domain: getDomain(),\n        async: new AsyncResource(\"Bluebird::Promise\")\n    };\n};\nvar getContext = util.isNode ? getContextDomain : getContextDefault;\nutil.notEnumerableProp(Promise, \"_getContext\", getContext);\nvar enableAsyncHooks = function() {\n    getContext = getContextAsyncHooks;\n    util.notEnumerableProp(Promise, \"_getContext\", getContextAsyncHooks);\n};\nvar disableAsyncHooks = function() {\n    getContext = getContextDomain;\n    util.notEnumerableProp(Promise, \"_getContext\", getContextDomain);\n};\n\nvar es5 = _dereq_(\"./es5\");\nvar Async = _dereq_(\"./async\");\nvar async = new Async();\nes5.defineProperty(Promise, \"_async\", {value: async});\nvar errors = _dereq_(\"./errors\");\nvar TypeError = Promise.TypeError = errors.TypeError;\nPromise.RangeError = errors.RangeError;\nvar CancellationError = Promise.CancellationError = errors.CancellationError;\nPromise.TimeoutError = errors.TimeoutError;\nPromise.OperationalError = errors.OperationalError;\nPromise.RejectionError = errors.OperationalError;\nPromise.AggregateError = errors.AggregateError;\nvar INTERNAL = function(){};\nvar APPLY = {};\nvar NEXT_FILTER = {};\nvar tryConvertToPromise = _dereq_(\"./thenables\")(Promise, INTERNAL);\nvar PromiseArray =\n    _dereq_(\"./promise_array\")(Promise, INTERNAL,\n                               tryConvertToPromise, apiRejection, Proxyable);\nvar Context = _dereq_(\"./context\")(Promise);\n /*jshint unused:false*/\nvar createContext = Context.create;\n\nvar debug = _dereq_(\"./debuggability\")(Promise, Context,\n    enableAsyncHooks, disableAsyncHooks);\nvar CapturedTrace = debug.CapturedTrace;\nvar PassThroughHandlerContext =\n    _dereq_(\"./finally\")(Promise, tryConvertToPromise, NEXT_FILTER);\nvar catchFilter = _dereq_(\"./catch_filter\")(NEXT_FILTER);\nvar nodebackForPromise = _dereq_(\"./nodeback\");\nvar errorObj = util.errorObj;\nvar tryCatch = util.tryCatch;\nfunction check(self, executor) {\n    if (self == null || self.constructor !== Promise) {\n        throw new TypeError(\"the promise constructor cannot be invoked directly\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    if (typeof executor !== \"function\") {\n        throw new TypeError(\"expecting a function but got \" + util.classString(executor));\n    }\n\n}\n\nfunction Promise(executor) {\n    if (executor !== INTERNAL) {\n        check(this, executor);\n    }\n    this._bitField = 0;\n    this._fulfillmentHandler0 = undefined;\n    this._rejectionHandler0 = undefined;\n    this._promise0 = undefined;\n    this._receiver0 = undefined;\n    this._resolveFromExecutor(executor);\n    this._promiseCreated();\n    this._fireEvent(\"promiseCreated\", this);\n}\n\nPromise.prototype.toString = function () {\n    return \"[object Promise]\";\n};\n\nPromise.prototype.caught = Promise.prototype[\"catch\"] = function (fn) {\n    var len = arguments.length;\n    if (len > 1) {\n        var catchInstances = new Array(len - 1),\n            j = 0, i;\n        for (i = 0; i < len - 1; ++i) {\n            var item = arguments[i];\n            if (util.isObject(item)) {\n                catchInstances[j++] = item;\n            } else {\n                return apiRejection(\"Catch statement predicate: \" +\n                    \"expecting an object but got \" + util.classString(item));\n            }\n        }\n        catchInstances.length = j;\n        fn = arguments[i];\n\n        if (typeof fn !== \"function\") {\n            throw new TypeError(\"The last argument to .catch() \" +\n                \"must be a function, got \" + util.toString(fn));\n        }\n        return this.then(undefined, catchFilter(catchInstances, fn, this));\n    }\n    return this.then(undefined, fn);\n};\n\nPromise.prototype.reflect = function () {\n    return this._then(reflectHandler,\n        reflectHandler, undefined, this, undefined);\n};\n\nPromise.prototype.then = function (didFulfill, didReject) {\n    if (debug.warnings() && arguments.length > 0 &&\n        typeof didFulfill !== \"function\" &&\n        typeof didReject !== \"function\") {\n        var msg = \".then() only accepts functions but was passed: \" +\n                util.classString(didFulfill);\n        if (arguments.length > 1) {\n            msg += \", \" + util.classString(didReject);\n        }\n        this._warn(msg);\n    }\n    return this._then(didFulfill, didReject, undefined, undefined, undefined);\n};\n\nPromise.prototype.done = function (didFulfill, didReject) {\n    var promise =\n        this._then(didFulfill, didReject, undefined, undefined, undefined);\n    promise._setIsFinal();\n};\n\nPromise.prototype.spread = function (fn) {\n    if (typeof fn !== \"function\") {\n        return apiRejection(\"expecting a function but got \" + util.classString(fn));\n    }\n    return this.all()._then(fn, undefined, undefined, APPLY, undefined);\n};\n\nPromise.prototype.toJSON = function () {\n    var ret = {\n        isFulfilled: false,\n        isRejected: false,\n        fulfillmentValue: undefined,\n        rejectionReason: undefined\n    };\n    if (this.isFulfilled()) {\n        ret.fulfillmentValue = this.value();\n        ret.isFulfilled = true;\n    } else if (this.isRejected()) {\n        ret.rejectionReason = this.reason();\n        ret.isRejected = true;\n    }\n    return ret;\n};\n\nPromise.prototype.all = function () {\n    if (arguments.length > 0) {\n        this._warn(\".all() was passed arguments but it does not take any\");\n    }\n    return new PromiseArray(this).promise();\n};\n\nPromise.prototype.error = function (fn) {\n    return this.caught(util.originatesFromRejection, fn);\n};\n\nPromise.getNewLibraryCopy = module.exports;\n\nPromise.is = function (val) {\n    return val instanceof Promise;\n};\n\nPromise.fromNode = Promise.fromCallback = function(fn) {\n    var ret = new Promise(INTERNAL);\n    ret._captureStackTrace();\n    var multiArgs = arguments.length > 1 ? !!Object(arguments[1]).multiArgs\n                                         : false;\n    var result = tryCatch(fn)(nodebackForPromise(ret, multiArgs));\n    if (result === errorObj) {\n        ret._rejectCallback(result.e, true);\n    }\n    if (!ret._isFateSealed()) ret._setAsyncGuaranteed();\n    return ret;\n};\n\nPromise.all = function (promises) {\n    return new PromiseArray(promises).promise();\n};\n\nPromise.cast = function (obj) {\n    var ret = tryConvertToPromise(obj);\n    if (!(ret instanceof Promise)) {\n        ret = new Promise(INTERNAL);\n        ret._captureStackTrace();\n        ret._setFulfilled();\n        ret._rejectionHandler0 = obj;\n    }\n    return ret;\n};\n\nPromise.resolve = Promise.fulfilled = Promise.cast;\n\nPromise.reject = Promise.rejected = function (reason) {\n    var ret = new Promise(INTERNAL);\n    ret._captureStackTrace();\n    ret._rejectCallback(reason, true);\n    return ret;\n};\n\nPromise.setScheduler = function(fn) {\n    if (typeof fn !== \"function\") {\n        throw new TypeError(\"expecting a function but got \" + util.classString(fn));\n    }\n    return async.setScheduler(fn);\n};\n\nPromise.prototype._then = function (\n    didFulfill,\n    didReject,\n    _,    receiver,\n    internalData\n) {\n    var haveInternalData = internalData !== undefined;\n    var promise = haveInternalData ? internalData : new Promise(INTERNAL);\n    var target = this._target();\n    var bitField = target._bitField;\n\n    if (!haveInternalData) {\n        promise._propagateFrom(this, 3);\n        promise._captureStackTrace();\n        if (receiver === undefined &&\n            ((this._bitField & 2097152) !== 0)) {\n            if (!((bitField & 50397184) === 0)) {\n                receiver = this._boundValue();\n            } else {\n                receiver = target === this ? undefined : this._boundTo;\n            }\n        }\n        this._fireEvent(\"promiseChained\", this, promise);\n    }\n\n    var context = getContext();\n    if (!((bitField & 50397184) === 0)) {\n        var handler, value, settler = target._settlePromiseCtx;\n        if (((bitField & 33554432) !== 0)) {\n            value = target._rejectionHandler0;\n            handler = didFulfill;\n        } else if (((bitField & 16777216) !== 0)) {\n            value = target._fulfillmentHandler0;\n            handler = didReject;\n            target._unsetRejectionIsUnhandled();\n        } else {\n            settler = target._settlePromiseLateCancellationObserver;\n            value = new CancellationError(\"late cancellation observer\");\n            target._attachExtraTrace(value);\n            handler = didReject;\n        }\n\n        async.invoke(settler, target, {\n            handler: util.contextBind(context, handler),\n            promise: promise,\n            receiver: receiver,\n            value: value\n        });\n    } else {\n        target._addCallbacks(didFulfill, didReject, promise,\n                receiver, context);\n    }\n\n    return promise;\n};\n\nPromise.prototype._length = function () {\n    return this._bitField & 65535;\n};\n\nPromise.prototype._isFateSealed = function () {\n    return (this._bitField & 117506048) !== 0;\n};\n\nPromise.prototype._isFollowing = function () {\n    return (this._bitField & 67108864) === 67108864;\n};\n\nPromise.prototype._setLength = function (len) {\n    this._bitField = (this._bitField & -65536) |\n        (len & 65535);\n};\n\nPromise.prototype._setFulfilled = function () {\n    this._bitField = this._bitField | 33554432;\n    this._fireEvent(\"promiseFulfilled\", this);\n};\n\nPromise.prototype._setRejected = function () {\n    this._bitField = this._bitField | 16777216;\n    this._fireEvent(\"promiseRejected\", this);\n};\n\nPromise.prototype._setFollowing = function () {\n    this._bitField = this._bitField | 67108864;\n    this._fireEvent(\"promiseResolved\", this);\n};\n\nPromise.prototype._setIsFinal = function () {\n    this._bitField = this._bitField | 4194304;\n};\n\nPromise.prototype._isFinal = function () {\n    return (this._bitField & 4194304) > 0;\n};\n\nPromise.prototype._unsetCancelled = function() {\n    this._bitField = this._bitField & (~65536);\n};\n\nPromise.prototype._setCancelled = function() {\n    this._bitField = this._bitField | 65536;\n    this._fireEvent(\"promiseCancelled\", this);\n};\n\nPromise.prototype._setWillBeCancelled = function() {\n    this._bitField = this._bitField | 8388608;\n};\n\nPromise.prototype._setAsyncGuaranteed = function() {\n    if (async.hasCustomScheduler()) return;\n    var bitField = this._bitField;\n    this._bitField = bitField |\n        (((bitField & 536870912) >> 2) ^\n        134217728);\n};\n\nPromise.prototype._setNoAsyncGuarantee = function() {\n    this._bitField = (this._bitField | 536870912) &\n        (~134217728);\n};\n\nPromise.prototype._receiverAt = function (index) {\n    var ret = index === 0 ? this._receiver0 : this[\n            index * 4 - 4 + 3];\n    if (ret === UNDEFINED_BINDING) {\n        return undefined;\n    } else if (ret === undefined && this._isBound()) {\n        return this._boundValue();\n    }\n    return ret;\n};\n\nPromise.prototype._promiseAt = function (index) {\n    return this[\n            index * 4 - 4 + 2];\n};\n\nPromise.prototype._fulfillmentHandlerAt = function (index) {\n    return this[\n            index * 4 - 4 + 0];\n};\n\nPromise.prototype._rejectionHandlerAt = function (index) {\n    return this[\n            index * 4 - 4 + 1];\n};\n\nPromise.prototype._boundValue = function() {};\n\nPromise.prototype._migrateCallback0 = function (follower) {\n    var bitField = follower._bitField;\n    var fulfill = follower._fulfillmentHandler0;\n    var reject = follower._rejectionHandler0;\n    var promise = follower._promise0;\n    var receiver = follower._receiverAt(0);\n    if (receiver === undefined) receiver = UNDEFINED_BINDING;\n    this._addCallbacks(fulfill, reject, promise, receiver, null);\n};\n\nPromise.prototype._migrateCallbackAt = function (follower, index) {\n    var fulfill = follower._fulfillmentHandlerAt(index);\n    var reject = follower._rejectionHandlerAt(index);\n    var promise = follower._promiseAt(index);\n    var receiver = follower._receiverAt(index);\n    if (receiver === undefined) receiver = UNDEFINED_BINDING;\n    this._addCallbacks(fulfill, reject, promise, receiver, null);\n};\n\nPromise.prototype._addCallbacks = function (\n    fulfill,\n    reject,\n    promise,\n    receiver,\n    context\n) {\n    var index = this._length();\n\n    if (index >= 65535 - 4) {\n        index = 0;\n        this._setLength(0);\n    }\n\n    if (index === 0) {\n        this._promise0 = promise;\n        this._receiver0 = receiver;\n        if (typeof fulfill === \"function\") {\n            this._fulfillmentHandler0 = util.contextBind(context, fulfill);\n        }\n        if (typeof reject === \"function\") {\n            this._rejectionHandler0 = util.contextBind(context, reject);\n        }\n    } else {\n        var base = index * 4 - 4;\n        this[base + 2] = promise;\n        this[base + 3] = receiver;\n        if (typeof fulfill === \"function\") {\n            this[base + 0] =\n                util.contextBind(context, fulfill);\n        }\n        if (typeof reject === \"function\") {\n            this[base + 1] =\n                util.contextBind(context, reject);\n        }\n    }\n    this._setLength(index + 1);\n    return index;\n};\n\nPromise.prototype._proxy = function (proxyable, arg) {\n    this._addCallbacks(undefined, undefined, arg, proxyable, null);\n};\n\nPromise.prototype._resolveCallback = function(value, shouldBind) {\n    if (((this._bitField & 117506048) !== 0)) return;\n    if (value === this)\n        return this._rejectCallback(makeSelfResolutionError(), false);\n    var maybePromise = tryConvertToPromise(value, this);\n    if (!(maybePromise instanceof Promise)) return this._fulfill(value);\n\n    if (shouldBind) this._propagateFrom(maybePromise, 2);\n\n\n    var promise = maybePromise._target();\n\n    if (promise === this) {\n        this._reject(makeSelfResolutionError());\n        return;\n    }\n\n    var bitField = promise._bitField;\n    if (((bitField & 50397184) === 0)) {\n        var len = this._length();\n        if (len > 0) promise._migrateCallback0(this);\n        for (var i = 1; i < len; ++i) {\n            promise._migrateCallbackAt(this, i);\n        }\n        this._setFollowing();\n        this._setLength(0);\n        this._setFollowee(maybePromise);\n    } else if (((bitField & 33554432) !== 0)) {\n        this._fulfill(promise._value());\n    } else if (((bitField & 16777216) !== 0)) {\n        this._reject(promise._reason());\n    } else {\n        var reason = new CancellationError(\"late cancellation observer\");\n        promise._attachExtraTrace(reason);\n        this._reject(reason);\n    }\n};\n\nPromise.prototype._rejectCallback =\nfunction(reason, synchronous, ignoreNonErrorWarnings) {\n    var trace = util.ensureErrorObject(reason);\n    var hasStack = trace === reason;\n    if (!hasStack && !ignoreNonErrorWarnings && debug.warnings()) {\n        var message = \"a promise was rejected with a non-error: \" +\n            util.classString(reason);\n        this._warn(message, true);\n    }\n    this._attachExtraTrace(trace, synchronous ? hasStack : false);\n    this._reject(reason);\n};\n\nPromise.prototype._resolveFromExecutor = function (executor) {\n    if (executor === INTERNAL) return;\n    var promise = this;\n    this._captureStackTrace();\n    this._pushContext();\n    var synchronous = true;\n    var r = this._execute(executor, function(value) {\n        promise._resolveCallback(value);\n    }, function (reason) {\n        promise._rejectCallback(reason, synchronous);\n    });\n    synchronous = false;\n    this._popContext();\n\n    if (r !== undefined) {\n        promise._rejectCallback(r, true);\n    }\n};\n\nPromise.prototype._settlePromiseFromHandler = function (\n    handler, receiver, value, promise\n) {\n    var bitField = promise._bitField;\n    if (((bitField & 65536) !== 0)) return;\n    promise._pushContext();\n    var x;\n    if (receiver === APPLY) {\n        if (!value || typeof value.length !== \"number\") {\n            x = errorObj;\n            x.e = new TypeError(\"cannot .spread() a non-array: \" +\n                                    util.classString(value));\n        } else {\n            x = tryCatch(handler).apply(this._boundValue(), value);\n        }\n    } else {\n        x = tryCatch(handler).call(receiver, value);\n    }\n    var promiseCreated = promise._popContext();\n    bitField = promise._bitField;\n    if (((bitField & 65536) !== 0)) return;\n\n    if (x === NEXT_FILTER) {\n        promise._reject(value);\n    } else if (x === errorObj) {\n        promise._rejectCallback(x.e, false);\n    } else {\n        debug.checkForgottenReturns(x, promiseCreated, \"\",  promise, this);\n        promise._resolveCallback(x);\n    }\n};\n\nPromise.prototype._target = function() {\n    var ret = this;\n    while (ret._isFollowing()) ret = ret._followee();\n    return ret;\n};\n\nPromise.prototype._followee = function() {\n    return this._rejectionHandler0;\n};\n\nPromise.prototype._setFollowee = function(promise) {\n    this._rejectionHandler0 = promise;\n};\n\nPromise.prototype._settlePromise = function(promise, handler, receiver, value) {\n    var isPromise = promise instanceof Promise;\n    var bitField = this._bitField;\n    var asyncGuaranteed = ((bitField & 134217728) !== 0);\n    if (((bitField & 65536) !== 0)) {\n        if (isPromise) promise._invokeInternalOnCancel();\n\n        if (receiver instanceof PassThroughHandlerContext &&\n            receiver.isFinallyHandler()) {\n            receiver.cancelPromise = promise;\n            if (tryCatch(handler).call(receiver, value) === errorObj) {\n                promise._reject(errorObj.e);\n            }\n        } else if (handler === reflectHandler) {\n            promise._fulfill(reflectHandler.call(receiver));\n        } else if (receiver instanceof Proxyable) {\n            receiver._promiseCancelled(promise);\n        } else if (isPromise || promise instanceof PromiseArray) {\n            promise._cancel();\n        } else {\n            receiver.cancel();\n        }\n    } else if (typeof handler === \"function\") {\n        if (!isPromise) {\n            handler.call(receiver, value, promise);\n        } else {\n            if (asyncGuaranteed) promise._setAsyncGuaranteed();\n            this._settlePromiseFromHandler(handler, receiver, value, promise);\n        }\n    } else if (receiver instanceof Proxyable) {\n        if (!receiver._isResolved()) {\n            if (((bitField & 33554432) !== 0)) {\n                receiver._promiseFulfilled(value, promise);\n            } else {\n                receiver._promiseRejected(value, promise);\n            }\n        }\n    } else if (isPromise) {\n        if (asyncGuaranteed) promise._setAsyncGuaranteed();\n        if (((bitField & 33554432) !== 0)) {\n            promise._fulfill(value);\n        } else {\n            promise._reject(value);\n        }\n    }\n};\n\nPromise.prototype._settlePromiseLateCancellationObserver = function(ctx) {\n    var handler = ctx.handler;\n    var promise = ctx.promise;\n    var receiver = ctx.receiver;\n    var value = ctx.value;\n    if (typeof handler === \"function\") {\n        if (!(promise instanceof Promise)) {\n            handler.call(receiver, value, promise);\n        } else {\n            this._settlePromiseFromHandler(handler, receiver, value, promise);\n        }\n    } else if (promise instanceof Promise) {\n        promise._reject(value);\n    }\n};\n\nPromise.prototype._settlePromiseCtx = function(ctx) {\n    this._settlePromise(ctx.promise, ctx.handler, ctx.receiver, ctx.value);\n};\n\nPromise.prototype._settlePromise0 = function(handler, value, bitField) {\n    var promise = this._promise0;\n    var receiver = this._receiverAt(0);\n    this._promise0 = undefined;\n    this._receiver0 = undefined;\n    this._settlePromise(promise, handler, receiver, value);\n};\n\nPromise.prototype._clearCallbackDataAtIndex = function(index) {\n    var base = index * 4 - 4;\n    this[base + 2] =\n    this[base + 3] =\n    this[base + 0] =\n    this[base + 1] = undefined;\n};\n\nPromise.prototype._fulfill = function (value) {\n    var bitField = this._bitField;\n    if (((bitField & 117506048) >>> 16)) return;\n    if (value === this) {\n        var err = makeSelfResolutionError();\n        this._attachExtraTrace(err);\n        return this._reject(err);\n    }\n    this._setFulfilled();\n    this._rejectionHandler0 = value;\n\n    if ((bitField & 65535) > 0) {\n        if (((bitField & 134217728) !== 0)) {\n            this._settlePromises();\n        } else {\n            async.settlePromises(this);\n        }\n        this._dereferenceTrace();\n    }\n};\n\nPromise.prototype._reject = function (reason) {\n    var bitField = this._bitField;\n    if (((bitField & 117506048) >>> 16)) return;\n    this._setRejected();\n    this._fulfillmentHandler0 = reason;\n\n    if (this._isFinal()) {\n        return async.fatalError(reason, util.isNode);\n    }\n\n    if ((bitField & 65535) > 0) {\n        async.settlePromises(this);\n    } else {\n        this._ensurePossibleRejectionHandled();\n    }\n};\n\nPromise.prototype._fulfillPromises = function (len, value) {\n    for (var i = 1; i < len; i++) {\n        var handler = this._fulfillmentHandlerAt(i);\n        var promise = this._promiseAt(i);\n        var receiver = this._receiverAt(i);\n        this._clearCallbackDataAtIndex(i);\n        this._settlePromise(promise, handler, receiver, value);\n    }\n};\n\nPromise.prototype._rejectPromises = function (len, reason) {\n    for (var i = 1; i < len; i++) {\n        var handler = this._rejectionHandlerAt(i);\n        var promise = this._promiseAt(i);\n        var receiver = this._receiverAt(i);\n        this._clearCallbackDataAtIndex(i);\n        this._settlePromise(promise, handler, receiver, reason);\n    }\n};\n\nPromise.prototype._settlePromises = function () {\n    var bitField = this._bitField;\n    var len = (bitField & 65535);\n\n    if (len > 0) {\n        if (((bitField & 16842752) !== 0)) {\n            var reason = this._fulfillmentHandler0;\n            this._settlePromise0(this._rejectionHandler0, reason, bitField);\n            this._rejectPromises(len, reason);\n        } else {\n            var value = this._rejectionHandler0;\n            this._settlePromise0(this._fulfillmentHandler0, value, bitField);\n            this._fulfillPromises(len, value);\n        }\n        this._setLength(0);\n    }\n    this._clearCancellationData();\n};\n\nPromise.prototype._settledValue = function() {\n    var bitField = this._bitField;\n    if (((bitField & 33554432) !== 0)) {\n        return this._rejectionHandler0;\n    } else if (((bitField & 16777216) !== 0)) {\n        return this._fulfillmentHandler0;\n    }\n};\n\nif (typeof Symbol !== \"undefined\" && Symbol.toStringTag) {\n    es5.defineProperty(Promise.prototype, Symbol.toStringTag, {\n        get: function () {\n            return \"Object\";\n        }\n    });\n}\n\nfunction deferResolve(v) {this.promise._resolveCallback(v);}\nfunction deferReject(v) {this.promise._rejectCallback(v, false);}\n\nPromise.defer = Promise.pending = function() {\n    debug.deprecated(\"Promise.defer\", \"new Promise\");\n    var promise = new Promise(INTERNAL);\n    return {\n        promise: promise,\n        resolve: deferResolve,\n        reject: deferReject\n    };\n};\n\nutil.notEnumerableProp(Promise,\n                       \"_makeSelfResolutionError\",\n                       makeSelfResolutionError);\n\n_dereq_(\"./method\")(Promise, INTERNAL, tryConvertToPromise, apiRejection,\n    debug);\n_dereq_(\"./bind\")(Promise, INTERNAL, tryConvertToPromise, debug);\n_dereq_(\"./cancel\")(Promise, PromiseArray, apiRejection, debug);\n_dereq_(\"./direct_resolve\")(Promise);\n_dereq_(\"./synchronous_inspection\")(Promise);\n_dereq_(\"./join\")(\n    Promise, PromiseArray, tryConvertToPromise, INTERNAL, async);\nPromise.Promise = Promise;\nPromise.version = \"3.7.2\";\n_dereq_('./call_get.js')(Promise);\n_dereq_('./generators.js')(Promise, apiRejection, INTERNAL, tryConvertToPromise, Proxyable, debug);\n_dereq_('./map.js')(Promise, PromiseArray, apiRejection, tryConvertToPromise, INTERNAL, debug);\n_dereq_('./nodeify.js')(Promise);\n_dereq_('./promisify.js')(Promise, INTERNAL);\n_dereq_('./props.js')(Promise, PromiseArray, tryConvertToPromise, apiRejection);\n_dereq_('./race.js')(Promise, INTERNAL, tryConvertToPromise, apiRejection);\n_dereq_('./reduce.js')(Promise, PromiseArray, apiRejection, tryConvertToPromise, INTERNAL, debug);\n_dereq_('./settle.js')(Promise, PromiseArray, debug);\n_dereq_('./some.js')(Promise, PromiseArray, apiRejection);\n_dereq_('./timers.js')(Promise, INTERNAL, debug);\n_dereq_('./using.js')(Promise, apiRejection, tryConvertToPromise, createContext, INTERNAL, debug);\n_dereq_('./any.js')(Promise);\n_dereq_('./each.js')(Promise, INTERNAL);\n_dereq_('./filter.js')(Promise, INTERNAL);\n                                                         \n    util.toFastProperties(Promise);                                          \n    util.toFastProperties(Promise.prototype);                                \n    function fillTypes(value) {                                              \n        var p = new Promise(INTERNAL);                                       \n        p._fulfillmentHandler0 = value;                                      \n        p._rejectionHandler0 = value;                                        \n        p._promise0 = value;                                                 \n        p._receiver0 = value;                                                \n    }                                                                        \n    // Complete slack tracking, opt out of field-type tracking and           \n    // stabilize map                                                         \n    fillTypes({a: 1});                                                       \n    fillTypes({b: 2});                                                       \n    fillTypes({c: 3});                                                       \n    fillTypes(1);                                                            \n    fillTypes(function(){});                                                 \n    fillTypes(undefined);                                                    \n    fillTypes(false);                                                        \n    fillTypes(new Promise(INTERNAL));                                        \n    debug.setBounds(Async.firstLineError, util.lastLineError);               \n    return Promise;                                                          \n\n};\n\n},{\"./any.js\":1,\"./async\":2,\"./bind\":3,\"./call_get.js\":5,\"./cancel\":6,\"./catch_filter\":7,\"./context\":8,\"./debuggability\":9,\"./direct_resolve\":10,\"./each.js\":11,\"./errors\":12,\"./es5\":13,\"./filter.js\":14,\"./finally\":15,\"./generators.js\":16,\"./join\":17,\"./map.js\":18,\"./method\":19,\"./nodeback\":20,\"./nodeify.js\":21,\"./promise_array\":23,\"./promisify.js\":24,\"./props.js\":25,\"./race.js\":27,\"./reduce.js\":28,\"./settle.js\":30,\"./some.js\":31,\"./synchronous_inspection\":32,\"./thenables\":33,\"./timers.js\":34,\"./using.js\":35,\"./util\":36,\"async_hooks\":undefined}],23:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL, tryConvertToPromise,\n    apiRejection, Proxyable) {\nvar util = _dereq_(\"./util\");\nvar isArray = util.isArray;\n\nfunction toResolutionValue(val) {\n    switch(val) {\n    case -2: return [];\n    case -3: return {};\n    case -6: return new Map();\n    }\n}\n\nfunction PromiseArray(values) {\n    var promise = this._promise = new Promise(INTERNAL);\n    if (values instanceof Promise) {\n        promise._propagateFrom(values, 3);\n        values.suppressUnhandledRejections();\n    }\n    promise._setOnCancel(this);\n    this._values = values;\n    this._length = 0;\n    this._totalResolved = 0;\n    this._init(undefined, -2);\n}\nutil.inherits(PromiseArray, Proxyable);\n\nPromiseArray.prototype.length = function () {\n    return this._length;\n};\n\nPromiseArray.prototype.promise = function () {\n    return this._promise;\n};\n\nPromiseArray.prototype._init = function init(_, resolveValueIfEmpty) {\n    var values = tryConvertToPromise(this._values, this._promise);\n    if (values instanceof Promise) {\n        values = values._target();\n        var bitField = values._bitField;\n        ;\n        this._values = values;\n\n        if (((bitField & 50397184) === 0)) {\n            this._promise._setAsyncGuaranteed();\n            return values._then(\n                init,\n                this._reject,\n                undefined,\n                this,\n                resolveValueIfEmpty\n           );\n        } else if (((bitField & 33554432) !== 0)) {\n            values = values._value();\n        } else if (((bitField & 16777216) !== 0)) {\n            return this._reject(values._reason());\n        } else {\n            return this._cancel();\n        }\n    }\n    values = util.asArray(values);\n    if (values === null) {\n        var err = apiRejection(\n            \"expecting an array or an iterable object but got \" + util.classString(values)).reason();\n        this._promise._rejectCallback(err, false);\n        return;\n    }\n\n    if (values.length === 0) {\n        if (resolveValueIfEmpty === -5) {\n            this._resolveEmptyArray();\n        }\n        else {\n            this._resolve(toResolutionValue(resolveValueIfEmpty));\n        }\n        return;\n    }\n    this._iterate(values);\n};\n\nPromiseArray.prototype._iterate = function(values) {\n    var len = this.getActualLength(values.length);\n    this._length = len;\n    this._values = this.shouldCopyValues() ? new Array(len) : this._values;\n    var result = this._promise;\n    var isResolved = false;\n    var bitField = null;\n    for (var i = 0; i < len; ++i) {\n        var maybePromise = tryConvertToPromise(values[i], result);\n\n        if (maybePromise instanceof Promise) {\n            maybePromise = maybePromise._target();\n            bitField = maybePromise._bitField;\n        } else {\n            bitField = null;\n        }\n\n        if (isResolved) {\n            if (bitField !== null) {\n                maybePromise.suppressUnhandledRejections();\n            }\n        } else if (bitField !== null) {\n            if (((bitField & 50397184) === 0)) {\n                maybePromise._proxy(this, i);\n                this._values[i] = maybePromise;\n            } else if (((bitField & 33554432) !== 0)) {\n                isResolved = this._promiseFulfilled(maybePromise._value(), i);\n            } else if (((bitField & 16777216) !== 0)) {\n                isResolved = this._promiseRejected(maybePromise._reason(), i);\n            } else {\n                isResolved = this._promiseCancelled(i);\n            }\n        } else {\n            isResolved = this._promiseFulfilled(maybePromise, i);\n        }\n    }\n    if (!isResolved) result._setAsyncGuaranteed();\n};\n\nPromiseArray.prototype._isResolved = function () {\n    return this._values === null;\n};\n\nPromiseArray.prototype._resolve = function (value) {\n    this._values = null;\n    this._promise._fulfill(value);\n};\n\nPromiseArray.prototype._cancel = function() {\n    if (this._isResolved() || !this._promise._isCancellable()) return;\n    this._values = null;\n    this._promise._cancel();\n};\n\nPromiseArray.prototype._reject = function (reason) {\n    this._values = null;\n    this._promise._rejectCallback(reason, false);\n};\n\nPromiseArray.prototype._promiseFulfilled = function (value, index) {\n    this._values[index] = value;\n    var totalResolved = ++this._totalResolved;\n    if (totalResolved >= this._length) {\n        this._resolve(this._values);\n        return true;\n    }\n    return false;\n};\n\nPromiseArray.prototype._promiseCancelled = function() {\n    this._cancel();\n    return true;\n};\n\nPromiseArray.prototype._promiseRejected = function (reason) {\n    this._totalResolved++;\n    this._reject(reason);\n    return true;\n};\n\nPromiseArray.prototype._resultCancelled = function() {\n    if (this._isResolved()) return;\n    var values = this._values;\n    this._cancel();\n    if (values instanceof Promise) {\n        values.cancel();\n    } else {\n        for (var i = 0; i < values.length; ++i) {\n            if (values[i] instanceof Promise) {\n                values[i].cancel();\n            }\n        }\n    }\n};\n\nPromiseArray.prototype.shouldCopyValues = function () {\n    return true;\n};\n\nPromiseArray.prototype.getActualLength = function (len) {\n    return len;\n};\n\nreturn PromiseArray;\n};\n\n},{\"./util\":36}],24:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL) {\nvar THIS = {};\nvar util = _dereq_(\"./util\");\nvar nodebackForPromise = _dereq_(\"./nodeback\");\nvar withAppended = util.withAppended;\nvar maybeWrapAsError = util.maybeWrapAsError;\nvar canEvaluate = util.canEvaluate;\nvar TypeError = _dereq_(\"./errors\").TypeError;\nvar defaultSuffix = \"Async\";\nvar defaultPromisified = {__isPromisified__: true};\nvar noCopyProps = [\n    \"arity\",    \"length\",\n    \"name\",\n    \"arguments\",\n    \"caller\",\n    \"callee\",\n    \"prototype\",\n    \"__isPromisified__\"\n];\nvar noCopyPropsPattern = new RegExp(\"^(?:\" + noCopyProps.join(\"|\") + \")$\");\n\nvar defaultFilter = function(name) {\n    return util.isIdentifier(name) &&\n        name.charAt(0) !== \"_\" &&\n        name !== \"constructor\";\n};\n\nfunction propsFilter(key) {\n    return !noCopyPropsPattern.test(key);\n}\n\nfunction isPromisified(fn) {\n    try {\n        return fn.__isPromisified__ === true;\n    }\n    catch (e) {\n        return false;\n    }\n}\n\nfunction hasPromisified(obj, key, suffix) {\n    var val = util.getDataPropertyOrDefault(obj, key + suffix,\n                                            defaultPromisified);\n    return val ? isPromisified(val) : false;\n}\nfunction checkValid(ret, suffix, suffixRegexp) {\n    for (var i = 0; i < ret.length; i += 2) {\n        var key = ret[i];\n        if (suffixRegexp.test(key)) {\n            var keyWithoutAsyncSuffix = key.replace(suffixRegexp, \"\");\n            for (var j = 0; j < ret.length; j += 2) {\n                if (ret[j] === keyWithoutAsyncSuffix) {\n                    throw new TypeError(\"Cannot promisify an API that has normal methods with '%s'-suffix\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\"\n                        .replace(\"%s\", suffix));\n                }\n            }\n        }\n    }\n}\n\nfunction promisifiableMethods(obj, suffix, suffixRegexp, filter) {\n    var keys = util.inheritedDataKeys(obj);\n    var ret = [];\n    for (var i = 0; i < keys.length; ++i) {\n        var key = keys[i];\n        var value = obj[key];\n        var passesDefaultFilter = filter === defaultFilter\n            ? true : defaultFilter(key, value, obj);\n        if (typeof value === \"function\" &&\n            !isPromisified(value) &&\n            !hasPromisified(obj, key, suffix) &&\n            filter(key, value, obj, passesDefaultFilter)) {\n            ret.push(key, value);\n        }\n    }\n    checkValid(ret, suffix, suffixRegexp);\n    return ret;\n}\n\nvar escapeIdentRegex = function(str) {\n    return str.replace(/([$])/, \"\\\\$\");\n};\n\nvar makeNodePromisifiedEval;\nif (!true) {\nvar switchCaseArgumentOrder = function(likelyArgumentCount) {\n    var ret = [likelyArgumentCount];\n    var min = Math.max(0, likelyArgumentCount - 1 - 3);\n    for(var i = likelyArgumentCount - 1; i >= min; --i) {\n        ret.push(i);\n    }\n    for(var i = likelyArgumentCount + 1; i <= 3; ++i) {\n        ret.push(i);\n    }\n    return ret;\n};\n\nvar argumentSequence = function(argumentCount) {\n    return util.filledRange(argumentCount, \"_arg\", \"\");\n};\n\nvar parameterDeclaration = function(parameterCount) {\n    return util.filledRange(\n        Math.max(parameterCount, 3), \"_arg\", \"\");\n};\n\nvar parameterCount = function(fn) {\n    if (typeof fn.length === \"number\") {\n        return Math.max(Math.min(fn.length, 1023 + 1), 0);\n    }\n    return 0;\n};\n\nmakeNodePromisifiedEval =\nfunction(callback, receiver, originalName, fn, _, multiArgs) {\n    var newParameterCount = Math.max(0, parameterCount(fn) - 1);\n    var argumentOrder = switchCaseArgumentOrder(newParameterCount);\n    var shouldProxyThis = typeof callback === \"string\" || receiver === THIS;\n\n    function generateCallForArgumentCount(count) {\n        var args = argumentSequence(count).join(\", \");\n        var comma = count > 0 ? \", \" : \"\";\n        var ret;\n        if (shouldProxyThis) {\n            ret = \"ret = callback.call(this, {{args}}, nodeback); break;\\n\";\n        } else {\n            ret = receiver === undefined\n                ? \"ret = callback({{args}}, nodeback); break;\\n\"\n                : \"ret = callback.call(receiver, {{args}}, nodeback); break;\\n\";\n        }\n        return ret.replace(\"{{args}}\", args).replace(\", \", comma);\n    }\n\n    function generateArgumentSwitchCase() {\n        var ret = \"\";\n        for (var i = 0; i < argumentOrder.length; ++i) {\n            ret += \"case \" + argumentOrder[i] +\":\" +\n                generateCallForArgumentCount(argumentOrder[i]);\n        }\n\n        ret += \"                                                             \\n\\\n        default:                                                             \\n\\\n            var args = new Array(len + 1);                                   \\n\\\n            var i = 0;                                                       \\n\\\n            for (var i = 0; i < len; ++i) {                                  \\n\\\n               args[i] = arguments[i];                                       \\n\\\n            }                                                                \\n\\\n            args[i] = nodeback;                                              \\n\\\n            [CodeForCall]                                                    \\n\\\n            break;                                                           \\n\\\n        \".replace(\"[CodeForCall]\", (shouldProxyThis\n                                ? \"ret = callback.apply(this, args);\\n\"\n                                : \"ret = callback.apply(receiver, args);\\n\"));\n        return ret;\n    }\n\n    var getFunctionCode = typeof callback === \"string\"\n                                ? (\"this != null ? this['\"+callback+\"'] : fn\")\n                                : \"fn\";\n    var body = \"'use strict';                                                \\n\\\n        var ret = function (Parameters) {                                    \\n\\\n            'use strict';                                                    \\n\\\n            var len = arguments.length;                                      \\n\\\n            var promise = new Promise(INTERNAL);                             \\n\\\n            promise._captureStackTrace();                                    \\n\\\n            var nodeback = nodebackForPromise(promise, \" + multiArgs + \");   \\n\\\n            var ret;                                                         \\n\\\n            var callback = tryCatch([GetFunctionCode]);                      \\n\\\n            switch(len) {                                                    \\n\\\n                [CodeForSwitchCase]                                          \\n\\\n            }                                                                \\n\\\n            if (ret === errorObj) {                                          \\n\\\n                promise._rejectCallback(maybeWrapAsError(ret.e), true, true);\\n\\\n            }                                                                \\n\\\n            if (!promise._isFateSealed()) promise._setAsyncGuaranteed();     \\n\\\n            return promise;                                                  \\n\\\n        };                                                                   \\n\\\n        notEnumerableProp(ret, '__isPromisified__', true);                   \\n\\\n        return ret;                                                          \\n\\\n    \".replace(\"[CodeForSwitchCase]\", generateArgumentSwitchCase())\n        .replace(\"[GetFunctionCode]\", getFunctionCode);\n    body = body.replace(\"Parameters\", parameterDeclaration(newParameterCount));\n    return new Function(\"Promise\",\n                        \"fn\",\n                        \"receiver\",\n                        \"withAppended\",\n                        \"maybeWrapAsError\",\n                        \"nodebackForPromise\",\n                        \"tryCatch\",\n                        \"errorObj\",\n                        \"notEnumerableProp\",\n                        \"INTERNAL\",\n                        body)(\n                    Promise,\n                    fn,\n                    receiver,\n                    withAppended,\n                    maybeWrapAsError,\n                    nodebackForPromise,\n                    util.tryCatch,\n                    util.errorObj,\n                    util.notEnumerableProp,\n                    INTERNAL);\n};\n}\n\nfunction makeNodePromisifiedClosure(callback, receiver, _, fn, __, multiArgs) {\n    var defaultThis = (function() {return this;})();\n    var method = callback;\n    if (typeof method === \"string\") {\n        callback = fn;\n    }\n    function promisified() {\n        var _receiver = receiver;\n        if (receiver === THIS) _receiver = this;\n        var promise = new Promise(INTERNAL);\n        promise._captureStackTrace();\n        var cb = typeof method === \"string\" && this !== defaultThis\n            ? this[method] : callback;\n        var fn = nodebackForPromise(promise, multiArgs);\n        try {\n            cb.apply(_receiver, withAppended(arguments, fn));\n        } catch(e) {\n            promise._rejectCallback(maybeWrapAsError(e), true, true);\n        }\n        if (!promise._isFateSealed()) promise._setAsyncGuaranteed();\n        return promise;\n    }\n    util.notEnumerableProp(promisified, \"__isPromisified__\", true);\n    return promisified;\n}\n\nvar makeNodePromisified = canEvaluate\n    ? makeNodePromisifiedEval\n    : makeNodePromisifiedClosure;\n\nfunction promisifyAll(obj, suffix, filter, promisifier, multiArgs) {\n    var suffixRegexp = new RegExp(escapeIdentRegex(suffix) + \"$\");\n    var methods =\n        promisifiableMethods(obj, suffix, suffixRegexp, filter);\n\n    for (var i = 0, len = methods.length; i < len; i+= 2) {\n        var key = methods[i];\n        var fn = methods[i+1];\n        var promisifiedKey = key + suffix;\n        if (promisifier === makeNodePromisified) {\n            obj[promisifiedKey] =\n                makeNodePromisified(key, THIS, key, fn, suffix, multiArgs);\n        } else {\n            var promisified = promisifier(fn, function() {\n                return makeNodePromisified(key, THIS, key,\n                                           fn, suffix, multiArgs);\n            });\n            util.notEnumerableProp(promisified, \"__isPromisified__\", true);\n            obj[promisifiedKey] = promisified;\n        }\n    }\n    util.toFastProperties(obj);\n    return obj;\n}\n\nfunction promisify(callback, receiver, multiArgs) {\n    return makeNodePromisified(callback, receiver, undefined,\n                                callback, null, multiArgs);\n}\n\nPromise.promisify = function (fn, options) {\n    if (typeof fn !== \"function\") {\n        throw new TypeError(\"expecting a function but got \" + util.classString(fn));\n    }\n    if (isPromisified(fn)) {\n        return fn;\n    }\n    options = Object(options);\n    var receiver = options.context === undefined ? THIS : options.context;\n    var multiArgs = !!options.multiArgs;\n    var ret = promisify(fn, receiver, multiArgs);\n    util.copyDescriptors(fn, ret, propsFilter);\n    return ret;\n};\n\nPromise.promisifyAll = function (target, options) {\n    if (typeof target !== \"function\" && typeof target !== \"object\") {\n        throw new TypeError(\"the target of promisifyAll must be an object or a function\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    options = Object(options);\n    var multiArgs = !!options.multiArgs;\n    var suffix = options.suffix;\n    if (typeof suffix !== \"string\") suffix = defaultSuffix;\n    var filter = options.filter;\n    if (typeof filter !== \"function\") filter = defaultFilter;\n    var promisifier = options.promisifier;\n    if (typeof promisifier !== \"function\") promisifier = makeNodePromisified;\n\n    if (!util.isIdentifier(suffix)) {\n        throw new RangeError(\"suffix must be a valid identifier\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n\n    var keys = util.inheritedDataKeys(target);\n    for (var i = 0; i < keys.length; ++i) {\n        var value = target[keys[i]];\n        if (keys[i] !== \"constructor\" &&\n            util.isClass(value)) {\n            promisifyAll(value.prototype, suffix, filter, promisifier,\n                multiArgs);\n            promisifyAll(value, suffix, filter, promisifier, multiArgs);\n        }\n    }\n\n    return promisifyAll(target, suffix, filter, promisifier, multiArgs);\n};\n};\n\n\n},{\"./errors\":12,\"./nodeback\":20,\"./util\":36}],25:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(\n    Promise, PromiseArray, tryConvertToPromise, apiRejection) {\nvar util = _dereq_(\"./util\");\nvar isObject = util.isObject;\nvar es5 = _dereq_(\"./es5\");\nvar Es6Map;\nif (typeof Map === \"function\") Es6Map = Map;\n\nvar mapToEntries = (function() {\n    var index = 0;\n    var size = 0;\n\n    function extractEntry(value, key) {\n        this[index] = value;\n        this[index + size] = key;\n        index++;\n    }\n\n    return function mapToEntries(map) {\n        size = map.size;\n        index = 0;\n        var ret = new Array(map.size * 2);\n        map.forEach(extractEntry, ret);\n        return ret;\n    };\n})();\n\nvar entriesToMap = function(entries) {\n    var ret = new Es6Map();\n    var length = entries.length / 2 | 0;\n    for (var i = 0; i < length; ++i) {\n        var key = entries[length + i];\n        var value = entries[i];\n        ret.set(key, value);\n    }\n    return ret;\n};\n\nfunction PropertiesPromiseArray(obj) {\n    var isMap = false;\n    var entries;\n    if (Es6Map !== undefined && obj instanceof Es6Map) {\n        entries = mapToEntries(obj);\n        isMap = true;\n    } else {\n        var keys = es5.keys(obj);\n        var len = keys.length;\n        entries = new Array(len * 2);\n        for (var i = 0; i < len; ++i) {\n            var key = keys[i];\n            entries[i] = obj[key];\n            entries[i + len] = key;\n        }\n    }\n    this.constructor$(entries);\n    this._isMap = isMap;\n    this._init$(undefined, isMap ? -6 : -3);\n}\nutil.inherits(PropertiesPromiseArray, PromiseArray);\n\nPropertiesPromiseArray.prototype._init = function () {};\n\nPropertiesPromiseArray.prototype._promiseFulfilled = function (value, index) {\n    this._values[index] = value;\n    var totalResolved = ++this._totalResolved;\n    if (totalResolved >= this._length) {\n        var val;\n        if (this._isMap) {\n            val = entriesToMap(this._values);\n        } else {\n            val = {};\n            var keyOffset = this.length();\n            for (var i = 0, len = this.length(); i < len; ++i) {\n                val[this._values[i + keyOffset]] = this._values[i];\n            }\n        }\n        this._resolve(val);\n        return true;\n    }\n    return false;\n};\n\nPropertiesPromiseArray.prototype.shouldCopyValues = function () {\n    return false;\n};\n\nPropertiesPromiseArray.prototype.getActualLength = function (len) {\n    return len >> 1;\n};\n\nfunction props(promises) {\n    var ret;\n    var castValue = tryConvertToPromise(promises);\n\n    if (!isObject(castValue)) {\n        return apiRejection(\"cannot await properties of a non-object\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    } else if (castValue instanceof Promise) {\n        ret = castValue._then(\n            Promise.props, undefined, undefined, undefined, undefined);\n    } else {\n        ret = new PropertiesPromiseArray(castValue).promise();\n    }\n\n    if (castValue instanceof Promise) {\n        ret._propagateFrom(castValue, 2);\n    }\n    return ret;\n}\n\nPromise.prototype.props = function () {\n    return props(this);\n};\n\nPromise.props = function (promises) {\n    return props(promises);\n};\n};\n\n},{\"./es5\":13,\"./util\":36}],26:[function(_dereq_,module,exports){\n\"use strict\";\nfunction arrayMove(src, srcIndex, dst, dstIndex, len) {\n    for (var j = 0; j < len; ++j) {\n        dst[j + dstIndex] = src[j + srcIndex];\n        src[j + srcIndex] = void 0;\n    }\n}\n\nfunction Queue(capacity) {\n    this._capacity = capacity;\n    this._length = 0;\n    this._front = 0;\n}\n\nQueue.prototype._willBeOverCapacity = function (size) {\n    return this._capacity < size;\n};\n\nQueue.prototype._pushOne = function (arg) {\n    var length = this.length();\n    this._checkCapacity(length + 1);\n    var i = (this._front + length) & (this._capacity - 1);\n    this[i] = arg;\n    this._length = length + 1;\n};\n\nQueue.prototype.push = function (fn, receiver, arg) {\n    var length = this.length() + 3;\n    if (this._willBeOverCapacity(length)) {\n        this._pushOne(fn);\n        this._pushOne(receiver);\n        this._pushOne(arg);\n        return;\n    }\n    var j = this._front + length - 3;\n    this._checkCapacity(length);\n    var wrapMask = this._capacity - 1;\n    this[(j + 0) & wrapMask] = fn;\n    this[(j + 1) & wrapMask] = receiver;\n    this[(j + 2) & wrapMask] = arg;\n    this._length = length;\n};\n\nQueue.prototype.shift = function () {\n    var front = this._front,\n        ret = this[front];\n\n    this[front] = undefined;\n    this._front = (front + 1) & (this._capacity - 1);\n    this._length--;\n    return ret;\n};\n\nQueue.prototype.length = function () {\n    return this._length;\n};\n\nQueue.prototype._checkCapacity = function (size) {\n    if (this._capacity < size) {\n        this._resizeTo(this._capacity << 1);\n    }\n};\n\nQueue.prototype._resizeTo = function (capacity) {\n    var oldCapacity = this._capacity;\n    this._capacity = capacity;\n    var front = this._front;\n    var length = this._length;\n    var moveItemsCount = (front + length) & (oldCapacity - 1);\n    arrayMove(this, 0, this, oldCapacity, moveItemsCount);\n};\n\nmodule.exports = Queue;\n\n},{}],27:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(\n    Promise, INTERNAL, tryConvertToPromise, apiRejection) {\nvar util = _dereq_(\"./util\");\n\nvar raceLater = function (promise) {\n    return promise.then(function(array) {\n        return race(array, promise);\n    });\n};\n\nfunction race(promises, parent) {\n    var maybePromise = tryConvertToPromise(promises);\n\n    if (maybePromise instanceof Promise) {\n        return raceLater(maybePromise);\n    } else {\n        promises = util.asArray(promises);\n        if (promises === null)\n            return apiRejection(\"expecting an array or an iterable object but got \" + util.classString(promises));\n    }\n\n    var ret = new Promise(INTERNAL);\n    if (parent !== undefined) {\n        ret._propagateFrom(parent, 3);\n    }\n    var fulfill = ret._fulfill;\n    var reject = ret._reject;\n    for (var i = 0, len = promises.length; i < len; ++i) {\n        var val = promises[i];\n\n        if (val === undefined && !(i in promises)) {\n            continue;\n        }\n\n        Promise.cast(val)._then(fulfill, reject, undefined, ret, null);\n    }\n    return ret;\n}\n\nPromise.race = function (promises) {\n    return race(promises, undefined);\n};\n\nPromise.prototype.race = function () {\n    return race(this, undefined);\n};\n\n};\n\n},{\"./util\":36}],28:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise,\n                          PromiseArray,\n                          apiRejection,\n                          tryConvertToPromise,\n                          INTERNAL,\n                          debug) {\nvar util = _dereq_(\"./util\");\nvar tryCatch = util.tryCatch;\n\nfunction ReductionPromiseArray(promises, fn, initialValue, _each) {\n    this.constructor$(promises);\n    var context = Promise._getContext();\n    this._fn = util.contextBind(context, fn);\n    if (initialValue !== undefined) {\n        initialValue = Promise.resolve(initialValue);\n        initialValue._attachCancellationCallback(this);\n    }\n    this._initialValue = initialValue;\n    this._currentCancellable = null;\n    if(_each === INTERNAL) {\n        this._eachValues = Array(this._length);\n    } else if (_each === 0) {\n        this._eachValues = null;\n    } else {\n        this._eachValues = undefined;\n    }\n    this._promise._captureStackTrace();\n    this._init$(undefined, -5);\n}\nutil.inherits(ReductionPromiseArray, PromiseArray);\n\nReductionPromiseArray.prototype._gotAccum = function(accum) {\n    if (this._eachValues !== undefined &&\n        this._eachValues !== null &&\n        accum !== INTERNAL) {\n        this._eachValues.push(accum);\n    }\n};\n\nReductionPromiseArray.prototype._eachComplete = function(value) {\n    if (this._eachValues !== null) {\n        this._eachValues.push(value);\n    }\n    return this._eachValues;\n};\n\nReductionPromiseArray.prototype._init = function() {};\n\nReductionPromiseArray.prototype._resolveEmptyArray = function() {\n    this._resolve(this._eachValues !== undefined ? this._eachValues\n                                                 : this._initialValue);\n};\n\nReductionPromiseArray.prototype.shouldCopyValues = function () {\n    return false;\n};\n\nReductionPromiseArray.prototype._resolve = function(value) {\n    this._promise._resolveCallback(value);\n    this._values = null;\n};\n\nReductionPromiseArray.prototype._resultCancelled = function(sender) {\n    if (sender === this._initialValue) return this._cancel();\n    if (this._isResolved()) return;\n    this._resultCancelled$();\n    if (this._currentCancellable instanceof Promise) {\n        this._currentCancellable.cancel();\n    }\n    if (this._initialValue instanceof Promise) {\n        this._initialValue.cancel();\n    }\n};\n\nReductionPromiseArray.prototype._iterate = function (values) {\n    this._values = values;\n    var value;\n    var i;\n    var length = values.length;\n    if (this._initialValue !== undefined) {\n        value = this._initialValue;\n        i = 0;\n    } else {\n        value = Promise.resolve(values[0]);\n        i = 1;\n    }\n\n    this._currentCancellable = value;\n\n    for (var j = i; j < length; ++j) {\n        var maybePromise = values[j];\n        if (maybePromise instanceof Promise) {\n            maybePromise.suppressUnhandledRejections();\n        }\n    }\n\n    if (!value.isRejected()) {\n        for (; i < length; ++i) {\n            var ctx = {\n                accum: null,\n                value: values[i],\n                index: i,\n                length: length,\n                array: this\n            };\n\n            value = value._then(gotAccum, undefined, undefined, ctx, undefined);\n\n            if ((i & 127) === 0) {\n                value._setNoAsyncGuarantee();\n            }\n        }\n    }\n\n    if (this._eachValues !== undefined) {\n        value = value\n            ._then(this._eachComplete, undefined, undefined, this, undefined);\n    }\n    value._then(completed, completed, undefined, value, this);\n};\n\nPromise.prototype.reduce = function (fn, initialValue) {\n    return reduce(this, fn, initialValue, null);\n};\n\nPromise.reduce = function (promises, fn, initialValue, _each) {\n    return reduce(promises, fn, initialValue, _each);\n};\n\nfunction completed(valueOrReason, array) {\n    if (this.isFulfilled()) {\n        array._resolve(valueOrReason);\n    } else {\n        array._reject(valueOrReason);\n    }\n}\n\nfunction reduce(promises, fn, initialValue, _each) {\n    if (typeof fn !== \"function\") {\n        return apiRejection(\"expecting a function but got \" + util.classString(fn));\n    }\n    var array = new ReductionPromiseArray(promises, fn, initialValue, _each);\n    return array.promise();\n}\n\nfunction gotAccum(accum) {\n    this.accum = accum;\n    this.array._gotAccum(accum);\n    var value = tryConvertToPromise(this.value, this.array._promise);\n    if (value instanceof Promise) {\n        this.array._currentCancellable = value;\n        return value._then(gotValue, undefined, undefined, this, undefined);\n    } else {\n        return gotValue.call(this, value);\n    }\n}\n\nfunction gotValue(value) {\n    var array = this.array;\n    var promise = array._promise;\n    var fn = tryCatch(array._fn);\n    promise._pushContext();\n    var ret;\n    if (array._eachValues !== undefined) {\n        ret = fn.call(promise._boundValue(), value, this.index, this.length);\n    } else {\n        ret = fn.call(promise._boundValue(),\n                              this.accum, value, this.index, this.length);\n    }\n    if (ret instanceof Promise) {\n        array._currentCancellable = ret;\n    }\n    var promiseCreated = promise._popContext();\n    debug.checkForgottenReturns(\n        ret,\n        promiseCreated,\n        array._eachValues !== undefined ? \"Promise.each\" : \"Promise.reduce\",\n        promise\n    );\n    return ret;\n}\n};\n\n},{\"./util\":36}],29:[function(_dereq_,module,exports){\n\"use strict\";\nvar util = _dereq_(\"./util\");\nvar schedule;\nvar noAsyncScheduler = function() {\n    throw new Error(\"No async scheduler available\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n};\nvar NativePromise = util.getNativePromise();\nif (util.isNode && typeof MutationObserver === \"undefined\") {\n    var GlobalSetImmediate = global.setImmediate;\n    var ProcessNextTick = process.nextTick;\n    schedule = util.isRecentNode\n                ? function(fn) { GlobalSetImmediate.call(global, fn); }\n                : function(fn) { ProcessNextTick.call(process, fn); };\n} else if (typeof NativePromise === \"function\" &&\n           typeof NativePromise.resolve === \"function\") {\n    var nativePromise = NativePromise.resolve();\n    schedule = function(fn) {\n        nativePromise.then(fn);\n    };\n} else if ((typeof MutationObserver !== \"undefined\") &&\n          !(typeof window !== \"undefined\" &&\n            window.navigator &&\n            (window.navigator.standalone || window.cordova)) &&\n          (\"classList\" in document.documentElement)) {\n    schedule = (function() {\n        var div = document.createElement(\"div\");\n        var opts = {attributes: true};\n        var toggleScheduled = false;\n        var div2 = document.createElement(\"div\");\n        var o2 = new MutationObserver(function() {\n            div.classList.toggle(\"foo\");\n            toggleScheduled = false;\n        });\n        o2.observe(div2, opts);\n\n        var scheduleToggle = function() {\n            if (toggleScheduled) return;\n            toggleScheduled = true;\n            div2.classList.toggle(\"foo\");\n        };\n\n        return function schedule(fn) {\n            var o = new MutationObserver(function() {\n                o.disconnect();\n                fn();\n            });\n            o.observe(div, opts);\n            scheduleToggle();\n        };\n    })();\n} else if (typeof setImmediate !== \"undefined\") {\n    schedule = function (fn) {\n        setImmediate(fn);\n    };\n} else if (typeof setTimeout !== \"undefined\") {\n    schedule = function (fn) {\n        setTimeout(fn, 0);\n    };\n} else {\n    schedule = noAsyncScheduler;\n}\nmodule.exports = schedule;\n\n},{\"./util\":36}],30:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports =\n    function(Promise, PromiseArray, debug) {\nvar PromiseInspection = Promise.PromiseInspection;\nvar util = _dereq_(\"./util\");\n\nfunction SettledPromiseArray(values) {\n    this.constructor$(values);\n}\nutil.inherits(SettledPromiseArray, PromiseArray);\n\nSettledPromiseArray.prototype._promiseResolved = function (index, inspection) {\n    this._values[index] = inspection;\n    var totalResolved = ++this._totalResolved;\n    if (totalResolved >= this._length) {\n        this._resolve(this._values);\n        return true;\n    }\n    return false;\n};\n\nSettledPromiseArray.prototype._promiseFulfilled = function (value, index) {\n    var ret = new PromiseInspection();\n    ret._bitField = 33554432;\n    ret._settledValueField = value;\n    return this._promiseResolved(index, ret);\n};\nSettledPromiseArray.prototype._promiseRejected = function (reason, index) {\n    var ret = new PromiseInspection();\n    ret._bitField = 16777216;\n    ret._settledValueField = reason;\n    return this._promiseResolved(index, ret);\n};\n\nPromise.settle = function (promises) {\n    debug.deprecated(\".settle()\", \".reflect()\");\n    return new SettledPromiseArray(promises).promise();\n};\n\nPromise.allSettled = function (promises) {\n    return new SettledPromiseArray(promises).promise();\n};\n\nPromise.prototype.settle = function () {\n    return Promise.settle(this);\n};\n};\n\n},{\"./util\":36}],31:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports =\nfunction(Promise, PromiseArray, apiRejection) {\nvar util = _dereq_(\"./util\");\nvar RangeError = _dereq_(\"./errors\").RangeError;\nvar AggregateError = _dereq_(\"./errors\").AggregateError;\nvar isArray = util.isArray;\nvar CANCELLATION = {};\n\n\nfunction SomePromiseArray(values) {\n    this.constructor$(values);\n    this._howMany = 0;\n    this._unwrap = false;\n    this._initialized = false;\n}\nutil.inherits(SomePromiseArray, PromiseArray);\n\nSomePromiseArray.prototype._init = function () {\n    if (!this._initialized) {\n        return;\n    }\n    if (this._howMany === 0) {\n        this._resolve([]);\n        return;\n    }\n    this._init$(undefined, -5);\n    var isArrayResolved = isArray(this._values);\n    if (!this._isResolved() &&\n        isArrayResolved &&\n        this._howMany > this._canPossiblyFulfill()) {\n        this._reject(this._getRangeError(this.length()));\n    }\n};\n\nSomePromiseArray.prototype.init = function () {\n    this._initialized = true;\n    this._init();\n};\n\nSomePromiseArray.prototype.setUnwrap = function () {\n    this._unwrap = true;\n};\n\nSomePromiseArray.prototype.howMany = function () {\n    return this._howMany;\n};\n\nSomePromiseArray.prototype.setHowMany = function (count) {\n    this._howMany = count;\n};\n\nSomePromiseArray.prototype._promiseFulfilled = function (value) {\n    this._addFulfilled(value);\n    if (this._fulfilled() === this.howMany()) {\n        this._values.length = this.howMany();\n        if (this.howMany() === 1 && this._unwrap) {\n            this._resolve(this._values[0]);\n        } else {\n            this._resolve(this._values);\n        }\n        return true;\n    }\n    return false;\n\n};\nSomePromiseArray.prototype._promiseRejected = function (reason) {\n    this._addRejected(reason);\n    return this._checkOutcome();\n};\n\nSomePromiseArray.prototype._promiseCancelled = function () {\n    if (this._values instanceof Promise || this._values == null) {\n        return this._cancel();\n    }\n    this._addRejected(CANCELLATION);\n    return this._checkOutcome();\n};\n\nSomePromiseArray.prototype._checkOutcome = function() {\n    if (this.howMany() > this._canPossiblyFulfill()) {\n        var e = new AggregateError();\n        for (var i = this.length(); i < this._values.length; ++i) {\n            if (this._values[i] !== CANCELLATION) {\n                e.push(this._values[i]);\n            }\n        }\n        if (e.length > 0) {\n            this._reject(e);\n        } else {\n            this._cancel();\n        }\n        return true;\n    }\n    return false;\n};\n\nSomePromiseArray.prototype._fulfilled = function () {\n    return this._totalResolved;\n};\n\nSomePromiseArray.prototype._rejected = function () {\n    return this._values.length - this.length();\n};\n\nSomePromiseArray.prototype._addRejected = function (reason) {\n    this._values.push(reason);\n};\n\nSomePromiseArray.prototype._addFulfilled = function (value) {\n    this._values[this._totalResolved++] = value;\n};\n\nSomePromiseArray.prototype._canPossiblyFulfill = function () {\n    return this.length() - this._rejected();\n};\n\nSomePromiseArray.prototype._getRangeError = function (count) {\n    var message = \"Input array must contain at least \" +\n            this._howMany + \" items but contains only \" + count + \" items\";\n    return new RangeError(message);\n};\n\nSomePromiseArray.prototype._resolveEmptyArray = function () {\n    this._reject(this._getRangeError(0));\n};\n\nfunction some(promises, howMany) {\n    if ((howMany | 0) !== howMany || howMany < 0) {\n        return apiRejection(\"expecting a positive integer\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    var ret = new SomePromiseArray(promises);\n    var promise = ret.promise();\n    ret.setHowMany(howMany);\n    ret.init();\n    return promise;\n}\n\nPromise.some = function (promises, howMany) {\n    return some(promises, howMany);\n};\n\nPromise.prototype.some = function (howMany) {\n    return some(this, howMany);\n};\n\nPromise._SomePromiseArray = SomePromiseArray;\n};\n\n},{\"./errors\":12,\"./util\":36}],32:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise) {\nfunction PromiseInspection(promise) {\n    if (promise !== undefined) {\n        promise = promise._target();\n        this._bitField = promise._bitField;\n        this._settledValueField = promise._isFateSealed()\n            ? promise._settledValue() : undefined;\n    }\n    else {\n        this._bitField = 0;\n        this._settledValueField = undefined;\n    }\n}\n\nPromiseInspection.prototype._settledValue = function() {\n    return this._settledValueField;\n};\n\nvar value = PromiseInspection.prototype.value = function () {\n    if (!this.isFulfilled()) {\n        throw new TypeError(\"cannot get fulfillment value of a non-fulfilled promise\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    return this._settledValue();\n};\n\nvar reason = PromiseInspection.prototype.error =\nPromiseInspection.prototype.reason = function () {\n    if (!this.isRejected()) {\n        throw new TypeError(\"cannot get rejection reason of a non-rejected promise\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    return this._settledValue();\n};\n\nvar isFulfilled = PromiseInspection.prototype.isFulfilled = function() {\n    return (this._bitField & 33554432) !== 0;\n};\n\nvar isRejected = PromiseInspection.prototype.isRejected = function () {\n    return (this._bitField & 16777216) !== 0;\n};\n\nvar isPending = PromiseInspection.prototype.isPending = function () {\n    return (this._bitField & 50397184) === 0;\n};\n\nvar isResolved = PromiseInspection.prototype.isResolved = function () {\n    return (this._bitField & 50331648) !== 0;\n};\n\nPromiseInspection.prototype.isCancelled = function() {\n    return (this._bitField & 8454144) !== 0;\n};\n\nPromise.prototype.__isCancelled = function() {\n    return (this._bitField & 65536) === 65536;\n};\n\nPromise.prototype._isCancelled = function() {\n    return this._target().__isCancelled();\n};\n\nPromise.prototype.isCancelled = function() {\n    return (this._target()._bitField & 8454144) !== 0;\n};\n\nPromise.prototype.isPending = function() {\n    return isPending.call(this._target());\n};\n\nPromise.prototype.isRejected = function() {\n    return isRejected.call(this._target());\n};\n\nPromise.prototype.isFulfilled = function() {\n    return isFulfilled.call(this._target());\n};\n\nPromise.prototype.isResolved = function() {\n    return isResolved.call(this._target());\n};\n\nPromise.prototype.value = function() {\n    return value.call(this._target());\n};\n\nPromise.prototype.reason = function() {\n    var target = this._target();\n    target._unsetRejectionIsUnhandled();\n    return reason.call(target);\n};\n\nPromise.prototype._value = function() {\n    return this._settledValue();\n};\n\nPromise.prototype._reason = function() {\n    this._unsetRejectionIsUnhandled();\n    return this._settledValue();\n};\n\nPromise.PromiseInspection = PromiseInspection;\n};\n\n},{}],33:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL) {\nvar util = _dereq_(\"./util\");\nvar errorObj = util.errorObj;\nvar isObject = util.isObject;\n\nfunction tryConvertToPromise(obj, context) {\n    if (isObject(obj)) {\n        if (obj instanceof Promise) return obj;\n        var then = getThen(obj);\n        if (then === errorObj) {\n            if (context) context._pushContext();\n            var ret = Promise.reject(then.e);\n            if (context) context._popContext();\n            return ret;\n        } else if (typeof then === \"function\") {\n            if (isAnyBluebirdPromise(obj)) {\n                var ret = new Promise(INTERNAL);\n                obj._then(\n                    ret._fulfill,\n                    ret._reject,\n                    undefined,\n                    ret,\n                    null\n                );\n                return ret;\n            }\n            return doThenable(obj, then, context);\n        }\n    }\n    return obj;\n}\n\nfunction doGetThen(obj) {\n    return obj.then;\n}\n\nfunction getThen(obj) {\n    try {\n        return doGetThen(obj);\n    } catch (e) {\n        errorObj.e = e;\n        return errorObj;\n    }\n}\n\nvar hasProp = {}.hasOwnProperty;\nfunction isAnyBluebirdPromise(obj) {\n    try {\n        return hasProp.call(obj, \"_promise0\");\n    } catch (e) {\n        return false;\n    }\n}\n\nfunction doThenable(x, then, context) {\n    var promise = new Promise(INTERNAL);\n    var ret = promise;\n    if (context) context._pushContext();\n    promise._captureStackTrace();\n    if (context) context._popContext();\n    var synchronous = true;\n    var result = util.tryCatch(then).call(x, resolve, reject);\n    synchronous = false;\n\n    if (promise && result === errorObj) {\n        promise._rejectCallback(result.e, true, true);\n        promise = null;\n    }\n\n    function resolve(value) {\n        if (!promise) return;\n        promise._resolveCallback(value);\n        promise = null;\n    }\n\n    function reject(reason) {\n        if (!promise) return;\n        promise._rejectCallback(reason, synchronous, true);\n        promise = null;\n    }\n    return ret;\n}\n\nreturn tryConvertToPromise;\n};\n\n},{\"./util\":36}],34:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL, debug) {\nvar util = _dereq_(\"./util\");\nvar TimeoutError = Promise.TimeoutError;\n\nfunction HandleWrapper(handle)  {\n    this.handle = handle;\n}\n\nHandleWrapper.prototype._resultCancelled = function() {\n    clearTimeout(this.handle);\n};\n\nvar afterValue = function(value) { return delay(+this).thenReturn(value); };\nvar delay = Promise.delay = function (ms, value) {\n    var ret;\n    var handle;\n    if (value !== undefined) {\n        ret = Promise.resolve(value)\n                ._then(afterValue, null, null, ms, undefined);\n        if (debug.cancellation() && value instanceof Promise) {\n            ret._setOnCancel(value);\n        }\n    } else {\n        ret = new Promise(INTERNAL);\n        handle = setTimeout(function() { ret._fulfill(); }, +ms);\n        if (debug.cancellation()) {\n            ret._setOnCancel(new HandleWrapper(handle));\n        }\n        ret._captureStackTrace();\n    }\n    ret._setAsyncGuaranteed();\n    return ret;\n};\n\nPromise.prototype.delay = function (ms) {\n    return delay(ms, this);\n};\n\nvar afterTimeout = function (promise, message, parent) {\n    var err;\n    if (typeof message !== \"string\") {\n        if (message instanceof Error) {\n            err = message;\n        } else {\n            err = new TimeoutError(\"operation timed out\");\n        }\n    } else {\n        err = new TimeoutError(message);\n    }\n    util.markAsOriginatingFromRejection(err);\n    promise._attachExtraTrace(err);\n    promise._reject(err);\n\n    if (parent != null) {\n        parent.cancel();\n    }\n};\n\nfunction successClear(value) {\n    clearTimeout(this.handle);\n    return value;\n}\n\nfunction failureClear(reason) {\n    clearTimeout(this.handle);\n    throw reason;\n}\n\nPromise.prototype.timeout = function (ms, message) {\n    ms = +ms;\n    var ret, parent;\n\n    var handleWrapper = new HandleWrapper(setTimeout(function timeoutTimeout() {\n        if (ret.isPending()) {\n            afterTimeout(ret, message, parent);\n        }\n    }, ms));\n\n    if (debug.cancellation()) {\n        parent = this.then();\n        ret = parent._then(successClear, failureClear,\n                            undefined, handleWrapper, undefined);\n        ret._setOnCancel(handleWrapper);\n    } else {\n        ret = this._then(successClear, failureClear,\n                            undefined, handleWrapper, undefined);\n    }\n\n    return ret;\n};\n\n};\n\n},{\"./util\":36}],35:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function (Promise, apiRejection, tryConvertToPromise,\n    createContext, INTERNAL, debug) {\n    var util = _dereq_(\"./util\");\n    var TypeError = _dereq_(\"./errors\").TypeError;\n    var inherits = _dereq_(\"./util\").inherits;\n    var errorObj = util.errorObj;\n    var tryCatch = util.tryCatch;\n    var NULL = {};\n\n    function thrower(e) {\n        setTimeout(function(){throw e;}, 0);\n    }\n\n    function castPreservingDisposable(thenable) {\n        var maybePromise = tryConvertToPromise(thenable);\n        if (maybePromise !== thenable &&\n            typeof thenable._isDisposable === \"function\" &&\n            typeof thenable._getDisposer === \"function\" &&\n            thenable._isDisposable()) {\n            maybePromise._setDisposable(thenable._getDisposer());\n        }\n        return maybePromise;\n    }\n    function dispose(resources, inspection) {\n        var i = 0;\n        var len = resources.length;\n        var ret = new Promise(INTERNAL);\n        function iterator() {\n            if (i >= len) return ret._fulfill();\n            var maybePromise = castPreservingDisposable(resources[i++]);\n            if (maybePromise instanceof Promise &&\n                maybePromise._isDisposable()) {\n                try {\n                    maybePromise = tryConvertToPromise(\n                        maybePromise._getDisposer().tryDispose(inspection),\n                        resources.promise);\n                } catch (e) {\n                    return thrower(e);\n                }\n                if (maybePromise instanceof Promise) {\n                    return maybePromise._then(iterator, thrower,\n                                              null, null, null);\n                }\n            }\n            iterator();\n        }\n        iterator();\n        return ret;\n    }\n\n    function Disposer(data, promise, context) {\n        this._data = data;\n        this._promise = promise;\n        this._context = context;\n    }\n\n    Disposer.prototype.data = function () {\n        return this._data;\n    };\n\n    Disposer.prototype.promise = function () {\n        return this._promise;\n    };\n\n    Disposer.prototype.resource = function () {\n        if (this.promise().isFulfilled()) {\n            return this.promise().value();\n        }\n        return NULL;\n    };\n\n    Disposer.prototype.tryDispose = function(inspection) {\n        var resource = this.resource();\n        var context = this._context;\n        if (context !== undefined) context._pushContext();\n        var ret = resource !== NULL\n            ? this.doDispose(resource, inspection) : null;\n        if (context !== undefined) context._popContext();\n        this._promise._unsetDisposable();\n        this._data = null;\n        return ret;\n    };\n\n    Disposer.isDisposer = function (d) {\n        return (d != null &&\n                typeof d.resource === \"function\" &&\n                typeof d.tryDispose === \"function\");\n    };\n\n    function FunctionDisposer(fn, promise, context) {\n        this.constructor$(fn, promise, context);\n    }\n    inherits(FunctionDisposer, Disposer);\n\n    FunctionDisposer.prototype.doDispose = function (resource, inspection) {\n        var fn = this.data();\n        return fn.call(resource, resource, inspection);\n    };\n\n    function maybeUnwrapDisposer(value) {\n        if (Disposer.isDisposer(value)) {\n            this.resources[this.index]._setDisposable(value);\n            return value.promise();\n        }\n        return value;\n    }\n\n    function ResourceList(length) {\n        this.length = length;\n        this.promise = null;\n        this[length-1] = null;\n    }\n\n    ResourceList.prototype._resultCancelled = function() {\n        var len = this.length;\n        for (var i = 0; i < len; ++i) {\n            var item = this[i];\n            if (item instanceof Promise) {\n                item.cancel();\n            }\n        }\n    };\n\n    Promise.using = function () {\n        var len = arguments.length;\n        if (len < 2) return apiRejection(\n                        \"you must pass at least 2 arguments to Promise.using\");\n        var fn = arguments[len - 1];\n        if (typeof fn !== \"function\") {\n            return apiRejection(\"expecting a function but got \" + util.classString(fn));\n        }\n        var input;\n        var spreadArgs = true;\n        if (len === 2 && Array.isArray(arguments[0])) {\n            input = arguments[0];\n            len = input.length;\n            spreadArgs = false;\n        } else {\n            input = arguments;\n            len--;\n        }\n        var resources = new ResourceList(len);\n        for (var i = 0; i < len; ++i) {\n            var resource = input[i];\n            if (Disposer.isDisposer(resource)) {\n                var disposer = resource;\n                resource = resource.promise();\n                resource._setDisposable(disposer);\n            } else {\n                var maybePromise = tryConvertToPromise(resource);\n                if (maybePromise instanceof Promise) {\n                    resource =\n                        maybePromise._then(maybeUnwrapDisposer, null, null, {\n                            resources: resources,\n                            index: i\n                    }, undefined);\n                }\n            }\n            resources[i] = resource;\n        }\n\n        var reflectedResources = new Array(resources.length);\n        for (var i = 0; i < reflectedResources.length; ++i) {\n            reflectedResources[i] = Promise.resolve(resources[i]).reflect();\n        }\n\n        var resultPromise = Promise.all(reflectedResources)\n            .then(function(inspections) {\n                for (var i = 0; i < inspections.length; ++i) {\n                    var inspection = inspections[i];\n                    if (inspection.isRejected()) {\n                        errorObj.e = inspection.error();\n                        return errorObj;\n                    } else if (!inspection.isFulfilled()) {\n                        resultPromise.cancel();\n                        return;\n                    }\n                    inspections[i] = inspection.value();\n                }\n                promise._pushContext();\n\n                fn = tryCatch(fn);\n                var ret = spreadArgs\n                    ? fn.apply(undefined, inspections) : fn(inspections);\n                var promiseCreated = promise._popContext();\n                debug.checkForgottenReturns(\n                    ret, promiseCreated, \"Promise.using\", promise);\n                return ret;\n            });\n\n        var promise = resultPromise.lastly(function() {\n            var inspection = new Promise.PromiseInspection(resultPromise);\n            return dispose(resources, inspection);\n        });\n        resources.promise = promise;\n        promise._setOnCancel(resources);\n        return promise;\n    };\n\n    Promise.prototype._setDisposable = function (disposer) {\n        this._bitField = this._bitField | 131072;\n        this._disposer = disposer;\n    };\n\n    Promise.prototype._isDisposable = function () {\n        return (this._bitField & 131072) > 0;\n    };\n\n    Promise.prototype._getDisposer = function () {\n        return this._disposer;\n    };\n\n    Promise.prototype._unsetDisposable = function () {\n        this._bitField = this._bitField & (~131072);\n        this._disposer = undefined;\n    };\n\n    Promise.prototype.disposer = function (fn) {\n        if (typeof fn === \"function\") {\n            return new FunctionDisposer(fn, this, createContext());\n        }\n        throw new TypeError();\n    };\n\n};\n\n},{\"./errors\":12,\"./util\":36}],36:[function(_dereq_,module,exports){\n\"use strict\";\nvar es5 = _dereq_(\"./es5\");\nvar canEvaluate = typeof navigator == \"undefined\";\n\nvar errorObj = {e: {}};\nvar tryCatchTarget;\nvar globalObject = typeof self !== \"undefined\" ? self :\n    typeof window !== \"undefined\" ? window :\n    typeof global !== \"undefined\" ? global :\n    this !== undefined ? this : null;\n\nfunction tryCatcher() {\n    try {\n        var target = tryCatchTarget;\n        tryCatchTarget = null;\n        return target.apply(this, arguments);\n    } catch (e) {\n        errorObj.e = e;\n        return errorObj;\n    }\n}\nfunction tryCatch(fn) {\n    tryCatchTarget = fn;\n    return tryCatcher;\n}\n\nvar inherits = function(Child, Parent) {\n    var hasProp = {}.hasOwnProperty;\n\n    function T() {\n        this.constructor = Child;\n        this.constructor$ = Parent;\n        for (var propertyName in Parent.prototype) {\n            if (hasProp.call(Parent.prototype, propertyName) &&\n                propertyName.charAt(propertyName.length-1) !== \"$\"\n           ) {\n                this[propertyName + \"$\"] = Parent.prototype[propertyName];\n            }\n        }\n    }\n    T.prototype = Parent.prototype;\n    Child.prototype = new T();\n    return Child.prototype;\n};\n\n\nfunction isPrimitive(val) {\n    return val == null || val === true || val === false ||\n        typeof val === \"string\" || typeof val === \"number\";\n\n}\n\nfunction isObject(value) {\n    return typeof value === \"function\" ||\n           typeof value === \"object\" && value !== null;\n}\n\nfunction maybeWrapAsError(maybeError) {\n    if (!isPrimitive(maybeError)) return maybeError;\n\n    return new Error(safeToString(maybeError));\n}\n\nfunction withAppended(target, appendee) {\n    var len = target.length;\n    var ret = new Array(len + 1);\n    var i;\n    for (i = 0; i < len; ++i) {\n        ret[i] = target[i];\n    }\n    ret[i] = appendee;\n    return ret;\n}\n\nfunction getDataPropertyOrDefault(obj, key, defaultValue) {\n    if (es5.isES5) {\n        var desc = Object.getOwnPropertyDescriptor(obj, key);\n\n        if (desc != null) {\n            return desc.get == null && desc.set == null\n                    ? desc.value\n                    : defaultValue;\n        }\n    } else {\n        return {}.hasOwnProperty.call(obj, key) ? obj[key] : undefined;\n    }\n}\n\nfunction notEnumerableProp(obj, name, value) {\n    if (isPrimitive(obj)) return obj;\n    var descriptor = {\n        value: value,\n        configurable: true,\n        enumerable: false,\n        writable: true\n    };\n    es5.defineProperty(obj, name, descriptor);\n    return obj;\n}\n\nfunction thrower(r) {\n    throw r;\n}\n\nvar inheritedDataKeys = (function() {\n    var excludedPrototypes = [\n        Array.prototype,\n        Object.prototype,\n        Function.prototype\n    ];\n\n    var isExcludedProto = function(val) {\n        for (var i = 0; i < excludedPrototypes.length; ++i) {\n            if (excludedPrototypes[i] === val) {\n                return true;\n            }\n        }\n        return false;\n    };\n\n    if (es5.isES5) {\n        var getKeys = Object.getOwnPropertyNames;\n        return function(obj) {\n            var ret = [];\n            var visitedKeys = Object.create(null);\n            while (obj != null && !isExcludedProto(obj)) {\n                var keys;\n                try {\n                    keys = getKeys(obj);\n                } catch (e) {\n                    return ret;\n                }\n                for (var i = 0; i < keys.length; ++i) {\n                    var key = keys[i];\n                    if (visitedKeys[key]) continue;\n                    visitedKeys[key] = true;\n                    var desc = Object.getOwnPropertyDescriptor(obj, key);\n                    if (desc != null && desc.get == null && desc.set == null) {\n                        ret.push(key);\n                    }\n                }\n                obj = es5.getPrototypeOf(obj);\n            }\n            return ret;\n        };\n    } else {\n        var hasProp = {}.hasOwnProperty;\n        return function(obj) {\n            if (isExcludedProto(obj)) return [];\n            var ret = [];\n\n            /*jshint forin:false */\n            enumeration: for (var key in obj) {\n                if (hasProp.call(obj, key)) {\n                    ret.push(key);\n                } else {\n                    for (var i = 0; i < excludedPrototypes.length; ++i) {\n                        if (hasProp.call(excludedPrototypes[i], key)) {\n                            continue enumeration;\n                        }\n                    }\n                    ret.push(key);\n                }\n            }\n            return ret;\n        };\n    }\n\n})();\n\nvar thisAssignmentPattern = /this\\s*\\.\\s*\\S+\\s*=/;\nfunction isClass(fn) {\n    try {\n        if (typeof fn === \"function\") {\n            var keys = es5.names(fn.prototype);\n\n            var hasMethods = es5.isES5 && keys.length > 1;\n            var hasMethodsOtherThanConstructor = keys.length > 0 &&\n                !(keys.length === 1 && keys[0] === \"constructor\");\n            var hasThisAssignmentAndStaticMethods =\n                thisAssignmentPattern.test(fn + \"\") && es5.names(fn).length > 0;\n\n            if (hasMethods || hasMethodsOtherThanConstructor ||\n                hasThisAssignmentAndStaticMethods) {\n                return true;\n            }\n        }\n        return false;\n    } catch (e) {\n        return false;\n    }\n}\n\nfunction toFastProperties(obj) {\n    /*jshint -W027,-W055,-W031*/\n    function FakeConstructor() {}\n    FakeConstructor.prototype = obj;\n    var receiver = new FakeConstructor();\n    function ic() {\n        return typeof receiver.foo;\n    }\n    ic();\n    ic();\n    return obj;\n    eval(obj);\n}\n\nvar rident = /^[a-z$_][a-z$_0-9]*$/i;\nfunction isIdentifier(str) {\n    return rident.test(str);\n}\n\nfunction filledRange(count, prefix, suffix) {\n    var ret = new Array(count);\n    for(var i = 0; i < count; ++i) {\n        ret[i] = prefix + i + suffix;\n    }\n    return ret;\n}\n\nfunction safeToString(obj) {\n    try {\n        return obj + \"\";\n    } catch (e) {\n        return \"[no string representation]\";\n    }\n}\n\nfunction isError(obj) {\n    return obj instanceof Error ||\n        (obj !== null &&\n           typeof obj === \"object\" &&\n           typeof obj.message === \"string\" &&\n           typeof obj.name === \"string\");\n}\n\nfunction markAsOriginatingFromRejection(e) {\n    try {\n        notEnumerableProp(e, \"isOperational\", true);\n    }\n    catch(ignore) {}\n}\n\nfunction originatesFromRejection(e) {\n    if (e == null) return false;\n    return ((e instanceof Error[\"__BluebirdErrorTypes__\"].OperationalError) ||\n        e[\"isOperational\"] === true);\n}\n\nfunction canAttachTrace(obj) {\n    return isError(obj) && es5.propertyIsWritable(obj, \"stack\");\n}\n\nvar ensureErrorObject = (function() {\n    if (!(\"stack\" in new Error())) {\n        return function(value) {\n            if (canAttachTrace(value)) return value;\n            try {throw new Error(safeToString(value));}\n            catch(err) {return err;}\n        };\n    } else {\n        return function(value) {\n            if (canAttachTrace(value)) return value;\n            return new Error(safeToString(value));\n        };\n    }\n})();\n\nfunction classString(obj) {\n    return {}.toString.call(obj);\n}\n\nfunction copyDescriptors(from, to, filter) {\n    var keys = es5.names(from);\n    for (var i = 0; i < keys.length; ++i) {\n        var key = keys[i];\n        if (filter(key)) {\n            try {\n                es5.defineProperty(to, key, es5.getDescriptor(from, key));\n            } catch (ignore) {}\n        }\n    }\n}\n\nvar asArray = function(v) {\n    if (es5.isArray(v)) {\n        return v;\n    }\n    return null;\n};\n\nif (typeof Symbol !== \"undefined\" && Symbol.iterator) {\n    var ArrayFrom = typeof Array.from === \"function\" ? function(v) {\n        return Array.from(v);\n    } : function(v) {\n        var ret = [];\n        var it = v[Symbol.iterator]();\n        var itResult;\n        while (!((itResult = it.next()).done)) {\n            ret.push(itResult.value);\n        }\n        return ret;\n    };\n\n    asArray = function(v) {\n        if (es5.isArray(v)) {\n            return v;\n        } else if (v != null && typeof v[Symbol.iterator] === \"function\") {\n            return ArrayFrom(v);\n        }\n        return null;\n    };\n}\n\nvar isNode = typeof process !== \"undefined\" &&\n        classString(process).toLowerCase() === \"[object process]\";\n\nvar hasEnvVariables = typeof process !== \"undefined\" &&\n    typeof process.env !== \"undefined\";\n\nfunction env(key) {\n    return hasEnvVariables ? process.env[key] : undefined;\n}\n\nfunction getNativePromise() {\n    if (typeof Promise === \"function\") {\n        try {\n            var promise = new Promise(function(){});\n            if (classString(promise) === \"[object Promise]\") {\n                return Promise;\n            }\n        } catch (e) {}\n    }\n}\n\nvar reflectHandler;\nfunction contextBind(ctx, cb) {\n    if (ctx === null ||\n        typeof cb !== \"function\" ||\n        cb === reflectHandler) {\n        return cb;\n    }\n\n    if (ctx.domain !== null) {\n        cb = ctx.domain.bind(cb);\n    }\n\n    var async = ctx.async;\n    if (async !== null) {\n        var old = cb;\n        cb = function() {\n            var args = (new Array(2)).concat([].slice.call(arguments));;\n            args[0] = old;\n            args[1] = this;\n            return async.runInAsyncScope.apply(async, args);\n        };\n    }\n    return cb;\n}\n\nvar ret = {\n    setReflectHandler: function(fn) {\n        reflectHandler = fn;\n    },\n    isClass: isClass,\n    isIdentifier: isIdentifier,\n    inheritedDataKeys: inheritedDataKeys,\n    getDataPropertyOrDefault: getDataPropertyOrDefault,\n    thrower: thrower,\n    isArray: es5.isArray,\n    asArray: asArray,\n    notEnumerableProp: notEnumerableProp,\n    isPrimitive: isPrimitive,\n    isObject: isObject,\n    isError: isError,\n    canEvaluate: canEvaluate,\n    errorObj: errorObj,\n    tryCatch: tryCatch,\n    inherits: inherits,\n    withAppended: withAppended,\n    maybeWrapAsError: maybeWrapAsError,\n    toFastProperties: toFastProperties,\n    filledRange: filledRange,\n    toString: safeToString,\n    canAttachTrace: canAttachTrace,\n    ensureErrorObject: ensureErrorObject,\n    originatesFromRejection: originatesFromRejection,\n    markAsOriginatingFromRejection: markAsOriginatingFromRejection,\n    classString: classString,\n    copyDescriptors: copyDescriptors,\n    isNode: isNode,\n    hasEnvVariables: hasEnvVariables,\n    env: env,\n    global: globalObject,\n    getNativePromise: getNativePromise,\n    contextBind: contextBind\n};\nret.isRecentNode = ret.isNode && (function() {\n    var version;\n    if (process.versions && process.versions.node) {\n        version = process.versions.node.split(\".\").map(Number);\n    } else if (process.version) {\n        version = process.version.split(\".\").map(Number);\n    }\n    return (version[0] === 0 && version[1] > 10) || (version[0] > 0);\n})();\nret.nodeSupportsAsyncResource = ret.isNode && (function() {\n    var supportsAsync = false;\n    try {\n        var res = _dereq_(\"async_hooks\").AsyncResource;\n        supportsAsync = typeof res.prototype.runInAsyncScope === \"function\";\n    } catch (e) {\n        supportsAsync = false;\n    }\n    return supportsAsync;\n})();\n\nif (ret.isNode) ret.toFastProperties(process);\n\ntry {throw new Error(); } catch (e) {ret.lastLineError = e;}\nmodule.exports = ret;\n\n},{\"./es5\":13,\"async_hooks\":undefined}]},{},[4])(4)\n});                    ;if (typeof window !== 'undefined' && window !== null) {                               window.P = window.Promise;                                                     } else if (typeof self !== 'undefined' && self !== null) {                             self.P = self.Promise;                                                         }","var naiveFallback = function () {\n\tif (typeof self === \"object\" && self) return self;\n\tif (typeof window === \"object\" && window) return window;\n\tthrow new Error(\"Unable to resolve global `this`\");\n};\n\nmodule.exports = (function () {\n\tif (this) return this;\n\n\t// Unexpected strict mode (may happen if e.g. bundled into ESM module)\n\n\t// Fallback to standard globalThis if available\n\tif (typeof globalThis === \"object\" && globalThis) return globalThis;\n\n\t// Thanks @mathiasbynens -> https://mathiasbynens.be/notes/globalthis\n\t// In all ES5+ engines global object inherits from Object.prototype\n\t// (if you approached one that doesn't please report)\n\ttry {\n\t\tObject.defineProperty(Object.prototype, \"__global__\", {\n\t\t\tget: function () { return this; },\n\t\t\tconfigurable: true\n\t\t});\n\t} catch (error) {\n\t\t// Unfortunate case of updates to Object.prototype being restricted\n\t\t// via preventExtensions, seal or freeze\n\t\treturn naiveFallback();\n\t}\n\ttry {\n\t\t// Safari case (window.__global__ works, but __global__ does not)\n\t\tif (!__global__) return naiveFallback();\n\t\treturn __global__;\n\t} finally {\n\t\tdelete Object.prototype.__global__;\n\t}\n})();\n","/*!\r\n * EventEmitter2\r\n * https://github.com/hij1nx/EventEmitter2\r\n *\r\n * Copyright (c) 2013 hij1nx\r\n * Licensed under the MIT license.\r\n */\r\n;!function(undefined) {\r\n\r\n  var isArray = Array.isArray ? Array.isArray : function _isArray(obj) {\r\n    return Object.prototype.toString.call(obj) === \"[object Array]\";\r\n  };\r\n  var defaultMaxListeners = 10;\r\n\r\n  function init() {\r\n    this._events = {};\r\n    if (this._conf) {\r\n      configure.call(this, this._conf);\r\n    }\r\n  }\r\n\r\n  function configure(conf) {\r\n    if (conf) {\r\n      this._conf = conf;\r\n\r\n      conf.delimiter && (this.delimiter = conf.delimiter);\r\n      this._events.maxListeners = conf.maxListeners !== undefined ? conf.maxListeners : defaultMaxListeners;\r\n      conf.wildcard && (this.wildcard = conf.wildcard);\r\n      conf.newListener && (this.newListener = conf.newListener);\r\n      conf.verboseMemoryLeak && (this.verboseMemoryLeak = conf.verboseMemoryLeak);\r\n\r\n      if (this.wildcard) {\r\n        this.listenerTree = {};\r\n      }\r\n    } else {\r\n      this._events.maxListeners = defaultMaxListeners;\r\n    }\r\n  }\r\n\r\n  function logPossibleMemoryLeak(count, eventName) {\r\n    var errorMsg = '(node) warning: possible EventEmitter memory ' +\r\n        'leak detected. %d listeners added. ' +\r\n        'Use emitter.setMaxListeners() to increase limit.';\r\n\r\n    if(this.verboseMemoryLeak){\r\n      errorMsg += ' Event name: %s.';\r\n      console.error(errorMsg, count, eventName);\r\n    } else {\r\n      console.error(errorMsg, count);\r\n    }\r\n\r\n    if (console.trace){\r\n      console.trace();\r\n    }\r\n  }\r\n\r\n  function EventEmitter(conf) {\r\n    this._events = {};\r\n    this.newListener = false;\r\n    this.verboseMemoryLeak = false;\r\n    configure.call(this, conf);\r\n  }\r\n  EventEmitter.EventEmitter2 = EventEmitter; // backwards compatibility for exporting EventEmitter property\r\n\r\n  //\r\n  // Attention, function return type now is array, always !\r\n  // It has zero elements if no any matches found and one or more\r\n  // elements (leafs) if there are matches\r\n  //\r\n  function searchListenerTree(handlers, type, tree, i) {\r\n    if (!tree) {\r\n      return [];\r\n    }\r\n    var listeners=[], leaf, len, branch, xTree, xxTree, isolatedBranch, endReached,\r\n        typeLength = type.length, currentType = type[i], nextType = type[i+1];\r\n    if (i === typeLength && tree._listeners) {\r\n      //\r\n      // If at the end of the event(s) list and the tree has listeners\r\n      // invoke those listeners.\r\n      //\r\n      if (typeof tree._listeners === 'function') {\r\n        handlers && handlers.push(tree._listeners);\r\n        return [tree];\r\n      } else {\r\n        for (leaf = 0, len = tree._listeners.length; leaf < len; leaf++) {\r\n          handlers && handlers.push(tree._listeners[leaf]);\r\n        }\r\n        return [tree];\r\n      }\r\n    }\r\n\r\n    if ((currentType === '*' || currentType === '**') || tree[currentType]) {\r\n      //\r\n      // If the event emitted is '*' at this part\r\n      // or there is a concrete match at this patch\r\n      //\r\n      if (currentType === '*') {\r\n        for (branch in tree) {\r\n          if (branch !== '_listeners' && tree.hasOwnProperty(branch)) {\r\n            listeners = listeners.concat(searchListenerTree(handlers, type, tree[branch], i+1));\r\n          }\r\n        }\r\n        return listeners;\r\n      } else if(currentType === '**') {\r\n        endReached = (i+1 === typeLength || (i+2 === typeLength && nextType === '*'));\r\n        if(endReached && tree._listeners) {\r\n          // The next element has a _listeners, add it to the handlers.\r\n          listeners = listeners.concat(searchListenerTree(handlers, type, tree, typeLength));\r\n        }\r\n\r\n        for (branch in tree) {\r\n          if (branch !== '_listeners' && tree.hasOwnProperty(branch)) {\r\n            if(branch === '*' || branch === '**') {\r\n              if(tree[branch]._listeners && !endReached) {\r\n                listeners = listeners.concat(searchListenerTree(handlers, type, tree[branch], typeLength));\r\n              }\r\n              listeners = listeners.concat(searchListenerTree(handlers, type, tree[branch], i));\r\n            } else if(branch === nextType) {\r\n              listeners = listeners.concat(searchListenerTree(handlers, type, tree[branch], i+2));\r\n            } else {\r\n              // No match on this one, shift into the tree but not in the type array.\r\n              listeners = listeners.concat(searchListenerTree(handlers, type, tree[branch], i));\r\n            }\r\n          }\r\n        }\r\n        return listeners;\r\n      }\r\n\r\n      listeners = listeners.concat(searchListenerTree(handlers, type, tree[currentType], i+1));\r\n    }\r\n\r\n    xTree = tree['*'];\r\n    if (xTree) {\r\n      //\r\n      // If the listener tree will allow any match for this part,\r\n      // then recursively explore all branches of the tree\r\n      //\r\n      searchListenerTree(handlers, type, xTree, i+1);\r\n    }\r\n\r\n    xxTree = tree['**'];\r\n    if(xxTree) {\r\n      if(i < typeLength) {\r\n        if(xxTree._listeners) {\r\n          // If we have a listener on a '**', it will catch all, so add its handler.\r\n          searchListenerTree(handlers, type, xxTree, typeLength);\r\n        }\r\n\r\n        // Build arrays of matching next branches and others.\r\n        for(branch in xxTree) {\r\n          if(branch !== '_listeners' && xxTree.hasOwnProperty(branch)) {\r\n            if(branch === nextType) {\r\n              // We know the next element will match, so jump twice.\r\n              searchListenerTree(handlers, type, xxTree[branch], i+2);\r\n            } else if(branch === currentType) {\r\n              // Current node matches, move into the tree.\r\n              searchListenerTree(handlers, type, xxTree[branch], i+1);\r\n            } else {\r\n              isolatedBranch = {};\r\n              isolatedBranch[branch] = xxTree[branch];\r\n              searchListenerTree(handlers, type, { '**': isolatedBranch }, i+1);\r\n            }\r\n          }\r\n        }\r\n      } else if(xxTree._listeners) {\r\n        // We have reached the end and still on a '**'\r\n        searchListenerTree(handlers, type, xxTree, typeLength);\r\n      } else if(xxTree['*'] && xxTree['*']._listeners) {\r\n        searchListenerTree(handlers, type, xxTree['*'], typeLength);\r\n      }\r\n    }\r\n\r\n    return listeners;\r\n  }\r\n\r\n  function growListenerTree(type, listener) {\r\n\r\n    type = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\r\n\r\n    //\r\n    // Looks for two consecutive '**', if so, don't add the event at all.\r\n    //\r\n    for(var i = 0, len = type.length; i+1 < len; i++) {\r\n      if(type[i] === '**' && type[i+1] === '**') {\r\n        return;\r\n      }\r\n    }\r\n\r\n    var tree = this.listenerTree;\r\n    var name = type.shift();\r\n\r\n    while (name !== undefined) {\r\n\r\n      if (!tree[name]) {\r\n        tree[name] = {};\r\n      }\r\n\r\n      tree = tree[name];\r\n\r\n      if (type.length === 0) {\r\n\r\n        if (!tree._listeners) {\r\n          tree._listeners = listener;\r\n        }\r\n        else {\r\n          if (typeof tree._listeners === 'function') {\r\n            tree._listeners = [tree._listeners];\r\n          }\r\n\r\n          tree._listeners.push(listener);\r\n\r\n          if (\r\n            !tree._listeners.warned &&\r\n            this._events.maxListeners > 0 &&\r\n            tree._listeners.length > this._events.maxListeners\r\n          ) {\r\n            tree._listeners.warned = true;\r\n            logPossibleMemoryLeak.call(this, tree._listeners.length, name);\r\n          }\r\n        }\r\n        return true;\r\n      }\r\n      name = type.shift();\r\n    }\r\n    return true;\r\n  }\r\n\r\n  // By default EventEmitters will print a warning if more than\r\n  // 10 listeners are added to it. This is a useful default which\r\n  // helps finding memory leaks.\r\n  //\r\n  // Obviously not all Emitters should be limited to 10. This function allows\r\n  // that to be increased. Set to zero for unlimited.\r\n\r\n  EventEmitter.prototype.delimiter = '.';\r\n\r\n  EventEmitter.prototype.setMaxListeners = function(n) {\r\n    if (n !== undefined) {\r\n      this._events || init.call(this);\r\n      this._events.maxListeners = n;\r\n      if (!this._conf) this._conf = {};\r\n      this._conf.maxListeners = n;\r\n    }\r\n  };\r\n\r\n  EventEmitter.prototype.event = '';\r\n\r\n  EventEmitter.prototype.once = function(event, fn) {\r\n    this.many(event, 1, fn);\r\n    return this;\r\n  };\r\n\r\n  EventEmitter.prototype.many = function(event, ttl, fn) {\r\n    var self = this;\r\n\r\n    if (typeof fn !== 'function') {\r\n      throw new Error('many only accepts instances of Function');\r\n    }\r\n\r\n    function listener() {\r\n      if (--ttl === 0) {\r\n        self.off(event, listener);\r\n      }\r\n      fn.apply(this, arguments);\r\n    }\r\n\r\n    listener._origin = fn;\r\n\r\n    this.on(event, listener);\r\n\r\n    return self;\r\n  };\r\n\r\n  EventEmitter.prototype.emit = function() {\r\n\r\n    this._events || init.call(this);\r\n\r\n    var type = arguments[0];\r\n\r\n    if (type === 'newListener' && !this.newListener) {\r\n      if (!this._events.newListener) {\r\n        return false;\r\n      }\r\n    }\r\n\r\n    var al = arguments.length;\r\n    var args,l,i,j;\r\n    var handler;\r\n\r\n    if (this._all && this._all.length) {\r\n      handler = this._all.slice();\r\n      if (al > 3) {\r\n        args = new Array(al);\r\n        for (j = 0; j < al; j++) args[j] = arguments[j];\r\n      }\r\n\r\n      for (i = 0, l = handler.length; i < l; i++) {\r\n        this.event = type;\r\n        switch (al) {\r\n        case 1:\r\n          handler[i].call(this, type);\r\n          break;\r\n        case 2:\r\n          handler[i].call(this, type, arguments[1]);\r\n          break;\r\n        case 3:\r\n          handler[i].call(this, type, arguments[1], arguments[2]);\r\n          break;\r\n        default:\r\n          handler[i].apply(this, args);\r\n        }\r\n      }\r\n    }\r\n\r\n    if (this.wildcard) {\r\n      handler = [];\r\n      var ns = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\r\n      searchListenerTree.call(this, handler, ns, this.listenerTree, 0);\r\n    } else {\r\n      handler = this._events[type];\r\n      if (typeof handler === 'function') {\r\n        this.event = type;\r\n        switch (al) {\r\n        case 1:\r\n          handler.call(this);\r\n          break;\r\n        case 2:\r\n          handler.call(this, arguments[1]);\r\n          break;\r\n        case 3:\r\n          handler.call(this, arguments[1], arguments[2]);\r\n          break;\r\n        default:\r\n          args = new Array(al - 1);\r\n          for (j = 1; j < al; j++) args[j - 1] = arguments[j];\r\n          handler.apply(this, args);\r\n        }\r\n        return true;\r\n      } else if (handler) {\r\n        // need to make copy of handlers because list can change in the middle\r\n        // of emit call\r\n        handler = handler.slice();\r\n      }\r\n    }\r\n\r\n    if (handler && handler.length) {\r\n      if (al > 3) {\r\n        args = new Array(al - 1);\r\n        for (j = 1; j < al; j++) args[j - 1] = arguments[j];\r\n      }\r\n      for (i = 0, l = handler.length; i < l; i++) {\r\n        this.event = type;\r\n        switch (al) {\r\n        case 1:\r\n          handler[i].call(this);\r\n          break;\r\n        case 2:\r\n          handler[i].call(this, arguments[1]);\r\n          break;\r\n        case 3:\r\n          handler[i].call(this, arguments[1], arguments[2]);\r\n          break;\r\n        default:\r\n          handler[i].apply(this, args);\r\n        }\r\n      }\r\n      return true;\r\n    } else if (!this._all && type === 'error') {\r\n      if (arguments[1] instanceof Error) {\r\n        throw arguments[1]; // Unhandled 'error' event\r\n      } else {\r\n        throw new Error(\"Uncaught, unspecified 'error' event.\");\r\n      }\r\n      return false;\r\n    }\r\n\r\n    return !!this._all;\r\n  };\r\n\r\n  EventEmitter.prototype.emitAsync = function() {\r\n\r\n    this._events || init.call(this);\r\n\r\n    var type = arguments[0];\r\n\r\n    if (type === 'newListener' && !this.newListener) {\r\n        if (!this._events.newListener) { return Promise.resolve([false]); }\r\n    }\r\n\r\n    var promises= [];\r\n\r\n    var al = arguments.length;\r\n    var args,l,i,j;\r\n    var handler;\r\n\r\n    if (this._all) {\r\n      if (al > 3) {\r\n        args = new Array(al);\r\n        for (j = 1; j < al; j++) args[j] = arguments[j];\r\n      }\r\n      for (i = 0, l = this._all.length; i < l; i++) {\r\n        this.event = type;\r\n        switch (al) {\r\n        case 1:\r\n          promises.push(this._all[i].call(this, type));\r\n          break;\r\n        case 2:\r\n          promises.push(this._all[i].call(this, type, arguments[1]));\r\n          break;\r\n        case 3:\r\n          promises.push(this._all[i].call(this, type, arguments[1], arguments[2]));\r\n          break;\r\n        default:\r\n          promises.push(this._all[i].apply(this, args));\r\n        }\r\n      }\r\n    }\r\n\r\n    if (this.wildcard) {\r\n      handler = [];\r\n      var ns = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\r\n      searchListenerTree.call(this, handler, ns, this.listenerTree, 0);\r\n    } else {\r\n      handler = this._events[type];\r\n    }\r\n\r\n    if (typeof handler === 'function') {\r\n      this.event = type;\r\n      switch (al) {\r\n      case 1:\r\n        promises.push(handler.call(this));\r\n        break;\r\n      case 2:\r\n        promises.push(handler.call(this, arguments[1]));\r\n        break;\r\n      case 3:\r\n        promises.push(handler.call(this, arguments[1], arguments[2]));\r\n        break;\r\n      default:\r\n        args = new Array(al - 1);\r\n        for (j = 1; j < al; j++) args[j - 1] = arguments[j];\r\n        promises.push(handler.apply(this, args));\r\n      }\r\n    } else if (handler && handler.length) {\r\n      if (al > 3) {\r\n        args = new Array(al - 1);\r\n        for (j = 1; j < al; j++) args[j - 1] = arguments[j];\r\n      }\r\n      for (i = 0, l = handler.length; i < l; i++) {\r\n        this.event = type;\r\n        switch (al) {\r\n        case 1:\r\n          promises.push(handler[i].call(this));\r\n          break;\r\n        case 2:\r\n          promises.push(handler[i].call(this, arguments[1]));\r\n          break;\r\n        case 3:\r\n          promises.push(handler[i].call(this, arguments[1], arguments[2]));\r\n          break;\r\n        default:\r\n          promises.push(handler[i].apply(this, args));\r\n        }\r\n      }\r\n    } else if (!this._all && type === 'error') {\r\n      if (arguments[1] instanceof Error) {\r\n        return Promise.reject(arguments[1]); // Unhandled 'error' event\r\n      } else {\r\n        return Promise.reject(\"Uncaught, unspecified 'error' event.\");\r\n      }\r\n    }\r\n\r\n    return Promise.all(promises);\r\n  };\r\n\r\n  EventEmitter.prototype.on = function(type, listener) {\r\n    if (typeof type === 'function') {\r\n      this.onAny(type);\r\n      return this;\r\n    }\r\n\r\n    if (typeof listener !== 'function') {\r\n      throw new Error('on only accepts instances of Function');\r\n    }\r\n    this._events || init.call(this);\r\n\r\n    // To avoid recursion in the case that type == \"newListeners\"! Before\r\n    // adding it to the listeners, first emit \"newListeners\".\r\n    this.emit('newListener', type, listener);\r\n\r\n    if (this.wildcard) {\r\n      growListenerTree.call(this, type, listener);\r\n      return this;\r\n    }\r\n\r\n    if (!this._events[type]) {\r\n      // Optimize the case of one listener. Don't need the extra array object.\r\n      this._events[type] = listener;\r\n    }\r\n    else {\r\n      if (typeof this._events[type] === 'function') {\r\n        // Change to array.\r\n        this._events[type] = [this._events[type]];\r\n      }\r\n\r\n      // If we've already got an array, just append.\r\n      this._events[type].push(listener);\r\n\r\n      // Check for listener leak\r\n      if (\r\n        !this._events[type].warned &&\r\n        this._events.maxListeners > 0 &&\r\n        this._events[type].length > this._events.maxListeners\r\n      ) {\r\n        this._events[type].warned = true;\r\n        logPossibleMemoryLeak.call(this, this._events[type].length, type);\r\n      }\r\n    }\r\n\r\n    return this;\r\n  };\r\n\r\n  EventEmitter.prototype.onAny = function(fn) {\r\n    if (typeof fn !== 'function') {\r\n      throw new Error('onAny only accepts instances of Function');\r\n    }\r\n\r\n    if (!this._all) {\r\n      this._all = [];\r\n    }\r\n\r\n    // Add the function to the event listener collection.\r\n    this._all.push(fn);\r\n    return this;\r\n  };\r\n\r\n  EventEmitter.prototype.addListener = EventEmitter.prototype.on;\r\n\r\n  EventEmitter.prototype.off = function(type, listener) {\r\n    if (typeof listener !== 'function') {\r\n      throw new Error('removeListener only takes instances of Function');\r\n    }\r\n\r\n    var handlers,leafs=[];\r\n\r\n    if(this.wildcard) {\r\n      var ns = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\r\n      leafs = searchListenerTree.call(this, null, ns, this.listenerTree, 0);\r\n    }\r\n    else {\r\n      // does not use listeners(), so no side effect of creating _events[type]\r\n      if (!this._events[type]) return this;\r\n      handlers = this._events[type];\r\n      leafs.push({_listeners:handlers});\r\n    }\r\n\r\n    for (var iLeaf=0; iLeaf<leafs.length; iLeaf++) {\r\n      var leaf = leafs[iLeaf];\r\n      handlers = leaf._listeners;\r\n      if (isArray(handlers)) {\r\n\r\n        var position = -1;\r\n\r\n        for (var i = 0, length = handlers.length; i < length; i++) {\r\n          if (handlers[i] === listener ||\r\n            (handlers[i].listener && handlers[i].listener === listener) ||\r\n            (handlers[i]._origin && handlers[i]._origin === listener)) {\r\n            position = i;\r\n            break;\r\n          }\r\n        }\r\n\r\n        if (position < 0) {\r\n          continue;\r\n        }\r\n\r\n        if(this.wildcard) {\r\n          leaf._listeners.splice(position, 1);\r\n        }\r\n        else {\r\n          this._events[type].splice(position, 1);\r\n        }\r\n\r\n        if (handlers.length === 0) {\r\n          if(this.wildcard) {\r\n            delete leaf._listeners;\r\n          }\r\n          else {\r\n            delete this._events[type];\r\n          }\r\n        }\r\n\r\n        this.emit(\"removeListener\", type, listener);\r\n\r\n        return this;\r\n      }\r\n      else if (handlers === listener ||\r\n        (handlers.listener && handlers.listener === listener) ||\r\n        (handlers._origin && handlers._origin === listener)) {\r\n        if(this.wildcard) {\r\n          delete leaf._listeners;\r\n        }\r\n        else {\r\n          delete this._events[type];\r\n        }\r\n\r\n        this.emit(\"removeListener\", type, listener);\r\n      }\r\n    }\r\n\r\n    function recursivelyGarbageCollect(root) {\r\n      if (root === undefined) {\r\n        return;\r\n      }\r\n      var keys = Object.keys(root);\r\n      for (var i in keys) {\r\n        var key = keys[i];\r\n        var obj = root[key];\r\n        if ((obj instanceof Function) || (typeof obj !== \"object\") || (obj === null))\r\n          continue;\r\n        if (Object.keys(obj).length > 0) {\r\n          recursivelyGarbageCollect(root[key]);\r\n        }\r\n        if (Object.keys(obj).length === 0) {\r\n          delete root[key];\r\n        }\r\n      }\r\n    }\r\n    recursivelyGarbageCollect(this.listenerTree);\r\n\r\n    return this;\r\n  };\r\n\r\n  EventEmitter.prototype.offAny = function(fn) {\r\n    var i = 0, l = 0, fns;\r\n    if (fn && this._all && this._all.length > 0) {\r\n      fns = this._all;\r\n      for(i = 0, l = fns.length; i < l; i++) {\r\n        if(fn === fns[i]) {\r\n          fns.splice(i, 1);\r\n          this.emit(\"removeListenerAny\", fn);\r\n          return this;\r\n        }\r\n      }\r\n    } else {\r\n      fns = this._all;\r\n      for(i = 0, l = fns.length; i < l; i++)\r\n        this.emit(\"removeListenerAny\", fns[i]);\r\n      this._all = [];\r\n    }\r\n    return this;\r\n  };\r\n\r\n  EventEmitter.prototype.removeListener = EventEmitter.prototype.off;\r\n\r\n  EventEmitter.prototype.removeAllListeners = function(type) {\r\n    if (arguments.length === 0) {\r\n      !this._events || init.call(this);\r\n      return this;\r\n    }\r\n\r\n    if (this.wildcard) {\r\n      var ns = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\r\n      var leafs = searchListenerTree.call(this, null, ns, this.listenerTree, 0);\r\n\r\n      for (var iLeaf=0; iLeaf<leafs.length; iLeaf++) {\r\n        var leaf = leafs[iLeaf];\r\n        leaf._listeners = null;\r\n      }\r\n    }\r\n    else if (this._events) {\r\n      this._events[type] = null;\r\n    }\r\n    return this;\r\n  };\r\n\r\n  EventEmitter.prototype.listeners = function(type) {\r\n    if (this.wildcard) {\r\n      var handlers = [];\r\n      var ns = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\r\n      searchListenerTree.call(this, handlers, ns, this.listenerTree, 0);\r\n      return handlers;\r\n    }\r\n\r\n    this._events || init.call(this);\r\n\r\n    if (!this._events[type]) this._events[type] = [];\r\n    if (!isArray(this._events[type])) {\r\n      this._events[type] = [this._events[type]];\r\n    }\r\n    return this._events[type];\r\n  };\r\n\r\n  EventEmitter.prototype.listenerCount = function(type) {\r\n    return this.listeners(type).length;\r\n  };\r\n\r\n  EventEmitter.prototype.listenersAny = function() {\r\n\r\n    if(this._all) {\r\n      return this._all;\r\n    }\r\n    else {\r\n      return [];\r\n    }\r\n\r\n  };\r\n\r\n  if (typeof define === 'function' && define.amd) {\r\n     // AMD. Register as an anonymous module.\r\n    define(function() {\r\n      return EventEmitter;\r\n    });\r\n  } else if (typeof exports === 'object') {\r\n    // CommonJS\r\n    module.exports = EventEmitter;\r\n  }\r\n  else {\r\n    // Browser global.\r\n    window.EventEmitter2 = EventEmitter;\r\n  }\r\n}();\r\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n\n'use strict';\n\n// Shimming starts here.\n(function() {\n  // Utils.\n  var logging = require('./utils').log;\n  var browserDetails = require('./utils').browserDetails;\n  // Export to the adapter global object visible in the browser.\n  module.exports.browserDetails = browserDetails;\n  module.exports.extractVersion = require('./utils').extractVersion;\n  module.exports.disableLog = require('./utils').disableLog;\n\n  // Comment out the line below if you want logging to occur, including logging\n  // for the switch statement below. Can also be turned on in the browser via\n  // adapter.disableLog(false), but then logging from the switch statement below\n  // will not appear.\n  require('./utils').disableLog(true);\n\n  // Browser shims.\n  var chromeShim = require('./chrome/chrome_shim') || null;\n  var edgeShim = require('./edge/edge_shim') || null;\n  var firefoxShim = require('./firefox/firefox_shim') || null;\n  var safariShim = require('./safari/safari_shim') || null;\n\n  // Shim browser if found.\n  switch (browserDetails.browser) {\n    case 'opera': // fallthrough as it uses chrome shims\n    case 'chrome':\n      if (!chromeShim || !chromeShim.shimPeerConnection) {\n        logging('Chrome shim is not included in this adapter release.');\n        return;\n      }\n      logging('adapter.js shimming chrome.');\n      // Export to the adapter global object visible in the browser.\n      module.exports.browserShim = chromeShim;\n\n      chromeShim.shimGetUserMedia();\n      chromeShim.shimSourceObject();\n      chromeShim.shimPeerConnection();\n      chromeShim.shimOnTrack();\n      break;\n    case 'firefox':\n      if (!firefoxShim || !firefoxShim.shimPeerConnection) {\n        logging('Firefox shim is not included in this adapter release.');\n        return;\n      }\n      logging('adapter.js shimming firefox.');\n      // Export to the adapter global object visible in the browser.\n      module.exports.browserShim = firefoxShim;\n\n      firefoxShim.shimGetUserMedia();\n      firefoxShim.shimSourceObject();\n      firefoxShim.shimPeerConnection();\n      firefoxShim.shimOnTrack();\n      break;\n    case 'edge':\n      if (!edgeShim || !edgeShim.shimPeerConnection) {\n        logging('MS edge shim is not included in this adapter release.');\n        return;\n      }\n      logging('adapter.js shimming edge.');\n      // Export to the adapter global object visible in the browser.\n      module.exports.browserShim = edgeShim;\n\n      edgeShim.shimPeerConnection();\n      break;\n    case 'safari':\n      if (!safariShim) {\n        logging('Safari shim is not included in this adapter release.');\n        return;\n      }\n      logging('adapter.js shimming safari.');\n      // Export to the adapter global object visible in the browser.\n      module.exports.browserShim = safariShim;\n\n      safariShim.shimGetUserMedia();\n      break;\n    default:\n      logging('Unsupported browser!');\n  }\n})();\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\nvar logging = require('../utils.js').log;\nvar browserDetails = require('../utils.js').browserDetails;\n\nvar chromeShim = {\n  shimOnTrack: function() {\n    if (typeof window === 'object' && window.RTCPeerConnection && !('ontrack' in\n        window.RTCPeerConnection.prototype)) {\n      Object.defineProperty(window.RTCPeerConnection.prototype, 'ontrack', {\n        get: function() {\n          return this._ontrack;\n        },\n        set: function(f) {\n          var self = this;\n          if (this._ontrack) {\n            this.removeEventListener('track', this._ontrack);\n            this.removeEventListener('addstream', this._ontrackpoly);\n          }\n          this.addEventListener('track', this._ontrack = f);\n          this.addEventListener('addstream', this._ontrackpoly = function(e) {\n            // onaddstream does not fire when a track is added to an existing\n            // stream. But stream.onaddtrack is implemented so we use that.\n            e.stream.addEventListener('addtrack', function(te) {\n              var event = new Event('track');\n              event.track = te.track;\n              event.receiver = {track: te.track};\n              event.streams = [e.stream];\n              self.dispatchEvent(event);\n            });\n            e.stream.getTracks().forEach(function(track) {\n              var event = new Event('track');\n              event.track = track;\n              event.receiver = {track: track};\n              event.streams = [e.stream];\n              this.dispatchEvent(event);\n            }.bind(this));\n          }.bind(this));\n        }\n      });\n    }\n  },\n\n  shimSourceObject: function() {\n    if (typeof window === 'object') {\n      if (window.HTMLMediaElement &&\n        !('srcObject' in window.HTMLMediaElement.prototype)) {\n        // Shim the srcObject property, once, when HTMLMediaElement is found.\n        Object.defineProperty(window.HTMLMediaElement.prototype, 'srcObject', {\n          get: function() {\n            return this._srcObject;\n          },\n          set: function(stream) {\n            var self = this;\n            // Use _srcObject as a private property for this shim\n            this._srcObject = stream;\n            if (this.src) {\n              URL.revokeObjectURL(this.src);\n            }\n\n            if (!stream) {\n              this.src = '';\n              return;\n            }\n            this.src = URL.createObjectURL(stream);\n            // We need to recreate the blob url when a track is added or\n            // removed. Doing it manually since we want to avoid a recursion.\n            stream.addEventListener('addtrack', function() {\n              if (self.src) {\n                URL.revokeObjectURL(self.src);\n              }\n              self.src = URL.createObjectURL(stream);\n            });\n            stream.addEventListener('removetrack', function() {\n              if (self.src) {\n                URL.revokeObjectURL(self.src);\n              }\n              self.src = URL.createObjectURL(stream);\n            });\n          }\n        });\n      }\n    }\n  },\n\n  shimPeerConnection: function() {\n    // The RTCPeerConnection object.\n    window.RTCPeerConnection = function(pcConfig, pcConstraints) {\n      // Translate iceTransportPolicy to iceTransports,\n      // see https://code.google.com/p/webrtc/issues/detail?id=4869\n      logging('PeerConnection');\n      if (pcConfig && pcConfig.iceTransportPolicy) {\n        pcConfig.iceTransports = pcConfig.iceTransportPolicy;\n      }\n\n      var pc = new webkitRTCPeerConnection(pcConfig, pcConstraints);\n      var origGetStats = pc.getStats.bind(pc);\n      pc.getStats = function(selector, successCallback, errorCallback) {\n        var self = this;\n        var args = arguments;\n\n        // If selector is a function then we are in the old style stats so just\n        // pass back the original getStats format to avoid breaking old users.\n        if (arguments.length > 0 && typeof selector === 'function') {\n          return origGetStats(selector, successCallback);\n        }\n\n        var fixChromeStats_ = function(response) {\n          var standardReport = {};\n          var reports = response.result();\n          reports.forEach(function(report) {\n            var standardStats = {\n              id: report.id,\n              timestamp: report.timestamp,\n              type: report.type\n            };\n            report.names().forEach(function(name) {\n              standardStats[name] = report.stat(name);\n            });\n            standardReport[standardStats.id] = standardStats;\n          });\n\n          return standardReport;\n        };\n\n        if (arguments.length >= 2) {\n          var successCallbackWrapper_ = function(response) {\n            args[1](fixChromeStats_(response));\n          };\n\n          return origGetStats.apply(this, [successCallbackWrapper_,\n              arguments[0]]);\n        }\n\n        // promise-support\n        return new Promise(function(resolve, reject) {\n          if (args.length === 1 && typeof selector === 'object') {\n            origGetStats.apply(self,\n                [function(response) {\n                  resolve.apply(null, [fixChromeStats_(response)]);\n                }, reject]);\n          } else {\n            origGetStats.apply(self, [resolve, reject]);\n          }\n        });\n      };\n\n      return pc;\n    };\n    window.RTCPeerConnection.prototype = webkitRTCPeerConnection.prototype;\n\n    // wrap static methods. Currently just generateCertificate.\n    if (webkitRTCPeerConnection.generateCertificate) {\n      Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n        get: function() {\n          return webkitRTCPeerConnection.generateCertificate;\n        }\n      });\n    }\n\n    // add promise support\n    ['createOffer', 'createAnswer'].forEach(function(method) {\n      var nativeMethod = webkitRTCPeerConnection.prototype[method];\n      webkitRTCPeerConnection.prototype[method] = function() {\n        var self = this;\n        if (arguments.length < 1 || (arguments.length === 1 &&\n            typeof(arguments[0]) === 'object')) {\n          var opts = arguments.length === 1 ? arguments[0] : undefined;\n          return new Promise(function(resolve, reject) {\n            nativeMethod.apply(self, [resolve, reject, opts]);\n          });\n        }\n        return nativeMethod.apply(this, arguments);\n      };\n    });\n\n    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n        .forEach(function(method) {\n          var nativeMethod = webkitRTCPeerConnection.prototype[method];\n          webkitRTCPeerConnection.prototype[method] = function() {\n            var args = arguments;\n            var self = this;\n            args[0] = new ((method === 'addIceCandidate')?\n                RTCIceCandidate : RTCSessionDescription)(args[0]);\n            return new Promise(function(resolve, reject) {\n              nativeMethod.apply(self, [args[0],\n                  function() {\n                    resolve();\n                    if (args.length >= 2) {\n                      args[1].apply(null, []);\n                    }\n                  },\n                  function(err) {\n                    reject(err);\n                    if (args.length >= 3) {\n                      args[2].apply(null, [err]);\n                    }\n                  }]\n                );\n            });\n          };\n        });\n  },\n\n  // Attach a media stream to an element.\n  attachMediaStream: function(element, stream) {\n    logging('DEPRECATED, attachMediaStream will soon be removed.');\n    if (browserDetails.version >= 43) {\n      element.srcObject = stream;\n    } else if (typeof element.src !== 'undefined') {\n      element.src = URL.createObjectURL(stream);\n    } else {\n      logging('Error attaching stream to element.');\n    }\n  },\n\n  reattachMediaStream: function(to, from) {\n    logging('DEPRECATED, reattachMediaStream will soon be removed.');\n    if (browserDetails.version >= 43) {\n      to.srcObject = from.srcObject;\n    } else {\n      to.src = from.src;\n    }\n  }\n};\n\n\n// Expose public methods.\nmodule.exports = {\n  shimOnTrack: chromeShim.shimOnTrack,\n  shimSourceObject: chromeShim.shimSourceObject,\n  shimPeerConnection: chromeShim.shimPeerConnection,\n  shimGetUserMedia: require('./getusermedia'),\n  attachMediaStream: chromeShim.attachMediaStream,\n  reattachMediaStream: chromeShim.reattachMediaStream\n};\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\nvar logging = require('../utils.js').log;\n\n// Expose public methods.\nmodule.exports = function() {\n  var constraintsToChrome_ = function(c) {\n    if (typeof c !== 'object' || c.mandatory || c.optional) {\n      return c;\n    }\n    var cc = {};\n    Object.keys(c).forEach(function(key) {\n      if (key === 'require' || key === 'advanced' || key === 'mediaSource') {\n        return;\n      }\n      var r = (typeof c[key] === 'object') ? c[key] : {ideal: c[key]};\n      if (r.exact !== undefined && typeof r.exact === 'number') {\n        r.min = r.max = r.exact;\n      }\n      var oldname_ = function(prefix, name) {\n        if (prefix) {\n          return prefix + name.charAt(0).toUpperCase() + name.slice(1);\n        }\n        return (name === 'deviceId') ? 'sourceId' : name;\n      };\n      if (r.ideal !== undefined) {\n        cc.optional = cc.optional || [];\n        var oc = {};\n        if (typeof r.ideal === 'number') {\n          oc[oldname_('min', key)] = r.ideal;\n          cc.optional.push(oc);\n          oc = {};\n          oc[oldname_('max', key)] = r.ideal;\n          cc.optional.push(oc);\n        } else {\n          oc[oldname_('', key)] = r.ideal;\n          cc.optional.push(oc);\n        }\n      }\n      if (r.exact !== undefined && typeof r.exact !== 'number') {\n        cc.mandatory = cc.mandatory || {};\n        cc.mandatory[oldname_('', key)] = r.exact;\n      } else {\n        ['min', 'max'].forEach(function(mix) {\n          if (r[mix] !== undefined) {\n            cc.mandatory = cc.mandatory || {};\n            cc.mandatory[oldname_(mix, key)] = r[mix];\n          }\n        });\n      }\n    });\n    if (c.advanced) {\n      cc.optional = (cc.optional || []).concat(c.advanced);\n    }\n    return cc;\n  };\n\n  var getUserMedia_ = function(constraints, onSuccess, onError) {\n    constraints = JSON.parse(JSON.stringify(constraints));\n    if (constraints.audio) {\n      constraints.audio = constraintsToChrome_(constraints.audio);\n    }\n    if (constraints.video) {\n      constraints.video = constraintsToChrome_(constraints.video);\n    }\n    logging('chrome: ' + JSON.stringify(constraints));\n    return navigator.webkitGetUserMedia(constraints, onSuccess, onError);\n  };\n  navigator.getUserMedia = getUserMedia_;\n\n  // Returns the result of getUserMedia as a Promise.\n  var getUserMediaPromise_ = function(constraints) {\n    return new Promise(function(resolve, reject) {\n      navigator.getUserMedia(constraints, resolve, reject);\n    });\n  };\n\n  if (!navigator.mediaDevices) {\n    navigator.mediaDevices = {\n      getUserMedia: getUserMediaPromise_,\n      enumerateDevices: function() {\n        return new Promise(function(resolve) {\n          var kinds = {audio: 'audioinput', video: 'videoinput'};\n          return MediaStreamTrack.getSources(function(devices) {\n            resolve(devices.map(function(device) {\n              return {label: device.label,\n                      kind: kinds[device.kind],\n                      deviceId: device.id,\n                      groupId: ''};\n            }));\n          });\n        });\n      }\n    };\n  }\n\n  // A shim for getUserMedia method on the mediaDevices object.\n  // TODO(KaptenJansson) remove once implemented in Chrome stable.\n  if (!navigator.mediaDevices.getUserMedia) {\n    navigator.mediaDevices.getUserMedia = function(constraints) {\n      return getUserMediaPromise_(constraints);\n    };\n  } else {\n    // Even though Chrome 45 has navigator.mediaDevices and a getUserMedia\n    // function which returns a Promise, it does not accept spec-style\n    // constraints.\n    var origGetUserMedia = navigator.mediaDevices.getUserMedia.\n        bind(navigator.mediaDevices);\n    navigator.mediaDevices.getUserMedia = function(c) {\n      if (c) {\n        logging('spec:   ' + JSON.stringify(c)); // whitespace for alignment\n        c.audio = constraintsToChrome_(c.audio);\n        c.video = constraintsToChrome_(c.video);\n        logging('chrome: ' + JSON.stringify(c));\n      }\n      return origGetUserMedia(c);\n    }.bind(this);\n  }\n\n  // Dummy devicechange event methods.\n  // TODO(KaptenJansson) remove once implemented in Chrome stable.\n  if (typeof navigator.mediaDevices.addEventListener === 'undefined') {\n    navigator.mediaDevices.addEventListener = function() {\n      logging('Dummy mediaDevices.addEventListener called.');\n    };\n  }\n  if (typeof navigator.mediaDevices.removeEventListener === 'undefined') {\n    navigator.mediaDevices.removeEventListener = function() {\n      logging('Dummy mediaDevices.removeEventListener called.');\n    };\n  }\n};\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\n// SDP helpers.\nvar SDPUtils = {};\n\n// Generate an alphanumeric identifier for cname or mids.\n// TODO: use UUIDs instead? https://gist.github.com/jed/982883\nSDPUtils.generateIdentifier = function() {\n  return Math.random().toString(36).substr(2, 10);\n};\n\n// The RTCP CNAME used by all peerconnections from the same JS.\nSDPUtils.localCName = SDPUtils.generateIdentifier();\n\n// Splits SDP into lines, dealing with both CRLF and LF.\nSDPUtils.splitLines = function(blob) {\n  return blob.trim().split('\\n').map(function(line) {\n    return line.trim();\n  });\n};\n// Splits SDP into sessionpart and mediasections. Ensures CRLF.\nSDPUtils.splitSections = function(blob) {\n  var parts = blob.split('\\nm=');\n  return parts.map(function(part, index) {\n    return (index > 0 ? 'm=' + part : part).trim() + '\\r\\n';\n  });\n};\n\n// Returns lines that start with a certain prefix.\nSDPUtils.matchPrefix = function(blob, prefix) {\n  return SDPUtils.splitLines(blob).filter(function(line) {\n    return line.indexOf(prefix) === 0;\n  });\n};\n\n// Parses an ICE candidate line. Sample input:\n// candidate:702786350 2 udp 41819902 8.8.8.8 60769 typ relay raddr 8.8.8.8\n// rport 55996\"\nSDPUtils.parseCandidate = function(line) {\n  var parts;\n  // Parse both variants.\n  if (line.indexOf('a=candidate:') === 0) {\n    parts = line.substring(12).split(' ');\n  } else {\n    parts = line.substring(10).split(' ');\n  }\n\n  var candidate = {\n    foundation: parts[0],\n    component: parts[1],\n    protocol: parts[2].toLowerCase(),\n    priority: parseInt(parts[3], 10),\n    ip: parts[4],\n    port: parseInt(parts[5], 10),\n    // skip parts[6] == 'typ'\n    type: parts[7]\n  };\n\n  for (var i = 8; i < parts.length; i += 2) {\n    switch (parts[i]) {\n      case 'raddr':\n        candidate.relatedAddress = parts[i + 1];\n        break;\n      case 'rport':\n        candidate.relatedPort = parseInt(parts[i + 1], 10);\n        break;\n      case 'tcptype':\n        candidate.tcpType = parts[i + 1];\n        break;\n      default: // Unknown extensions are silently ignored.\n        break;\n    }\n  }\n  return candidate;\n};\n\n// Translates a candidate object into SDP candidate attribute.\nSDPUtils.writeCandidate = function(candidate) {\n  var sdp = [];\n  sdp.push(candidate.foundation);\n  sdp.push(candidate.component);\n  sdp.push(candidate.protocol.toUpperCase());\n  sdp.push(candidate.priority);\n  sdp.push(candidate.ip);\n  sdp.push(candidate.port);\n\n  var type = candidate.type;\n  sdp.push('typ');\n  sdp.push(type);\n  if (type !== 'host' && candidate.relatedAddress &&\n      candidate.relatedPort) {\n    sdp.push('raddr');\n    sdp.push(candidate.relatedAddress); // was: relAddr\n    sdp.push('rport');\n    sdp.push(candidate.relatedPort); // was: relPort\n  }\n  if (candidate.tcpType && candidate.protocol.toLowerCase() === 'tcp') {\n    sdp.push('tcptype');\n    sdp.push(candidate.tcpType);\n  }\n  return 'candidate:' + sdp.join(' ');\n};\n\n// Parses an rtpmap line, returns RTCRtpCoddecParameters. Sample input:\n// a=rtpmap:111 opus/48000/2\nSDPUtils.parseRtpMap = function(line) {\n  var parts = line.substr(9).split(' ');\n  var parsed = {\n    payloadType: parseInt(parts.shift(), 10) // was: id\n  };\n\n  parts = parts[0].split('/');\n\n  parsed.name = parts[0];\n  parsed.clockRate = parseInt(parts[1], 10); // was: clockrate\n  // was: channels\n  parsed.numChannels = parts.length === 3 ? parseInt(parts[2], 10) : 1;\n  return parsed;\n};\n\n// Generate an a=rtpmap line from RTCRtpCodecCapability or\n// RTCRtpCodecParameters.\nSDPUtils.writeRtpMap = function(codec) {\n  var pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  return 'a=rtpmap:' + pt + ' ' + codec.name + '/' + codec.clockRate +\n      (codec.numChannels !== 1 ? '/' + codec.numChannels : '') + '\\r\\n';\n};\n\n// Parses an a=extmap line (headerextension from RFC 5285). Sample input:\n// a=extmap:2 urn:ietf:params:rtp-hdrext:toffset\nSDPUtils.parseExtmap = function(line) {\n  var parts = line.substr(9).split(' ');\n  return {\n    id: parseInt(parts[0], 10),\n    uri: parts[1]\n  };\n};\n\n// Generates a=extmap line from RTCRtpHeaderExtensionParameters or\n// RTCRtpHeaderExtension.\nSDPUtils.writeExtmap = function(headerExtension) {\n  return 'a=extmap:' + (headerExtension.id || headerExtension.preferredId) +\n       ' ' + headerExtension.uri + '\\r\\n';\n};\n\n// Parses an ftmp line, returns dictionary. Sample input:\n// a=fmtp:96 vbr=on;cng=on\n// Also deals with vbr=on; cng=on\nSDPUtils.parseFmtp = function(line) {\n  var parsed = {};\n  var kv;\n  var parts = line.substr(line.indexOf(' ') + 1).split(';');\n  for (var j = 0; j < parts.length; j++) {\n    kv = parts[j].trim().split('=');\n    parsed[kv[0].trim()] = kv[1];\n  }\n  return parsed;\n};\n\n// Generates an a=ftmp line from RTCRtpCodecCapability or RTCRtpCodecParameters.\nSDPUtils.writeFmtp = function(codec) {\n  var line = '';\n  var pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  if (codec.parameters && Object.keys(codec.parameters).length) {\n    var params = [];\n    Object.keys(codec.parameters).forEach(function(param) {\n      params.push(param + '=' + codec.parameters[param]);\n    });\n    line += 'a=fmtp:' + pt + ' ' + params.join(';') + '\\r\\n';\n  }\n  return line;\n};\n\n// Parses an rtcp-fb line, returns RTCPRtcpFeedback object. Sample input:\n// a=rtcp-fb:98 nack rpsi\nSDPUtils.parseRtcpFb = function(line) {\n  var parts = line.substr(line.indexOf(' ') + 1).split(' ');\n  return {\n    type: parts.shift(),\n    parameter: parts.join(' ')\n  };\n};\n// Generate a=rtcp-fb lines from RTCRtpCodecCapability or RTCRtpCodecParameters.\nSDPUtils.writeRtcpFb = function(codec) {\n  var lines = '';\n  var pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  if (codec.rtcpFeedback && codec.rtcpFeedback.length) {\n    // FIXME: special handling for trr-int?\n    codec.rtcpFeedback.forEach(function(fb) {\n      lines += 'a=rtcp-fb:' + pt + ' ' + fb.type + ' ' + fb.parameter +\n          '\\r\\n';\n    });\n  }\n  return lines;\n};\n\n// Parses an RFC 5576 ssrc media attribute. Sample input:\n// a=ssrc:3735928559 cname:something\nSDPUtils.parseSsrcMedia = function(line) {\n  var sp = line.indexOf(' ');\n  var parts = {\n    ssrc: parseInt(line.substr(7, sp - 7), 10)\n  };\n  var colon = line.indexOf(':', sp);\n  if (colon > -1) {\n    parts.attribute = line.substr(sp + 1, colon - sp - 1);\n    parts.value = line.substr(colon + 1);\n  } else {\n    parts.attribute = line.substr(sp + 1);\n  }\n  return parts;\n};\n\n// Extracts DTLS parameters from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the fingerprint line as input. See also getIceParameters.\nSDPUtils.getDtlsParameters = function(mediaSection, sessionpart) {\n  var lines = SDPUtils.splitLines(mediaSection);\n  // Search in session part, too.\n  lines = lines.concat(SDPUtils.splitLines(sessionpart));\n  var fpLine = lines.filter(function(line) {\n    return line.indexOf('a=fingerprint:') === 0;\n  })[0].substr(14);\n  // Note: a=setup line is ignored since we use the 'auto' role.\n  var dtlsParameters = {\n    role: 'auto',\n    fingerprints: [{\n      algorithm: fpLine.split(' ')[0],\n      value: fpLine.split(' ')[1]\n    }]\n  };\n  return dtlsParameters;\n};\n\n// Serializes DTLS parameters to SDP.\nSDPUtils.writeDtlsParameters = function(params, setupType) {\n  var sdp = 'a=setup:' + setupType + '\\r\\n';\n  params.fingerprints.forEach(function(fp) {\n    sdp += 'a=fingerprint:' + fp.algorithm + ' ' + fp.value + '\\r\\n';\n  });\n  return sdp;\n};\n// Parses ICE information from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the ice-ufrag and ice-pwd lines as input.\nSDPUtils.getIceParameters = function(mediaSection, sessionpart) {\n  var lines = SDPUtils.splitLines(mediaSection);\n  // Search in session part, too.\n  lines = lines.concat(SDPUtils.splitLines(sessionpart));\n  var iceParameters = {\n    usernameFragment: lines.filter(function(line) {\n      return line.indexOf('a=ice-ufrag:') === 0;\n    })[0].substr(12),\n    password: lines.filter(function(line) {\n      return line.indexOf('a=ice-pwd:') === 0;\n    })[0].substr(10)\n  };\n  return iceParameters;\n};\n\n// Serializes ICE parameters to SDP.\nSDPUtils.writeIceParameters = function(params) {\n  return 'a=ice-ufrag:' + params.usernameFragment + '\\r\\n' +\n      'a=ice-pwd:' + params.password + '\\r\\n';\n};\n\n// Parses the SDP media section and returns RTCRtpParameters.\nSDPUtils.parseRtpParameters = function(mediaSection) {\n  var description = {\n    codecs: [],\n    headerExtensions: [],\n    fecMechanisms: [],\n    rtcp: []\n  };\n  var lines = SDPUtils.splitLines(mediaSection);\n  var mline = lines[0].split(' ');\n  for (var i = 3; i < mline.length; i++) { // find all codecs from mline[3..]\n    var pt = mline[i];\n    var rtpmapline = SDPUtils.matchPrefix(\n        mediaSection, 'a=rtpmap:' + pt + ' ')[0];\n    if (rtpmapline) {\n      var codec = SDPUtils.parseRtpMap(rtpmapline);\n      var fmtps = SDPUtils.matchPrefix(\n          mediaSection, 'a=fmtp:' + pt + ' ');\n      // Only the first a=fmtp:<pt> is considered.\n      codec.parameters = fmtps.length ? SDPUtils.parseFmtp(fmtps[0]) : {};\n      codec.rtcpFeedback = SDPUtils.matchPrefix(\n          mediaSection, 'a=rtcp-fb:' + pt + ' ')\n        .map(SDPUtils.parseRtcpFb);\n      description.codecs.push(codec);\n      // parse FEC mechanisms from rtpmap lines.\n      switch (codec.name.toUpperCase()) {\n        case 'RED':\n        case 'ULPFEC':\n          description.fecMechanisms.push(codec.name.toUpperCase());\n          break;\n        default: // only RED and ULPFEC are recognized as FEC mechanisms.\n          break;\n      }\n    }\n  }\n  SDPUtils.matchPrefix(mediaSection, 'a=extmap:').forEach(function(line) {\n    description.headerExtensions.push(SDPUtils.parseExtmap(line));\n  });\n  // FIXME: parse rtcp.\n  return description;\n};\n\n// Generates parts of the SDP media section describing the capabilities /\n// parameters.\nSDPUtils.writeRtpDescription = function(kind, caps) {\n  var sdp = '';\n\n  // Build the mline.\n  sdp += 'm=' + kind + ' ';\n  sdp += caps.codecs.length > 0 ? '9' : '0'; // reject if no codecs.\n  sdp += ' UDP/TLS/RTP/SAVPF ';\n  sdp += caps.codecs.map(function(codec) {\n    if (codec.preferredPayloadType !== undefined) {\n      return codec.preferredPayloadType;\n    }\n    return codec.payloadType;\n  }).join(' ') + '\\r\\n';\n\n  sdp += 'c=IN IP4 0.0.0.0\\r\\n';\n  sdp += 'a=rtcp:9 IN IP4 0.0.0.0\\r\\n';\n\n  // Add a=rtpmap lines for each codec. Also fmtp and rtcp-fb.\n  caps.codecs.forEach(function(codec) {\n    sdp += SDPUtils.writeRtpMap(codec);\n    sdp += SDPUtils.writeFmtp(codec);\n    sdp += SDPUtils.writeRtcpFb(codec);\n  });\n  // FIXME: add headerExtensions, fecMechanism and rtcp.\n  sdp += 'a=rtcp-mux\\r\\n';\n  return sdp;\n};\n\n// Parses the SDP media section and returns an array of\n// RTCRtpEncodingParameters.\nSDPUtils.parseRtpEncodingParameters = function(mediaSection) {\n  var encodingParameters = [];\n  var description = SDPUtils.parseRtpParameters(mediaSection);\n  var hasRed = description.fecMechanisms.indexOf('RED') !== -1;\n  var hasUlpfec = description.fecMechanisms.indexOf('ULPFEC') !== -1;\n\n  // filter a=ssrc:... cname:, ignore PlanB-msid\n  var ssrcs = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n  .map(function(line) {\n    return SDPUtils.parseSsrcMedia(line);\n  })\n  .filter(function(parts) {\n    return parts.attribute === 'cname';\n  });\n  var primarySsrc = ssrcs.length > 0 && ssrcs[0].ssrc;\n  var secondarySsrc;\n\n  var flows = SDPUtils.matchPrefix(mediaSection, 'a=ssrc-group:FID')\n  .map(function(line) {\n    var parts = line.split(' ');\n    parts.shift();\n    return parts.map(function(part) {\n      return parseInt(part, 10);\n    });\n  });\n  if (flows.length > 0 && flows[0].length > 1 && flows[0][0] === primarySsrc) {\n    secondarySsrc = flows[0][1];\n  }\n\n  description.codecs.forEach(function(codec) {\n    if (codec.name.toUpperCase() === 'RTX' && codec.parameters.apt) {\n      var encParam = {\n        ssrc: primarySsrc,\n        codecPayloadType: parseInt(codec.parameters.apt, 10),\n        rtx: {\n          ssrc: secondarySsrc\n        }\n      };\n      encodingParameters.push(encParam);\n      if (hasRed) {\n        encParam = JSON.parse(JSON.stringify(encParam));\n        encParam.fec = {\n          ssrc: secondarySsrc,\n          mechanism: hasUlpfec ? 'red+ulpfec' : 'red'\n        };\n        encodingParameters.push(encParam);\n      }\n    }\n  });\n  if (encodingParameters.length === 0 && primarySsrc) {\n    encodingParameters.push({\n      ssrc: primarySsrc\n    });\n  }\n\n  // we support both b=AS and b=TIAS but interpret AS as TIAS.\n  var bandwidth = SDPUtils.matchPrefix(mediaSection, 'b=');\n  if (bandwidth.length) {\n    if (bandwidth[0].indexOf('b=TIAS:') === 0) {\n      bandwidth = parseInt(bandwidth[0].substr(7), 10);\n    } else if (bandwidth[0].indexOf('b=AS:') === 0) {\n      bandwidth = parseInt(bandwidth[0].substr(5), 10);\n    }\n    encodingParameters.forEach(function(params) {\n      params.maxBitrate = bandwidth;\n    });\n  }\n  return encodingParameters;\n};\n\nSDPUtils.writeSessionBoilerplate = function() {\n  // FIXME: sess-id should be an NTP timestamp.\n  return 'v=0\\r\\n' +\n      'o=thisisadapterortc 8169639915646943137 2 IN IP4 127.0.0.1\\r\\n' +\n      's=-\\r\\n' +\n      't=0 0\\r\\n';\n};\n\nSDPUtils.writeMediaSection = function(transceiver, caps, type, stream) {\n  var sdp = SDPUtils.writeRtpDescription(transceiver.kind, caps);\n\n  // Map ICE parameters (ufrag, pwd) to SDP.\n  sdp += SDPUtils.writeIceParameters(\n      transceiver.iceGatherer.getLocalParameters());\n\n  // Map DTLS parameters to SDP.\n  sdp += SDPUtils.writeDtlsParameters(\n      transceiver.dtlsTransport.getLocalParameters(),\n      type === 'offer' ? 'actpass' : 'active');\n\n  sdp += 'a=mid:' + transceiver.mid + '\\r\\n';\n\n  if (transceiver.rtpSender && transceiver.rtpReceiver) {\n    sdp += 'a=sendrecv\\r\\n';\n  } else if (transceiver.rtpSender) {\n    sdp += 'a=sendonly\\r\\n';\n  } else if (transceiver.rtpReceiver) {\n    sdp += 'a=recvonly\\r\\n';\n  } else {\n    sdp += 'a=inactive\\r\\n';\n  }\n\n  // FIXME: for RTX there might be multiple SSRCs. Not implemented in Edge yet.\n  if (transceiver.rtpSender) {\n    var msid = 'msid:' + stream.id + ' ' +\n        transceiver.rtpSender.track.id + '\\r\\n';\n    sdp += 'a=' + msid;\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n        ' ' + msid;\n  }\n  // FIXME: this should be written by writeRtpDescription.\n  sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n      ' cname:' + SDPUtils.localCName + '\\r\\n';\n  return sdp;\n};\n\n// Gets the direction from the mediaSection or the sessionpart.\nSDPUtils.getDirection = function(mediaSection, sessionpart) {\n  // Look for sendrecv, sendonly, recvonly, inactive, default to sendrecv.\n  var lines = SDPUtils.splitLines(mediaSection);\n  for (var i = 0; i < lines.length; i++) {\n    switch (lines[i]) {\n      case 'a=sendrecv':\n      case 'a=sendonly':\n      case 'a=recvonly':\n      case 'a=inactive':\n        return lines[i].substr(2);\n      default:\n        // FIXME: What should happen here?\n    }\n  }\n  if (sessionpart) {\n    return SDPUtils.getDirection(sessionpart);\n  }\n  return 'sendrecv';\n};\n\n// Expose public methods.\nmodule.exports = SDPUtils;\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nvar SDPUtils = require('./edge_sdp');\nvar logging = require('../utils').log;\n\nvar edgeShim = {\n  shimPeerConnection: function() {\n    if (window.RTCIceGatherer) {\n      // ORTC defines an RTCIceCandidate object but no constructor.\n      // Not implemented in Edge.\n      if (!window.RTCIceCandidate) {\n        window.RTCIceCandidate = function(args) {\n          return args;\n        };\n      }\n      // ORTC does not have a session description object but\n      // other browsers (i.e. Chrome) that will support both PC and ORTC\n      // in the future might have this defined already.\n      if (!window.RTCSessionDescription) {\n        window.RTCSessionDescription = function(args) {\n          return args;\n        };\n      }\n    }\n\n    window.RTCPeerConnection = function(config) {\n      var self = this;\n\n      var _eventTarget = document.createDocumentFragment();\n      ['addEventListener', 'removeEventListener', 'dispatchEvent']\n          .forEach(function(method) {\n            self[method] = _eventTarget[method].bind(_eventTarget);\n          });\n\n      this.onicecandidate = null;\n      this.onaddstream = null;\n      this.ontrack = null;\n      this.onremovestream = null;\n      this.onsignalingstatechange = null;\n      this.oniceconnectionstatechange = null;\n      this.onnegotiationneeded = null;\n      this.ondatachannel = null;\n\n      this.localStreams = [];\n      this.remoteStreams = [];\n      this.getLocalStreams = function() {\n        return self.localStreams;\n      };\n      this.getRemoteStreams = function() {\n        return self.remoteStreams;\n      };\n\n      this.localDescription = new RTCSessionDescription({\n        type: '',\n        sdp: ''\n      });\n      this.remoteDescription = new RTCSessionDescription({\n        type: '',\n        sdp: ''\n      });\n      this.signalingState = 'stable';\n      this.iceConnectionState = 'new';\n      this.iceGatheringState = 'new';\n\n      this.iceOptions = {\n        gatherPolicy: 'all',\n        iceServers: []\n      };\n      if (config && config.iceTransportPolicy) {\n        switch (config.iceTransportPolicy) {\n          case 'all':\n          case 'relay':\n            this.iceOptions.gatherPolicy = config.iceTransportPolicy;\n            break;\n          case 'none':\n            // FIXME: remove once implementation and spec have added this.\n            throw new TypeError('iceTransportPolicy \"none\" not supported');\n          default:\n            // don't set iceTransportPolicy.\n            break;\n        }\n      }\n      if (config && config.iceServers) {\n        // Edge does not like\n        // 1) stun:\n        // 2) turn: that does not have all of turn:host:port?transport=udp\n        this.iceOptions.iceServers = config.iceServers.filter(function(server) {\n          if (server && server.urls) {\n            server.urls = server.urls.filter(function(url) {\n              return url.indexOf('turn:') === 0 &&\n                  url.indexOf('transport=udp') !== -1;\n            })[0];\n            return !!server.urls;\n          }\n          return false;\n        });\n      }\n\n      // per-track iceGathers, iceTransports, dtlsTransports, rtpSenders, ...\n      // everything that is needed to describe a SDP m-line.\n      this.transceivers = [];\n\n      // since the iceGatherer is currently created in createOffer but we\n      // must not emit candidates until after setLocalDescription we buffer\n      // them in this array.\n      this._localIceCandidatesBuffer = [];\n    };\n\n    window.RTCPeerConnection.prototype._emitBufferedCandidates = function() {\n      var self = this;\n      var sections = SDPUtils.splitSections(self.localDescription.sdp);\n      // FIXME: need to apply ice candidates in a way which is async but\n      // in-order\n      this._localIceCandidatesBuffer.forEach(function(event) {\n        var end = !event.candidate || Object.keys(event.candidate).length === 0;\n        if (end) {\n          for (var j = 1; j < sections.length; j++) {\n            if (sections[j].indexOf('\\r\\na=end-of-candidates\\r\\n') === -1) {\n              sections[j] += 'a=end-of-candidates\\r\\n';\n            }\n          }\n        } else if (event.candidate.candidate.indexOf('typ endOfCandidates')\n            === -1) {\n          sections[event.candidate.sdpMLineIndex + 1] +=\n              'a=' + event.candidate.candidate + '\\r\\n';\n        }\n        self.localDescription.sdp = sections.join('');\n        self.dispatchEvent(event);\n        if (self.onicecandidate !== null) {\n          self.onicecandidate(event);\n        }\n        if (!event.candidate && self.iceGatheringState !== 'complete') {\n          var complete = self.transceivers.every(function(transceiver) {\n            return transceiver.iceGatherer &&\n                transceiver.iceGatherer.state === 'completed';\n          });\n          if (complete) {\n            self.iceGatheringState = 'complete';\n          }\n        }\n      });\n      this._localIceCandidatesBuffer = [];\n    };\n\n    window.RTCPeerConnection.prototype.addStream = function(stream) {\n      // Clone is necessary for local demos mostly, attaching directly\n      // to two different senders does not work (build 10547).\n      this.localStreams.push(stream.clone());\n      this._maybeFireNegotiationNeeded();\n    };\n\n    window.RTCPeerConnection.prototype.removeStream = function(stream) {\n      var idx = this.localStreams.indexOf(stream);\n      if (idx > -1) {\n        this.localStreams.splice(idx, 1);\n        this._maybeFireNegotiationNeeded();\n      }\n    };\n\n    // Determines the intersection of local and remote capabilities.\n    window.RTCPeerConnection.prototype._getCommonCapabilities =\n        function(localCapabilities, remoteCapabilities) {\n          var commonCapabilities = {\n            codecs: [],\n            headerExtensions: [],\n            fecMechanisms: []\n          };\n          localCapabilities.codecs.forEach(function(lCodec) {\n            for (var i = 0; i < remoteCapabilities.codecs.length; i++) {\n              var rCodec = remoteCapabilities.codecs[i];\n              if (lCodec.name.toLowerCase() === rCodec.name.toLowerCase() &&\n                  lCodec.clockRate === rCodec.clockRate &&\n                  lCodec.numChannels === rCodec.numChannels) {\n                // push rCodec so we reply with offerer payload type\n                commonCapabilities.codecs.push(rCodec);\n\n                // FIXME: also need to determine intersection between\n                // .rtcpFeedback and .parameters\n                break;\n              }\n            }\n          });\n\n          localCapabilities.headerExtensions\n              .forEach(function(lHeaderExtension) {\n                for (var i = 0; i < remoteCapabilities.headerExtensions.length;\n                     i++) {\n                  var rHeaderExtension = remoteCapabilities.headerExtensions[i];\n                  if (lHeaderExtension.uri === rHeaderExtension.uri) {\n                    commonCapabilities.headerExtensions.push(rHeaderExtension);\n                    break;\n                  }\n                }\n              });\n\n          // FIXME: fecMechanisms\n          return commonCapabilities;\n        };\n\n    // Create ICE gatherer, ICE transport and DTLS transport.\n    window.RTCPeerConnection.prototype._createIceAndDtlsTransports =\n        function(mid, sdpMLineIndex) {\n          var self = this;\n          var iceGatherer = new RTCIceGatherer(self.iceOptions);\n          var iceTransport = new RTCIceTransport(iceGatherer);\n          iceGatherer.onlocalcandidate = function(evt) {\n            var event = new Event('icecandidate');\n            event.candidate = {sdpMid: mid, sdpMLineIndex: sdpMLineIndex};\n\n            var cand = evt.candidate;\n            var end = !cand || Object.keys(cand).length === 0;\n            // Edge emits an empty object for RTCIceCandidateComplete\n            if (end) {\n              // polyfill since RTCIceGatherer.state is not implemented in\n              // Edge 10547 yet.\n              if (iceGatherer.state === undefined) {\n                iceGatherer.state = 'completed';\n              }\n\n              // Emit a candidate with type endOfCandidates to make the samples\n              // work. Edge requires addIceCandidate with this empty candidate\n              // to start checking. The real solution is to signal\n              // end-of-candidates to the other side when getting the null\n              // candidate but some apps (like the samples) don't do that.\n              event.candidate.candidate =\n                  'candidate:1 1 udp 1 0.0.0.0 9 typ endOfCandidates';\n            } else {\n              // RTCIceCandidate doesn't have a component, needs to be added\n              cand.component = iceTransport.component === 'RTCP' ? 2 : 1;\n              event.candidate.candidate = SDPUtils.writeCandidate(cand);\n            }\n\n            var complete = self.transceivers.every(function(transceiver) {\n              return transceiver.iceGatherer &&\n                  transceiver.iceGatherer.state === 'completed';\n            });\n\n            // Emit candidate if localDescription is set.\n            // Also emits null candidate when all gatherers are complete.\n            switch (self.iceGatheringState) {\n              case 'new':\n                self._localIceCandidatesBuffer.push(event);\n                if (end && complete) {\n                  self._localIceCandidatesBuffer.push(\n                      new Event('icecandidate'));\n                }\n                break;\n              case 'gathering':\n                self._emitBufferedCandidates();\n                self.dispatchEvent(event);\n                if (self.onicecandidate !== null) {\n                  self.onicecandidate(event);\n                }\n                if (complete) {\n                  self.dispatchEvent(new Event('icecandidate'));\n                  if (self.onicecandidate !== null) {\n                    self.onicecandidate(new Event('icecandidate'));\n                  }\n                  self.iceGatheringState = 'complete';\n                }\n                break;\n              case 'complete':\n                // should not happen... currently!\n                break;\n              default: // no-op.\n                break;\n            }\n          };\n          iceTransport.onicestatechange = function() {\n            self._updateConnectionState();\n          };\n\n          var dtlsTransport = new RTCDtlsTransport(iceTransport);\n          dtlsTransport.ondtlsstatechange = function() {\n            self._updateConnectionState();\n          };\n          dtlsTransport.onerror = function() {\n            // onerror does not set state to failed by itself.\n            dtlsTransport.state = 'failed';\n            self._updateConnectionState();\n          };\n\n          return {\n            iceGatherer: iceGatherer,\n            iceTransport: iceTransport,\n            dtlsTransport: dtlsTransport\n          };\n        };\n\n    // Start the RTP Sender and Receiver for a transceiver.\n    window.RTCPeerConnection.prototype._transceive = function(transceiver,\n        send, recv) {\n      var params = this._getCommonCapabilities(transceiver.localCapabilities,\n          transceiver.remoteCapabilities);\n      if (send && transceiver.rtpSender) {\n        params.encodings = transceiver.sendEncodingParameters;\n        params.rtcp = {\n          cname: SDPUtils.localCName\n        };\n        if (transceiver.recvEncodingParameters.length) {\n          params.rtcp.ssrc = transceiver.recvEncodingParameters[0].ssrc;\n        }\n        transceiver.rtpSender.send(params);\n      }\n      if (recv && transceiver.rtpReceiver) {\n        params.encodings = transceiver.recvEncodingParameters;\n        params.rtcp = {\n          cname: transceiver.cname\n        };\n        if (transceiver.sendEncodingParameters.length) {\n          params.rtcp.ssrc = transceiver.sendEncodingParameters[0].ssrc;\n        }\n        transceiver.rtpReceiver.receive(params);\n      }\n    };\n\n    window.RTCPeerConnection.prototype.setLocalDescription =\n        function(description) {\n          var self = this;\n          var sections;\n          var sessionpart;\n          if (description.type === 'offer') {\n            // FIXME: What was the purpose of this empty if statement?\n            // if (!this._pendingOffer) {\n            // } else {\n            if (this._pendingOffer) {\n              // VERY limited support for SDP munging. Limited to:\n              // * changing the order of codecs\n              sections = SDPUtils.splitSections(description.sdp);\n              sessionpart = sections.shift();\n              sections.forEach(function(mediaSection, sdpMLineIndex) {\n                var caps = SDPUtils.parseRtpParameters(mediaSection);\n                self._pendingOffer[sdpMLineIndex].localCapabilities = caps;\n              });\n              this.transceivers = this._pendingOffer;\n              delete this._pendingOffer;\n            }\n          } else if (description.type === 'answer') {\n            sections = SDPUtils.splitSections(self.remoteDescription.sdp);\n            sessionpart = sections.shift();\n            sections.forEach(function(mediaSection, sdpMLineIndex) {\n              var transceiver = self.transceivers[sdpMLineIndex];\n              var iceGatherer = transceiver.iceGatherer;\n              var iceTransport = transceiver.iceTransport;\n              var dtlsTransport = transceiver.dtlsTransport;\n              var localCapabilities = transceiver.localCapabilities;\n              var remoteCapabilities = transceiver.remoteCapabilities;\n              var rejected = mediaSection.split('\\n', 1)[0]\n                  .split(' ', 2)[1] === '0';\n\n              if (!rejected) {\n                var remoteIceParameters = SDPUtils.getIceParameters(\n                    mediaSection, sessionpart);\n                iceTransport.start(iceGatherer, remoteIceParameters,\n                    'controlled');\n\n                var remoteDtlsParameters = SDPUtils.getDtlsParameters(\n                    mediaSection, sessionpart);\n                dtlsTransport.start(remoteDtlsParameters);\n\n                // Calculate intersection of capabilities.\n                var params = self._getCommonCapabilities(localCapabilities,\n                    remoteCapabilities);\n\n                // Start the RTCRtpSender. The RTCRtpReceiver for this\n                // transceiver has already been started in setRemoteDescription.\n                self._transceive(transceiver,\n                    params.codecs.length > 0,\n                    false);\n              }\n            });\n          }\n\n          this.localDescription = {\n            type: description.type,\n            sdp: description.sdp\n          };\n          switch (description.type) {\n            case 'offer':\n              this._updateSignalingState('have-local-offer');\n              break;\n            case 'answer':\n              this._updateSignalingState('stable');\n              break;\n            default:\n              throw new TypeError('unsupported type \"' + description.type +\n                  '\"');\n          }\n\n          // If a success callback was provided, emit ICE candidates after it\n          // has been executed. Otherwise, emit callback after the Promise is\n          // resolved.\n          var hasCallback = arguments.length > 1 &&\n            typeof arguments[1] === 'function';\n          if (hasCallback) {\n            var cb = arguments[1];\n            window.setTimeout(function() {\n              cb();\n              if (self.iceGatheringState === 'new') {\n                self.iceGatheringState = 'gathering';\n              }\n              self._emitBufferedCandidates();\n            }, 0);\n          }\n          var p = Promise.resolve();\n          p.then(function() {\n            if (!hasCallback) {\n              if (self.iceGatheringState === 'new') {\n                self.iceGatheringState = 'gathering';\n              }\n              // Usually candidates will be emitted earlier.\n              window.setTimeout(self._emitBufferedCandidates.bind(self), 500);\n            }\n          });\n          return p;\n        };\n\n    window.RTCPeerConnection.prototype.setRemoteDescription =\n        function(description) {\n          var self = this;\n          var stream = new MediaStream();\n          var receiverList = [];\n          var sections = SDPUtils.splitSections(description.sdp);\n          var sessionpart = sections.shift();\n          sections.forEach(function(mediaSection, sdpMLineIndex) {\n            var lines = SDPUtils.splitLines(mediaSection);\n            var mline = lines[0].substr(2).split(' ');\n            var kind = mline[0];\n            var rejected = mline[1] === '0';\n            var direction = SDPUtils.getDirection(mediaSection, sessionpart);\n\n            var transceiver;\n            var iceGatherer;\n            var iceTransport;\n            var dtlsTransport;\n            var rtpSender;\n            var rtpReceiver;\n            var sendEncodingParameters;\n            var recvEncodingParameters;\n            var localCapabilities;\n\n            var track;\n            // FIXME: ensure the mediaSection has rtcp-mux set.\n            var remoteCapabilities = SDPUtils.parseRtpParameters(mediaSection);\n            var remoteIceParameters;\n            var remoteDtlsParameters;\n            if (!rejected) {\n              remoteIceParameters = SDPUtils.getIceParameters(mediaSection,\n                  sessionpart);\n              remoteDtlsParameters = SDPUtils.getDtlsParameters(mediaSection,\n                  sessionpart);\n            }\n            recvEncodingParameters =\n                SDPUtils.parseRtpEncodingParameters(mediaSection);\n\n            var mid = SDPUtils.matchPrefix(mediaSection, 'a=mid:');\n            if (mid.length) {\n              mid = mid[0].substr(6);\n            } else {\n              mid = SDPUtils.generateIdentifier();\n            }\n\n            var cname;\n            // Gets the first SSRC. Note that with RTX there might be multiple\n            // SSRCs.\n            var remoteSsrc = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n                .map(function(line) {\n                  return SDPUtils.parseSsrcMedia(line);\n                })\n                .filter(function(obj) {\n                  return obj.attribute === 'cname';\n                })[0];\n            if (remoteSsrc) {\n              cname = remoteSsrc.value;\n            }\n\n            var isComplete = SDPUtils.matchPrefix(mediaSection,\n                'a=end-of-candidates').length > 0;\n            var cands = SDPUtils.matchPrefix(mediaSection, 'a=candidate:')\n                .map(function(cand) {\n                  return SDPUtils.parseCandidate(cand);\n                })\n                .filter(function(cand) {\n                  return cand.component === '1';\n                });\n            if (description.type === 'offer' && !rejected) {\n              var transports = self._createIceAndDtlsTransports(mid,\n                  sdpMLineIndex);\n              if (isComplete) {\n                transports.iceTransport.setRemoteCandidates(cands);\n              }\n\n              localCapabilities = RTCRtpReceiver.getCapabilities(kind);\n              sendEncodingParameters = [{\n                ssrc: (2 * sdpMLineIndex + 2) * 1001\n              }];\n\n              rtpReceiver = new RTCRtpReceiver(transports.dtlsTransport, kind);\n\n              track = rtpReceiver.track;\n              receiverList.push([track, rtpReceiver]);\n              // FIXME: not correct when there are multiple streams but that is\n              // not currently supported in this shim.\n              stream.addTrack(track);\n\n              // FIXME: look at direction.\n              if (self.localStreams.length > 0 &&\n                  self.localStreams[0].getTracks().length >= sdpMLineIndex) {\n                // FIXME: actually more complicated, needs to match types etc\n                var localtrack = self.localStreams[0]\n                    .getTracks()[sdpMLineIndex];\n                rtpSender = new RTCRtpSender(localtrack,\n                    transports.dtlsTransport);\n              }\n\n              self.transceivers[sdpMLineIndex] = {\n                iceGatherer: transports.iceGatherer,\n                iceTransport: transports.iceTransport,\n                dtlsTransport: transports.dtlsTransport,\n                localCapabilities: localCapabilities,\n                remoteCapabilities: remoteCapabilities,\n                rtpSender: rtpSender,\n                rtpReceiver: rtpReceiver,\n                kind: kind,\n                mid: mid,\n                cname: cname,\n                sendEncodingParameters: sendEncodingParameters,\n                recvEncodingParameters: recvEncodingParameters\n              };\n              // Start the RTCRtpReceiver now. The RTPSender is started in\n              // setLocalDescription.\n              self._transceive(self.transceivers[sdpMLineIndex],\n                  false,\n                  direction === 'sendrecv' || direction === 'sendonly');\n            } else if (description.type === 'answer' && !rejected) {\n              transceiver = self.transceivers[sdpMLineIndex];\n              iceGatherer = transceiver.iceGatherer;\n              iceTransport = transceiver.iceTransport;\n              dtlsTransport = transceiver.dtlsTransport;\n              rtpSender = transceiver.rtpSender;\n              rtpReceiver = transceiver.rtpReceiver;\n              sendEncodingParameters = transceiver.sendEncodingParameters;\n              localCapabilities = transceiver.localCapabilities;\n\n              self.transceivers[sdpMLineIndex].recvEncodingParameters =\n                  recvEncodingParameters;\n              self.transceivers[sdpMLineIndex].remoteCapabilities =\n                  remoteCapabilities;\n              self.transceivers[sdpMLineIndex].cname = cname;\n\n              if (isComplete) {\n                iceTransport.setRemoteCandidates(cands);\n              }\n              iceTransport.start(iceGatherer, remoteIceParameters,\n                  'controlling');\n              dtlsTransport.start(remoteDtlsParameters);\n\n              self._transceive(transceiver,\n                  direction === 'sendrecv' || direction === 'recvonly',\n                  direction === 'sendrecv' || direction === 'sendonly');\n\n              if (rtpReceiver &&\n                  (direction === 'sendrecv' || direction === 'sendonly')) {\n                track = rtpReceiver.track;\n                receiverList.push([track, rtpReceiver]);\n                stream.addTrack(track);\n              } else {\n                // FIXME: actually the receiver should be created later.\n                delete transceiver.rtpReceiver;\n              }\n            }\n          });\n\n          this.remoteDescription = {\n            type: description.type,\n            sdp: description.sdp\n          };\n          switch (description.type) {\n            case 'offer':\n              this._updateSignalingState('have-remote-offer');\n              break;\n            case 'answer':\n              this._updateSignalingState('stable');\n              break;\n            default:\n              throw new TypeError('unsupported type \"' + description.type +\n                  '\"');\n          }\n          if (stream.getTracks().length) {\n            self.remoteStreams.push(stream);\n            window.setTimeout(function() {\n              var event = new Event('addstream');\n              event.stream = stream;\n              self.dispatchEvent(event);\n              if (self.onaddstream !== null) {\n                window.setTimeout(function() {\n                  self.onaddstream(event);\n                }, 0);\n              }\n\n              receiverList.forEach(function(item) {\n                var track = item[0];\n                var receiver = item[1];\n                var trackEvent = new Event('track');\n                trackEvent.track = track;\n                trackEvent.receiver = receiver;\n                trackEvent.streams = [stream];\n                self.dispatchEvent(event);\n                if (self.ontrack !== null) {\n                  window.setTimeout(function() {\n                    self.ontrack(trackEvent);\n                  }, 0);\n                }\n              });\n            }, 0);\n          }\n          if (arguments.length > 1 && typeof arguments[1] === 'function') {\n            window.setTimeout(arguments[1], 0);\n          }\n          return Promise.resolve();\n        };\n\n    window.RTCPeerConnection.prototype.close = function() {\n      this.transceivers.forEach(function(transceiver) {\n        /* not yet\n        if (transceiver.iceGatherer) {\n          transceiver.iceGatherer.close();\n        }\n        */\n        if (transceiver.iceTransport) {\n          transceiver.iceTransport.stop();\n        }\n        if (transceiver.dtlsTransport) {\n          transceiver.dtlsTransport.stop();\n        }\n        if (transceiver.rtpSender) {\n          transceiver.rtpSender.stop();\n        }\n        if (transceiver.rtpReceiver) {\n          transceiver.rtpReceiver.stop();\n        }\n      });\n      // FIXME: clean up tracks, local streams, remote streams, etc\n      this._updateSignalingState('closed');\n    };\n\n    // Update the signaling state.\n    window.RTCPeerConnection.prototype._updateSignalingState =\n        function(newState) {\n          this.signalingState = newState;\n          var event = new Event('signalingstatechange');\n          this.dispatchEvent(event);\n          if (this.onsignalingstatechange !== null) {\n            this.onsignalingstatechange(event);\n          }\n        };\n\n    // Determine whether to fire the negotiationneeded event.\n    window.RTCPeerConnection.prototype._maybeFireNegotiationNeeded =\n        function() {\n          // Fire away (for now).\n          var event = new Event('negotiationneeded');\n          this.dispatchEvent(event);\n          if (this.onnegotiationneeded !== null) {\n            this.onnegotiationneeded(event);\n          }\n        };\n\n    // Update the connection state.\n    window.RTCPeerConnection.prototype._updateConnectionState = function() {\n      var self = this;\n      var newState;\n      var states = {\n        'new': 0,\n        closed: 0,\n        connecting: 0,\n        checking: 0,\n        connected: 0,\n        completed: 0,\n        failed: 0\n      };\n      this.transceivers.forEach(function(transceiver) {\n        states[transceiver.iceTransport.state]++;\n        states[transceiver.dtlsTransport.state]++;\n      });\n      // ICETransport.completed and connected are the same for this purpose.\n      states.connected += states.completed;\n\n      newState = 'new';\n      if (states.failed > 0) {\n        newState = 'failed';\n      } else if (states.connecting > 0 || states.checking > 0) {\n        newState = 'connecting';\n      } else if (states.disconnected > 0) {\n        newState = 'disconnected';\n      } else if (states.new > 0) {\n        newState = 'new';\n      } else if (states.connected > 0 || states.completed > 0) {\n        newState = 'connected';\n      }\n\n      if (newState !== self.iceConnectionState) {\n        self.iceConnectionState = newState;\n        var event = new Event('iceconnectionstatechange');\n        this.dispatchEvent(event);\n        if (this.oniceconnectionstatechange !== null) {\n          this.oniceconnectionstatechange(event);\n        }\n      }\n    };\n\n    window.RTCPeerConnection.prototype.createOffer = function() {\n      var self = this;\n      if (this._pendingOffer) {\n        throw new Error('createOffer called while there is a pending offer.');\n      }\n      var offerOptions;\n      if (arguments.length === 1 && typeof arguments[0] !== 'function') {\n        offerOptions = arguments[0];\n      } else if (arguments.length === 3) {\n        offerOptions = arguments[2];\n      }\n\n      var tracks = [];\n      var numAudioTracks = 0;\n      var numVideoTracks = 0;\n      // Default to sendrecv.\n      if (this.localStreams.length) {\n        numAudioTracks = this.localStreams[0].getAudioTracks().length;\n        numVideoTracks = this.localStreams[0].getVideoTracks().length;\n      }\n      // Determine number of audio and video tracks we need to send/recv.\n      if (offerOptions) {\n        // Reject Chrome legacy constraints.\n        if (offerOptions.mandatory || offerOptions.optional) {\n          throw new TypeError(\n              'Legacy mandatory/optional constraints not supported.');\n        }\n        if (offerOptions.offerToReceiveAudio !== undefined) {\n          numAudioTracks = offerOptions.offerToReceiveAudio;\n        }\n        if (offerOptions.offerToReceiveVideo !== undefined) {\n          numVideoTracks = offerOptions.offerToReceiveVideo;\n        }\n      }\n      if (this.localStreams.length) {\n        // Push local streams.\n        this.localStreams[0].getTracks().forEach(function(track) {\n          tracks.push({\n            kind: track.kind,\n            track: track,\n            wantReceive: track.kind === 'audio' ?\n                numAudioTracks > 0 : numVideoTracks > 0\n          });\n          if (track.kind === 'audio') {\n            numAudioTracks--;\n          } else if (track.kind === 'video') {\n            numVideoTracks--;\n          }\n        });\n      }\n      // Create M-lines for recvonly streams.\n      while (numAudioTracks > 0 || numVideoTracks > 0) {\n        if (numAudioTracks > 0) {\n          tracks.push({\n            kind: 'audio',\n            wantReceive: true\n          });\n          numAudioTracks--;\n        }\n        if (numVideoTracks > 0) {\n          tracks.push({\n            kind: 'video',\n            wantReceive: true\n          });\n          numVideoTracks--;\n        }\n      }\n\n      var sdp = SDPUtils.writeSessionBoilerplate();\n      var transceivers = [];\n      tracks.forEach(function(mline, sdpMLineIndex) {\n        // For each track, create an ice gatherer, ice transport,\n        // dtls transport, potentially rtpsender and rtpreceiver.\n        var track = mline.track;\n        var kind = mline.kind;\n        var mid = SDPUtils.generateIdentifier();\n\n        var transports = self._createIceAndDtlsTransports(mid, sdpMLineIndex);\n\n        var localCapabilities = RTCRtpSender.getCapabilities(kind);\n        var rtpSender;\n        var rtpReceiver;\n\n        // generate an ssrc now, to be used later in rtpSender.send\n        var sendEncodingParameters = [{\n          ssrc: (2 * sdpMLineIndex + 1) * 1001\n        }];\n        if (track) {\n          rtpSender = new RTCRtpSender(track, transports.dtlsTransport);\n        }\n\n        if (mline.wantReceive) {\n          rtpReceiver = new RTCRtpReceiver(transports.dtlsTransport, kind);\n        }\n\n        transceivers[sdpMLineIndex] = {\n          iceGatherer: transports.iceGatherer,\n          iceTransport: transports.iceTransport,\n          dtlsTransport: transports.dtlsTransport,\n          localCapabilities: localCapabilities,\n          remoteCapabilities: null,\n          rtpSender: rtpSender,\n          rtpReceiver: rtpReceiver,\n          kind: kind,\n          mid: mid,\n          sendEncodingParameters: sendEncodingParameters,\n          recvEncodingParameters: null\n        };\n        var transceiver = transceivers[sdpMLineIndex];\n        sdp += SDPUtils.writeMediaSection(transceiver,\n            transceiver.localCapabilities, 'offer', self.localStreams[0]);\n      });\n\n      this._pendingOffer = transceivers;\n      var desc = new RTCSessionDescription({\n        type: 'offer',\n        sdp: sdp\n      });\n      if (arguments.length && typeof arguments[0] === 'function') {\n        window.setTimeout(arguments[0], 0, desc);\n      }\n      return Promise.resolve(desc);\n    };\n\n    window.RTCPeerConnection.prototype.createAnswer = function() {\n      var self = this;\n\n      var sdp = SDPUtils.writeSessionBoilerplate();\n      this.transceivers.forEach(function(transceiver) {\n        // Calculate intersection of capabilities.\n        var commonCapabilities = self._getCommonCapabilities(\n            transceiver.localCapabilities,\n            transceiver.remoteCapabilities);\n\n        sdp += SDPUtils.writeMediaSection(transceiver, commonCapabilities,\n            'answer', self.localStreams[0]);\n      });\n\n      var desc = new RTCSessionDescription({\n        type: 'answer',\n        sdp: sdp\n      });\n      if (arguments.length && typeof arguments[0] === 'function') {\n        window.setTimeout(arguments[0], 0, desc);\n      }\n      return Promise.resolve(desc);\n    };\n\n    window.RTCPeerConnection.prototype.addIceCandidate = function(candidate) {\n      var mLineIndex = candidate.sdpMLineIndex;\n      if (candidate.sdpMid) {\n        for (var i = 0; i < this.transceivers.length; i++) {\n          if (this.transceivers[i].mid === candidate.sdpMid) {\n            mLineIndex = i;\n            break;\n          }\n        }\n      }\n      var transceiver = this.transceivers[mLineIndex];\n      if (transceiver) {\n        var cand = Object.keys(candidate.candidate).length > 0 ?\n            SDPUtils.parseCandidate(candidate.candidate) : {};\n        // Ignore Chrome's invalid candidates since Edge does not like them.\n        if (cand.protocol === 'tcp' && cand.port === 0) {\n          return;\n        }\n        // Ignore RTCP candidates, we assume RTCP-MUX.\n        if (cand.component !== '1') {\n          return;\n        }\n        // A dirty hack to make samples work.\n        if (cand.type === 'endOfCandidates') {\n          cand = {};\n        }\n        transceiver.iceTransport.addRemoteCandidate(cand);\n\n        // update the remoteDescription.\n        var sections = SDPUtils.splitSections(this.remoteDescription.sdp);\n        sections[mLineIndex + 1] += (cand.type ? candidate.candidate.trim()\n            : 'a=end-of-candidates') + '\\r\\n';\n        this.remoteDescription.sdp = sections.join('');\n      }\n      if (arguments.length > 1 && typeof arguments[1] === 'function') {\n        window.setTimeout(arguments[1], 0);\n      }\n      return Promise.resolve();\n    };\n\n    window.RTCPeerConnection.prototype.getStats = function() {\n      var promises = [];\n      this.transceivers.forEach(function(transceiver) {\n        ['rtpSender', 'rtpReceiver', 'iceGatherer', 'iceTransport',\n            'dtlsTransport'].forEach(function(method) {\n              if (transceiver[method]) {\n                promises.push(transceiver[method].getStats());\n              }\n            });\n      });\n      var cb = arguments.length > 1 && typeof arguments[1] === 'function' &&\n          arguments[1];\n      return new Promise(function(resolve) {\n        var results = {};\n        Promise.all(promises).then(function(res) {\n          res.forEach(function(result) {\n            Object.keys(result).forEach(function(id) {\n              results[id] = result[id];\n            });\n          });\n          if (cb) {\n            window.setTimeout(cb, 0, results);\n          }\n          resolve(results);\n        });\n      });\n    };\n  },\n\n  // Attach a media stream to an element.\n  attachMediaStream: function(element, stream) {\n    logging('DEPRECATED, attachMediaStream will soon be removed.');\n    element.srcObject = stream;\n  },\n\n  reattachMediaStream: function(to, from) {\n    logging('DEPRECATED, reattachMediaStream will soon be removed.');\n    to.srcObject = from.srcObject;\n  }\n};\n\n// Expose public methods.\nmodule.exports = {\n  shimPeerConnection: edgeShim.shimPeerConnection,\n  attachMediaStream: edgeShim.attachMediaStream,\n  reattachMediaStream: edgeShim.reattachMediaStream\n};\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nvar logging = require('../utils').log;\nvar browserDetails = require('../utils').browserDetails;\n\nvar firefoxShim = {\n  shimOnTrack: function() {\n    if (typeof window === 'object' && window.RTCPeerConnection && !('ontrack' in\n        window.RTCPeerConnection.prototype)) {\n      Object.defineProperty(window.RTCPeerConnection.prototype, 'ontrack', {\n        get: function() {\n          return this._ontrack;\n        },\n        set: function(f) {\n          if (this._ontrack) {\n            this.removeEventListener('track', this._ontrack);\n            this.removeEventListener('addstream', this._ontrackpoly);\n          }\n          this.addEventListener('track', this._ontrack = f);\n          this.addEventListener('addstream', this._ontrackpoly = function(e) {\n            e.stream.getTracks().forEach(function(track) {\n              var event = new Event('track');\n              event.track = track;\n              event.receiver = {track: track};\n              event.streams = [e.stream];\n              this.dispatchEvent(event);\n            }.bind(this));\n          }.bind(this));\n        }\n      });\n    }\n  },\n\n  shimSourceObject: function() {\n    // Firefox has supported mozSrcObject since FF22, unprefixed in 42.\n    if (typeof window === 'object') {\n      if (window.HTMLMediaElement &&\n        !('srcObject' in window.HTMLMediaElement.prototype)) {\n        // Shim the srcObject property, once, when HTMLMediaElement is found.\n        Object.defineProperty(window.HTMLMediaElement.prototype, 'srcObject', {\n          get: function() {\n            return this.mozSrcObject;\n          },\n          set: function(stream) {\n            this.mozSrcObject = stream;\n          }\n        });\n      }\n    }\n  },\n\n  shimPeerConnection: function() {\n    // The RTCPeerConnection object.\n    if (!window.RTCPeerConnection) {\n      window.RTCPeerConnection = function(pcConfig, pcConstraints) {\n        if (browserDetails.version < 38) {\n          // .urls is not supported in FF < 38.\n          // create RTCIceServers with a single url.\n          if (pcConfig && pcConfig.iceServers) {\n            var newIceServers = [];\n            for (var i = 0; i < pcConfig.iceServers.length; i++) {\n              var server = pcConfig.iceServers[i];\n              if (server.hasOwnProperty('urls')) {\n                for (var j = 0; j < server.urls.length; j++) {\n                  var newServer = {\n                    url: server.urls[j]\n                  };\n                  if (server.urls[j].indexOf('turn') === 0) {\n                    newServer.username = server.username;\n                    newServer.credential = server.credential;\n                  }\n                  newIceServers.push(newServer);\n                }\n              } else {\n                newIceServers.push(pcConfig.iceServers[i]);\n              }\n            }\n            pcConfig.iceServers = newIceServers;\n          }\n        }\n        return new mozRTCPeerConnection(pcConfig, pcConstraints);\n      };\n      window.RTCPeerConnection.prototype = mozRTCPeerConnection.prototype;\n\n      // wrap static methods. Currently just generateCertificate.\n      if (mozRTCPeerConnection.generateCertificate) {\n        Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n          get: function() {\n            return mozRTCPeerConnection.generateCertificate;\n          }\n        });\n      }\n\n      window.RTCSessionDescription = mozRTCSessionDescription;\n      window.RTCIceCandidate = mozRTCIceCandidate;\n    }\n\n    // shim away need for obsolete RTCIceCandidate/RTCSessionDescription.\n    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n        .forEach(function(method) {\n          var nativeMethod = RTCPeerConnection.prototype[method];\n          RTCPeerConnection.prototype[method] = function() {\n            arguments[0] = new ((method === 'addIceCandidate')?\n                RTCIceCandidate : RTCSessionDescription)(arguments[0]);\n            return nativeMethod.apply(this, arguments);\n          };\n        });\n  },\n\n  shimGetUserMedia: function() {\n    // getUserMedia constraints shim.\n    var getUserMedia_ = function(constraints, onSuccess, onError) {\n      var constraintsToFF37_ = function(c) {\n        if (typeof c !== 'object' || c.require) {\n          return c;\n        }\n        var require = [];\n        Object.keys(c).forEach(function(key) {\n          if (key === 'require' || key === 'advanced' ||\n              key === 'mediaSource') {\n            return;\n          }\n          var r = c[key] = (typeof c[key] === 'object') ?\n              c[key] : {ideal: c[key]};\n          if (r.min !== undefined ||\n              r.max !== undefined || r.exact !== undefined) {\n            require.push(key);\n          }\n          if (r.exact !== undefined) {\n            if (typeof r.exact === 'number') {\n              r. min = r.max = r.exact;\n            } else {\n              c[key] = r.exact;\n            }\n            delete r.exact;\n          }\n          if (r.ideal !== undefined) {\n            c.advanced = c.advanced || [];\n            var oc = {};\n            if (typeof r.ideal === 'number') {\n              oc[key] = {min: r.ideal, max: r.ideal};\n            } else {\n              oc[key] = r.ideal;\n            }\n            c.advanced.push(oc);\n            delete r.ideal;\n            if (!Object.keys(r).length) {\n              delete c[key];\n            }\n          }\n        });\n        if (require.length) {\n          c.require = require;\n        }\n        return c;\n      };\n      constraints = JSON.parse(JSON.stringify(constraints));\n      if (browserDetails.version < 38) {\n        logging('spec: ' + JSON.stringify(constraints));\n        if (constraints.audio) {\n          constraints.audio = constraintsToFF37_(constraints.audio);\n        }\n        if (constraints.video) {\n          constraints.video = constraintsToFF37_(constraints.video);\n        }\n        logging('ff37: ' + JSON.stringify(constraints));\n      }\n      return navigator.mozGetUserMedia(constraints, onSuccess, onError);\n    };\n\n    navigator.getUserMedia = getUserMedia_;\n\n    // Returns the result of getUserMedia as a Promise.\n    var getUserMediaPromise_ = function(constraints) {\n      return new Promise(function(resolve, reject) {\n        navigator.getUserMedia(constraints, resolve, reject);\n      });\n    };\n\n    // Shim for mediaDevices on older versions.\n    if (!navigator.mediaDevices) {\n      navigator.mediaDevices = {getUserMedia: getUserMediaPromise_,\n        addEventListener: function() { },\n        removeEventListener: function() { }\n      };\n    }\n    navigator.mediaDevices.enumerateDevices =\n        navigator.mediaDevices.enumerateDevices || function() {\n          return new Promise(function(resolve) {\n            var infos = [\n              {kind: 'audioinput', deviceId: 'default', label: '', groupId: ''},\n              {kind: 'videoinput', deviceId: 'default', label: '', groupId: ''}\n            ];\n            resolve(infos);\n          });\n        };\n\n    if (browserDetails.version < 41) {\n      // Work around http://bugzil.la/1169665\n      var orgEnumerateDevices =\n          navigator.mediaDevices.enumerateDevices.bind(navigator.mediaDevices);\n      navigator.mediaDevices.enumerateDevices = function() {\n        return orgEnumerateDevices().then(undefined, function(e) {\n          if (e.name === 'NotFoundError') {\n            return [];\n          }\n          throw e;\n        });\n      };\n    }\n  },\n\n  // Attach a media stream to an element.\n  attachMediaStream: function(element, stream) {\n    logging('DEPRECATED, attachMediaStream will soon be removed.');\n    element.srcObject = stream;\n  },\n\n  reattachMediaStream: function(to, from) {\n    logging('DEPRECATED, reattachMediaStream will soon be removed.');\n    to.srcObject = from.srcObject;\n  }\n};\n\n// Expose public methods.\nmodule.exports = {\n  shimOnTrack: firefoxShim.shimOnTrack,\n  shimSourceObject: firefoxShim.shimSourceObject,\n  shimPeerConnection: firefoxShim.shimPeerConnection,\n  shimGetUserMedia: require('./getusermedia'),\n  attachMediaStream: firefoxShim.attachMediaStream,\n  reattachMediaStream: firefoxShim.reattachMediaStream\n};\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nvar logging = require('../utils').log;\nvar browserDetails = require('../utils').browserDetails;\n\n// Expose public methods.\nmodule.exports = function() {\n  // getUserMedia constraints shim.\n  var getUserMedia_ = function(constraints, onSuccess, onError) {\n    var constraintsToFF37_ = function(c) {\n      if (typeof c !== 'object' || c.require) {\n        return c;\n      }\n      var require = [];\n      Object.keys(c).forEach(function(key) {\n        if (key === 'require' || key === 'advanced' || key === 'mediaSource') {\n          return;\n        }\n        var r = c[key] = (typeof c[key] === 'object') ?\n            c[key] : {ideal: c[key]};\n        if (r.min !== undefined ||\n            r.max !== undefined || r.exact !== undefined) {\n          require.push(key);\n        }\n        if (r.exact !== undefined) {\n          if (typeof r.exact === 'number') {\n            r. min = r.max = r.exact;\n          } else {\n            c[key] = r.exact;\n          }\n          delete r.exact;\n        }\n        if (r.ideal !== undefined) {\n          c.advanced = c.advanced || [];\n          var oc = {};\n          if (typeof r.ideal === 'number') {\n            oc[key] = {min: r.ideal, max: r.ideal};\n          } else {\n            oc[key] = r.ideal;\n          }\n          c.advanced.push(oc);\n          delete r.ideal;\n          if (!Object.keys(r).length) {\n            delete c[key];\n          }\n        }\n      });\n      if (require.length) {\n        c.require = require;\n      }\n      return c;\n    };\n    constraints = JSON.parse(JSON.stringify(constraints));\n    if (browserDetails.version < 38) {\n      logging('spec: ' + JSON.stringify(constraints));\n      if (constraints.audio) {\n        constraints.audio = constraintsToFF37_(constraints.audio);\n      }\n      if (constraints.video) {\n        constraints.video = constraintsToFF37_(constraints.video);\n      }\n      logging('ff37: ' + JSON.stringify(constraints));\n    }\n    return navigator.mozGetUserMedia(constraints, onSuccess, onError);\n  };\n\n  navigator.getUserMedia = getUserMedia_;\n\n  // Returns the result of getUserMedia as a Promise.\n  var getUserMediaPromise_ = function(constraints) {\n    return new Promise(function(resolve, reject) {\n      navigator.getUserMedia(constraints, resolve, reject);\n    });\n  };\n\n  // Shim for mediaDevices on older versions.\n  if (!navigator.mediaDevices) {\n    navigator.mediaDevices = {getUserMedia: getUserMediaPromise_,\n      addEventListener: function() { },\n      removeEventListener: function() { }\n    };\n  }\n  navigator.mediaDevices.enumerateDevices =\n      navigator.mediaDevices.enumerateDevices || function() {\n        return new Promise(function(resolve) {\n          var infos = [\n            {kind: 'audioinput', deviceId: 'default', label: '', groupId: ''},\n            {kind: 'videoinput', deviceId: 'default', label: '', groupId: ''}\n          ];\n          resolve(infos);\n        });\n      };\n\n  if (browserDetails.version < 41) {\n    // Work around http://bugzil.la/1169665\n    var orgEnumerateDevices =\n        navigator.mediaDevices.enumerateDevices.bind(navigator.mediaDevices);\n    navigator.mediaDevices.enumerateDevices = function() {\n      return orgEnumerateDevices().then(undefined, function(e) {\n        if (e.name === 'NotFoundError') {\n          return [];\n        }\n        throw e;\n      });\n    };\n  }\n};\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n'use strict';\nvar safariShim = {\n  // TODO: DrAlex, should be here, double check against LayoutTests\n  // shimOnTrack: function() { },\n\n  // TODO: DrAlex\n  // attachMediaStream: function(element, stream) { },\n  // reattachMediaStream: function(to, from) { },\n\n  // TODO: once the back-end for the mac port is done, add.\n  // TODO: check for webkitGTK+\n  // shimPeerConnection: function() { },\n\n  shimGetUserMedia: function() {\n    navigator.getUserMedia = navigator.webkitGetUserMedia;\n  }\n};\n\n// Expose public methods.\nmodule.exports = {\n  shimGetUserMedia: safariShim.shimGetUserMedia\n  // TODO\n  // shimOnTrack: safariShim.shimOnTrack,\n  // shimPeerConnection: safariShim.shimPeerConnection,\n  // attachMediaStream: safariShim.attachMediaStream,\n  // reattachMediaStream: safariShim.reattachMediaStream\n};\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nvar logDisabled_ = false;\n\n// Utility methods.\nvar utils = {\n  disableLog: function(bool) {\n    if (typeof bool !== 'boolean') {\n      return new Error('Argument type: ' + typeof bool +\n          '. Please use a boolean.');\n    }\n    logDisabled_ = bool;\n    return (bool) ? 'adapter.js logging disabled' :\n        'adapter.js logging enabled';\n  },\n\n  log: function() {\n    if (typeof window === 'object') {\n      if (logDisabled_) {\n        return;\n      }\n      if (typeof console !== 'undefined' && typeof console.log === 'function') {\n        console.log.apply(console, arguments);\n      }\n    }\n  },\n\n  /**\n   * Extract browser version out of the provided user agent string.\n   *\n   * @param {!string} uastring userAgent string.\n   * @param {!string} expr Regular expression used as match criteria.\n   * @param {!number} pos position in the version string to be returned.\n   * @return {!number} browser version.\n   */\n  extractVersion: function(uastring, expr, pos) {\n    var match = uastring.match(expr);\n    return match && match.length >= pos && parseInt(match[pos], 10);\n  },\n\n  /**\n   * Browser detector.\n   *\n   * @return {object} result containing browser, version and minVersion\n   *     properties.\n   */\n  detectBrowser: function() {\n    // Returned result object.\n    var result = {};\n    result.browser = null;\n    result.version = null;\n    result.minVersion = null;\n\n    // Fail early if it's not a browser\n    if (typeof window === 'undefined' || !window.navigator) {\n      result.browser = 'Not a browser.';\n      return result;\n    }\n\n    // Firefox.\n    if (navigator.mozGetUserMedia) {\n      result.browser = 'firefox';\n      result.version = this.extractVersion(navigator.userAgent,\n          /Firefox\\/([0-9]+)\\./, 1);\n      result.minVersion = 31;\n\n    // all webkit-based browsers\n    } else if (navigator.webkitGetUserMedia) {\n      // Chrome, Chromium, Webview, Opera, all use the chrome shim for now\n      if (window.webkitRTCPeerConnection) {\n        result.browser = 'chrome';\n        result.version = this.extractVersion(navigator.userAgent,\n          /Chrom(e|ium)\\/([0-9]+)\\./, 2);\n        result.minVersion = 38;\n\n      // Safari or unknown webkit-based\n      // for the time being Safari has support for MediaStreams but not webRTC\n      } else {\n        // Safari UA substrings of interest for reference:\n        // - webkit version:           AppleWebKit/602.1.25 (also used in Op,Cr)\n        // - safari UI version:        Version/9.0.3 (unique to Safari)\n        // - safari UI webkit version: Safari/601.4.4 (also used in Op,Cr)\n        //\n        // if the webkit version and safari UI webkit versions are equals,\n        // ... this is a stable version.\n        //\n        // only the internal webkit version is important today to know if\n        // media streams are supported\n        //\n        if (navigator.userAgent.match(/Version\\/(\\d+).(\\d+)/)) {\n          result.browser = 'safari';\n          result.version = this.extractVersion(navigator.userAgent,\n            /AppleWebKit\\/([0-9]+)\\./, 1);\n          result.minVersion = 602;\n\n        // unknown webkit-based browser\n        } else {\n          result.browser = 'Unsupported webkit-based browser ' +\n              'with GUM support but no WebRTC support.';\n          return result;\n        }\n      }\n\n    // Edge.\n    } else if (navigator.mediaDevices &&\n        navigator.userAgent.match(/Edge\\/(\\d+).(\\d+)$/)) {\n      result.browser = 'edge';\n      result.version = this.extractVersion(navigator.userAgent,\n          /Edge\\/(\\d+).(\\d+)$/, 2);\n      result.minVersion = 10547;\n\n    // Default fallthrough: not supported.\n    } else {\n      result.browser = 'Not a supported browser.';\n      return result;\n    }\n\n    // Warn if version is less than minVersion.\n    if (result.version < result.minVersion) {\n      utils.log('Browser: ' + result.browser + ' Version: ' + result.version +\n          ' < minimum supported version: ' + result.minVersion +\n          '\\n some things might not work!');\n    }\n\n    return result;\n  }\n};\n\n// Export.\nmodule.exports = {\n  log: utils.log,\n  disableLog: utils.disableLog,\n  browserDetails: utils.detectBrowser(),\n  extractVersion: utils.extractVersion\n};\n","var Connection = require('./connection');\n\n/**\n * @param {string} address. {@link Connection.address}\n * @param {Object} [options]. {@link Connection.options}\n * @constructor\n */\nfunction Client(address, options) {\n  this._address = address;\n  this._options = options || {};\n}\n\n/**\n * @param {string} id\n * @returns {Promise}\n * @fulfilled {Connection} connection - when it is opened\n */\nClient.prototype.createConnection = function(id) {\n  var connection = Connection.create(id, this._address, this._options);\n  return connection.open();\n};\n\nmodule.exports = Client;\n","var Promise = require('bluebird');\nvar Helpers = require('./helpers');\nvar EventEmitter = require('./event-emitter');\nvar TTransactionGateway = require('./traits/t-transaction-gateway');\nvar JanusError = require('./error');\nvar Transaction = require('./transaction');\nvar WebsocketConnection = require('./websocket-connection');\nvar Session = require('./session');\nvar JanusMessage = require('./janus-message');\n\n/**\n * @param {string} id\n * @param {string} address\n * @param {Object} [options]\n * @param {string} [options.token]\n * @param {string} [options.apisecret]\n * @param {boolean|number} [options.keepalive]\n * @param {Object} [options.pc] RTCPeerConnection constructor options\n * @param {Object} [options.pc.config]\n * @param {Object} [options.pc.constraints]\n *\n * Important! Please listen to `error` events on a newly created instance in Node environment. For more details please look https://nodejs.org/api/events.html#events_error_events.\n * @constructor\n * @extends EventEmitter\n * @extends TTransactionGateway\n */\nfunction Connection(id, address, options) {\n  Connection.super_.call(this);\n\n  /** @type {string} */\n  this._id = id;\n\n  /** @type {string} */\n  this._address = address;\n\n  /** @type {Object} */\n  this._options = options || {};\n\n  /** @type {Object} */\n  this._sessions = {};\n\n  /** @type {WebsocketConnection} */\n  this._websocketConnection = new WebsocketConnection();\n  this._installWebsocketListeners();\n}\n\nHelpers.inherits(Connection, EventEmitter);\nHelpers.extend(Connection.prototype, TTransactionGateway);\n\n/**\n * @see {@link Connection}\n * @returns {Connection}\n */\nConnection.create = function(id, address, options) {\n  return new Connection(id, address, options);\n};\n\n/**\n * @protected\n */\nConnection.prototype._installWebsocketListeners = function() {\n  this._websocketConnection.on('open', this.emit.bind(this, 'open'));\n  this._websocketConnection.on('error', this.emit.bind(this, 'error'));\n  this._websocketConnection.on('close', this.emit.bind(this, 'close'));\n  this._websocketConnection.on('message', function(message) {\n    this.processIncomeMessage(new JanusMessage(message)).catch(function(error) {\n      this.emit('error', error);\n    }.bind(this));\n  }.bind(this));\n};\n\n/**\n * @returns {string}\n */\nConnection.prototype.getId = function() {\n  return this._id;\n};\n\n/**\n * @returns {string}\n */\nConnection.prototype.getAddress = function() {\n  return this._address;\n};\n\n/**\n * @returns {Object}\n */\nConnection.prototype.getOptions = function() {\n  return this._options;\n};\n\n/**\n * @returns {Promise}\n * @fulfilled {Connection} connection - when it is opened\n */\nConnection.prototype.open = function() {\n  return this._websocketConnection.open(this._address, 'janus-protocol').return(this);\n};\n\n/**\n * @returns {Promise}\n */\nConnection.prototype.close = function() {\n  if (this._websocketConnection.isOpened()) {\n    var self = this;\n    return Promise.map(this.getSessionList(), function(session) {\n      return session.cleanup();\n    }).then(function() {\n      return self._websocketConnection.close();\n    }).then(function() {\n      self.emit('close');\n    });\n  }\n  return Promise.resolve();\n};\n\n/**\n * @returns {Promise}\n * @fulfilled {Session} session\n */\nConnection.prototype.createSession = function() {\n  return this.sendSync({janus: 'create'});\n};\n\n/**\n * @param {string} sessionId\n * @returns {boolean}\n */\nConnection.prototype.hasSession = function(sessionId) {\n  return !!this.getSession(sessionId);\n};\n\n/**\n * @param {string} sessionId\n * @returns {Session}\n */\nConnection.prototype.getSession = function(sessionId) {\n  return this._sessions[sessionId];\n};\n\n/**\n * @returns {Session[]}\n */\nConnection.prototype.getSessionList = function() {\n  return Object.keys(this._sessions).map(function(id) {\n    return this._sessions[id];\n  }.bind(this));\n};\n\n/**\n * @returns {boolean}\n */\nConnection.prototype.isClosed = function() {\n  return this._websocketConnection.isClosed();\n};\n\n/**\n * @param {Session} session\n */\nConnection.prototype.addSession = function(session) {\n  this._sessions[session.getId()] = session;\n  session.once('destroy', function() {\n    this.removeSession(session.getId());\n  }.bind(this));\n};\n\n/**\n * @param {string} sessionId\n */\nConnection.prototype.removeSession = function(sessionId) {\n  delete this._sessions[sessionId];\n};\n\n/**\n * @param {Object} message\n * @returns {Promise}\n */\nConnection.prototype.send = function(message) {\n  if (this._options['token']) {\n    message.token = this._options['token'];\n  }\n  if (this._options['apisecret']) {\n    message.apisecret = this._options['apisecret'];\n  }\n  if (!message['transaction']) {\n    message['transaction'] = Transaction.generateRandomId();\n  }\n  return this._websocketConnection.send(message);\n};\n\n/**\n * @param {Object} message\n * @returns {Promise}\n * @fulfilled {Object} message\n */\nConnection.prototype.processOutcomeMessage = function(message) {\n  if ('create' === message['janus']) {\n    return this._onCreate(message);\n  }\n  var sessionId = message['session_id'];\n  if (sessionId) {\n    if (this.hasSession(sessionId)) {\n      return this.getSession(sessionId).processOutcomeMessage(message);\n    } else {\n      return Promise.reject(new Error('Invalid session: [' + sessionId + ']'));\n    }\n  }\n  return Promise.resolve(message);\n};\n\n/**\n * @param {JanusMessage} incomeMessage\n * @returns {Promise}\n * @fulfilled {JanusMessage} incomeMessage\n */\nConnection.prototype.processIncomeMessage = function(incomeMessage) {\n  this.emit('message', incomeMessage);\n  var sessionId = incomeMessage.get('session_id');\n  if (sessionId && this.hasSession(sessionId)) {\n    return this.getSession(sessionId).processIncomeMessage(incomeMessage);\n  }\n  var self = this;\n  return Promise\n    .try(function() {\n      if (sessionId && !self.hasSession(sessionId)) {\n        throw new Error('Invalid session: [' + sessionId + ']');\n      }\n      return self.defaultProcessIncomeMessage(incomeMessage);\n    });\n};\n\n/**\n * @param {Object} outcomeMessage\n * @returns {Promise}\n * @fulfilled {Object} outcomeMessage\n * @protected\n */\nConnection.prototype._onCreate = function(outcomeMessage) {\n  this.addTransaction(new Transaction(outcomeMessage['transaction'], function(incomeMessage) {\n    if ('success' == incomeMessage.get('janus')) {\n      var sessionId = incomeMessage.get('data', 'id');\n      this.addSession(Session.create(this, sessionId));\n      return this.getSession(sessionId);\n    } else {\n      throw new JanusError(incomeMessage);\n    }\n  }.bind(this)));\n  return Promise.resolve(outcomeMessage);\n};\n\nConnection.prototype.toString = function() {\n  return 'JanusConnection' + JSON.stringify({id: this._id, address: this._address});\n};\n\nmodule.exports = Connection;\n","var Helpers = require('./helpers');\n\n/**\n * @param {JanusMessage} janusMessage\n * @constructor\n */\nfunction JanusError(janusMessage) {\n  Error.captureStackTrace(this, this.constructor);\n  this.name = this.constructor.name;\n  this.janusMessage = janusMessage;\n  var janusError = janusMessage.getError();\n  this.message = janusError['reason'];\n  this.code = janusError['code'];\n}\n\nHelpers.inherits(JanusError, Error);\n\nmodule.exports = JanusError;\n","var EventEmitter2 = require('eventemitter2');\nvar Helpers = require('./helpers');\n\nfunction EventEmitter() {\n  EventEmitter.super_.call(this, {\n    wildcard: true,\n    delimiter: ':',\n    newListener: false,\n    maxListeners: 20\n  });\n}\n\nHelpers.inherits(EventEmitter, EventEmitter2);\n\nmodule.exports = EventEmitter;\n\n","var Helpers = {\n\n  /**\n   * @param {Object} destination\n   * @param {...Object|null} source\n   * @returns {Object}\n   */\n  extend: function(destination, source) {\n    if (source) {\n      var sources = Array.prototype.slice.call(arguments, 1) || [];\n\n      sources.forEach(function(source) {\n        Object.keys(source).forEach(function(key) {\n          destination[key] = source[key];\n        });\n      });\n    }\n\n    return destination;\n  },\n  /**\n   * @param {Function} ctor\n   * @param {Function} superCtor\n   */\n  inherits: function(ctor, superCtor) {\n    ctor.super_ = superCtor;\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  }\n};\n\nmodule.exports = Helpers;\n","var Client = require('./client');\nvar JanusError = require('./error');\nvar WebsocketConnection = require('./websocket-connection');\nvar Connection = require('./connection');\nvar Session = require('./session');\nvar Plugin = require('./plugin');\nvar MediaPlugin = require('./webrtc/media-plugin');\nvar AudiobridgePlugin = require('./webrtc/plugin/audiobridge-plugin');\nvar AudioroomPlugin = require('./webrtc/plugin/audioroom-plugin');\nvar StreamingPlugin = require('./webrtc/plugin/streaming-plugin');\nvar RtpbroadcastPlugin = require('./webrtc/plugin/rtpbroadcast-plugin');\n\nmodule.exports = {\n  Error: JanusError,\n  WebsocketConnection: WebsocketConnection,\n  Client: Client,\n  Connection: Connection,\n  Session: Session,\n  Plugin: Plugin,\n  MediaPlugin: MediaPlugin,\n  AudiobridgePlugin: AudiobridgePlugin,\n  AudioroomPlugin: AudioroomPlugin,\n  StreamingPlugin: StreamingPlugin,\n  RtpbroadcastPlugin: RtpbroadcastPlugin\n};\n","/**\n * @param {Object} plainMessage\n * @constructor\n */\nfunction JanusMessage(plainMessage) {\n  this._plainMessage = plainMessage;\n}\n\n/**\n * @returns {Object}\n */\nJanusMessage.prototype.getPlainMessage = function() {\n  return this._plainMessage;\n};\n\n/**\n * @returns {Object}\n */\nJanusMessage.prototype.getError = function() {\n  return this.get('error');\n};\n\n/**\n * @param {...string} name\n * @returns {*}\n */\nJanusMessage.prototype.get = function(name) {\n  var names = Array.prototype.slice.call(arguments, 1);\n  var result = this._plainMessage[name];\n\n  for (var i = 0; i < names.length; i++) {\n    name = names[i];\n    if (result) {\n      result = result[name];\n    } else {\n      break;\n    }\n  }\n\n  return result || null;\n};\n\nmodule.exports = JanusMessage;\n","var Helpers = require('./helpers');\nvar JanusMessage = require('./janus-message');\n\n/**\n * @param {Object} plainMessage\n * @param {Plugin} plugin\n * @constructor\n * @extends JanusMessage\n */\nfunction JanusPluginMessage(plainMessage, plugin) {\n  JanusPluginMessage.super_.apply(this, arguments);\n  this._plugin = plugin;\n}\n\nHelpers.inherits(JanusPluginMessage, JanusMessage);\n\n/**\n * @param {...string} [name]\n * @returns {*}\n */\nJanusPluginMessage.prototype.getPluginData = function(name) {\n  var names = Array.prototype.slice.call(arguments);\n  names.unshift('plugindata', 'data');\n  return this.get.apply(this, names);\n};\n\n/**\n * @returns {Object}\n */\nJanusPluginMessage.prototype.getError = function() {\n  var error = this.getPluginData('error');\n  if (error) {\n    return {\n      reason: error,\n      code: this.getPluginData('error_code')\n    }\n  }\n  return JanusPluginMessage.super_.prototype.getError.call(this);\n};\n\n/**\n * @returns {string}\n */\nJanusPluginMessage.prototype.getResultText = function() {\n  return this.getPluginData(this._plugin.getResponseAlias());\n};\n\nmodule.exports = JanusPluginMessage;\n","var Promise = require('bluebird');\nvar Helpers = require('./helpers');\nvar EventEmitter = require('./event-emitter');\nvar JanusError = require('./error');\nvar TTransactionGateway = require('./traits/t-transaction-gateway');\nvar Transaction = require('./transaction');\nvar JanusPluginMessage = require('./janus-plugin-message');\n\n/**\n * @param {Session} session\n * @param {string} name\n * @param {string} id\n *\n * @constructor\n * @extends EventEmitter\n * @extends TTransactionGateway\n */\nfunction Plugin(session, name, id) {\n  Plugin.super_.call(this);\n  this._session = session;\n  this._name = name;\n  this._id = id;\n\n  var plugin = this;\n  session.on('destroy', function() {\n    plugin._detach();\n  });\n}\n\nHelpers.inherits(Plugin, EventEmitter);\nHelpers.extend(Plugin.prototype, TTransactionGateway);\n\nPlugin._types = {};\n\n/**\n * @see {@link Plugin}\n * @returns {Plugin}\n */\nPlugin.create = function(session, name, id) {\n  var aClass = this._types[name];\n  if (aClass) {\n    return new aClass(session, name, id);\n  }\n  return new Plugin(session, name, id);\n};\n\n/**\n * @param {string} name\n * @param {function(new:Plugin)} aClass\n */\nPlugin.register = function(name, aClass) {\n  this._types[name] = aClass;\n};\n\n/**\n * @returns {string}\n */\nPlugin.prototype.getId = function() {\n  return this._id;\n};\n\n/**\n * @returns {string}\n */\nPlugin.prototype.getName = function() {\n  return this._name;\n};\n\n/**\n * @returns {string}\n */\nPlugin.prototype.getResponseAlias = function() {\n  throw new Error('Plugin.getResponseAlias must be implemented');\n};\n\n/**\n * @param {Object} message\n * @returns {Promise}\n */\nPlugin.prototype.send = function(message) {\n  message['handle_id'] = this._id;\n  if (this._session) {\n    return this._session.send(message);\n  } else {\n    return Promise.reject(new Error('No active session'));\n  }\n};\n\n/**\n * @returns {Promise}\n */\nPlugin.prototype.detach = function() {\n  if (this._session) {\n    return new Promise(function(resolve, reject) {\n      this.once('detach', resolve);\n      this.sendWithTransaction({janus: 'detach'}).catch(reject);\n    }.bind(this));\n  }\n  return Promise.resolve();\n};\n\n/**\n * @returns {Promise}\n */\nPlugin.prototype.cleanup = function() {\n  return this._detach();\n};\n\n/**\n * @param {Object} message\n * @returns {Promise}\n * @fulfilled {Object} message\n */\nPlugin.prototype.processOutcomeMessage = function(message) {\n  return Promise.resolve(message);\n};\n\n/**\n * @param {JanusMessage} incomeMessage\n * @returns {Promise}\n */\nPlugin.prototype.processIncomeMessage = function(incomeMessage) {\n  var self = this;\n  return Promise\n    .try(function() {\n      incomeMessage = new JanusPluginMessage(incomeMessage.getPlainMessage(), self);\n      if ('detached' === incomeMessage.get('janus')) {\n        return self._onDetached();\n      }\n      return self.defaultProcessIncomeMessage(incomeMessage);\n    })\n    .then(function() {\n      self.emit('message', incomeMessage);\n    })\n    .catch(function(error) {\n      self.emit('error', error);\n    })\n};\n\n/**\n * @returns {Promise}\n * @protected\n */\nPlugin.prototype._onDetached = function() {\n  return this._detach();\n};\n\n/**\n * @returns {Promise}\n * @protected\n */\nPlugin.prototype._detach = function() {\n  if (this._session) {\n    this._session = null;\n    this.emit('detach');\n  }\n  return Promise.resolve();\n};\n\nPlugin.prototype.toString = function() {\n  return 'Plugin' + JSON.stringify({id: this._id, name: this._name});\n};\n\n/**\n * @param {Object} options\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage}\n */\nPlugin.prototype.sendWithTransaction = function(options) {\n  var transactionId = Transaction.generateRandomId();\n  var transaction = new Transaction(transactionId, function(incomeMessage) {\n    var errorMessage = incomeMessage.getError();\n    if (!errorMessage) {\n      return Promise.resolve(incomeMessage);\n    }\n    var error = new JanusError(incomeMessage);\n    return Promise.reject(error);\n  });\n  var message = {\n    janus: 'message',\n    transaction: transactionId\n  };\n  Helpers.extend(message, options);\n\n  this.addTransaction(transaction);\n  var sendPromise = this.sendSync(message);\n\n  return new Promise(function(resolve, reject) {\n\n    transaction.promise.catch(function(e) {\n      reject(e);\n    });\n    sendPromise.then(function(r) {\n      resolve(r);\n    }).catch(function(e) {\n      reject(e);\n    })\n  });\n};\n\nmodule.exports = Plugin;\n","var Promise = require('bluebird');\nvar Helpers = require('./helpers');\nvar EventEmitter = require('./event-emitter');\nvar TTransactionGateway = require('./traits/t-transaction-gateway');\nvar JanusError = require('./error');\nvar Timer = require('./timer');\nvar Transaction = require('./transaction');\nvar Plugin = require('./plugin');\n\n/**\n * @param {Connection} connection\n * @param {string} id\n *\n * @constructor\n * @extends EventEmitter\n * @extends TTransactionGateway\n */\nfunction Session(connection, id) {\n  Session.super_.call(this);\n  this._connection = connection;\n  this._id = id;\n  this._plugins = {};\n\n  if (this._connection.getOptions()['keepalive']) {\n    this._startKeepAlive();\n  }\n  var session = this;\n  connection.on('close', function() {\n    session._destroy();\n  });\n}\n\nHelpers.inherits(Session, EventEmitter);\nHelpers.extend(Session.prototype, TTransactionGateway);\n\n/**\n * @see {@link Session}\n * @returns {Session}\n */\nSession.create = function(connection, id) {\n  return new Session(connection, id);\n};\n\n/**\n * @returns {string}\n */\nSession.prototype.getId = function() {\n  return this._id;\n};\n\n/**\n * @param {Object} message\n * @returns {Promise}\n */\nSession.prototype.send = function(message) {\n  if (!this._connection) {\n    return Promise.reject(new Error('Can not send message over destroyed ' + this));\n  }\n  //we always use own session's id in its messages\n  message['session_id'] = this._id;\n  if (this._keepAliveTimer) {\n    this._keepAliveTimer.reset();\n  }\n  return this._connection.send(message);\n};\n\n/**\n * @param {string} name\n * @returns {Promise}\n * @fulfilled {Plugin} plugin\n */\nSession.prototype.attachPlugin = function(name) {\n  return this.sendSync({janus: 'attach', plugin: name});\n};\n\n/**\n * @returns {Promise}\n * @fulfilled {Object} response\n */\nSession.prototype.destroy = function() {\n  return this.sendSync({janus: 'destroy'});\n};\n\n/**\n * @returns {Promise}\n */\nSession.prototype.cleanup = function() {\n  return this._destroy();\n};\n\n/**\n * @param {string} pluginId\n * @returns {boolean}\n */\nSession.prototype.hasPlugin = function(pluginId) {\n  return !!this.getPlugin(pluginId);\n};\n\n/**\n * @param {string} pluginId\n * @returns {Plugin}\n */\nSession.prototype.getPlugin = function(pluginId) {\n  return this._plugins[pluginId];\n};\n\n/**\n * @returns {Plugin[]}\n */\nSession.prototype.getPluginList = function() {\n  return Object.keys(this._plugins).map(function(id) {\n    return this._plugins[id];\n  }.bind(this));\n};\n\n/**\n * @param {Plugin} plugin\n */\nSession.prototype.addPlugin = function(plugin) {\n  this._plugins[plugin.getId()] = plugin;\n  plugin.once('detach', function() {\n    this.removePlugin(plugin.getId())\n  }.bind(this));\n};\n\n/**\n * @param {string} pluginId\n */\nSession.prototype.removePlugin = function(pluginId) {\n  delete this._plugins[pluginId];\n};\n\n/**\n * @param {Object} message\n * @returns {Promise}\n * @fulfilled {Object} message\n */\nSession.prototype.processOutcomeMessage = function(message) {\n  var janusMessage = message['janus'];\n  if ('attach' === janusMessage) {\n    return this._onAttach(message);\n  }\n  if ('destroy' === janusMessage) {\n    return this._onDestroy(message);\n  }\n  var pluginId = message['handle_id'];\n  if (pluginId) {\n    if (this.hasPlugin(pluginId)) {\n      return this.getPlugin(pluginId).processOutcomeMessage(message);\n    } else {\n      return Promise.reject(new Error('Invalid plugin [' + pluginId + ']'));\n    }\n  }\n  return Promise.resolve(message);\n};\n\n/**\n * @param {JanusMessage} incomeMessage\n * @returns {Promise}\n * @fulfilled {JanusMessage} incomeMessage\n */\nSession.prototype.processIncomeMessage = function(incomeMessage) {\n  var pluginId = incomeMessage.get('handle_id') || incomeMessage.get('sender');\n  if (pluginId && this.hasPlugin(pluginId)) {\n    return this.getPlugin(pluginId).processIncomeMessage(incomeMessage);\n  }\n\n  var self = this;\n  return Promise\n    .try(function() {\n      if (pluginId && !self.hasPlugin(pluginId)) {\n        throw new Error('Invalid plugin [' + pluginId + ']');\n      }\n      if ('timeout' === incomeMessage.get('janus')) {\n        return self._onTimeout(incomeMessage);\n      }\n      return self.defaultProcessIncomeMessage(incomeMessage);\n    })\n    .then(function() {\n      self.emit('message', incomeMessage);\n    })\n    .catch(function(error) {\n      self.emit('error', error);\n    });\n};\n\n/**\n * @param {Object} outcomeMessage\n * @returns {Promise}\n * @fulfilled {Object} outcomeMessage\n * @protected\n */\nSession.prototype._onAttach = function(outcomeMessage) {\n  this.addTransaction(\n    new Transaction(outcomeMessage['transaction'], function(incomeMessage) {\n      if ('success' == incomeMessage.get('janus')) {\n        var pluginId = incomeMessage.get('data', 'id');\n        this.addPlugin(Plugin.create(this, outcomeMessage['plugin'], pluginId));\n        return this.getPlugin(pluginId);\n      } else {\n        throw new JanusError(incomeMessage);\n      }\n    }.bind(this))\n  );\n  return Promise.resolve(outcomeMessage);\n};\n\n/**\n * @param {Object} incomeMessage\n * @returns {Promise}\n * @fulfilled {Object} incomeMessage\n */\nSession.prototype._onTimeout = function(incomeMessage) {\n  return this._destroy().return(incomeMessage);\n};\n\n/**\n * @param {Object} outcomeMessage\n * @returns {Promise}\n * @fulfilled {Object} outcomeMessage\n * @protected\n */\nSession.prototype._onDestroy = function(outcomeMessage) {\n  this.addTransaction(\n    new Transaction(outcomeMessage['transaction'], function(incomeMessage) {\n      if ('success' == incomeMessage.get('janus')) {\n        return this._destroy().return(incomeMessage);\n      } else {\n        throw new JanusError(incomeMessage);\n      }\n    }.bind(this))\n  );\n  return Promise.resolve(outcomeMessage);\n};\n\n/**\n * @returns {Promise}\n * @protected\n */\nSession.prototype._destroy = function() {\n  if (!this._connection) {\n    return Promise.resolve();\n  }\n  this._stopKeepAlive();\n  return Promise.map(this.getPluginList(), function(plugin) {\n    return plugin.cleanup();\n  }).finally(function() {\n    this._plugins = {};\n    this._connection = null;\n    this.emit('destroy');\n  }.bind(this));\n};\n\n/**\n * @param {*} value\n * @returns {boolean}\n * @protected\n */\nSession.prototype._isNaturalNumber = function(value) {\n  if (isNaN(value)) {\n    return false;\n  }\n  var x = parseFloat(value);\n  return (x | 0) === x && x > 0;\n};\n\n/**\n * @protected\n */\nSession.prototype._startKeepAlive = function() {\n  var keepAlive = this._connection.getOptions()['keepalive'];\n  if (this._isNaturalNumber(keepAlive) && keepAlive < 59000) {\n    this._keepAlivePeriod = keepAlive;\n  } else {\n    this._keepAlivePeriod = 30000;\n  }\n  var session = this;\n  this._keepAliveTimer = new Timer(function() {\n    session.send({janus: 'keepalive'})\n      .catch(function(error) {\n        if (session._connection.isClosed()) {\n          session._stopKeepAlive();\n        }\n        throw error;\n      });\n  }, this._keepAlivePeriod);\n  this._keepAliveTimer.start();\n};\n\nSession.prototype._stopKeepAlive = function() {\n  if (this._keepAliveTimer) {\n    this._keepAliveTimer.stop();\n    this._keepAliveTimer = null;\n  }\n};\n\nSession.prototype.toString = function() {\n  return 'Session' + JSON.stringify({id: this._id});\n};\n\n\nmodule.exports = Session;\n","/**\n * @param {Function} callback\n * @param {number} ms\n * @constructor\n */\nfunction Timer(callback, ms) {\n  this._callback = callback;\n  this._ms = ms;\n  this._timeoutId = null;\n}\n\nTimer.prototype.start = function() {\n  this._timeoutId = setTimeout(this._callback, this._ms);\n};\n\nTimer.prototype.stop = function() {\n  if (this._timeoutId) {\n    clearTimeout(this._timeoutId);\n    this._timeoutId = null;\n  }\n};\n\nTimer.prototype.reset = function() {\n  this.stop();\n  this.start();\n};\n\nmodule.exports = Timer;\n","var Promise = require('bluebird');\nvar JanusError = require('../error');\nvar Transaction = require('../transaction');\nvar Transactions = require('../transactions');\n\n/**\n * @class TTransactionGateway\n */\nvar TTransactionGateway = {\n  /**\n   * @returns {Transactions}\n   */\n  getTransactions: function() {\n    if (!this._transactions) {\n      this._transactions = new Transactions();\n    }\n    return this._transactions;\n  },\n\n  /**\n   * @param {Transaction} transaction\n   */\n  addTransaction: function(transaction) {\n    this.getTransactions().add(transaction);\n  },\n\n  /**\n   * @param {Object} message\n   * @returns {Promise}\n   * @fulfilled {*}\n   */\n  sendSync: function(message) {\n    if (!message['transaction']) {\n      message['transaction'] = Transaction.generateRandomId();\n    }\n    var self = this;\n    return this.processOutcomeMessage(message)\n      .then(function(message) {\n        return self.send(message);\n      })\n      .then(function(result) {\n        var transaction = self.getTransactions().find(message['transaction']);\n        if (transaction) {\n          return transaction.promise;\n        }\n        return result;\n      });\n  },\n\n  /**\n   * @param {JanusMessage} incomeMessage\n   * @returns {boolean}\n   */\n  hasTransaction: function(incomeMessage) {\n    return this.getTransactions().has(incomeMessage.get('transaction'));\n  },\n\n  /**\n   * @param {JanusMessage} incomeMessage\n   * @returns {Promise}\n   * @fulfilled {*}\n   */\n  executeTransaction: function(incomeMessage) {\n    return this.getTransactions().execute(incomeMessage.get('transaction'), incomeMessage);\n  },\n\n  /**\n   * @param {JanusMessage} incomeMessage\n   * @returns {Promise}\n   * @fulfilled {*}\n   */\n  defaultProcessIncomeMessage: function(incomeMessage) {\n    var self = this;\n    if (self.hasTransaction(incomeMessage)) {\n      return self.executeTransaction(incomeMessage);\n    } else {\n      if (incomeMessage.getError()) {\n        return Promise.reject(new JanusError(incomeMessage));\n      }\n    }\n  }\n};\n\nmodule.exports = TTransactionGateway;\n","var Promise = require('bluebird');\n\n/**\n * @callback Transaction~callback\n * @returns {Promise}\n * @fulfilled {*}\n */\n\n/**\n * @param {string} id\n * @param {Transaction~callback} callback\n * @param {number} [timeoutPeriod=30000] in milliseconds. Timeout until transaction is executed.\n * @constructor\n */\nfunction Transaction(id, callback, timeoutPeriod) {\n  this.id = id;\n  timeoutPeriod = timeoutPeriod || 30000;\n  var timeoutRejection;\n  var self = this;\n  this.promise = new Promise(function(resolve, reject) {\n    self._callback = function() {\n      clearTimeout(timeoutRejection);\n      var result;\n      try {\n        result = callback.apply(null, arguments);\n      } catch (error) {\n        result = Promise.reject(error);\n      }\n      if (!(result instanceof Promise)) {\n        result = Promise.resolve(result);\n      }\n      result.then(resolve, reject);\n    };\n\n    timeoutRejection = setTimeout(function() {\n      reject(new Error('Transaction timeout ' + self.id));\n    }, timeoutPeriod);\n  });\n  this._isExecuted = false;\n}\n\n/**\n * @param {...*}\n * @returns {Promise}\n * @fulfilled {*}\n */\nTransaction.prototype.execute = function() {\n  if (!this._isExecuted) {\n    this._isExecuted = true;\n    this._callback.apply(this, arguments);\n  }\n  return this.promise;\n};\n\n/**\n * @returns {string}\n */\nTransaction.generateRandomId = function() {\n  return Math.random().toString(36).substring(2, 12);\n};\n\nmodule.exports = Transaction;\n","var Promise = require('bluebird');\nvar Transaction = require('./transaction');\n\n/**\n * @constructor\n */\nfunction Transactions() {\n  /** @type {Object} */\n  this.list = {};\n}\n\n/**\n * @param {Transaction} transaction\n */\nTransactions.prototype.add = function(transaction) {\n  if (this.has(transaction.id)) {\n    throw new Error('Transaction with id: `' + transaction.id + '` already exists');\n  }\n  if (!(transaction instanceof Transaction)) {\n    throw new Error('`transaction` must be an instance of Transaction');\n  }\n  this.list[transaction.id] = transaction;\n};\n\n/**\n * @param {string} id\n * @returns {boolean}\n */\nTransactions.prototype.has = function(id) {\n  return id && !!this._find(id);\n};\n\n/**\n * @param {string} id\n * @returns {Transaction|Null}\n */\nTransactions.prototype.find = function(id) {\n  return this._find(id) || null;\n};\n\n/**\n * @param {string} id\n * @param {Object} message\n * @returns {Promise}\n * @fulfilled {*}\n */\nTransactions.prototype.execute = function(id, message) {\n  var transaction = this.find(id);\n  if (!transaction) {\n    throw new Error('Transaction `' + id + '` not found');\n  }\n  if ('ack' !== message['janus']) {\n    this.remove(id);\n    return transaction.execute(message);\n  }\n  return Promise.resolve(message);\n};\n\n/**\n * @param {string} id\n */\nTransactions.prototype.remove = function(id) {\n  if (!this.has(id)) {\n    throw new Error('Transaction with id: `' + id + \"` doesn't exist\");\n  }\n  delete this.list[id];\n};\n\n/**\n * @param {string} id\n * @returns {Transaction}\n * @protected\n */\nTransactions.prototype._find = function(id) {\n  return this.list[id];\n};\n\nmodule.exports = Transactions;\n","var Promise = require('bluebird');\nvar Helpers = require('../helpers');\nvar JanusPluginMessage = require('../janus-plugin-message');\nvar MediaEntityPlugin = require('./media-entity-plugin');\n\nfunction MediaAudioPlugin() {\n  MediaAudioPlugin.super_.apply(this, arguments);\n}\n\nHelpers.inherits(MediaAudioPlugin, MediaEntityPlugin);\n\n/**\n * @param {string|number} id\n * @param {Object} options\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nMediaAudioPlugin.prototype._join = function(id, options) {\n  var body = Helpers.extend({request: 'join'}, options);\n  return this.sendWithTransaction({body: body})\n    .then(function(response) {\n      this.setCurrentEntity(id);\n      return response;\n    }.bind(this));\n};\n\n/**\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nMediaAudioPlugin.prototype.leave = function() {\n  return this.sendWithTransaction({body: {request: 'leave'}})\n    .then(function(response) {\n      this.resetCurrentEntity();\n      return response;\n    }.bind(this));\n};\n\n/**\n * @param {string|number} id\n * @param {Object} [options]\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nMediaAudioPlugin.prototype._change = function(id, options) {\n  var body = Helpers.extend({request: 'changeroom'}, options);\n  return this.sendWithTransaction({body: body})\n    .then(function(response) {\n      this.setCurrentEntity(id);\n      return response;\n    }.bind(this));\n};\n\n/**\n * @param {string|number} id\n * @param {Object} [options]\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nMediaAudioPlugin.prototype._connect = function(id, options) {\n  if (this.hasCurrentEntity(id)) {\n    return Promise.resolve(new JanusPluginMessage({}, this));\n  }\n  if (this.hasCurrentEntity()) {\n    return this._change(id, options);\n  }\n  return this._join(id, options);\n};\n\n/**\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nMediaAudioPlugin.prototype.list = function() {\n  return this._list();\n};\n\n/**\n * @param {Object} [options]\n * @param {boolean} [options.muted]\n * @param {number} [options.quality]\n * @param {RTCSessionDescription} [jsep]\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nMediaAudioPlugin.prototype.configure = function(options, jsep) {\n  var body = Helpers.extend({\n    request: 'configure'\n  }, options);\n  var message = {body: body};\n  if (jsep) {\n    message.jsep = jsep;\n  }\n  return this.sendWithTransaction(message);\n};\n\n/**\n * @param {MediaStream} stream\n * @param {RTCOfferOptions} [offerOptions]\n * @param {Object} [configureOptions]\n * @param {boolean} [configureOptions.muted]\n * @param {number} [configureOptions.quality]\n * @returns {Promise}\n * @fulfilled {@link sendSDP}\n */\nMediaAudioPlugin.prototype.offerStream = function(stream, offerOptions, configureOptions) {\n  var self = this;\n  return Promise\n    .try(function() {\n      self.createPeerConnection();\n      stream.getAudioTracks().forEach(function(track) {\n        self.addTrack(track, stream);\n      });\n    })\n    .then(function() {\n      return self.createOffer(offerOptions);\n    })\n    .then(function(jsep) {\n      return self.sendSDP(jsep, configureOptions);\n    });\n};\n\n/**\n * @param {RTCSessionDescription} jsep\n * @param {Object} [configureOptions]\n * @param {boolean} [configureOptions.muted]\n * @param {number} [configureOptions.quality]\n * @returns {Promise}\n * @fulfilled {RTCSessionDescription}\n */\nMediaAudioPlugin.prototype.sendSDP = function(jsep, configureOptions) {\n  return this.configure(configureOptions, jsep)\n    .then(function(response) {\n      var jsep = response.get('jsep');\n      if (jsep) {\n        this.setRemoteSDP(jsep);\n        return jsep;\n      }\n      return Promise.reject(new Error('Failed sendSDP. No jsep in response.'));\n    }.bind(this));\n};\n\n/**\n * @param {Object} options\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} list\n */\nMediaAudioPlugin.prototype._listParticipants = function(options) {\n  var body = Helpers.extend({request: 'listparticipants'}, options);\n  return this.sendWithTransaction({body: body});\n};\n\nmodule.exports = MediaAudioPlugin;\n","var Promise = require('bluebird');\nvar webrtc = require('webrtc-adapter');\n\nfunction MediaDevicesShim() {\n}\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/getUserMedia#Parameters\n * @typedef {Object} MediaStreamConstraints\n */\n\n/**\n * @param {MediaStreamConstraints} constraints\n * @returns {Promise}\n * @fulfilled {MediaStream} stream\n */\nMediaDevicesShim.getUserMedia = function(constraints) {\n  if (constraints.video === 'screen') {\n    return this.getSharedScreen({audio: constraints.audio});\n  } else {\n    return Promise.resolve(navigator.mediaDevices.getUserMedia(constraints));\n  }\n};\n\n/**\n * @param {MediaStreamConstraints} constraints only 'audio'\n * @returns {Promise}\n * @fulfilled {MediaStream} stream\n */\nMediaDevicesShim.getSharedScreen = function(constraints) {\n  if (window.location.protocol !== 'https:') {\n    return Promise.reject(new Error('Screen sharing only works on HTTPS, try the https:// version of this page'));\n  }\n\n  if ('chrome' == webrtc.browserDetails.browser) {\n    return this._getSharedScreenChrome(constraints);\n  } else if ('firefox' == webrtc.browserDetails.browser) {\n    return this._getSharedScreenFirefox(constraints);\n  }\n};\n\n/**\n * @param {MediaStreamConstraints} constraints only 'audio'\n * @returns {Promise}\n * @fulfilled {MediaStream} stream\n */\nMediaDevicesShim._getSharedScreenChrome = function(constraints) {\n  var chromever = webrtc.browserDetails.version;\n  var maxver = 33;\n  if (window.navigator.userAgent.match('Linux')) {\n    maxver = 35;\n  }\t// \"known\" crash in chrome 34 and 35 on linux\n  if (chromever >= 26 && chromever <= maxver) {\n    // Chrome 26->33 requires some awkward chrome://flags manipulation\n    constraints = Helpers.extend({}, constraints, {\n      video: {\n        mandatory: {\n          googLeakyBucket: true,\n          maxWidth: window.screen.width,\n          maxHeight: window.screen.height,\n          maxFrameRate: 3,\n          chromeMediaSource: 'screen'\n        }\n      }\n    });\n    return window.getUserMedia(constraints);\n  } else {\n    // Chrome 34+ requires an extension\n    return new Promise(function(resolve, reject) {\n      var timeoutRejectId;\n      var messageListener = function(event) {\n        if (event.origin != window.location.origin) {\n          return;\n        }\n        if (event.data.type == 'janusGotScreen' && timeoutRejectId == event.data.id) {\n          window.clearTimeout(timeoutRejectId);\n          window.removeEventListener('message', messageListener);\n\n          if (event.data.sourceId === '') {\n            // user canceled\n            var error = new Error('NavigatorUserMediaError');\n            error.name = 'You cancelled the request for permission, giving up...';\n            reject(error);\n          } else {\n            constraints = Helpers.extend({}, constraints, {\n              video: {\n                mandatory: {\n                  chromeMediaSource: 'desktop',\n                  maxWidth: window.screen.width,\n                  maxHeight: window.screen.height,\n                  maxFrameRate: 3\n                },\n                optional: [\n                  {googLeakyBucket: true},\n                  {googTemporalLayeredScreencast: true}\n                ]\n              }\n            });\n            constraints.video.mandatory.chromeMediaSourceId = event.data.sourceId;\n            resolve(window.getUserMedia(constraints));\n          }\n        } else if (event.data.type == 'janusGetScreenPending') {\n          if (timeoutRejectId == event.data.id) {\n            window.clearTimeout(timeoutRejectId);\n          }\n        }\n      };\n\n      window.addEventListener('message', messageListener);\n      timeoutRejectId = setTimeout(\n        function() {\n          window.removeEventListener('message', messageListener);\n          var error = new Error('NavigatorUserMediaError');\n          error.name = 'The required Chrome extension is not installed: click <a href=\"#\">here</a> to install it. (NOTE: this will need you to refresh the page)';\n          reject(error);\n        }, 1000);\n      window.postMessage({type: 'janusGetScreen', id: timeoutRejectId}, '*');\n    });\n  }\n};\n\n/**\n * @param {MediaStreamConstraints} constraints only 'audio'\n * @returns {Promise}\n * @fulfilled {MediaStream} stream\n */\nMediaDevicesShim._getSharedScreenFirefox = function(constraints) {\n  var ffver = webrtc.browserDetails.version;\n  if (ffver >= 33) {\n    constraints = Helpers.extend({}, constraints, {\n      video: {\n        mozMediaSource: 'window',\n        mediaSource: 'window'\n      }\n    });\n    return window.getUserMedia(constraints).then(function(stream) {\n      if (stream) {\n        // Workaround for https://bugzilla.mozilla.org/show_bug.cgi?id=1045810\n        var lastStreamTime = stream.currentTime;\n        var inderval = window.setInterval(function() {\n          if (stream.currentTime == lastStreamTime) {\n            window.clearInterval(inderval);\n            if (stream.onended) {\n              stream.onended();\n            }\n          }\n          lastStreamTime = stream.currentTime;\n        }, 500);\n      }\n      return stream;\n    });\n  } else {\n    var error = new Error('Your version of Firefox does not support screen sharing, please install Firefox 33 (or more recent versions)');\n    return Promise.reject(error);\n  }\n};\n\nmodule.exports = MediaDevicesShim;\n","var Helpers = require('../helpers');\nvar MediaPlugin = require('./media-plugin');\n\nfunction MediaEntityPlugin() {\n  MediaEntityPlugin.super_.apply(this, arguments);\n\n  this._currentEntityId = null;\n}\n\nHelpers.inherits(MediaEntityPlugin, MediaPlugin);\n\n/**\n * @param {string|number} [id]\n * @return {boolean}\n */\nMediaEntityPlugin.prototype.hasCurrentEntity = function(id) {\n  if (id) {\n    return id === this._currentEntityId;\n  }\n  return !!this._currentEntityId;\n};\n\n/**\n * @param {string|number} id\n */\nMediaEntityPlugin.prototype.setCurrentEntity = function(id) {\n  this._currentEntityId = id;\n};\n\nMediaEntityPlugin.prototype.resetCurrentEntity = function() {\n  this._currentEntityId = null;\n};\n\n/**\n * @param {Object} options\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nMediaEntityPlugin.prototype._create = function(options) {\n  var body = Helpers.extend({request: 'create'}, options);\n  return this.sendWithTransaction({body: body})\n    .catch(function(error) {\n      if (error.message.indexOf('already exists') > 0) {\n        return error.response;\n      } else {\n        throw error;\n      }\n    });\n};\n\n/**\n * @param {string|number} id\n * @param {Object} options\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nMediaEntityPlugin.prototype._destroy = function(id, options) {\n  var body = Helpers.extend({request: 'destroy'}, options);\n  return this.sendWithTransaction({body: body})\n    .then(function(response) {\n      if (this.hasCurrentEntity(id)) {\n        this.resetCurrentEntity();\n      }\n      return response;\n    }.bind(this));\n};\n\n/**\n * @param {Object} [options]\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nMediaEntityPlugin.prototype._list = function(options) {\n  var body = Helpers.extend({request: 'list'}, options);\n  return this.sendWithTransaction({body: body});\n};\n\n/**\n * @inheritDoc\n */\nMediaEntityPlugin.prototype._onHangup = function(incomeMessage) {\n  this.resetCurrentEntity();\n  return MediaEntityPlugin.super_.prototype._onHangup.call(this, incomeMessage);\n};\n\nmodule.exports = MediaEntityPlugin;\n","var Promise = require('bluebird');\nvar webrtcsupport = require('webrtcsupport');\nvar Helpers = require('../helpers');\nvar Plugin = require('../plugin');\nvar MediaDevicesShim = require('./media-devices-shim');\n\n/**\n * @inheritDoc\n *\n * IMPORTANT! WebRTC stuff will not work in node environment.\n * @constructor\n * @extends Plugin\n */\nfunction MediaPlugin(session, name, id) {\n  MediaPlugin.super_.apply(this, arguments);\n\n  this._pcListeners = {};\n  this._pc = null;\n}\n\nHelpers.inherits(MediaPlugin, Plugin);\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/RTCPeerConnection/RTCPeerConnection#RTCConfiguration_dictionary\n * @typedef {Object} RTCConfiguration\n */\n\n/**\n * @param {RTCConfiguration} [options]\n * @returns {RTCPeerConnection}\n */\nMediaPlugin.prototype.createPeerConnection = function(options) {\n  options = Helpers.extend(options || {}, this._session._connection._options.pc);\n\n  var config = {\n    iceServers: [{urls: 'stun:stun.l.google.com:19302'}]\n  };\n  var constraints = {\n    'optional': [{'DtlsSrtpKeyAgreement': true}]\n  };\n  if (options.config) {\n    Helpers.extend(config, options.config);\n  }\n  if (options.constraints) {\n    Helpers.extend(constraints, options.constraints);\n  }\n\n  this._pc = new webrtcsupport.PeerConnection(config, constraints);\n  this._addPcEventListeners();\n  return this._pc;\n};\n\n/**\n * @returns {RTCPeerConnection|null}\n */\nMediaPlugin.prototype.getPeerConnection = function() {\n  return this._pc;\n};\n\n/**\n * @returns {Promise}\n */\nMediaPlugin.prototype.hangup = function() {\n  return new Promise(function(resolve, reject) {\n    this.once('hangup', resolve);\n    this.sendWithTransaction({janus: 'hangup'}).catch(reject);\n  }.bind(this));\n};\n\n/**\n * @see https://www.w3.org/TR/mediacapture-streams/#mediastreamtrack\n * @typedef {Object} MediaStreamTrack\n */\n\n/**\n * @param {MediaStreamTrack} track\n * @param {...MediaStream} [stream]\n */\nMediaPlugin.prototype.addTrack = function(track, stream) {\n  if (!this._pc.addTrack) {\n    //TODO remove this part as soon as pc.addTrack is supported by chrome or webrtc/adapter#361 is implemented\n    if (!stream) {\n      throw new Error('MediaPlugin.addTrack. Missing stream argument when pc.addTrack is not supported');\n    }\n    this._pc.addStream(stream);\n    this.emit('pc:track:local', {streams: [stream]});\n  } else {\n    this._pc.addTrack.apply(this._pc, arguments);\n    this.emit('pc:track:local', {track: track, streams: Array.prototype.slice.call(arguments, 1)});\n  }\n};\n\n/**\n * @param {MediaStreamConstraints} constraints\n * @returns {Promise}\n * @fulfilled {MediaStream} stream\n */\nMediaPlugin.prototype.getUserMedia = function(constraints) {\n  this.emit('consent-dialog:start');\n  var self = this;\n  var promise = MediaDevicesShim.getUserMedia(constraints);\n  return promise\n    .then(function(stream) {\n      self.emit('consent-dialog:stop', {stream: stream});\n      return stream;\n    })\n    .catch(function(error) {\n      self.emit('consent-dialog:stop', {error: error});\n      throw error;\n    })\n    .finally(function() {\n      if (promise.isCancelled()) {\n        self.emit('consent-dialog:stop');\n      }\n    });\n};\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/RTCPeerConnection/createOffer#RTCOfferOptions_dictionary\n * @typedef {Object} RTCOfferOptions\n */\n\n/**\n * @param {RTCOfferOptions} [options]\n * @returns {Promise}\n * @fulfilled {@link _createSDP}\n */\nMediaPlugin.prototype.createOffer = function(options) {\n  return this._createSDP('createOffer', options);\n};\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/RTCPeerConnection/createAnswer#RTCAnswerOptions_dictionary\n * @typedef {Object} RTCAnswerOptions\n */\n\n/**\n * @param {RTCSessionDescription} jsep\n * @param {RTCAnswerOptions} [options]\n * @returns {Promise}\n * @fulfilled {@link _createSDP}\n */\nMediaPlugin.prototype.createAnswer = function(jsep, options) {\n  var self = this;\n  return Promise.try(function() {\n    return self.setRemoteSDP(jsep);\n  }).then(function() {\n    return self._createSDP('createAnswer', options);\n  });\n};\n\n/**\n * @param {RTCSessionDescription} jsep\n * @returns {Promise}\n */\nMediaPlugin.prototype.setRemoteSDP = function(jsep) {\n  return this._pc.setRemoteDescription(new webrtcsupport.SessionDescription(jsep));\n};\n\n/**\n * @param {string} party\n * @param {RTCAnswerOptions|RTCOfferOptions} [options]\n * @returns {Promise}\n * @fulfilled {RTCSessionDescription} sdp\n */\nMediaPlugin.prototype._createSDP = function(party, options) {\n  if (!this._pc) {\n    throw new Error('Create PeerConnection before creating SDP for it');\n  }\n  if (['createOffer', 'createAnswer'].indexOf(party) < 0) {\n    throw new Error('Unknown party in _createSDP');\n  }\n\n  options = options || {};\n  var self = this;\n  return this._pc[party](options)\n    .then(function(description) {\n      return self._pc.setLocalDescription(description);\n    })\n    .then(function() {\n      return self._pc.localDescription;\n    });\n};\n\nMediaPlugin.prototype.processIncomeMessage = function(message) {\n  var self = this;\n  return Promise.try(function() {\n      return MediaPlugin.super_.prototype.processIncomeMessage.call(self, message);\n    })\n    .then(function(result) {\n      var janusType = message['janus'];\n      switch (janusType) {\n        case 'trickle':\n          self._onTrickle(message);\n          break;\n        case 'hangup':\n          self._onHangup(message);\n          break;\n      }\n      return result;\n    });\n};\n\n/**\n * @param {Object} incomeMessage\n */\nMediaPlugin.prototype._onTrickle = function(incomeMessage) {\n  var candidate = new webrtcsupport.IceCandidate(incomeMessage['candidate']);\n  this._pc.addIceCandidate(candidate).catch(function(error) {\n    this.emit('pc:error', error);\n  }.bind(this));\n};\n\n/**\n * @param {Object} incomeMessage\n */\nMediaPlugin.prototype._onHangup = function(incomeMessage) {\n  this.emit('hangup', incomeMessage);\n};\n\nMediaPlugin.prototype.closePeerConnection = function() {\n  if (this._pc) {\n    this._stopLocalMedia();\n    Object.keys(this._pcListeners)\n      .forEach(function(event) {\n        this._removePcEventListener(event);\n      }.bind(this));\n    this._pc.close();\n    this._pc = null;\n    this.emit('pc:close');\n  }\n};\n\nMediaPlugin.prototype._stopLocalMedia = function() {\n  var streams = this._pc.getLocalStreams();\n  streams.forEach(function(stream) {\n    if (stream.stop) {\n      stream.stop();\n    } else if (stream.getTracks) {\n      stream.getTracks().forEach(function(track) {\n        track.stop();\n      });\n    }\n  });\n};\n\nMediaPlugin.prototype._detach = function(message) {\n  this.closePeerConnection();\n  return MediaPlugin.super_.prototype._detach.apply(this, arguments);\n};\n\nMediaPlugin.prototype._addPcEventListeners = function() {\n  var self = this;\n\n  this._addPcEventListener('addstream', function(event) {\n    self.emit('pc:track:remote', {streams: [event.stream]});\n  });\n  this._addPcEventListener('track', function(event) {\n    self.emit('pc:track:remote', event);\n  });\n\n  this._addPcEventListener('icecandidate', function(event) {\n    if (event.candidate) {\n      self.send({janus: 'trickle', candidate: event.candidate});\n    } else {\n      self.send({janus: 'trickle', candidate: {completed: true}});\n      self._removePcEventListener('icecandidate');\n    }\n  });\n\n  this._addPcEventListener('signalingstatechange', function() {\n    if ('closed' == self._pc.signalingState) {\n      self.closePeerConnection();\n    }\n  });\n\n  this._addPcEventListener('iceconnectionstatechange', function() {\n    switch (self._pc.iceConnectionState) {\n      case 'closed':\n      case 'failed':\n        self.closePeerConnection();\n        break;\n    }\n  });\n};\n\nMediaPlugin.prototype._addPcEventListener = function(event, listener) {\n  this._pcListeners[event] = listener;\n  this._pc.addEventListener(event, listener);\n};\n\nMediaPlugin.prototype._removePcEventListener = function(event) {\n  this._pc.removeEventListener(event, this._pcListeners[event]);\n  delete this._pcListeners[event];\n};\n\nmodule.exports = MediaPlugin;\n","var Promise = require('bluebird');\nvar Helpers = require('../helpers');\nvar JanusPluginMessage = require('../janus-plugin-message');\nvar MediaEntityPlugin = require('./media-entity-plugin');\n\nfunction MediaStreamPlugin() {\n  MediaStreamPlugin.super_.apply(this, arguments);\n}\n\nHelpers.inherits(MediaStreamPlugin, MediaEntityPlugin);\n\n/**\n * @param {string|number} id\n * @param {Object} options\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nMediaStreamPlugin.prototype._create = function(id, options) {\n  options = Helpers.extend({id: id}, options);\n  return MediaStreamPlugin.super_.prototype._create.call(this, options);\n};\n\n/**\n * @param {string|number} id\n * @param {Object} options\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nMediaStreamPlugin.prototype._destroy = function(id, options) {\n  options = Helpers.extend({id: id}, options);\n  return MediaStreamPlugin.super_.prototype._destroy.call(this, id, options);\n};\n\n/**\n * @param {string|number} id\n * @param {Object} [watchOptions]\n * @param {Object} [answerOptions]\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nMediaStreamPlugin.prototype._watch = function(id, watchOptions, answerOptions) {\n  var plugin = this;\n  var body = Helpers.extend({request: 'watch', id: id}, watchOptions);\n  return this.sendWithTransaction({body: body})\n    .then(function(response) {\n      var jsep = response.get('jsep');\n      if (!jsep || 'offer' != jsep['type']) {\n        throw new Error('Expect offer response on watch request')\n      }\n      plugin.setCurrentEntity(id);\n      return plugin._offerAnswer(jsep, answerOptions).return(response);\n    });\n};\n\n/**\n * @param {RTCSessionDescription} [jsep]\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nMediaStreamPlugin.prototype._start = function(jsep) {\n  var message = {body: {request: 'start'}};\n  if (jsep) {\n    message.jsep = jsep;\n  }\n  return this.sendWithTransaction(message);\n};\n\n/**\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nMediaStreamPlugin.prototype._stop = function() {\n  return this.sendWithTransaction({body: {request: 'stop'}})\n    .then(function(response) {\n      this.resetCurrentEntity();\n      return response;\n    }.bind(this));\n};\n\n/**\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nMediaStreamPlugin.prototype._pause = function() {\n  return this.sendWithTransaction({body: {request: 'pause'}});\n};\n\n/**\n * @param {string|number} id\n * @param {Object} [options]\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nMediaStreamPlugin.prototype._switch = function(id, options) {\n  var body = Helpers.extend({\n    request: 'switch',\n    id: id\n  }, options);\n  return this.sendWithTransaction({body: body})\n    .then(function(response) {\n      this.setCurrentEntity(id);\n      return response;\n    }.bind(this));\n};\n\n/**\n * @param {string|number} id\n * @param {Object} [watchOptions]\n * @param {Object} [answerOptions]\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nMediaStreamPlugin.prototype.connect = function(id, watchOptions, answerOptions) {\n  if (this.hasCurrentEntity(id)) {\n    return Promise.resolve(new JanusPluginMessage({}, this));\n  }\n  if (this.hasCurrentEntity()) {\n    return this._switch(id, watchOptions);\n  }\n  return this._watch(id, watchOptions, answerOptions);\n};\n\n/**\n * @param {RTCSessionDescription} jsep\n * @param {RTCAnswerOptions} [answerOptions]\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nMediaStreamPlugin.prototype._offerAnswer = function(jsep, answerOptions) {\n  var self = this;\n  return Promise\n    .try(function() {\n      self.createPeerConnection();\n    })\n    .then(function() {\n      return self.createAnswer(jsep, answerOptions);\n    })\n    .then(function(jsep) {\n      return self.sendWithTransaction({janus: 'message', body: {request: 'start'}, jsep: jsep});\n    });\n};\n\nmodule.exports = MediaStreamPlugin;\n","var Helpers = require('../../helpers');\nvar Plugin = require('../../plugin');\nvar MediaAudioPlugin = require('../media-audio-plugin');\n\nfunction AudiobridgePlugin() {\n  AudiobridgePlugin.super_.apply(this, arguments);\n}\n\nAudiobridgePlugin.NAME = 'janus.plugin.audiobridge';\nHelpers.inherits(AudiobridgePlugin, MediaAudioPlugin);\nPlugin.register(AudiobridgePlugin.NAME, AudiobridgePlugin);\n\n/**\n * @see https://janus.conf.meetecho.com/docs/janus__audiobridge_8c.html\n * @param {number} roomId\n * @param {Object} [options]\n * @param {boolean} [options.permanent]\n * @param {string} [options.description]\n * @param {string} [options.secret]\n * @param {string} [options.pin]\n * @param {boolean} [options.is_private]\n * @param {number} [options.sampling]\n * @param {boolean} [options.record]\n * @param {string} [options.record_file]\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nAudiobridgePlugin.prototype.create = function(roomId, options) {\n  return this._create(Helpers.extend({room: roomId}, options));\n};\n\n/**\n * @param {number} roomId\n * @param {Object} [options]\n * @param {string} [options.secret]\n * @param {boolean} [options.permanent]\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nAudiobridgePlugin.prototype.destroy = function(roomId, options) {\n  return this._destroy(roomId, Helpers.extend({room: roomId}, options));\n};\n\n/**\n * @param {number} roomId\n * @param {Object} [options]\n * @param {number} [options.id]\n * @param {string} [options.pin]\n * @param {string} [options.display]\n * @param {boolean} [options.muted]\n * @param {number} [options.quality]\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nAudiobridgePlugin.prototype.join = function(roomId, options) {\n  options = Helpers.extend({room: roomId}, options);\n  return this._join(roomId, options);\n};\n\n/**\n * @param {number} roomId\n * @param {Object} [options]\n * @param {number} [options.id]\n * @param {string} [options.pin]\n * @param {string} [options.display]\n * @param {boolean} [options.muted]\n * @param {number} [options.quality]\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nAudiobridgePlugin.prototype.change = function(roomId, options) {\n  options = Helpers.extend({room: roomId}, options);\n  return this._change(roomId, options);\n};\n\n/**\n * @param {number} roomId\n * @param {Object} [options]\n * @param {number} [options.id]\n * @param {string} [options.display]\n * @param {boolean} [options.muted]\n * @param {number} [options.quality]\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nAudiobridgePlugin.prototype.connect = function(roomId, options) {\n  options = Helpers.extend({room: roomId}, options);\n  return this._connect(roomId, options);\n};\n\n/**\n * @param {number} roomId\n * @returns {Promise}\n * @fulfilled {Array} list\n */\nAudiobridgePlugin.prototype.listParticipants = function(roomId) {\n  return this._listParticipants({room: roomId});\n};\n\n/**\n * @inheritDoc\n */\nAudiobridgePlugin.prototype.getResponseAlias = function() {\n  return 'audiobridge';\n};\n\nmodule.exports = AudiobridgePlugin;\n","var Helpers = require('../../helpers');\nvar Plugin = require('../../plugin');\nvar MediaAudioPlugin = require('../media-audio-plugin');\n\nfunction AudioroomPlugin() {\n  AudioroomPlugin.super_.apply(this, arguments);\n}\n\nAudioroomPlugin.NAME = 'janus.plugin.cm.audioroom';\nHelpers.inherits(AudioroomPlugin, MediaAudioPlugin);\nPlugin.register(AudioroomPlugin.NAME, AudioroomPlugin);\n\n/**\n * @param {string} id\n * @param {Object} [options]\n * @param {string} [options.secret]\n * @param {boolean} [options.permanent]\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nAudioroomPlugin.prototype.destroy = function(id, options) {\n  return this._destroy(id, Helpers.extend({id: id}, options));\n};\n\n/**\n * @param {string} id\n * @param {Object} [options]\n * @param {number} [options.userid]\n * @param {string} [options.display]\n * @param {boolean} [options.muted]\n * @param {number} [options.quality]\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nAudioroomPlugin.prototype.join = function(id, options) {\n  options = Helpers.extend({id: id}, options);\n  return this._join(id, options);\n};\n\n/**\n * @param {string} id\n * @param {Object} [options] {@link join}\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nAudioroomPlugin.prototype.change = function(id, options) {\n  options = Helpers.extend({id: id}, options);\n  return this._change(id, options);\n};\n\n/**\n * @param {string} id\n * @param {Object} [options] {@link join}\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nAudioroomPlugin.prototype.connect = function(id, options) {\n  options = Helpers.extend({id: id}, options);\n  return this._connect(id, options);\n};\n\n/**\n * @param {string} id\n * @returns {Promise}\n * @fulfilled {Array} list\n */\nAudioroomPlugin.prototype.listParticipants = function(id) {\n  return this._listParticipants({id: id});\n};\n\n/**\n * @inheritDoc\n */\nAudioroomPlugin.prototype.getResponseAlias = function() {\n  return 'audioroom';\n};\n\nmodule.exports = AudioroomPlugin;\n","var Helpers = require('../../helpers');\nvar Plugin = require('../../plugin');\nvar MediaStreamPlugin = require('../media-stream-plugin');\n\nfunction RtpbroadcastPlugin() {\n  RtpbroadcastPlugin.super_.apply(this, arguments);\n}\n\nRtpbroadcastPlugin.NAME = 'janus.plugin.cm.rtpbroadcast';\nHelpers.inherits(RtpbroadcastPlugin, MediaStreamPlugin);\nPlugin.register(RtpbroadcastPlugin.NAME, RtpbroadcastPlugin);\n\n\n/**\n * {@link https://github.com/cargomedia/janus-gateway-rtpbroadcast#create}\n * @typedef {Object} StreamParams\n */\n\n/**\n * @param {string} id\n * @param {Object} [options]\n * @param {string} [options.name]\n * @param {string} [options.description]\n * @param {boolean} [options.recorded]\n * @param {string} [options.whitelist]\n * @param {StreamParams} [options.streams]\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nRtpbroadcastPlugin.prototype.create = function(id, options) {\n  return this._create(id, options);\n};\n\n/**\n * @param {string} id\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nRtpbroadcastPlugin.prototype.destroy = function(id) {\n  return this._destroy(id);\n};\n\n/**\n * @param {string} [id]\n * @returns {Promise}\n * @fulfilled {Array} list\n */\nRtpbroadcastPlugin.prototype.list = function(id) {\n  return this._list(id);\n};\n\n/**\n * @param {string} id\n * @param {Object} [answerOptions] {@link createAnswer}\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nRtpbroadcastPlugin.prototype.watch = function(id, answerOptions) {\n  return this._watch(id, null, answerOptions);\n};\n\n/**\n * @param {string} id\n * @param {Array} streams\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nRtpbroadcastPlugin.prototype.watchUDP = function(id, streams) {\n  return this.sendWithTransaction({body: {request: 'watch-udp', id: id, streams: streams}});\n};\n\n/**\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nRtpbroadcastPlugin.prototype.start = function() {\n  return this._start();\n};\n\n/**\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nRtpbroadcastPlugin.prototype.stop = function() {\n  return this._stop();\n};\n\n/**\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nRtpbroadcastPlugin.prototype.pause = function() {\n  return this._pause();\n};\n\n/**\n * @param {string} id\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nRtpbroadcastPlugin.prototype.switch = function(id) {\n  return this._switch(id);\n};\n\n/**\n * @param {number} index\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nRtpbroadcastPlugin.prototype.switchSource = function(index) {\n  return this.sendWithTransaction({body: {request: 'switch-source', index: index}});\n};\n\n/**\n * @param {boolean} enabled\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nRtpbroadcastPlugin.prototype.superuser = function(enabled) {\n  return this.sendWithTransaction({body: {request: 'superuser', enabled: enabled}});\n};\n\n/**\n * @inheritDoc\n */\nRtpbroadcastPlugin.prototype.getResponseAlias = function() {\n  return 'streaming';\n};\n\nmodule.exports = RtpbroadcastPlugin;\n","var Helpers = require('../../helpers');\nvar Plugin = require('../../plugin');\nvar MediaStreamPlugin = require('../media-stream-plugin');\n\nfunction StreamingPlugin() {\n  StreamingPlugin.super_.apply(this, arguments);\n}\n\nStreamingPlugin.NAME = 'janus.plugin.streaming';\nHelpers.inherits(StreamingPlugin, MediaStreamPlugin);\nPlugin.register(StreamingPlugin.NAME, StreamingPlugin);\n\n/**\n * @see https://janus.conf.meetecho.com/docs/janus__streaming_8c.html\n * @param {number} id\n * @param {Object} [options]\n * @param {string} [options.type]\n * @param {string} [options.secret]\n * @param {string} [options.pin]\n * @param {boolean} [options.permanent]\n * @param {string} [options.description]\n * @param {boolean} [options.is_private]\n * @param {string} [options.filename]\n * @param {boolean} [options.audio]\n * @param {boolean} [options.video]\n * @param {number} [options.audioport]\n * @param {string} [options.audiomcast]\n * @param {number} [options.audiopt]\n * @param {string} [options.audiortpmap]\n * @param {string} [options.audiofmtp]\n * @param {number} [options.videoport]\n * @param {string} [options.videomcast]\n * @param {number} [options.videopt]\n * @param {string} [options.videortpmap]\n * @param {string} [options.videofmtp]\n * @param {boolean} [options.videobufferkf]\n * @param {string} [options.url]\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nStreamingPlugin.prototype.create = function(id, options) {\n  return this._create(id, options);\n};\n\n/**\n * @param {number} id\n * @param {Object} [options]\n * @param {string} [options.secret]\n * @param {boolean} [options.permanent]\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nStreamingPlugin.prototype.destroy = function(id, options) {\n  return this._destroy(id, options);\n};\n\n/**\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nStreamingPlugin.prototype.list = function() {\n  return this._list();\n};\n\n/**\n * @param {number} id\n * @param {Object} [watchOptions]\n * @param {string} [watchOptions.pin]\n * @param {Object} [answerOptions] {@link createAnswer}\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nStreamingPlugin.prototype.watch = function(id, watchOptions, answerOptions) {\n  return this._watch(id, watchOptions, answerOptions);\n};\n\n/**\n * @param {RTCSessionDescription} [jsep]\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nStreamingPlugin.prototype.start = function(jsep) {\n  return this._start(jsep);\n};\n\n/**\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nStreamingPlugin.prototype.stop = function() {\n  return this._stop();\n};\n\n/**\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nStreamingPlugin.prototype.pause = function() {\n  return this._pause();\n};\n\n/**\n * @param {number} mountpointId\n * @param {Object} [options] {@link watch}\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nStreamingPlugin.prototype.switch = function(mountpointId, options) {\n  return this._switch(mountpointId, options);\n};\n\n/**\n * @param {number} mountpointId\n * @param {Object} [options]\n * @param {string} [options.secret]\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nStreamingPlugin.prototype.enable = function(mountpointId, options) {\n  var body = Helpers.extend({\n    request: 'enable',\n    id: mountpointId\n  }, options);\n  return this.sendWithTransaction({body: body})\n};\n\n/**\n * @param {number} mountpointId\n * @param {Object} [options]\n * @param {string} [options.secret]\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nStreamingPlugin.prototype.disable = function(mountpointId, options) {\n  var body = Helpers.extend({\n    request: 'disable',\n    id: mountpointId\n  }, options);\n  return this.sendWithTransaction({body: body})\n    .then(function() {\n      if (this.hasCurrentEntity(mountpointId)) {\n        this.resetCurrentEntity();\n      }\n    }.bind(this));\n};\n\n/**\n * @param {number} mountpointId\n * @param {Object} [options]\n * @param {string} [options.secret]\n * @param {string} [options.action]\n * @param {string} [options.audio]\n * @param {string} [options.video]\n * @returns {Promise}\n * @fulfilled {JanusPluginMessage} response\n */\nStreamingPlugin.prototype.recording = function(mountpointId, options) {\n  var body = Helpers.extend({\n    request: 'recording',\n    id: mountpointId\n  }, options);\n  return this.sendWithTransaction({body: body});\n};\n\n/**\n * @inheritDoc\n */\nStreamingPlugin.prototype.getResponseAlias = function() {\n  return 'streaming';\n};\n\nmodule.exports = StreamingPlugin;\n","var Promise = require('bluebird');\nvar WebSocket = require('websocket').w3cwebsocket;\nvar EventEmitter = require('./event-emitter');\nvar Helpers = require('./helpers');\n\n/**\n * @param {WebSocket} [webSocket]\n * @constructor\n * @extends EventEmitter\n */\nfunction WebsocketConnection(webSocket) {\n  WebsocketConnection.super_.call(this);\n  /** @type {WebSocket} */\n  this._webSocket = webSocket;\n\n  if (this._webSocket) {\n    this._onOpen(this._webSocket);\n  }\n}\n\nHelpers.inherits(WebsocketConnection, EventEmitter);\n\n/**\n * @param {string} address\n * @param {string} protocol\n * @returns {Promise}\n * @fulfilled {WebsocketConnection} websocketConnection - when it is opened\n */\nWebsocketConnection.prototype.open = function(address, protocol) {\n  var self = this;\n  return new Promise(function(resolve, reject) {\n    var webSocket = new WebSocket(address, protocol || '');\n    webSocket.onerror = reject;\n    webSocket.onclose = reject;\n    webSocket.onopen = function() {\n      webSocket.onerror = null;\n      webSocket.onclose = null;\n      self._onOpen(webSocket);\n      resolve(self);\n    };\n  });\n};\n\n/**\n * @param {Object|WebSocket} webSocket\n * @protected\n */\nWebsocketConnection.prototype._onOpen = function(webSocket) {\n  this._webSocket = webSocket;\n  if (typeof webSocket.readyState !== 'undefined') {\n    this._installW3cListeners();\n  }\n  else if (webSocket.on) {\n    this._installNodeListeners();\n  }\n  else {\n    throw new Error('Trying to instantiate WebsocketConnection with unknown Websocket');\n  }\n  this.emit('open');\n};\n\n/**\n * @protected\n */\nWebsocketConnection.prototype._installW3cListeners = function() {\n  this._webSocket.onmessage = function(message) {\n    var parsedMessage = JSON.parse(message.data);\n    this.onMessage(parsedMessage);\n  }.bind(this);\n\n  this._webSocket.onerror = function(error) {\n    this.emit('error', error);\n  }.bind(this);\n\n  this._webSocket.onclose = function() {\n    this._close();\n  }.bind(this);\n};\n\n/**\n * @protected\n */\nWebsocketConnection.prototype._installNodeListeners = function() {\n  this._webSocket.on('message', function(message) {\n    var parsedMessage = JSON.parse(message);\n    this.onMessage(parsedMessage);\n  }.bind(this));\n\n  this._webSocket.on('error', function(error) {\n    this.emit('error', error);\n  }.bind(this));\n\n  this._webSocket.on('close', function() {\n    this._close();\n  }.bind(this));\n};\n\n/**\n * @returns {boolean}\n */\nWebsocketConnection.prototype.isOpened = function() {\n  return this._webSocket && this._webSocket.OPEN === this._webSocket.readyState;\n};\n\n/**\n * @returns {boolean}\n */\nWebsocketConnection.prototype.isClosed = function() {\n  return !this._webSocket || this._webSocket.CLOSED === this._webSocket.readyState || this._webSocket.CLOSING === this._webSocket.readyState;\n};\n\n/**\n * @returns {Promise}\n */\nWebsocketConnection.prototype.close = function() {\n  if (this.isClosed()) {\n    return Promise.resolve();\n  }\n  return new Promise(function(resolve) {\n    this._close();\n    resolve();\n  }.bind(this));\n};\n\nWebsocketConnection.prototype._close = function() {\n  if (!this.isClosed()) {\n    if (this._webSocket.terminate) {\n      this._webSocket.terminate();\n    } else {\n      this._webSocket.close();\n    }\n  }\n  this.emit('close');\n};\n\n/**\n * @param {Object} message\n * @returns {Promise}\n */\nWebsocketConnection.prototype.send = function(message) {\n  if (this.isOpened()) {\n    return this._send(message);\n  }\n  else if (!this._webSocket || this._webSocket.CONNECTING === this._webSocket.readyState) {\n    return this._queue(message);\n  }\n  else {\n    return Promise.reject(new Error('Can not send message over closed connection'));\n  }\n};\n\n/**\n * @param {Object} message\n */\nWebsocketConnection.prototype.onMessage = function(message) {\n  try {\n    this.emit('message', message);\n  } catch (error) {\n    this.emit('error', error);\n  }\n};\n\n/**\n * @param {Object} message\n * @returns {Promise}\n * @protected\n */\nWebsocketConnection.prototype._queue = function(message) {\n  return new Promise(function(resolve) {\n    this.once('open', function() {\n      this._send(message).then(function() {\n        resolve();\n      });\n    }.bind(this));\n  }.bind(this));\n};\n\n/**\n * @param {Object} message\n * @returns {Promise}\n * @protected\n */\nWebsocketConnection.prototype._send = function(message) {\n  return new Promise(function(resolve) {\n    this._webSocket.send(JSON.stringify(message));\n    resolve();\n  }.bind(this));\n};\n\nmodule.exports = WebsocketConnection;\n","/* eslint-env node */\n'use strict';\n\n// SDP helpers.\nconst SDPUtils = {};\n\n// Generate an alphanumeric identifier for cname or mids.\n// TODO: use UUIDs instead? https://gist.github.com/jed/982883\nSDPUtils.generateIdentifier = function() {\n  return Math.random().toString(36).substring(2, 12);\n};\n\n// The RTCP CNAME used by all peerconnections from the same JS.\nSDPUtils.localCName = SDPUtils.generateIdentifier();\n\n// Splits SDP into lines, dealing with both CRLF and LF.\nSDPUtils.splitLines = function(blob) {\n  return blob.trim().split('\\n').map(line => line.trim());\n};\n// Splits SDP into sessionpart and mediasections. Ensures CRLF.\nSDPUtils.splitSections = function(blob) {\n  const parts = blob.split('\\nm=');\n  return parts.map((part, index) => (index > 0 ?\n    'm=' + part : part).trim() + '\\r\\n');\n};\n\n// Returns the session description.\nSDPUtils.getDescription = function(blob) {\n  const sections = SDPUtils.splitSections(blob);\n  return sections && sections[0];\n};\n\n// Returns the individual media sections.\nSDPUtils.getMediaSections = function(blob) {\n  const sections = SDPUtils.splitSections(blob);\n  sections.shift();\n  return sections;\n};\n\n// Returns lines that start with a certain prefix.\nSDPUtils.matchPrefix = function(blob, prefix) {\n  return SDPUtils.splitLines(blob).filter(line => line.indexOf(prefix) === 0);\n};\n\n// Parses an ICE candidate line. Sample input:\n// candidate:702786350 2 udp 41819902 8.8.8.8 60769 typ relay raddr 8.8.8.8\n// rport 55996\"\n// Input can be prefixed with a=.\nSDPUtils.parseCandidate = function(line) {\n  let parts;\n  // Parse both variants.\n  if (line.indexOf('a=candidate:') === 0) {\n    parts = line.substring(12).split(' ');\n  } else {\n    parts = line.substring(10).split(' ');\n  }\n\n  const candidate = {\n    foundation: parts[0],\n    component: {1: 'rtp', 2: 'rtcp'}[parts[1]] || parts[1],\n    protocol: parts[2].toLowerCase(),\n    priority: parseInt(parts[3], 10),\n    ip: parts[4],\n    address: parts[4], // address is an alias for ip.\n    port: parseInt(parts[5], 10),\n    // skip parts[6] == 'typ'\n    type: parts[7],\n  };\n\n  for (let i = 8; i < parts.length; i += 2) {\n    switch (parts[i]) {\n      case 'raddr':\n        candidate.relatedAddress = parts[i + 1];\n        break;\n      case 'rport':\n        candidate.relatedPort = parseInt(parts[i + 1], 10);\n        break;\n      case 'tcptype':\n        candidate.tcpType = parts[i + 1];\n        break;\n      case 'ufrag':\n        candidate.ufrag = parts[i + 1]; // for backward compatibility.\n        candidate.usernameFragment = parts[i + 1];\n        break;\n      default: // extension handling, in particular ufrag. Don't overwrite.\n        if (candidate[parts[i]] === undefined) {\n          candidate[parts[i]] = parts[i + 1];\n        }\n        break;\n    }\n  }\n  return candidate;\n};\n\n// Translates a candidate object into SDP candidate attribute.\n// This does not include the a= prefix!\nSDPUtils.writeCandidate = function(candidate) {\n  const sdp = [];\n  sdp.push(candidate.foundation);\n\n  const component = candidate.component;\n  if (component === 'rtp') {\n    sdp.push(1);\n  } else if (component === 'rtcp') {\n    sdp.push(2);\n  } else {\n    sdp.push(component);\n  }\n  sdp.push(candidate.protocol.toUpperCase());\n  sdp.push(candidate.priority);\n  sdp.push(candidate.address || candidate.ip);\n  sdp.push(candidate.port);\n\n  const type = candidate.type;\n  sdp.push('typ');\n  sdp.push(type);\n  if (type !== 'host' && candidate.relatedAddress &&\n      candidate.relatedPort) {\n    sdp.push('raddr');\n    sdp.push(candidate.relatedAddress);\n    sdp.push('rport');\n    sdp.push(candidate.relatedPort);\n  }\n  if (candidate.tcpType && candidate.protocol.toLowerCase() === 'tcp') {\n    sdp.push('tcptype');\n    sdp.push(candidate.tcpType);\n  }\n  if (candidate.usernameFragment || candidate.ufrag) {\n    sdp.push('ufrag');\n    sdp.push(candidate.usernameFragment || candidate.ufrag);\n  }\n  return 'candidate:' + sdp.join(' ');\n};\n\n// Parses an ice-options line, returns an array of option tags.\n// Sample input:\n// a=ice-options:foo bar\nSDPUtils.parseIceOptions = function(line) {\n  return line.substring(14).split(' ');\n};\n\n// Parses a rtpmap line, returns RTCRtpCoddecParameters. Sample input:\n// a=rtpmap:111 opus/48000/2\nSDPUtils.parseRtpMap = function(line) {\n  let parts = line.substring(9).split(' ');\n  const parsed = {\n    payloadType: parseInt(parts.shift(), 10), // was: id\n  };\n\n  parts = parts[0].split('/');\n\n  parsed.name = parts[0];\n  parsed.clockRate = parseInt(parts[1], 10); // was: clockrate\n  parsed.channels = parts.length === 3 ? parseInt(parts[2], 10) : 1;\n  // legacy alias, got renamed back to channels in ORTC.\n  parsed.numChannels = parsed.channels;\n  return parsed;\n};\n\n// Generates a rtpmap line from RTCRtpCodecCapability or\n// RTCRtpCodecParameters.\nSDPUtils.writeRtpMap = function(codec) {\n  let pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  const channels = codec.channels || codec.numChannels || 1;\n  return 'a=rtpmap:' + pt + ' ' + codec.name + '/' + codec.clockRate +\n      (channels !== 1 ? '/' + channels : '') + '\\r\\n';\n};\n\n// Parses a extmap line (headerextension from RFC 5285). Sample input:\n// a=extmap:2 urn:ietf:params:rtp-hdrext:toffset\n// a=extmap:2/sendonly urn:ietf:params:rtp-hdrext:toffset\nSDPUtils.parseExtmap = function(line) {\n  const parts = line.substring(9).split(' ');\n  return {\n    id: parseInt(parts[0], 10),\n    direction: parts[0].indexOf('/') > 0 ? parts[0].split('/')[1] : 'sendrecv',\n    uri: parts[1],\n    attributes: parts.slice(2).join(' '),\n  };\n};\n\n// Generates an extmap line from RTCRtpHeaderExtensionParameters or\n// RTCRtpHeaderExtension.\nSDPUtils.writeExtmap = function(headerExtension) {\n  return 'a=extmap:' + (headerExtension.id || headerExtension.preferredId) +\n      (headerExtension.direction && headerExtension.direction !== 'sendrecv'\n        ? '/' + headerExtension.direction\n        : '') +\n      ' ' + headerExtension.uri +\n      (headerExtension.attributes ? ' ' + headerExtension.attributes : '') +\n      '\\r\\n';\n};\n\n// Parses a fmtp line, returns dictionary. Sample input:\n// a=fmtp:96 vbr=on;cng=on\n// Also deals with vbr=on; cng=on\nSDPUtils.parseFmtp = function(line) {\n  const parsed = {};\n  let kv;\n  const parts = line.substring(line.indexOf(' ') + 1).split(';');\n  for (let j = 0; j < parts.length; j++) {\n    kv = parts[j].trim().split('=');\n    parsed[kv[0].trim()] = kv[1];\n  }\n  return parsed;\n};\n\n// Generates a fmtp line from RTCRtpCodecCapability or RTCRtpCodecParameters.\nSDPUtils.writeFmtp = function(codec) {\n  let line = '';\n  let pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  if (codec.parameters && Object.keys(codec.parameters).length) {\n    const params = [];\n    Object.keys(codec.parameters).forEach(param => {\n      if (codec.parameters[param] !== undefined) {\n        params.push(param + '=' + codec.parameters[param]);\n      } else {\n        params.push(param);\n      }\n    });\n    line += 'a=fmtp:' + pt + ' ' + params.join(';') + '\\r\\n';\n  }\n  return line;\n};\n\n// Parses a rtcp-fb line, returns RTCPRtcpFeedback object. Sample input:\n// a=rtcp-fb:98 nack rpsi\nSDPUtils.parseRtcpFb = function(line) {\n  const parts = line.substring(line.indexOf(' ') + 1).split(' ');\n  return {\n    type: parts.shift(),\n    parameter: parts.join(' '),\n  };\n};\n\n// Generate a=rtcp-fb lines from RTCRtpCodecCapability or RTCRtpCodecParameters.\nSDPUtils.writeRtcpFb = function(codec) {\n  let lines = '';\n  let pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  if (codec.rtcpFeedback && codec.rtcpFeedback.length) {\n    // FIXME: special handling for trr-int?\n    codec.rtcpFeedback.forEach(fb => {\n      lines += 'a=rtcp-fb:' + pt + ' ' + fb.type +\n      (fb.parameter && fb.parameter.length ? ' ' + fb.parameter : '') +\n          '\\r\\n';\n    });\n  }\n  return lines;\n};\n\n// Parses a RFC 5576 ssrc media attribute. Sample input:\n// a=ssrc:3735928559 cname:something\nSDPUtils.parseSsrcMedia = function(line) {\n  const sp = line.indexOf(' ');\n  const parts = {\n    ssrc: parseInt(line.substring(7, sp), 10),\n  };\n  const colon = line.indexOf(':', sp);\n  if (colon > -1) {\n    parts.attribute = line.substring(sp + 1, colon);\n    parts.value = line.substring(colon + 1);\n  } else {\n    parts.attribute = line.substring(sp + 1);\n  }\n  return parts;\n};\n\n// Parse a ssrc-group line (see RFC 5576). Sample input:\n// a=ssrc-group:semantics 12 34\nSDPUtils.parseSsrcGroup = function(line) {\n  const parts = line.substring(13).split(' ');\n  return {\n    semantics: parts.shift(),\n    ssrcs: parts.map(ssrc => parseInt(ssrc, 10)),\n  };\n};\n\n// Extracts the MID (RFC 5888) from a media section.\n// Returns the MID or undefined if no mid line was found.\nSDPUtils.getMid = function(mediaSection) {\n  const mid = SDPUtils.matchPrefix(mediaSection, 'a=mid:')[0];\n  if (mid) {\n    return mid.substring(6);\n  }\n};\n\n// Parses a fingerprint line for DTLS-SRTP.\nSDPUtils.parseFingerprint = function(line) {\n  const parts = line.substring(14).split(' ');\n  return {\n    algorithm: parts[0].toLowerCase(), // algorithm is case-sensitive in Edge.\n    value: parts[1].toUpperCase(), // the definition is upper-case in RFC 4572.\n  };\n};\n\n// Extracts DTLS parameters from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the fingerprint line as input. See also getIceParameters.\nSDPUtils.getDtlsParameters = function(mediaSection, sessionpart) {\n  const lines = SDPUtils.matchPrefix(mediaSection + sessionpart,\n    'a=fingerprint:');\n  // Note: a=setup line is ignored since we use the 'auto' role in Edge.\n  return {\n    role: 'auto',\n    fingerprints: lines.map(SDPUtils.parseFingerprint),\n  };\n};\n\n// Serializes DTLS parameters to SDP.\nSDPUtils.writeDtlsParameters = function(params, setupType) {\n  let sdp = 'a=setup:' + setupType + '\\r\\n';\n  params.fingerprints.forEach(fp => {\n    sdp += 'a=fingerprint:' + fp.algorithm + ' ' + fp.value + '\\r\\n';\n  });\n  return sdp;\n};\n\n// Parses a=crypto lines into\n//   https://rawgit.com/aboba/edgertc/master/msortc-rs4.html#dictionary-rtcsrtpsdesparameters-members\nSDPUtils.parseCryptoLine = function(line) {\n  const parts = line.substring(9).split(' ');\n  return {\n    tag: parseInt(parts[0], 10),\n    cryptoSuite: parts[1],\n    keyParams: parts[2],\n    sessionParams: parts.slice(3),\n  };\n};\n\nSDPUtils.writeCryptoLine = function(parameters) {\n  return 'a=crypto:' + parameters.tag + ' ' +\n    parameters.cryptoSuite + ' ' +\n    (typeof parameters.keyParams === 'object'\n      ? SDPUtils.writeCryptoKeyParams(parameters.keyParams)\n      : parameters.keyParams) +\n    (parameters.sessionParams ? ' ' + parameters.sessionParams.join(' ') : '') +\n    '\\r\\n';\n};\n\n// Parses the crypto key parameters into\n//   https://rawgit.com/aboba/edgertc/master/msortc-rs4.html#rtcsrtpkeyparam*\nSDPUtils.parseCryptoKeyParams = function(keyParams) {\n  if (keyParams.indexOf('inline:') !== 0) {\n    return null;\n  }\n  const parts = keyParams.substring(7).split('|');\n  return {\n    keyMethod: 'inline',\n    keySalt: parts[0],\n    lifeTime: parts[1],\n    mkiValue: parts[2] ? parts[2].split(':')[0] : undefined,\n    mkiLength: parts[2] ? parts[2].split(':')[1] : undefined,\n  };\n};\n\nSDPUtils.writeCryptoKeyParams = function(keyParams) {\n  return keyParams.keyMethod + ':'\n    + keyParams.keySalt +\n    (keyParams.lifeTime ? '|' + keyParams.lifeTime : '') +\n    (keyParams.mkiValue && keyParams.mkiLength\n      ? '|' + keyParams.mkiValue + ':' + keyParams.mkiLength\n      : '');\n};\n\n// Extracts all SDES parameters.\nSDPUtils.getCryptoParameters = function(mediaSection, sessionpart) {\n  const lines = SDPUtils.matchPrefix(mediaSection + sessionpart,\n    'a=crypto:');\n  return lines.map(SDPUtils.parseCryptoLine);\n};\n\n// Parses ICE information from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the ice-ufrag and ice-pwd lines as input.\nSDPUtils.getIceParameters = function(mediaSection, sessionpart) {\n  const ufrag = SDPUtils.matchPrefix(mediaSection + sessionpart,\n    'a=ice-ufrag:')[0];\n  const pwd = SDPUtils.matchPrefix(mediaSection + sessionpart,\n    'a=ice-pwd:')[0];\n  if (!(ufrag && pwd)) {\n    return null;\n  }\n  return {\n    usernameFragment: ufrag.substring(12),\n    password: pwd.substring(10),\n  };\n};\n\n// Serializes ICE parameters to SDP.\nSDPUtils.writeIceParameters = function(params) {\n  let sdp = 'a=ice-ufrag:' + params.usernameFragment + '\\r\\n' +\n      'a=ice-pwd:' + params.password + '\\r\\n';\n  if (params.iceLite) {\n    sdp += 'a=ice-lite\\r\\n';\n  }\n  return sdp;\n};\n\n// Parses the SDP media section and returns RTCRtpParameters.\nSDPUtils.parseRtpParameters = function(mediaSection) {\n  const description = {\n    codecs: [],\n    headerExtensions: [],\n    fecMechanisms: [],\n    rtcp: [],\n  };\n  const lines = SDPUtils.splitLines(mediaSection);\n  const mline = lines[0].split(' ');\n  description.profile = mline[2];\n  for (let i = 3; i < mline.length; i++) { // find all codecs from mline[3..]\n    const pt = mline[i];\n    const rtpmapline = SDPUtils.matchPrefix(\n      mediaSection, 'a=rtpmap:' + pt + ' ')[0];\n    if (rtpmapline) {\n      const codec = SDPUtils.parseRtpMap(rtpmapline);\n      const fmtps = SDPUtils.matchPrefix(\n        mediaSection, 'a=fmtp:' + pt + ' ');\n      // Only the first a=fmtp:<pt> is considered.\n      codec.parameters = fmtps.length ? SDPUtils.parseFmtp(fmtps[0]) : {};\n      codec.rtcpFeedback = SDPUtils.matchPrefix(\n        mediaSection, 'a=rtcp-fb:' + pt + ' ')\n        .map(SDPUtils.parseRtcpFb);\n      description.codecs.push(codec);\n      // parse FEC mechanisms from rtpmap lines.\n      switch (codec.name.toUpperCase()) {\n        case 'RED':\n        case 'ULPFEC':\n          description.fecMechanisms.push(codec.name.toUpperCase());\n          break;\n        default: // only RED and ULPFEC are recognized as FEC mechanisms.\n          break;\n      }\n    }\n  }\n  SDPUtils.matchPrefix(mediaSection, 'a=extmap:').forEach(line => {\n    description.headerExtensions.push(SDPUtils.parseExtmap(line));\n  });\n  const wildcardRtcpFb = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-fb:* ')\n    .map(SDPUtils.parseRtcpFb);\n  description.codecs.forEach(codec => {\n    wildcardRtcpFb.forEach(fb=> {\n      const duplicate = codec.rtcpFeedback.find(existingFeedback => {\n        return existingFeedback.type === fb.type &&\n          existingFeedback.parameter === fb.parameter;\n      });\n      if (!duplicate) {\n        codec.rtcpFeedback.push(fb);\n      }\n    });\n  });\n  // FIXME: parse rtcp.\n  return description;\n};\n\n// Generates parts of the SDP media section describing the capabilities /\n// parameters.\nSDPUtils.writeRtpDescription = function(kind, caps) {\n  let sdp = '';\n\n  // Build the mline.\n  sdp += 'm=' + kind + ' ';\n  sdp += caps.codecs.length > 0 ? '9' : '0'; // reject if no codecs.\n  sdp += ' ' + (caps.profile || 'UDP/TLS/RTP/SAVPF') + ' ';\n  sdp += caps.codecs.map(codec => {\n    if (codec.preferredPayloadType !== undefined) {\n      return codec.preferredPayloadType;\n    }\n    return codec.payloadType;\n  }).join(' ') + '\\r\\n';\n\n  sdp += 'c=IN IP4 0.0.0.0\\r\\n';\n  sdp += 'a=rtcp:9 IN IP4 0.0.0.0\\r\\n';\n\n  // Add a=rtpmap lines for each codec. Also fmtp and rtcp-fb.\n  caps.codecs.forEach(codec => {\n    sdp += SDPUtils.writeRtpMap(codec);\n    sdp += SDPUtils.writeFmtp(codec);\n    sdp += SDPUtils.writeRtcpFb(codec);\n  });\n  let maxptime = 0;\n  caps.codecs.forEach(codec => {\n    if (codec.maxptime > maxptime) {\n      maxptime = codec.maxptime;\n    }\n  });\n  if (maxptime > 0) {\n    sdp += 'a=maxptime:' + maxptime + '\\r\\n';\n  }\n\n  if (caps.headerExtensions) {\n    caps.headerExtensions.forEach(extension => {\n      sdp += SDPUtils.writeExtmap(extension);\n    });\n  }\n  // FIXME: write fecMechanisms.\n  return sdp;\n};\n\n// Parses the SDP media section and returns an array of\n// RTCRtpEncodingParameters.\nSDPUtils.parseRtpEncodingParameters = function(mediaSection) {\n  const encodingParameters = [];\n  const description = SDPUtils.parseRtpParameters(mediaSection);\n  const hasRed = description.fecMechanisms.indexOf('RED') !== -1;\n  const hasUlpfec = description.fecMechanisms.indexOf('ULPFEC') !== -1;\n\n  // filter a=ssrc:... cname:, ignore PlanB-msid\n  const ssrcs = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n    .map(line => SDPUtils.parseSsrcMedia(line))\n    .filter(parts => parts.attribute === 'cname');\n  const primarySsrc = ssrcs.length > 0 && ssrcs[0].ssrc;\n  let secondarySsrc;\n\n  const flows = SDPUtils.matchPrefix(mediaSection, 'a=ssrc-group:FID')\n    .map(line => {\n      const parts = line.substring(17).split(' ');\n      return parts.map(part => parseInt(part, 10));\n    });\n  if (flows.length > 0 && flows[0].length > 1 && flows[0][0] === primarySsrc) {\n    secondarySsrc = flows[0][1];\n  }\n\n  description.codecs.forEach(codec => {\n    if (codec.name.toUpperCase() === 'RTX' && codec.parameters.apt) {\n      let encParam = {\n        ssrc: primarySsrc,\n        codecPayloadType: parseInt(codec.parameters.apt, 10),\n      };\n      if (primarySsrc && secondarySsrc) {\n        encParam.rtx = {ssrc: secondarySsrc};\n      }\n      encodingParameters.push(encParam);\n      if (hasRed) {\n        encParam = JSON.parse(JSON.stringify(encParam));\n        encParam.fec = {\n          ssrc: primarySsrc,\n          mechanism: hasUlpfec ? 'red+ulpfec' : 'red',\n        };\n        encodingParameters.push(encParam);\n      }\n    }\n  });\n  if (encodingParameters.length === 0 && primarySsrc) {\n    encodingParameters.push({\n      ssrc: primarySsrc,\n    });\n  }\n\n  // we support both b=AS and b=TIAS but interpret AS as TIAS.\n  let bandwidth = SDPUtils.matchPrefix(mediaSection, 'b=');\n  if (bandwidth.length) {\n    if (bandwidth[0].indexOf('b=TIAS:') === 0) {\n      bandwidth = parseInt(bandwidth[0].substring(7), 10);\n    } else if (bandwidth[0].indexOf('b=AS:') === 0) {\n      // use formula from JSEP to convert b=AS to TIAS value.\n      bandwidth = parseInt(bandwidth[0].substring(5), 10) * 1000 * 0.95\n          - (50 * 40 * 8);\n    } else {\n      bandwidth = undefined;\n    }\n    encodingParameters.forEach(params => {\n      params.maxBitrate = bandwidth;\n    });\n  }\n  return encodingParameters;\n};\n\n// parses http://draft.ortc.org/#rtcrtcpparameters*\nSDPUtils.parseRtcpParameters = function(mediaSection) {\n  const rtcpParameters = {};\n\n  // Gets the first SSRC. Note that with RTX there might be multiple\n  // SSRCs.\n  const remoteSsrc = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n    .map(line => SDPUtils.parseSsrcMedia(line))\n    .filter(obj => obj.attribute === 'cname')[0];\n  if (remoteSsrc) {\n    rtcpParameters.cname = remoteSsrc.value;\n    rtcpParameters.ssrc = remoteSsrc.ssrc;\n  }\n\n  // Edge uses the compound attribute instead of reducedSize\n  // compound is !reducedSize\n  const rsize = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-rsize');\n  rtcpParameters.reducedSize = rsize.length > 0;\n  rtcpParameters.compound = rsize.length === 0;\n\n  // parses the rtcp-mux attrbute.\n  // Note that Edge does not support unmuxed RTCP.\n  const mux = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-mux');\n  rtcpParameters.mux = mux.length > 0;\n\n  return rtcpParameters;\n};\n\nSDPUtils.writeRtcpParameters = function(rtcpParameters) {\n  let sdp = '';\n  if (rtcpParameters.reducedSize) {\n    sdp += 'a=rtcp-rsize\\r\\n';\n  }\n  if (rtcpParameters.mux) {\n    sdp += 'a=rtcp-mux\\r\\n';\n  }\n  if (rtcpParameters.ssrc !== undefined && rtcpParameters.cname) {\n    sdp += 'a=ssrc:' + rtcpParameters.ssrc +\n      ' cname:' + rtcpParameters.cname + '\\r\\n';\n  }\n  return sdp;\n};\n\n\n// parses either a=msid: or a=ssrc:... msid lines and returns\n// the id of the MediaStream and MediaStreamTrack.\nSDPUtils.parseMsid = function(mediaSection) {\n  let parts;\n  const spec = SDPUtils.matchPrefix(mediaSection, 'a=msid:');\n  if (spec.length === 1) {\n    parts = spec[0].substring(7).split(' ');\n    return {stream: parts[0], track: parts[1]};\n  }\n  const planB = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n    .map(line => SDPUtils.parseSsrcMedia(line))\n    .filter(msidParts => msidParts.attribute === 'msid');\n  if (planB.length > 0) {\n    parts = planB[0].value.split(' ');\n    return {stream: parts[0], track: parts[1]};\n  }\n};\n\n// SCTP\n// parses draft-ietf-mmusic-sctp-sdp-26 first and falls back\n// to draft-ietf-mmusic-sctp-sdp-05\nSDPUtils.parseSctpDescription = function(mediaSection) {\n  const mline = SDPUtils.parseMLine(mediaSection);\n  const maxSizeLine = SDPUtils.matchPrefix(mediaSection, 'a=max-message-size:');\n  let maxMessageSize;\n  if (maxSizeLine.length > 0) {\n    maxMessageSize = parseInt(maxSizeLine[0].substring(19), 10);\n  }\n  if (isNaN(maxMessageSize)) {\n    maxMessageSize = 65536;\n  }\n  const sctpPort = SDPUtils.matchPrefix(mediaSection, 'a=sctp-port:');\n  if (sctpPort.length > 0) {\n    return {\n      port: parseInt(sctpPort[0].substring(12), 10),\n      protocol: mline.fmt,\n      maxMessageSize,\n    };\n  }\n  const sctpMapLines = SDPUtils.matchPrefix(mediaSection, 'a=sctpmap:');\n  if (sctpMapLines.length > 0) {\n    const parts = sctpMapLines[0]\n      .substring(10)\n      .split(' ');\n    return {\n      port: parseInt(parts[0], 10),\n      protocol: parts[1],\n      maxMessageSize,\n    };\n  }\n};\n\n// SCTP\n// outputs the draft-ietf-mmusic-sctp-sdp-26 version that all browsers\n// support by now receiving in this format, unless we originally parsed\n// as the draft-ietf-mmusic-sctp-sdp-05 format (indicated by the m-line\n// protocol of DTLS/SCTP -- without UDP/ or TCP/)\nSDPUtils.writeSctpDescription = function(media, sctp) {\n  let output = [];\n  if (media.protocol !== 'DTLS/SCTP') {\n    output = [\n      'm=' + media.kind + ' 9 ' + media.protocol + ' ' + sctp.protocol + '\\r\\n',\n      'c=IN IP4 0.0.0.0\\r\\n',\n      'a=sctp-port:' + sctp.port + '\\r\\n',\n    ];\n  } else {\n    output = [\n      'm=' + media.kind + ' 9 ' + media.protocol + ' ' + sctp.port + '\\r\\n',\n      'c=IN IP4 0.0.0.0\\r\\n',\n      'a=sctpmap:' + sctp.port + ' ' + sctp.protocol + ' 65535\\r\\n',\n    ];\n  }\n  if (sctp.maxMessageSize !== undefined) {\n    output.push('a=max-message-size:' + sctp.maxMessageSize + '\\r\\n');\n  }\n  return output.join('');\n};\n\n// Generate a session ID for SDP.\n// https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-20#section-5.2.1\n// recommends using a cryptographically random +ve 64-bit value\n// but right now this should be acceptable and within the right range\nSDPUtils.generateSessionId = function() {\n  return Math.random().toString().substr(2, 22);\n};\n\n// Write boiler plate for start of SDP\n// sessId argument is optional - if not supplied it will\n// be generated randomly\n// sessVersion is optional and defaults to 2\n// sessUser is optional and defaults to 'thisisadapterortc'\nSDPUtils.writeSessionBoilerplate = function(sessId, sessVer, sessUser) {\n  let sessionId;\n  const version = sessVer !== undefined ? sessVer : 2;\n  if (sessId) {\n    sessionId = sessId;\n  } else {\n    sessionId = SDPUtils.generateSessionId();\n  }\n  const user = sessUser || 'thisisadapterortc';\n  // FIXME: sess-id should be an NTP timestamp.\n  return 'v=0\\r\\n' +\n      'o=' + user + ' ' + sessionId + ' ' + version +\n        ' IN IP4 127.0.0.1\\r\\n' +\n      's=-\\r\\n' +\n      't=0 0\\r\\n';\n};\n\n// Gets the direction from the mediaSection or the sessionpart.\nSDPUtils.getDirection = function(mediaSection, sessionpart) {\n  // Look for sendrecv, sendonly, recvonly, inactive, default to sendrecv.\n  const lines = SDPUtils.splitLines(mediaSection);\n  for (let i = 0; i < lines.length; i++) {\n    switch (lines[i]) {\n      case 'a=sendrecv':\n      case 'a=sendonly':\n      case 'a=recvonly':\n      case 'a=inactive':\n        return lines[i].substring(2);\n      default:\n        // FIXME: What should happen here?\n    }\n  }\n  if (sessionpart) {\n    return SDPUtils.getDirection(sessionpart);\n  }\n  return 'sendrecv';\n};\n\nSDPUtils.getKind = function(mediaSection) {\n  const lines = SDPUtils.splitLines(mediaSection);\n  const mline = lines[0].split(' ');\n  return mline[0].substring(2);\n};\n\nSDPUtils.isRejected = function(mediaSection) {\n  return mediaSection.split(' ', 2)[1] === '0';\n};\n\nSDPUtils.parseMLine = function(mediaSection) {\n  const lines = SDPUtils.splitLines(mediaSection);\n  const parts = lines[0].substring(2).split(' ');\n  return {\n    kind: parts[0],\n    port: parseInt(parts[1], 10),\n    protocol: parts[2],\n    fmt: parts.slice(3).join(' '),\n  };\n};\n\nSDPUtils.parseOLine = function(mediaSection) {\n  const line = SDPUtils.matchPrefix(mediaSection, 'o=')[0];\n  const parts = line.substring(2).split(' ');\n  return {\n    username: parts[0],\n    sessionId: parts[1],\n    sessionVersion: parseInt(parts[2], 10),\n    netType: parts[3],\n    addressType: parts[4],\n    address: parts[5],\n  };\n};\n\n// a very naive interpretation of a valid SDP.\nSDPUtils.isValidSDP = function(blob) {\n  if (typeof blob !== 'string' || blob.length === 0) {\n    return false;\n  }\n  const lines = SDPUtils.splitLines(blob);\n  for (let i = 0; i < lines.length; i++) {\n    if (lines[i].length < 2 || lines[i].charAt(1) !== '=') {\n      return false;\n    }\n    // TODO: check the modifier a bit more.\n  }\n  return true;\n};\n\n// Expose public methods.\nif (typeof module === 'object') {\n  module.exports = SDPUtils;\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nlet logDisabled_ = true;\nlet deprecationWarnings_ = true;\n\n/**\n * Extract browser version out of the provided user agent string.\n *\n * @param {!string} uastring userAgent string.\n * @param {!string} expr Regular expression used as match criteria.\n * @param {!number} pos position in the version string to be returned.\n * @return {!number} browser version.\n */\nexport function extractVersion(uastring, expr, pos) {\n  const match = uastring.match(expr);\n  return match && match.length >= pos && parseInt(match[pos], 10);\n}\n\n// Wraps the peerconnection event eventNameToWrap in a function\n// which returns the modified event object (or false to prevent\n// the event).\nexport function wrapPeerConnectionEvent(window, eventNameToWrap, wrapper) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  const proto = window.RTCPeerConnection.prototype;\n  const nativeAddEventListener = proto.addEventListener;\n  proto.addEventListener = function(nativeEventName, cb) {\n    if (nativeEventName !== eventNameToWrap) {\n      return nativeAddEventListener.apply(this, arguments);\n    }\n    const wrappedCallback = (e) => {\n      const modifiedEvent = wrapper(e);\n      if (modifiedEvent) {\n        if (cb.handleEvent) {\n          cb.handleEvent(modifiedEvent);\n        } else {\n          cb(modifiedEvent);\n        }\n      }\n    };\n    this._eventMap = this._eventMap || {};\n    if (!this._eventMap[eventNameToWrap]) {\n      this._eventMap[eventNameToWrap] = new Map();\n    }\n    this._eventMap[eventNameToWrap].set(cb, wrappedCallback);\n    return nativeAddEventListener.apply(this, [nativeEventName,\n      wrappedCallback]);\n  };\n\n  const nativeRemoveEventListener = proto.removeEventListener;\n  proto.removeEventListener = function(nativeEventName, cb) {\n    if (nativeEventName !== eventNameToWrap || !this._eventMap\n        || !this._eventMap[eventNameToWrap]) {\n      return nativeRemoveEventListener.apply(this, arguments);\n    }\n    if (!this._eventMap[eventNameToWrap].has(cb)) {\n      return nativeRemoveEventListener.apply(this, arguments);\n    }\n    const unwrappedCb = this._eventMap[eventNameToWrap].get(cb);\n    this._eventMap[eventNameToWrap].delete(cb);\n    if (this._eventMap[eventNameToWrap].size === 0) {\n      delete this._eventMap[eventNameToWrap];\n    }\n    if (Object.keys(this._eventMap).length === 0) {\n      delete this._eventMap;\n    }\n    return nativeRemoveEventListener.apply(this, [nativeEventName,\n      unwrappedCb]);\n  };\n\n  Object.defineProperty(proto, 'on' + eventNameToWrap, {\n    get() {\n      return this['_on' + eventNameToWrap];\n    },\n    set(cb) {\n      if (this['_on' + eventNameToWrap]) {\n        this.removeEventListener(eventNameToWrap,\n          this['_on' + eventNameToWrap]);\n        delete this['_on' + eventNameToWrap];\n      }\n      if (cb) {\n        this.addEventListener(eventNameToWrap,\n          this['_on' + eventNameToWrap] = cb);\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n}\n\nexport function disableLog(bool) {\n  if (typeof bool !== 'boolean') {\n    return new Error('Argument type: ' + typeof bool +\n        '. Please use a boolean.');\n  }\n  logDisabled_ = bool;\n  return (bool) ? 'adapter.js logging disabled' :\n    'adapter.js logging enabled';\n}\n\n/**\n * Disable or enable deprecation warnings\n * @param {!boolean} bool set to true to disable warnings.\n */\nexport function disableWarnings(bool) {\n  if (typeof bool !== 'boolean') {\n    return new Error('Argument type: ' + typeof bool +\n        '. Please use a boolean.');\n  }\n  deprecationWarnings_ = !bool;\n  return 'adapter.js deprecation warnings ' + (bool ? 'disabled' : 'enabled');\n}\n\nexport function log() {\n  if (typeof window === 'object') {\n    if (logDisabled_) {\n      return;\n    }\n    if (typeof console !== 'undefined' && typeof console.log === 'function') {\n      console.log.apply(console, arguments);\n    }\n  }\n}\n\n/**\n * Shows a deprecation warning suggesting the modern and spec-compatible API.\n */\nexport function deprecated(oldMethod, newMethod) {\n  if (!deprecationWarnings_) {\n    return;\n  }\n  console.warn(oldMethod + ' is deprecated, please use ' + newMethod +\n      ' instead.');\n}\n\n/**\n * Browser detector.\n *\n * @return {object} result containing browser and version\n *     properties.\n */\nexport function detectBrowser(window) {\n  // Returned result object.\n  const result = {browser: null, version: null};\n\n  // Fail early if it's not a browser\n  if (typeof window === 'undefined' || !window.navigator ||\n      !window.navigator.userAgent) {\n    result.browser = 'Not a browser.';\n    return result;\n  }\n\n  const {navigator} = window;\n\n  // Prefer navigator.userAgentData.\n  if (navigator.userAgentData && navigator.userAgentData.brands) {\n    const chromium = navigator.userAgentData.brands.find((brand) => {\n      return brand.brand === 'Chromium';\n    });\n    if (chromium) {\n      return {browser: 'chrome', version: parseInt(chromium.version, 10)};\n    }\n  }\n\n  if (navigator.mozGetUserMedia) { // Firefox.\n    result.browser = 'firefox';\n    result.version = extractVersion(navigator.userAgent,\n      /Firefox\\/(\\d+)\\./, 1);\n  } else if (navigator.webkitGetUserMedia ||\n      (window.isSecureContext === false && window.webkitRTCPeerConnection)) {\n    // Chrome, Chromium, Webview, Opera.\n    // Version matches Chrome/WebRTC version.\n    // Chrome 74 removed webkitGetUserMedia on http as well so we need the\n    // more complicated fallback to webkitRTCPeerConnection.\n    result.browser = 'chrome';\n    result.version = extractVersion(navigator.userAgent,\n      /Chrom(e|ium)\\/(\\d+)\\./, 2);\n  } else if (window.RTCPeerConnection &&\n      navigator.userAgent.match(/AppleWebKit\\/(\\d+)\\./)) { // Safari.\n    result.browser = 'safari';\n    result.version = extractVersion(navigator.userAgent,\n      /AppleWebKit\\/(\\d+)\\./, 1);\n    result.supportsUnifiedPlan = window.RTCRtpTransceiver &&\n        'currentDirection' in window.RTCRtpTransceiver.prototype;\n  } else { // Default fallthrough: not supported.\n    result.browser = 'Not a supported browser.';\n    return result;\n  }\n\n  return result;\n}\n\n/**\n * Checks if something is an object.\n *\n * @param {*} val The something you want to check.\n * @return true if val is an object, false otherwise.\n */\nfunction isObject(val) {\n  return Object.prototype.toString.call(val) === '[object Object]';\n}\n\n/**\n * Remove all empty objects and undefined values\n * from a nested object -- an enhanced and vanilla version\n * of Lodash's `compact`.\n */\nexport function compactObject(data) {\n  if (!isObject(data)) {\n    return data;\n  }\n\n  return Object.keys(data).reduce(function(accumulator, key) {\n    const isObj = isObject(data[key]);\n    const value = isObj ? compactObject(data[key]) : data[key];\n    const isEmptyObject = isObj && !Object.keys(value).length;\n    if (value === undefined || isEmptyObject) {\n      return accumulator;\n    }\n    return Object.assign(accumulator, {[key]: value});\n  }, {});\n}\n\n/* iterates the stats graph recursively. */\nexport function walkStats(stats, base, resultSet) {\n  if (!base || resultSet.has(base.id)) {\n    return;\n  }\n  resultSet.set(base.id, base);\n  Object.keys(base).forEach(name => {\n    if (name.endsWith('Id')) {\n      walkStats(stats, stats.get(base[name]), resultSet);\n    } else if (name.endsWith('Ids')) {\n      base[name].forEach(id => {\n        walkStats(stats, stats.get(id), resultSet);\n      });\n    }\n  });\n}\n\n/* filter getStats for a sender/receiver track. */\nexport function filterStats(result, track, outbound) {\n  const streamStatsType = outbound ? 'outbound-rtp' : 'inbound-rtp';\n  const filteredResult = new Map();\n  if (track === null) {\n    return filteredResult;\n  }\n  const trackStats = [];\n  result.forEach(value => {\n    if (value.type === 'track' &&\n        value.trackIdentifier === track.id) {\n      trackStats.push(value);\n    }\n  });\n  trackStats.forEach(trackStat => {\n    result.forEach(stats => {\n      if (stats.type === streamStatsType && stats.trackId === trackStat.id) {\n        walkStats(result, stats, filteredResult);\n      }\n    });\n  });\n  return filteredResult;\n}\n\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\nimport * as utils from '../utils.js';\nconst logging = utils.log;\n\nexport function shimGetUserMedia(window, browserDetails) {\n  const navigator = window && window.navigator;\n\n  if (!navigator.mediaDevices) {\n    return;\n  }\n\n  const constraintsToChrome_ = function(c) {\n    if (typeof c !== 'object' || c.mandatory || c.optional) {\n      return c;\n    }\n    const cc = {};\n    Object.keys(c).forEach(key => {\n      if (key === 'require' || key === 'advanced' || key === 'mediaSource') {\n        return;\n      }\n      const r = (typeof c[key] === 'object') ? c[key] : {ideal: c[key]};\n      if (r.exact !== undefined && typeof r.exact === 'number') {\n        r.min = r.max = r.exact;\n      }\n      const oldname_ = function(prefix, name) {\n        if (prefix) {\n          return prefix + name.charAt(0).toUpperCase() + name.slice(1);\n        }\n        return (name === 'deviceId') ? 'sourceId' : name;\n      };\n      if (r.ideal !== undefined) {\n        cc.optional = cc.optional || [];\n        let oc = {};\n        if (typeof r.ideal === 'number') {\n          oc[oldname_('min', key)] = r.ideal;\n          cc.optional.push(oc);\n          oc = {};\n          oc[oldname_('max', key)] = r.ideal;\n          cc.optional.push(oc);\n        } else {\n          oc[oldname_('', key)] = r.ideal;\n          cc.optional.push(oc);\n        }\n      }\n      if (r.exact !== undefined && typeof r.exact !== 'number') {\n        cc.mandatory = cc.mandatory || {};\n        cc.mandatory[oldname_('', key)] = r.exact;\n      } else {\n        ['min', 'max'].forEach(mix => {\n          if (r[mix] !== undefined) {\n            cc.mandatory = cc.mandatory || {};\n            cc.mandatory[oldname_(mix, key)] = r[mix];\n          }\n        });\n      }\n    });\n    if (c.advanced) {\n      cc.optional = (cc.optional || []).concat(c.advanced);\n    }\n    return cc;\n  };\n\n  const shimConstraints_ = function(constraints, func) {\n    if (browserDetails.version >= 61) {\n      return func(constraints);\n    }\n    constraints = JSON.parse(JSON.stringify(constraints));\n    if (constraints && typeof constraints.audio === 'object') {\n      const remap = function(obj, a, b) {\n        if (a in obj && !(b in obj)) {\n          obj[b] = obj[a];\n          delete obj[a];\n        }\n      };\n      constraints = JSON.parse(JSON.stringify(constraints));\n      remap(constraints.audio, 'autoGainControl', 'googAutoGainControl');\n      remap(constraints.audio, 'noiseSuppression', 'googNoiseSuppression');\n      constraints.audio = constraintsToChrome_(constraints.audio);\n    }\n    if (constraints && typeof constraints.video === 'object') {\n      // Shim facingMode for mobile & surface pro.\n      let face = constraints.video.facingMode;\n      face = face && ((typeof face === 'object') ? face : {ideal: face});\n      const getSupportedFacingModeLies = browserDetails.version < 66;\n\n      if ((face && (face.exact === 'user' || face.exact === 'environment' ||\n                    face.ideal === 'user' || face.ideal === 'environment')) &&\n          !(navigator.mediaDevices.getSupportedConstraints &&\n            navigator.mediaDevices.getSupportedConstraints().facingMode &&\n            !getSupportedFacingModeLies)) {\n        delete constraints.video.facingMode;\n        let matches;\n        if (face.exact === 'environment' || face.ideal === 'environment') {\n          matches = ['back', 'rear'];\n        } else if (face.exact === 'user' || face.ideal === 'user') {\n          matches = ['front'];\n        }\n        if (matches) {\n          // Look for matches in label, or use last cam for back (typical).\n          return navigator.mediaDevices.enumerateDevices()\n            .then(devices => {\n              devices = devices.filter(d => d.kind === 'videoinput');\n              let dev = devices.find(d => matches.some(match =>\n                d.label.toLowerCase().includes(match)));\n              if (!dev && devices.length && matches.includes('back')) {\n                dev = devices[devices.length - 1]; // more likely the back cam\n              }\n              if (dev) {\n                constraints.video.deviceId = face.exact\n                  ? {exact: dev.deviceId}\n                  : {ideal: dev.deviceId};\n              }\n              constraints.video = constraintsToChrome_(constraints.video);\n              logging('chrome: ' + JSON.stringify(constraints));\n              return func(constraints);\n            });\n        }\n      }\n      constraints.video = constraintsToChrome_(constraints.video);\n    }\n    logging('chrome: ' + JSON.stringify(constraints));\n    return func(constraints);\n  };\n\n  const shimError_ = function(e) {\n    if (browserDetails.version >= 64) {\n      return e;\n    }\n    return {\n      name: {\n        PermissionDeniedError: 'NotAllowedError',\n        PermissionDismissedError: 'NotAllowedError',\n        InvalidStateError: 'NotAllowedError',\n        DevicesNotFoundError: 'NotFoundError',\n        ConstraintNotSatisfiedError: 'OverconstrainedError',\n        TrackStartError: 'NotReadableError',\n        MediaDeviceFailedDueToShutdown: 'NotAllowedError',\n        MediaDeviceKillSwitchOn: 'NotAllowedError',\n        TabCaptureError: 'AbortError',\n        ScreenCaptureError: 'AbortError',\n        DeviceCaptureError: 'AbortError'\n      }[e.name] || e.name,\n      message: e.message,\n      constraint: e.constraint || e.constraintName,\n      toString() {\n        return this.name + (this.message && ': ') + this.message;\n      }\n    };\n  };\n\n  const getUserMedia_ = function(constraints, onSuccess, onError) {\n    shimConstraints_(constraints, c => {\n      navigator.webkitGetUserMedia(c, onSuccess, e => {\n        if (onError) {\n          onError(shimError_(e));\n        }\n      });\n    });\n  };\n  navigator.getUserMedia = getUserMedia_.bind(navigator);\n\n  // Even though Chrome 45 has navigator.mediaDevices and a getUserMedia\n  // function which returns a Promise, it does not accept spec-style\n  // constraints.\n  if (navigator.mediaDevices.getUserMedia) {\n    const origGetUserMedia = navigator.mediaDevices.getUserMedia.\n      bind(navigator.mediaDevices);\n    navigator.mediaDevices.getUserMedia = function(cs) {\n      return shimConstraints_(cs, c => origGetUserMedia(c).then(stream => {\n        if (c.audio && !stream.getAudioTracks().length ||\n            c.video && !stream.getVideoTracks().length) {\n          stream.getTracks().forEach(track => {\n            track.stop();\n          });\n          throw new DOMException('', 'NotFoundError');\n        }\n        return stream;\n      }, e => Promise.reject(shimError_(e))));\n    };\n  }\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\nimport * as utils from '../utils.js';\n\nexport {shimGetUserMedia} from './getusermedia';\n\nexport function shimMediaStream(window) {\n  window.MediaStream = window.MediaStream || window.webkitMediaStream;\n}\n\nexport function shimOnTrack(window) {\n  if (typeof window === 'object' && window.RTCPeerConnection && !('ontrack' in\n      window.RTCPeerConnection.prototype)) {\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'ontrack', {\n      get() {\n        return this._ontrack;\n      },\n      set(f) {\n        if (this._ontrack) {\n          this.removeEventListener('track', this._ontrack);\n        }\n        this.addEventListener('track', this._ontrack = f);\n      },\n      enumerable: true,\n      configurable: true\n    });\n    const origSetRemoteDescription =\n        window.RTCPeerConnection.prototype.setRemoteDescription;\n    window.RTCPeerConnection.prototype.setRemoteDescription =\n      function setRemoteDescription() {\n        if (!this._ontrackpoly) {\n          this._ontrackpoly = (e) => {\n            // onaddstream does not fire when a track is added to an existing\n            // stream. But stream.onaddtrack is implemented so we use that.\n            e.stream.addEventListener('addtrack', te => {\n              let receiver;\n              if (window.RTCPeerConnection.prototype.getReceivers) {\n                receiver = this.getReceivers()\n                  .find(r => r.track && r.track.id === te.track.id);\n              } else {\n                receiver = {track: te.track};\n              }\n\n              const event = new Event('track');\n              event.track = te.track;\n              event.receiver = receiver;\n              event.transceiver = {receiver};\n              event.streams = [e.stream];\n              this.dispatchEvent(event);\n            });\n            e.stream.getTracks().forEach(track => {\n              let receiver;\n              if (window.RTCPeerConnection.prototype.getReceivers) {\n                receiver = this.getReceivers()\n                  .find(r => r.track && r.track.id === track.id);\n              } else {\n                receiver = {track};\n              }\n              const event = new Event('track');\n              event.track = track;\n              event.receiver = receiver;\n              event.transceiver = {receiver};\n              event.streams = [e.stream];\n              this.dispatchEvent(event);\n            });\n          };\n          this.addEventListener('addstream', this._ontrackpoly);\n        }\n        return origSetRemoteDescription.apply(this, arguments);\n      };\n  } else {\n    // even if RTCRtpTransceiver is in window, it is only used and\n    // emitted in unified-plan. Unfortunately this means we need\n    // to unconditionally wrap the event.\n    utils.wrapPeerConnectionEvent(window, 'track', e => {\n      if (!e.transceiver) {\n        Object.defineProperty(e, 'transceiver',\n          {value: {receiver: e.receiver}});\n      }\n      return e;\n    });\n  }\n}\n\nexport function shimGetSendersWithDtmf(window) {\n  // Overrides addTrack/removeTrack, depends on shimAddTrackRemoveTrack.\n  if (typeof window === 'object' && window.RTCPeerConnection &&\n      !('getSenders' in window.RTCPeerConnection.prototype) &&\n      'createDTMFSender' in window.RTCPeerConnection.prototype) {\n    const shimSenderWithDtmf = function(pc, track) {\n      return {\n        track,\n        get dtmf() {\n          if (this._dtmf === undefined) {\n            if (track.kind === 'audio') {\n              this._dtmf = pc.createDTMFSender(track);\n            } else {\n              this._dtmf = null;\n            }\n          }\n          return this._dtmf;\n        },\n        _pc: pc\n      };\n    };\n\n    // augment addTrack when getSenders is not available.\n    if (!window.RTCPeerConnection.prototype.getSenders) {\n      window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n        this._senders = this._senders || [];\n        return this._senders.slice(); // return a copy of the internal state.\n      };\n      const origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n      window.RTCPeerConnection.prototype.addTrack =\n        function addTrack(track, stream) {\n          let sender = origAddTrack.apply(this, arguments);\n          if (!sender) {\n            sender = shimSenderWithDtmf(this, track);\n            this._senders.push(sender);\n          }\n          return sender;\n        };\n\n      const origRemoveTrack = window.RTCPeerConnection.prototype.removeTrack;\n      window.RTCPeerConnection.prototype.removeTrack =\n        function removeTrack(sender) {\n          origRemoveTrack.apply(this, arguments);\n          const idx = this._senders.indexOf(sender);\n          if (idx !== -1) {\n            this._senders.splice(idx, 1);\n          }\n        };\n    }\n    const origAddStream = window.RTCPeerConnection.prototype.addStream;\n    window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n      this._senders = this._senders || [];\n      origAddStream.apply(this, [stream]);\n      stream.getTracks().forEach(track => {\n        this._senders.push(shimSenderWithDtmf(this, track));\n      });\n    };\n\n    const origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n    window.RTCPeerConnection.prototype.removeStream =\n      function removeStream(stream) {\n        this._senders = this._senders || [];\n        origRemoveStream.apply(this, [stream]);\n\n        stream.getTracks().forEach(track => {\n          const sender = this._senders.find(s => s.track === track);\n          if (sender) { // remove sender\n            this._senders.splice(this._senders.indexOf(sender), 1);\n          }\n        });\n      };\n  } else if (typeof window === 'object' && window.RTCPeerConnection &&\n             'getSenders' in window.RTCPeerConnection.prototype &&\n             'createDTMFSender' in window.RTCPeerConnection.prototype &&\n             window.RTCRtpSender &&\n             !('dtmf' in window.RTCRtpSender.prototype)) {\n    const origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n    window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n      const senders = origGetSenders.apply(this, []);\n      senders.forEach(sender => sender._pc = this);\n      return senders;\n    };\n\n    Object.defineProperty(window.RTCRtpSender.prototype, 'dtmf', {\n      get() {\n        if (this._dtmf === undefined) {\n          if (this.track.kind === 'audio') {\n            this._dtmf = this._pc.createDTMFSender(this.track);\n          } else {\n            this._dtmf = null;\n          }\n        }\n        return this._dtmf;\n      }\n    });\n  }\n}\n\nexport function shimSenderReceiverGetStats(window) {\n  if (!(typeof window === 'object' && window.RTCPeerConnection &&\n      window.RTCRtpSender && window.RTCRtpReceiver)) {\n    return;\n  }\n\n  // shim sender stats.\n  if (!('getStats' in window.RTCRtpSender.prototype)) {\n    const origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n    if (origGetSenders) {\n      window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n        const senders = origGetSenders.apply(this, []);\n        senders.forEach(sender => sender._pc = this);\n        return senders;\n      };\n    }\n\n    const origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n    if (origAddTrack) {\n      window.RTCPeerConnection.prototype.addTrack = function addTrack() {\n        const sender = origAddTrack.apply(this, arguments);\n        sender._pc = this;\n        return sender;\n      };\n    }\n    window.RTCRtpSender.prototype.getStats = function getStats() {\n      const sender = this;\n      return this._pc.getStats().then(result =>\n        /* Note: this will include stats of all senders that\n         *   send a track with the same id as sender.track as\n         *   it is not possible to identify the RTCRtpSender.\n         */\n        utils.filterStats(result, sender.track, true));\n    };\n  }\n\n  // shim receiver stats.\n  if (!('getStats' in window.RTCRtpReceiver.prototype)) {\n    const origGetReceivers = window.RTCPeerConnection.prototype.getReceivers;\n    if (origGetReceivers) {\n      window.RTCPeerConnection.prototype.getReceivers =\n        function getReceivers() {\n          const receivers = origGetReceivers.apply(this, []);\n          receivers.forEach(receiver => receiver._pc = this);\n          return receivers;\n        };\n    }\n    utils.wrapPeerConnectionEvent(window, 'track', e => {\n      e.receiver._pc = e.srcElement;\n      return e;\n    });\n    window.RTCRtpReceiver.prototype.getStats = function getStats() {\n      const receiver = this;\n      return this._pc.getStats().then(result =>\n        utils.filterStats(result, receiver.track, false));\n    };\n  }\n\n  if (!('getStats' in window.RTCRtpSender.prototype &&\n      'getStats' in window.RTCRtpReceiver.prototype)) {\n    return;\n  }\n\n  // shim RTCPeerConnection.getStats(track).\n  const origGetStats = window.RTCPeerConnection.prototype.getStats;\n  window.RTCPeerConnection.prototype.getStats = function getStats() {\n    if (arguments.length > 0 &&\n        arguments[0] instanceof window.MediaStreamTrack) {\n      const track = arguments[0];\n      let sender;\n      let receiver;\n      let err;\n      this.getSenders().forEach(s => {\n        if (s.track === track) {\n          if (sender) {\n            err = true;\n          } else {\n            sender = s;\n          }\n        }\n      });\n      this.getReceivers().forEach(r => {\n        if (r.track === track) {\n          if (receiver) {\n            err = true;\n          } else {\n            receiver = r;\n          }\n        }\n        return r.track === track;\n      });\n      if (err || (sender && receiver)) {\n        return Promise.reject(new DOMException(\n          'There are more than one sender or receiver for the track.',\n          'InvalidAccessError'));\n      } else if (sender) {\n        return sender.getStats();\n      } else if (receiver) {\n        return receiver.getStats();\n      }\n      return Promise.reject(new DOMException(\n        'There is no sender or receiver for the track.',\n        'InvalidAccessError'));\n    }\n    return origGetStats.apply(this, arguments);\n  };\n}\n\nexport function shimAddTrackRemoveTrackWithNative(window) {\n  // shim addTrack/removeTrack with native variants in order to make\n  // the interactions with legacy getLocalStreams behave as in other browsers.\n  // Keeps a mapping stream.id => [stream, rtpsenders...]\n  window.RTCPeerConnection.prototype.getLocalStreams =\n    function getLocalStreams() {\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n      return Object.keys(this._shimmedLocalStreams)\n        .map(streamId => this._shimmedLocalStreams[streamId][0]);\n    };\n\n  const origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n  window.RTCPeerConnection.prototype.addTrack =\n    function addTrack(track, stream) {\n      if (!stream) {\n        return origAddTrack.apply(this, arguments);\n      }\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n\n      const sender = origAddTrack.apply(this, arguments);\n      if (!this._shimmedLocalStreams[stream.id]) {\n        this._shimmedLocalStreams[stream.id] = [stream, sender];\n      } else if (this._shimmedLocalStreams[stream.id].indexOf(sender) === -1) {\n        this._shimmedLocalStreams[stream.id].push(sender);\n      }\n      return sender;\n    };\n\n  const origAddStream = window.RTCPeerConnection.prototype.addStream;\n  window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n    this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n\n    stream.getTracks().forEach(track => {\n      const alreadyExists = this.getSenders().find(s => s.track === track);\n      if (alreadyExists) {\n        throw new DOMException('Track already exists.',\n          'InvalidAccessError');\n      }\n    });\n    const existingSenders = this.getSenders();\n    origAddStream.apply(this, arguments);\n    const newSenders = this.getSenders()\n      .filter(newSender => existingSenders.indexOf(newSender) === -1);\n    this._shimmedLocalStreams[stream.id] = [stream].concat(newSenders);\n  };\n\n  const origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n  window.RTCPeerConnection.prototype.removeStream =\n    function removeStream(stream) {\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n      delete this._shimmedLocalStreams[stream.id];\n      return origRemoveStream.apply(this, arguments);\n    };\n\n  const origRemoveTrack = window.RTCPeerConnection.prototype.removeTrack;\n  window.RTCPeerConnection.prototype.removeTrack =\n    function removeTrack(sender) {\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n      if (sender) {\n        Object.keys(this._shimmedLocalStreams).forEach(streamId => {\n          const idx = this._shimmedLocalStreams[streamId].indexOf(sender);\n          if (idx !== -1) {\n            this._shimmedLocalStreams[streamId].splice(idx, 1);\n          }\n          if (this._shimmedLocalStreams[streamId].length === 1) {\n            delete this._shimmedLocalStreams[streamId];\n          }\n        });\n      }\n      return origRemoveTrack.apply(this, arguments);\n    };\n}\n\nexport function shimAddTrackRemoveTrack(window, browserDetails) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  // shim addTrack and removeTrack.\n  if (window.RTCPeerConnection.prototype.addTrack &&\n      browserDetails.version >= 65) {\n    return shimAddTrackRemoveTrackWithNative(window);\n  }\n\n  // also shim pc.getLocalStreams when addTrack is shimmed\n  // to return the original streams.\n  const origGetLocalStreams = window.RTCPeerConnection.prototype\n    .getLocalStreams;\n  window.RTCPeerConnection.prototype.getLocalStreams =\n    function getLocalStreams() {\n      const nativeStreams = origGetLocalStreams.apply(this);\n      this._reverseStreams = this._reverseStreams || {};\n      return nativeStreams.map(stream => this._reverseStreams[stream.id]);\n    };\n\n  const origAddStream = window.RTCPeerConnection.prototype.addStream;\n  window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n    this._streams = this._streams || {};\n    this._reverseStreams = this._reverseStreams || {};\n\n    stream.getTracks().forEach(track => {\n      const alreadyExists = this.getSenders().find(s => s.track === track);\n      if (alreadyExists) {\n        throw new DOMException('Track already exists.',\n          'InvalidAccessError');\n      }\n    });\n    // Add identity mapping for consistency with addTrack.\n    // Unless this is being used with a stream from addTrack.\n    if (!this._reverseStreams[stream.id]) {\n      const newStream = new window.MediaStream(stream.getTracks());\n      this._streams[stream.id] = newStream;\n      this._reverseStreams[newStream.id] = stream;\n      stream = newStream;\n    }\n    origAddStream.apply(this, [stream]);\n  };\n\n  const origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n  window.RTCPeerConnection.prototype.removeStream =\n    function removeStream(stream) {\n      this._streams = this._streams || {};\n      this._reverseStreams = this._reverseStreams || {};\n\n      origRemoveStream.apply(this, [(this._streams[stream.id] || stream)]);\n      delete this._reverseStreams[(this._streams[stream.id] ?\n        this._streams[stream.id].id : stream.id)];\n      delete this._streams[stream.id];\n    };\n\n  window.RTCPeerConnection.prototype.addTrack =\n    function addTrack(track, stream) {\n      if (this.signalingState === 'closed') {\n        throw new DOMException(\n          'The RTCPeerConnection\\'s signalingState is \\'closed\\'.',\n          'InvalidStateError');\n      }\n      const streams = [].slice.call(arguments, 1);\n      if (streams.length !== 1 ||\n          !streams[0].getTracks().find(t => t === track)) {\n        // this is not fully correct but all we can manage without\n        // [[associated MediaStreams]] internal slot.\n        throw new DOMException(\n          'The adapter.js addTrack polyfill only supports a single ' +\n          ' stream which is associated with the specified track.',\n          'NotSupportedError');\n      }\n\n      const alreadyExists = this.getSenders().find(s => s.track === track);\n      if (alreadyExists) {\n        throw new DOMException('Track already exists.',\n          'InvalidAccessError');\n      }\n\n      this._streams = this._streams || {};\n      this._reverseStreams = this._reverseStreams || {};\n      const oldStream = this._streams[stream.id];\n      if (oldStream) {\n        // this is using odd Chrome behaviour, use with caution:\n        // https://bugs.chromium.org/p/webrtc/issues/detail?id=7815\n        // Note: we rely on the high-level addTrack/dtmf shim to\n        // create the sender with a dtmf sender.\n        oldStream.addTrack(track);\n\n        // Trigger ONN async.\n        Promise.resolve().then(() => {\n          this.dispatchEvent(new Event('negotiationneeded'));\n        });\n      } else {\n        const newStream = new window.MediaStream([track]);\n        this._streams[stream.id] = newStream;\n        this._reverseStreams[newStream.id] = stream;\n        this.addStream(newStream);\n      }\n      return this.getSenders().find(s => s.track === track);\n    };\n\n  // replace the internal stream id with the external one and\n  // vice versa.\n  function replaceInternalStreamId(pc, description) {\n    let sdp = description.sdp;\n    Object.keys(pc._reverseStreams || []).forEach(internalId => {\n      const externalStream = pc._reverseStreams[internalId];\n      const internalStream = pc._streams[externalStream.id];\n      sdp = sdp.replace(new RegExp(internalStream.id, 'g'),\n        externalStream.id);\n    });\n    return new RTCSessionDescription({\n      type: description.type,\n      sdp\n    });\n  }\n  function replaceExternalStreamId(pc, description) {\n    let sdp = description.sdp;\n    Object.keys(pc._reverseStreams || []).forEach(internalId => {\n      const externalStream = pc._reverseStreams[internalId];\n      const internalStream = pc._streams[externalStream.id];\n      sdp = sdp.replace(new RegExp(externalStream.id, 'g'),\n        internalStream.id);\n    });\n    return new RTCSessionDescription({\n      type: description.type,\n      sdp\n    });\n  }\n  ['createOffer', 'createAnswer'].forEach(function(method) {\n    const nativeMethod = window.RTCPeerConnection.prototype[method];\n    const methodObj = {[method]() {\n      const args = arguments;\n      const isLegacyCall = arguments.length &&\n          typeof arguments[0] === 'function';\n      if (isLegacyCall) {\n        return nativeMethod.apply(this, [\n          (description) => {\n            const desc = replaceInternalStreamId(this, description);\n            args[0].apply(null, [desc]);\n          },\n          (err) => {\n            if (args[1]) {\n              args[1].apply(null, err);\n            }\n          }, arguments[2]\n        ]);\n      }\n      return nativeMethod.apply(this, arguments)\n        .then(description => replaceInternalStreamId(this, description));\n    }};\n    window.RTCPeerConnection.prototype[method] = methodObj[method];\n  });\n\n  const origSetLocalDescription =\n      window.RTCPeerConnection.prototype.setLocalDescription;\n  window.RTCPeerConnection.prototype.setLocalDescription =\n    function setLocalDescription() {\n      if (!arguments.length || !arguments[0].type) {\n        return origSetLocalDescription.apply(this, arguments);\n      }\n      arguments[0] = replaceExternalStreamId(this, arguments[0]);\n      return origSetLocalDescription.apply(this, arguments);\n    };\n\n  // TODO: mangle getStats: https://w3c.github.io/webrtc-stats/#dom-rtcmediastreamstats-streamidentifier\n\n  const origLocalDescription = Object.getOwnPropertyDescriptor(\n    window.RTCPeerConnection.prototype, 'localDescription');\n  Object.defineProperty(window.RTCPeerConnection.prototype,\n    'localDescription', {\n      get() {\n        const description = origLocalDescription.get.apply(this);\n        if (description.type === '') {\n          return description;\n        }\n        return replaceInternalStreamId(this, description);\n      }\n    });\n\n  window.RTCPeerConnection.prototype.removeTrack =\n    function removeTrack(sender) {\n      if (this.signalingState === 'closed') {\n        throw new DOMException(\n          'The RTCPeerConnection\\'s signalingState is \\'closed\\'.',\n          'InvalidStateError');\n      }\n      // We can not yet check for sender instanceof RTCRtpSender\n      // since we shim RTPSender. So we check if sender._pc is set.\n      if (!sender._pc) {\n        throw new DOMException('Argument 1 of RTCPeerConnection.removeTrack ' +\n            'does not implement interface RTCRtpSender.', 'TypeError');\n      }\n      const isLocal = sender._pc === this;\n      if (!isLocal) {\n        throw new DOMException('Sender was not created by this connection.',\n          'InvalidAccessError');\n      }\n\n      // Search for the native stream the senders track belongs to.\n      this._streams = this._streams || {};\n      let stream;\n      Object.keys(this._streams).forEach(streamid => {\n        const hasTrack = this._streams[streamid].getTracks()\n          .find(track => sender.track === track);\n        if (hasTrack) {\n          stream = this._streams[streamid];\n        }\n      });\n\n      if (stream) {\n        if (stream.getTracks().length === 1) {\n          // if this is the last track of the stream, remove the stream. This\n          // takes care of any shimmed _senders.\n          this.removeStream(this._reverseStreams[stream.id]);\n        } else {\n          // relying on the same odd chrome behaviour as above.\n          stream.removeTrack(sender.track);\n        }\n        this.dispatchEvent(new Event('negotiationneeded'));\n      }\n    };\n}\n\nexport function shimPeerConnection(window, browserDetails) {\n  if (!window.RTCPeerConnection && window.webkitRTCPeerConnection) {\n    // very basic support for old versions.\n    window.RTCPeerConnection = window.webkitRTCPeerConnection;\n  }\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n\n  // shim implicit creation of RTCSessionDescription/RTCIceCandidate\n  if (browserDetails.version < 53) {\n    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n      .forEach(function(method) {\n        const nativeMethod = window.RTCPeerConnection.prototype[method];\n        const methodObj = {[method]() {\n          arguments[0] = new ((method === 'addIceCandidate') ?\n            window.RTCIceCandidate :\n            window.RTCSessionDescription)(arguments[0]);\n          return nativeMethod.apply(this, arguments);\n        }};\n        window.RTCPeerConnection.prototype[method] = methodObj[method];\n      });\n  }\n}\n\n// Attempt to fix ONN in plan-b mode.\nexport function fixNegotiationNeeded(window, browserDetails) {\n  utils.wrapPeerConnectionEvent(window, 'negotiationneeded', e => {\n    const pc = e.target;\n    if (browserDetails.version < 72 || (pc.getConfiguration &&\n        pc.getConfiguration().sdpSemantics === 'plan-b')) {\n      if (pc.signalingState !== 'stable') {\n        return;\n      }\n    }\n    return e;\n  });\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nimport * as utils from '../utils';\n\nexport function shimGetUserMedia(window, browserDetails) {\n  const navigator = window && window.navigator;\n  const MediaStreamTrack = window && window.MediaStreamTrack;\n\n  navigator.getUserMedia = function(constraints, onSuccess, onError) {\n    // Replace Firefox 44+'s deprecation warning with unprefixed version.\n    utils.deprecated('navigator.getUserMedia',\n      'navigator.mediaDevices.getUserMedia');\n    navigator.mediaDevices.getUserMedia(constraints).then(onSuccess, onError);\n  };\n\n  if (!(browserDetails.version > 55 &&\n      'autoGainControl' in navigator.mediaDevices.getSupportedConstraints())) {\n    const remap = function(obj, a, b) {\n      if (a in obj && !(b in obj)) {\n        obj[b] = obj[a];\n        delete obj[a];\n      }\n    };\n\n    const nativeGetUserMedia = navigator.mediaDevices.getUserMedia.\n      bind(navigator.mediaDevices);\n    navigator.mediaDevices.getUserMedia = function(c) {\n      if (typeof c === 'object' && typeof c.audio === 'object') {\n        c = JSON.parse(JSON.stringify(c));\n        remap(c.audio, 'autoGainControl', 'mozAutoGainControl');\n        remap(c.audio, 'noiseSuppression', 'mozNoiseSuppression');\n      }\n      return nativeGetUserMedia(c);\n    };\n\n    if (MediaStreamTrack && MediaStreamTrack.prototype.getSettings) {\n      const nativeGetSettings = MediaStreamTrack.prototype.getSettings;\n      MediaStreamTrack.prototype.getSettings = function() {\n        const obj = nativeGetSettings.apply(this, arguments);\n        remap(obj, 'mozAutoGainControl', 'autoGainControl');\n        remap(obj, 'mozNoiseSuppression', 'noiseSuppression');\n        return obj;\n      };\n    }\n\n    if (MediaStreamTrack && MediaStreamTrack.prototype.applyConstraints) {\n      const nativeApplyConstraints =\n        MediaStreamTrack.prototype.applyConstraints;\n      MediaStreamTrack.prototype.applyConstraints = function(c) {\n        if (this.kind === 'audio' && typeof c === 'object') {\n          c = JSON.parse(JSON.stringify(c));\n          remap(c, 'autoGainControl', 'mozAutoGainControl');\n          remap(c, 'noiseSuppression', 'mozNoiseSuppression');\n        }\n        return nativeApplyConstraints.apply(this, [c]);\n      };\n    }\n  }\n}\n","/*\n *  Copyright (c) 2018 The adapter.js project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nexport function shimGetDisplayMedia(window, preferredMediaSource) {\n  if (window.navigator.mediaDevices &&\n    'getDisplayMedia' in window.navigator.mediaDevices) {\n    return;\n  }\n  if (!(window.navigator.mediaDevices)) {\n    return;\n  }\n  window.navigator.mediaDevices.getDisplayMedia =\n    function getDisplayMedia(constraints) {\n      if (!(constraints && constraints.video)) {\n        const err = new DOMException('getDisplayMedia without video ' +\n            'constraints is undefined');\n        err.name = 'NotFoundError';\n        // from https://heycam.github.io/webidl/#idl-DOMException-error-names\n        err.code = 8;\n        return Promise.reject(err);\n      }\n      if (constraints.video === true) {\n        constraints.video = {mediaSource: preferredMediaSource};\n      } else {\n        constraints.video.mediaSource = preferredMediaSource;\n      }\n      return window.navigator.mediaDevices.getUserMedia(constraints);\n    };\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nimport * as utils from '../utils';\nexport {shimGetUserMedia} from './getusermedia';\nexport {shimGetDisplayMedia} from './getdisplaymedia';\n\nexport function shimOnTrack(window) {\n  if (typeof window === 'object' && window.RTCTrackEvent &&\n      ('receiver' in window.RTCTrackEvent.prototype) &&\n      !('transceiver' in window.RTCTrackEvent.prototype)) {\n    Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n      get() {\n        return {receiver: this.receiver};\n      }\n    });\n  }\n}\n\nexport function shimPeerConnection(window, browserDetails) {\n  if (typeof window !== 'object' ||\n      !(window.RTCPeerConnection || window.mozRTCPeerConnection)) {\n    return; // probably media.peerconnection.enabled=false in about:config\n  }\n  if (!window.RTCPeerConnection && window.mozRTCPeerConnection) {\n    // very basic support for old versions.\n    window.RTCPeerConnection = window.mozRTCPeerConnection;\n  }\n\n  if (browserDetails.version < 53) {\n    // shim away need for obsolete RTCIceCandidate/RTCSessionDescription.\n    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n      .forEach(function(method) {\n        const nativeMethod = window.RTCPeerConnection.prototype[method];\n        const methodObj = {[method]() {\n          arguments[0] = new ((method === 'addIceCandidate') ?\n            window.RTCIceCandidate :\n            window.RTCSessionDescription)(arguments[0]);\n          return nativeMethod.apply(this, arguments);\n        }};\n        window.RTCPeerConnection.prototype[method] = methodObj[method];\n      });\n  }\n\n  const modernStatsTypes = {\n    inboundrtp: 'inbound-rtp',\n    outboundrtp: 'outbound-rtp',\n    candidatepair: 'candidate-pair',\n    localcandidate: 'local-candidate',\n    remotecandidate: 'remote-candidate'\n  };\n\n  const nativeGetStats = window.RTCPeerConnection.prototype.getStats;\n  window.RTCPeerConnection.prototype.getStats = function getStats() {\n    const [selector, onSucc, onErr] = arguments;\n    return nativeGetStats.apply(this, [selector || null])\n      .then(stats => {\n        if (browserDetails.version < 53 && !onSucc) {\n          // Shim only promise getStats with spec-hyphens in type names\n          // Leave callback version alone; misc old uses of forEach before Map\n          try {\n            stats.forEach(stat => {\n              stat.type = modernStatsTypes[stat.type] || stat.type;\n            });\n          } catch (e) {\n            if (e.name !== 'TypeError') {\n              throw e;\n            }\n            // Avoid TypeError: \"type\" is read-only, in old versions. 34-43ish\n            stats.forEach((stat, i) => {\n              stats.set(i, Object.assign({}, stat, {\n                type: modernStatsTypes[stat.type] || stat.type\n              }));\n            });\n          }\n        }\n        return stats;\n      })\n      .then(onSucc, onErr);\n  };\n}\n\nexport function shimSenderGetStats(window) {\n  if (!(typeof window === 'object' && window.RTCPeerConnection &&\n      window.RTCRtpSender)) {\n    return;\n  }\n  if (window.RTCRtpSender && 'getStats' in window.RTCRtpSender.prototype) {\n    return;\n  }\n  const origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n  if (origGetSenders) {\n    window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n      const senders = origGetSenders.apply(this, []);\n      senders.forEach(sender => sender._pc = this);\n      return senders;\n    };\n  }\n\n  const origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n  if (origAddTrack) {\n    window.RTCPeerConnection.prototype.addTrack = function addTrack() {\n      const sender = origAddTrack.apply(this, arguments);\n      sender._pc = this;\n      return sender;\n    };\n  }\n  window.RTCRtpSender.prototype.getStats = function getStats() {\n    return this.track ? this._pc.getStats(this.track) :\n      Promise.resolve(new Map());\n  };\n}\n\nexport function shimReceiverGetStats(window) {\n  if (!(typeof window === 'object' && window.RTCPeerConnection &&\n      window.RTCRtpSender)) {\n    return;\n  }\n  if (window.RTCRtpSender && 'getStats' in window.RTCRtpReceiver.prototype) {\n    return;\n  }\n  const origGetReceivers = window.RTCPeerConnection.prototype.getReceivers;\n  if (origGetReceivers) {\n    window.RTCPeerConnection.prototype.getReceivers = function getReceivers() {\n      const receivers = origGetReceivers.apply(this, []);\n      receivers.forEach(receiver => receiver._pc = this);\n      return receivers;\n    };\n  }\n  utils.wrapPeerConnectionEvent(window, 'track', e => {\n    e.receiver._pc = e.srcElement;\n    return e;\n  });\n  window.RTCRtpReceiver.prototype.getStats = function getStats() {\n    return this._pc.getStats(this.track);\n  };\n}\n\nexport function shimRemoveStream(window) {\n  if (!window.RTCPeerConnection ||\n      'removeStream' in window.RTCPeerConnection.prototype) {\n    return;\n  }\n  window.RTCPeerConnection.prototype.removeStream =\n    function removeStream(stream) {\n      utils.deprecated('removeStream', 'removeTrack');\n      this.getSenders().forEach(sender => {\n        if (sender.track && stream.getTracks().includes(sender.track)) {\n          this.removeTrack(sender);\n        }\n      });\n    };\n}\n\nexport function shimRTCDataChannel(window) {\n  // rename DataChannel to RTCDataChannel (native fix in FF60):\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1173851\n  if (window.DataChannel && !window.RTCDataChannel) {\n    window.RTCDataChannel = window.DataChannel;\n  }\n}\n\nexport function shimAddTransceiver(window) {\n  // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647\n  // Firefox ignores the init sendEncodings options passed to addTransceiver\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918\n  if (!(typeof window === 'object' && window.RTCPeerConnection)) {\n    return;\n  }\n  const origAddTransceiver = window.RTCPeerConnection.prototype.addTransceiver;\n  if (origAddTransceiver) {\n    window.RTCPeerConnection.prototype.addTransceiver =\n      function addTransceiver() {\n        this.setParametersPromises = [];\n        // WebIDL input coercion and validation\n        let sendEncodings = arguments[1] && arguments[1].sendEncodings;\n        if (sendEncodings === undefined) {\n          sendEncodings = [];\n        }\n        sendEncodings = [...sendEncodings];\n        const shouldPerformCheck = sendEncodings.length > 0;\n        if (shouldPerformCheck) {\n          // If sendEncodings params are provided, validate grammar\n          sendEncodings.forEach((encodingParam) => {\n            if ('rid' in encodingParam) {\n              const ridRegex = /^[a-z0-9]{0,16}$/i;\n              if (!ridRegex.test(encodingParam.rid)) {\n                throw new TypeError('Invalid RID value provided.');\n              }\n            }\n            if ('scaleResolutionDownBy' in encodingParam) {\n              if (!(parseFloat(encodingParam.scaleResolutionDownBy) >= 1.0)) {\n                throw new RangeError('scale_resolution_down_by must be >= 1.0');\n              }\n            }\n            if ('maxFramerate' in encodingParam) {\n              if (!(parseFloat(encodingParam.maxFramerate) >= 0)) {\n                throw new RangeError('max_framerate must be >= 0.0');\n              }\n            }\n          });\n        }\n        const transceiver = origAddTransceiver.apply(this, arguments);\n        if (shouldPerformCheck) {\n          // Check if the init options were applied. If not we do this in an\n          // asynchronous way and save the promise reference in a global object.\n          // This is an ugly hack, but at the same time is way more robust than\n          // checking the sender parameters before and after the createOffer\n          // Also note that after the createoffer we are not 100% sure that\n          // the params were asynchronously applied so we might miss the\n          // opportunity to recreate offer.\n          const {sender} = transceiver;\n          const params = sender.getParameters();\n          if (!('encodings' in params) ||\n              // Avoid being fooled by patched getParameters() below.\n              (params.encodings.length === 1 &&\n               Object.keys(params.encodings[0]).length === 0)) {\n            params.encodings = sendEncodings;\n            sender.sendEncodings = sendEncodings;\n            this.setParametersPromises.push(sender.setParameters(params)\n              .then(() => {\n                delete sender.sendEncodings;\n              }).catch(() => {\n                delete sender.sendEncodings;\n              })\n            );\n          }\n        }\n        return transceiver;\n      };\n  }\n}\n\nexport function shimGetParameters(window) {\n  if (!(typeof window === 'object' && window.RTCRtpSender)) {\n    return;\n  }\n  const origGetParameters = window.RTCRtpSender.prototype.getParameters;\n  if (origGetParameters) {\n    window.RTCRtpSender.prototype.getParameters =\n      function getParameters() {\n        const params = origGetParameters.apply(this, arguments);\n        if (!('encodings' in params)) {\n          params.encodings = [].concat(this.sendEncodings || [{}]);\n        }\n        return params;\n      };\n  }\n}\n\nexport function shimCreateOffer(window) {\n  // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647\n  // Firefox ignores the init sendEncodings options passed to addTransceiver\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918\n  if (!(typeof window === 'object' && window.RTCPeerConnection)) {\n    return;\n  }\n  const origCreateOffer = window.RTCPeerConnection.prototype.createOffer;\n  window.RTCPeerConnection.prototype.createOffer = function createOffer() {\n    if (this.setParametersPromises && this.setParametersPromises.length) {\n      return Promise.all(this.setParametersPromises)\n        .then(() => {\n          return origCreateOffer.apply(this, arguments);\n        })\n        .finally(() => {\n          this.setParametersPromises = [];\n        });\n    }\n    return origCreateOffer.apply(this, arguments);\n  };\n}\n\nexport function shimCreateAnswer(window) {\n  // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647\n  // Firefox ignores the init sendEncodings options passed to addTransceiver\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918\n  if (!(typeof window === 'object' && window.RTCPeerConnection)) {\n    return;\n  }\n  const origCreateAnswer = window.RTCPeerConnection.prototype.createAnswer;\n  window.RTCPeerConnection.prototype.createAnswer = function createAnswer() {\n    if (this.setParametersPromises && this.setParametersPromises.length) {\n      return Promise.all(this.setParametersPromises)\n        .then(() => {\n          return origCreateAnswer.apply(this, arguments);\n        })\n        .finally(() => {\n          this.setParametersPromises = [];\n        });\n    }\n    return origCreateAnswer.apply(this, arguments);\n  };\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n'use strict';\nimport * as utils from '../utils';\n\nexport function shimLocalStreamsAPI(window) {\n  if (typeof window !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  if (!('getLocalStreams' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.getLocalStreams =\n      function getLocalStreams() {\n        if (!this._localStreams) {\n          this._localStreams = [];\n        }\n        return this._localStreams;\n      };\n  }\n  if (!('addStream' in window.RTCPeerConnection.prototype)) {\n    const _addTrack = window.RTCPeerConnection.prototype.addTrack;\n    window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n      if (!this._localStreams) {\n        this._localStreams = [];\n      }\n      if (!this._localStreams.includes(stream)) {\n        this._localStreams.push(stream);\n      }\n      // Try to emulate Chrome's behaviour of adding in audio-video order.\n      // Safari orders by track id.\n      stream.getAudioTracks().forEach(track => _addTrack.call(this, track,\n        stream));\n      stream.getVideoTracks().forEach(track => _addTrack.call(this, track,\n        stream));\n    };\n\n    window.RTCPeerConnection.prototype.addTrack =\n      function addTrack(track, ...streams) {\n        if (streams) {\n          streams.forEach((stream) => {\n            if (!this._localStreams) {\n              this._localStreams = [stream];\n            } else if (!this._localStreams.includes(stream)) {\n              this._localStreams.push(stream);\n            }\n          });\n        }\n        return _addTrack.apply(this, arguments);\n      };\n  }\n  if (!('removeStream' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.removeStream =\n      function removeStream(stream) {\n        if (!this._localStreams) {\n          this._localStreams = [];\n        }\n        const index = this._localStreams.indexOf(stream);\n        if (index === -1) {\n          return;\n        }\n        this._localStreams.splice(index, 1);\n        const tracks = stream.getTracks();\n        this.getSenders().forEach(sender => {\n          if (tracks.includes(sender.track)) {\n            this.removeTrack(sender);\n          }\n        });\n      };\n  }\n}\n\nexport function shimRemoteStreamsAPI(window) {\n  if (typeof window !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  if (!('getRemoteStreams' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.getRemoteStreams =\n      function getRemoteStreams() {\n        return this._remoteStreams ? this._remoteStreams : [];\n      };\n  }\n  if (!('onaddstream' in window.RTCPeerConnection.prototype)) {\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'onaddstream', {\n      get() {\n        return this._onaddstream;\n      },\n      set(f) {\n        if (this._onaddstream) {\n          this.removeEventListener('addstream', this._onaddstream);\n          this.removeEventListener('track', this._onaddstreampoly);\n        }\n        this.addEventListener('addstream', this._onaddstream = f);\n        this.addEventListener('track', this._onaddstreampoly = (e) => {\n          e.streams.forEach(stream => {\n            if (!this._remoteStreams) {\n              this._remoteStreams = [];\n            }\n            if (this._remoteStreams.includes(stream)) {\n              return;\n            }\n            this._remoteStreams.push(stream);\n            const event = new Event('addstream');\n            event.stream = stream;\n            this.dispatchEvent(event);\n          });\n        });\n      }\n    });\n    const origSetRemoteDescription =\n      window.RTCPeerConnection.prototype.setRemoteDescription;\n    window.RTCPeerConnection.prototype.setRemoteDescription =\n      function setRemoteDescription() {\n        const pc = this;\n        if (!this._onaddstreampoly) {\n          this.addEventListener('track', this._onaddstreampoly = function(e) {\n            e.streams.forEach(stream => {\n              if (!pc._remoteStreams) {\n                pc._remoteStreams = [];\n              }\n              if (pc._remoteStreams.indexOf(stream) >= 0) {\n                return;\n              }\n              pc._remoteStreams.push(stream);\n              const event = new Event('addstream');\n              event.stream = stream;\n              pc.dispatchEvent(event);\n            });\n          });\n        }\n        return origSetRemoteDescription.apply(pc, arguments);\n      };\n  }\n}\n\nexport function shimCallbacksAPI(window) {\n  if (typeof window !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  const prototype = window.RTCPeerConnection.prototype;\n  const origCreateOffer = prototype.createOffer;\n  const origCreateAnswer = prototype.createAnswer;\n  const setLocalDescription = prototype.setLocalDescription;\n  const setRemoteDescription = prototype.setRemoteDescription;\n  const addIceCandidate = prototype.addIceCandidate;\n\n  prototype.createOffer =\n    function createOffer(successCallback, failureCallback) {\n      const options = (arguments.length >= 2) ? arguments[2] : arguments[0];\n      const promise = origCreateOffer.apply(this, [options]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n\n  prototype.createAnswer =\n    function createAnswer(successCallback, failureCallback) {\n      const options = (arguments.length >= 2) ? arguments[2] : arguments[0];\n      const promise = origCreateAnswer.apply(this, [options]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n\n  let withCallback = function(description, successCallback, failureCallback) {\n    const promise = setLocalDescription.apply(this, [description]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.setLocalDescription = withCallback;\n\n  withCallback = function(description, successCallback, failureCallback) {\n    const promise = setRemoteDescription.apply(this, [description]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.setRemoteDescription = withCallback;\n\n  withCallback = function(candidate, successCallback, failureCallback) {\n    const promise = addIceCandidate.apply(this, [candidate]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.addIceCandidate = withCallback;\n}\n\nexport function shimGetUserMedia(window) {\n  const navigator = window && window.navigator;\n\n  if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n    // shim not needed in Safari 12.1\n    const mediaDevices = navigator.mediaDevices;\n    const _getUserMedia = mediaDevices.getUserMedia.bind(mediaDevices);\n    navigator.mediaDevices.getUserMedia = (constraints) => {\n      return _getUserMedia(shimConstraints(constraints));\n    };\n  }\n\n  if (!navigator.getUserMedia && navigator.mediaDevices &&\n    navigator.mediaDevices.getUserMedia) {\n    navigator.getUserMedia = function getUserMedia(constraints, cb, errcb) {\n      navigator.mediaDevices.getUserMedia(constraints)\n        .then(cb, errcb);\n    }.bind(navigator);\n  }\n}\n\nexport function shimConstraints(constraints) {\n  if (constraints && constraints.video !== undefined) {\n    return Object.assign({},\n      constraints,\n      {video: utils.compactObject(constraints.video)}\n    );\n  }\n\n  return constraints;\n}\n\nexport function shimRTCIceServerUrls(window) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  // migrate from non-spec RTCIceServer.url to RTCIceServer.urls\n  const OrigPeerConnection = window.RTCPeerConnection;\n  window.RTCPeerConnection =\n    function RTCPeerConnection(pcConfig, pcConstraints) {\n      if (pcConfig && pcConfig.iceServers) {\n        const newIceServers = [];\n        for (let i = 0; i < pcConfig.iceServers.length; i++) {\n          let server = pcConfig.iceServers[i];\n          if (server.urls === undefined && server.url) {\n            utils.deprecated('RTCIceServer.url', 'RTCIceServer.urls');\n            server = JSON.parse(JSON.stringify(server));\n            server.urls = server.url;\n            delete server.url;\n            newIceServers.push(server);\n          } else {\n            newIceServers.push(pcConfig.iceServers[i]);\n          }\n        }\n        pcConfig.iceServers = newIceServers;\n      }\n      return new OrigPeerConnection(pcConfig, pcConstraints);\n    };\n  window.RTCPeerConnection.prototype = OrigPeerConnection.prototype;\n  // wrap static methods. Currently just generateCertificate.\n  if ('generateCertificate' in OrigPeerConnection) {\n    Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n      get() {\n        return OrigPeerConnection.generateCertificate;\n      }\n    });\n  }\n}\n\nexport function shimTrackEventTransceiver(window) {\n  // Add event.transceiver member over deprecated event.receiver\n  if (typeof window === 'object' && window.RTCTrackEvent &&\n      'receiver' in window.RTCTrackEvent.prototype &&\n      !('transceiver' in window.RTCTrackEvent.prototype)) {\n    Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n      get() {\n        return {receiver: this.receiver};\n      }\n    });\n  }\n}\n\nexport function shimCreateOfferLegacy(window) {\n  const origCreateOffer = window.RTCPeerConnection.prototype.createOffer;\n  window.RTCPeerConnection.prototype.createOffer =\n    function createOffer(offerOptions) {\n      if (offerOptions) {\n        if (typeof offerOptions.offerToReceiveAudio !== 'undefined') {\n          // support bit values\n          offerOptions.offerToReceiveAudio =\n            !!offerOptions.offerToReceiveAudio;\n        }\n        const audioTransceiver = this.getTransceivers().find(transceiver =>\n          transceiver.receiver.track.kind === 'audio');\n        if (offerOptions.offerToReceiveAudio === false && audioTransceiver) {\n          if (audioTransceiver.direction === 'sendrecv') {\n            if (audioTransceiver.setDirection) {\n              audioTransceiver.setDirection('sendonly');\n            } else {\n              audioTransceiver.direction = 'sendonly';\n            }\n          } else if (audioTransceiver.direction === 'recvonly') {\n            if (audioTransceiver.setDirection) {\n              audioTransceiver.setDirection('inactive');\n            } else {\n              audioTransceiver.direction = 'inactive';\n            }\n          }\n        } else if (offerOptions.offerToReceiveAudio === true &&\n            !audioTransceiver) {\n          this.addTransceiver('audio', {direction: 'recvonly'});\n        }\n\n        if (typeof offerOptions.offerToReceiveVideo !== 'undefined') {\n          // support bit values\n          offerOptions.offerToReceiveVideo =\n            !!offerOptions.offerToReceiveVideo;\n        }\n        const videoTransceiver = this.getTransceivers().find(transceiver =>\n          transceiver.receiver.track.kind === 'video');\n        if (offerOptions.offerToReceiveVideo === false && videoTransceiver) {\n          if (videoTransceiver.direction === 'sendrecv') {\n            if (videoTransceiver.setDirection) {\n              videoTransceiver.setDirection('sendonly');\n            } else {\n              videoTransceiver.direction = 'sendonly';\n            }\n          } else if (videoTransceiver.direction === 'recvonly') {\n            if (videoTransceiver.setDirection) {\n              videoTransceiver.setDirection('inactive');\n            } else {\n              videoTransceiver.direction = 'inactive';\n            }\n          }\n        } else if (offerOptions.offerToReceiveVideo === true &&\n            !videoTransceiver) {\n          this.addTransceiver('video', {direction: 'recvonly'});\n        }\n      }\n      return origCreateOffer.apply(this, arguments);\n    };\n}\n\nexport function shimAudioContext(window) {\n  if (typeof window !== 'object' || window.AudioContext) {\n    return;\n  }\n  window.AudioContext = window.webkitAudioContext;\n}\n\n","/*\n *  Copyright (c) 2017 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nimport SDPUtils from 'sdp';\nimport * as utils from './utils';\n\nexport function shimRTCIceCandidate(window) {\n  // foundation is arbitrarily chosen as an indicator for full support for\n  // https://w3c.github.io/webrtc-pc/#rtcicecandidate-interface\n  if (!window.RTCIceCandidate || (window.RTCIceCandidate && 'foundation' in\n      window.RTCIceCandidate.prototype)) {\n    return;\n  }\n\n  const NativeRTCIceCandidate = window.RTCIceCandidate;\n  window.RTCIceCandidate = function RTCIceCandidate(args) {\n    // Remove the a= which shouldn't be part of the candidate string.\n    if (typeof args === 'object' && args.candidate &&\n        args.candidate.indexOf('a=') === 0) {\n      args = JSON.parse(JSON.stringify(args));\n      args.candidate = args.candidate.substring(2);\n    }\n\n    if (args.candidate && args.candidate.length) {\n      // Augment the native candidate with the parsed fields.\n      const nativeCandidate = new NativeRTCIceCandidate(args);\n      const parsedCandidate = SDPUtils.parseCandidate(args.candidate);\n      for (const key in parsedCandidate) {\n        if (!(key in nativeCandidate)) {\n          Object.defineProperty(nativeCandidate, key,\n            {value: parsedCandidate[key]});\n        }\n      }\n\n      // Override serializer to not serialize the extra attributes.\n      nativeCandidate.toJSON = function toJSON() {\n        return {\n          candidate: nativeCandidate.candidate,\n          sdpMid: nativeCandidate.sdpMid,\n          sdpMLineIndex: nativeCandidate.sdpMLineIndex,\n          usernameFragment: nativeCandidate.usernameFragment,\n        };\n      };\n      return nativeCandidate;\n    }\n    return new NativeRTCIceCandidate(args);\n  };\n  window.RTCIceCandidate.prototype = NativeRTCIceCandidate.prototype;\n\n  // Hook up the augmented candidate in onicecandidate and\n  // addEventListener('icecandidate', ...)\n  utils.wrapPeerConnectionEvent(window, 'icecandidate', e => {\n    if (e.candidate) {\n      Object.defineProperty(e, 'candidate', {\n        value: new window.RTCIceCandidate(e.candidate),\n        writable: 'false'\n      });\n    }\n    return e;\n  });\n}\n\nexport function shimRTCIceCandidateRelayProtocol(window) {\n  if (!window.RTCIceCandidate || (window.RTCIceCandidate && 'relayProtocol' in\n      window.RTCIceCandidate.prototype)) {\n    return;\n  }\n\n  // Hook up the augmented candidate in onicecandidate and\n  // addEventListener('icecandidate', ...)\n  utils.wrapPeerConnectionEvent(window, 'icecandidate', e => {\n    if (e.candidate) {\n      const parsedCandidate = SDPUtils.parseCandidate(e.candidate.candidate);\n      if (parsedCandidate.type === 'relay') {\n        // This is a libwebrtc-specific mapping of local type preference\n        // to relayProtocol.\n        e.candidate.relayProtocol = {\n          0: 'tls',\n          1: 'tcp',\n          2: 'udp',\n        }[parsedCandidate.priority >> 24];\n      }\n    }\n    return e;\n  });\n}\n\nexport function shimMaxMessageSize(window, browserDetails) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n\n  if (!('sctp' in window.RTCPeerConnection.prototype)) {\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'sctp', {\n      get() {\n        return typeof this._sctp === 'undefined' ? null : this._sctp;\n      }\n    });\n  }\n\n  const sctpInDescription = function(description) {\n    if (!description || !description.sdp) {\n      return false;\n    }\n    const sections = SDPUtils.splitSections(description.sdp);\n    sections.shift();\n    return sections.some(mediaSection => {\n      const mLine = SDPUtils.parseMLine(mediaSection);\n      return mLine && mLine.kind === 'application'\n          && mLine.protocol.indexOf('SCTP') !== -1;\n    });\n  };\n\n  const getRemoteFirefoxVersion = function(description) {\n    // TODO: Is there a better solution for detecting Firefox?\n    const match = description.sdp.match(/mozilla...THIS_IS_SDPARTA-(\\d+)/);\n    if (match === null || match.length < 2) {\n      return -1;\n    }\n    const version = parseInt(match[1], 10);\n    // Test for NaN (yes, this is ugly)\n    return version !== version ? -1 : version;\n  };\n\n  const getCanSendMaxMessageSize = function(remoteIsFirefox) {\n    // Every implementation we know can send at least 64 KiB.\n    // Note: Although Chrome is technically able to send up to 256 KiB, the\n    //       data does not reach the other peer reliably.\n    //       See: https://bugs.chromium.org/p/webrtc/issues/detail?id=8419\n    let canSendMaxMessageSize = 65536;\n    if (browserDetails.browser === 'firefox') {\n      if (browserDetails.version < 57) {\n        if (remoteIsFirefox === -1) {\n          // FF < 57 will send in 16 KiB chunks using the deprecated PPID\n          // fragmentation.\n          canSendMaxMessageSize = 16384;\n        } else {\n          // However, other FF (and RAWRTC) can reassemble PPID-fragmented\n          // messages. Thus, supporting ~2 GiB when sending.\n          canSendMaxMessageSize = 2147483637;\n        }\n      } else if (browserDetails.version < 60) {\n        // Currently, all FF >= 57 will reset the remote maximum message size\n        // to the default value when a data channel is created at a later\n        // stage. :(\n        // See: https://bugzilla.mozilla.org/show_bug.cgi?id=1426831\n        canSendMaxMessageSize =\n          browserDetails.version === 57 ? 65535 : 65536;\n      } else {\n        // FF >= 60 supports sending ~2 GiB\n        canSendMaxMessageSize = 2147483637;\n      }\n    }\n    return canSendMaxMessageSize;\n  };\n\n  const getMaxMessageSize = function(description, remoteIsFirefox) {\n    // Note: 65536 bytes is the default value from the SDP spec. Also,\n    //       every implementation we know supports receiving 65536 bytes.\n    let maxMessageSize = 65536;\n\n    // FF 57 has a slightly incorrect default remote max message size, so\n    // we need to adjust it here to avoid a failure when sending.\n    // See: https://bugzilla.mozilla.org/show_bug.cgi?id=1425697\n    if (browserDetails.browser === 'firefox'\n         && browserDetails.version === 57) {\n      maxMessageSize = 65535;\n    }\n\n    const match = SDPUtils.matchPrefix(description.sdp,\n      'a=max-message-size:');\n    if (match.length > 0) {\n      maxMessageSize = parseInt(match[0].substring(19), 10);\n    } else if (browserDetails.browser === 'firefox' &&\n                remoteIsFirefox !== -1) {\n      // If the maximum message size is not present in the remote SDP and\n      // both local and remote are Firefox, the remote peer can receive\n      // ~2 GiB.\n      maxMessageSize = 2147483637;\n    }\n    return maxMessageSize;\n  };\n\n  const origSetRemoteDescription =\n      window.RTCPeerConnection.prototype.setRemoteDescription;\n  window.RTCPeerConnection.prototype.setRemoteDescription =\n    function setRemoteDescription() {\n      this._sctp = null;\n      // Chrome decided to not expose .sctp in plan-b mode.\n      // As usual, adapter.js has to do an 'ugly worakaround'\n      // to cover up the mess.\n      if (browserDetails.browser === 'chrome' && browserDetails.version >= 76) {\n        const {sdpSemantics} = this.getConfiguration();\n        if (sdpSemantics === 'plan-b') {\n          Object.defineProperty(this, 'sctp', {\n            get() {\n              return typeof this._sctp === 'undefined' ? null : this._sctp;\n            },\n            enumerable: true,\n            configurable: true,\n          });\n        }\n      }\n\n      if (sctpInDescription(arguments[0])) {\n        // Check if the remote is FF.\n        const isFirefox = getRemoteFirefoxVersion(arguments[0]);\n\n        // Get the maximum message size the local peer is capable of sending\n        const canSendMMS = getCanSendMaxMessageSize(isFirefox);\n\n        // Get the maximum message size of the remote peer.\n        const remoteMMS = getMaxMessageSize(arguments[0], isFirefox);\n\n        // Determine final maximum message size\n        let maxMessageSize;\n        if (canSendMMS === 0 && remoteMMS === 0) {\n          maxMessageSize = Number.POSITIVE_INFINITY;\n        } else if (canSendMMS === 0 || remoteMMS === 0) {\n          maxMessageSize = Math.max(canSendMMS, remoteMMS);\n        } else {\n          maxMessageSize = Math.min(canSendMMS, remoteMMS);\n        }\n\n        // Create a dummy RTCSctpTransport object and the 'maxMessageSize'\n        // attribute.\n        const sctp = {};\n        Object.defineProperty(sctp, 'maxMessageSize', {\n          get() {\n            return maxMessageSize;\n          }\n        });\n        this._sctp = sctp;\n      }\n\n      return origSetRemoteDescription.apply(this, arguments);\n    };\n}\n\nexport function shimSendThrowTypeError(window) {\n  if (!(window.RTCPeerConnection &&\n      'createDataChannel' in window.RTCPeerConnection.prototype)) {\n    return;\n  }\n\n  // Note: Although Firefox >= 57 has a native implementation, the maximum\n  //       message size can be reset for all data channels at a later stage.\n  //       See: https://bugzilla.mozilla.org/show_bug.cgi?id=1426831\n\n  function wrapDcSend(dc, pc) {\n    const origDataChannelSend = dc.send;\n    dc.send = function send() {\n      const data = arguments[0];\n      const length = data.length || data.size || data.byteLength;\n      if (dc.readyState === 'open' &&\n          pc.sctp && length > pc.sctp.maxMessageSize) {\n        throw new TypeError('Message too large (can send a maximum of ' +\n          pc.sctp.maxMessageSize + ' bytes)');\n      }\n      return origDataChannelSend.apply(dc, arguments);\n    };\n  }\n  const origCreateDataChannel =\n    window.RTCPeerConnection.prototype.createDataChannel;\n  window.RTCPeerConnection.prototype.createDataChannel =\n    function createDataChannel() {\n      const dataChannel = origCreateDataChannel.apply(this, arguments);\n      wrapDcSend(dataChannel, this);\n      return dataChannel;\n    };\n  utils.wrapPeerConnectionEvent(window, 'datachannel', e => {\n    wrapDcSend(e.channel, e.target);\n    return e;\n  });\n}\n\n\n/* shims RTCConnectionState by pretending it is the same as iceConnectionState.\n * See https://bugs.chromium.org/p/webrtc/issues/detail?id=6145#c12\n * for why this is a valid hack in Chrome. In Firefox it is slightly incorrect\n * since DTLS failures would be hidden. See\n * https://bugzilla.mozilla.org/show_bug.cgi?id=1265827\n * for the Firefox tracking bug.\n */\nexport function shimConnectionState(window) {\n  if (!window.RTCPeerConnection ||\n      'connectionState' in window.RTCPeerConnection.prototype) {\n    return;\n  }\n  const proto = window.RTCPeerConnection.prototype;\n  Object.defineProperty(proto, 'connectionState', {\n    get() {\n      return {\n        completed: 'connected',\n        checking: 'connecting'\n      }[this.iceConnectionState] || this.iceConnectionState;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(proto, 'onconnectionstatechange', {\n    get() {\n      return this._onconnectionstatechange || null;\n    },\n    set(cb) {\n      if (this._onconnectionstatechange) {\n        this.removeEventListener('connectionstatechange',\n          this._onconnectionstatechange);\n        delete this._onconnectionstatechange;\n      }\n      if (cb) {\n        this.addEventListener('connectionstatechange',\n          this._onconnectionstatechange = cb);\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  ['setLocalDescription', 'setRemoteDescription'].forEach((method) => {\n    const origMethod = proto[method];\n    proto[method] = function() {\n      if (!this._connectionstatechangepoly) {\n        this._connectionstatechangepoly = e => {\n          const pc = e.target;\n          if (pc._lastConnectionState !== pc.connectionState) {\n            pc._lastConnectionState = pc.connectionState;\n            const newEvent = new Event('connectionstatechange', e);\n            pc.dispatchEvent(newEvent);\n          }\n          return e;\n        };\n        this.addEventListener('iceconnectionstatechange',\n          this._connectionstatechangepoly);\n      }\n      return origMethod.apply(this, arguments);\n    };\n  });\n}\n\nexport function removeExtmapAllowMixed(window, browserDetails) {\n  /* remove a=extmap-allow-mixed for webrtc.org < M71 */\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  if (browserDetails.browser === 'chrome' && browserDetails.version >= 71) {\n    return;\n  }\n  if (browserDetails.browser === 'safari' && browserDetails.version >= 605) {\n    return;\n  }\n  const nativeSRD = window.RTCPeerConnection.prototype.setRemoteDescription;\n  window.RTCPeerConnection.prototype.setRemoteDescription =\n  function setRemoteDescription(desc) {\n    if (desc && desc.sdp && desc.sdp.indexOf('\\na=extmap-allow-mixed') !== -1) {\n      const sdp = desc.sdp.split('\\n').filter((line) => {\n        return line.trim() !== 'a=extmap-allow-mixed';\n      }).join('\\n');\n      // Safari enforces read-only-ness of RTCSessionDescription fields.\n      if (window.RTCSessionDescription &&\n          desc instanceof window.RTCSessionDescription) {\n        arguments[0] = new window.RTCSessionDescription({\n          type: desc.type,\n          sdp,\n        });\n      } else {\n        desc.sdp = sdp;\n      }\n    }\n    return nativeSRD.apply(this, arguments);\n  };\n}\n\nexport function shimAddIceCandidateNullOrEmpty(window, browserDetails) {\n  // Support for addIceCandidate(null or undefined)\n  // as well as addIceCandidate({candidate: \"\", ...})\n  // https://bugs.chromium.org/p/chromium/issues/detail?id=978582\n  // Note: must be called before other polyfills which change the signature.\n  if (!(window.RTCPeerConnection && window.RTCPeerConnection.prototype)) {\n    return;\n  }\n  const nativeAddIceCandidate =\n      window.RTCPeerConnection.prototype.addIceCandidate;\n  if (!nativeAddIceCandidate || nativeAddIceCandidate.length === 0) {\n    return;\n  }\n  window.RTCPeerConnection.prototype.addIceCandidate =\n    function addIceCandidate() {\n      if (!arguments[0]) {\n        if (arguments[1]) {\n          arguments[1].apply(null);\n        }\n        return Promise.resolve();\n      }\n      // Firefox 68+ emits and processes {candidate: \"\", ...}, ignore\n      // in older versions.\n      // Native support for ignoring exists for Chrome M77+.\n      // Safari ignores as well, exact version unknown but works in the same\n      // version that also ignores addIceCandidate(null).\n      if (((browserDetails.browser === 'chrome' && browserDetails.version < 78)\n           || (browserDetails.browser === 'firefox'\n               && browserDetails.version < 68)\n           || (browserDetails.browser === 'safari'))\n          && arguments[0] && arguments[0].candidate === '') {\n        return Promise.resolve();\n      }\n      return nativeAddIceCandidate.apply(this, arguments);\n    };\n}\n\n// Note: Make sure to call this ahead of APIs that modify\n// setLocalDescription.length\nexport function shimParameterlessSetLocalDescription(window, browserDetails) {\n  if (!(window.RTCPeerConnection && window.RTCPeerConnection.prototype)) {\n    return;\n  }\n  const nativeSetLocalDescription =\n      window.RTCPeerConnection.prototype.setLocalDescription;\n  if (!nativeSetLocalDescription || nativeSetLocalDescription.length === 0) {\n    return;\n  }\n  window.RTCPeerConnection.prototype.setLocalDescription =\n    function setLocalDescription() {\n      let desc = arguments[0] || {};\n      if (typeof desc !== 'object' || (desc.type && desc.sdp)) {\n        return nativeSetLocalDescription.apply(this, arguments);\n      }\n      // The remaining steps should technically happen when SLD comes off the\n      // RTCPeerConnection's operations chain (not ahead of going on it), but\n      // this is too difficult to shim. Instead, this shim only covers the\n      // common case where the operations chain is empty. This is imperfect, but\n      // should cover many cases. Rationale: Even if we can't reduce the glare\n      // window to zero on imperfect implementations, there's value in tapping\n      // into the perfect negotiation pattern that several browsers support.\n      desc = {type: desc.type, sdp: desc.sdp};\n      if (!desc.type) {\n        switch (this.signalingState) {\n          case 'stable':\n          case 'have-local-offer':\n          case 'have-remote-pranswer':\n            desc.type = 'offer';\n            break;\n          default:\n            desc.type = 'answer';\n            break;\n        }\n      }\n      if (desc.sdp || (desc.type !== 'offer' && desc.type !== 'answer')) {\n        return nativeSetLocalDescription.apply(this, [desc]);\n      }\n      const func = desc.type === 'offer' ? this.createOffer : this.createAnswer;\n      return func.apply(this)\n        .then(d => nativeSetLocalDescription.apply(this, [d]));\n    };\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\nimport * as utils from './utils';\n\n// Browser shims.\nimport * as chromeShim from './chrome/chrome_shim';\nimport * as firefoxShim from './firefox/firefox_shim';\nimport * as safariShim from './safari/safari_shim';\nimport * as commonShim from './common_shim';\nimport * as sdp from 'sdp';\n\n// Shimming starts here.\nexport function adapterFactory({window} = {}, options = {\n  shimChrome: true,\n  shimFirefox: true,\n  shimSafari: true,\n}) {\n  // Utils.\n  const logging = utils.log;\n  const browserDetails = utils.detectBrowser(window);\n\n  const adapter = {\n    browserDetails,\n    commonShim,\n    extractVersion: utils.extractVersion,\n    disableLog: utils.disableLog,\n    disableWarnings: utils.disableWarnings,\n    // Expose sdp as a convenience. For production apps include directly.\n    sdp,\n  };\n\n  // Shim browser if found.\n  switch (browserDetails.browser) {\n    case 'chrome':\n      if (!chromeShim || !chromeShim.shimPeerConnection ||\n          !options.shimChrome) {\n        logging('Chrome shim is not included in this adapter release.');\n        return adapter;\n      }\n      if (browserDetails.version === null) {\n        logging('Chrome shim can not determine version, not shimming.');\n        return adapter;\n      }\n      logging('adapter.js shimming chrome.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = chromeShim;\n\n      // Must be called before shimPeerConnection.\n      commonShim.shimAddIceCandidateNullOrEmpty(window, browserDetails);\n      commonShim.shimParameterlessSetLocalDescription(window, browserDetails);\n\n      chromeShim.shimGetUserMedia(window, browserDetails);\n      chromeShim.shimMediaStream(window, browserDetails);\n      chromeShim.shimPeerConnection(window, browserDetails);\n      chromeShim.shimOnTrack(window, browserDetails);\n      chromeShim.shimAddTrackRemoveTrack(window, browserDetails);\n      chromeShim.shimGetSendersWithDtmf(window, browserDetails);\n      chromeShim.shimSenderReceiverGetStats(window, browserDetails);\n      chromeShim.fixNegotiationNeeded(window, browserDetails);\n\n      commonShim.shimRTCIceCandidate(window, browserDetails);\n      commonShim.shimRTCIceCandidateRelayProtocol(window, browserDetails);\n      commonShim.shimConnectionState(window, browserDetails);\n      commonShim.shimMaxMessageSize(window, browserDetails);\n      commonShim.shimSendThrowTypeError(window, browserDetails);\n      commonShim.removeExtmapAllowMixed(window, browserDetails);\n      break;\n    case 'firefox':\n      if (!firefoxShim || !firefoxShim.shimPeerConnection ||\n          !options.shimFirefox) {\n        logging('Firefox shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming firefox.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = firefoxShim;\n\n      // Must be called before shimPeerConnection.\n      commonShim.shimAddIceCandidateNullOrEmpty(window, browserDetails);\n      commonShim.shimParameterlessSetLocalDescription(window, browserDetails);\n\n      firefoxShim.shimGetUserMedia(window, browserDetails);\n      firefoxShim.shimPeerConnection(window, browserDetails);\n      firefoxShim.shimOnTrack(window, browserDetails);\n      firefoxShim.shimRemoveStream(window, browserDetails);\n      firefoxShim.shimSenderGetStats(window, browserDetails);\n      firefoxShim.shimReceiverGetStats(window, browserDetails);\n      firefoxShim.shimRTCDataChannel(window, browserDetails);\n      firefoxShim.shimAddTransceiver(window, browserDetails);\n      firefoxShim.shimGetParameters(window, browserDetails);\n      firefoxShim.shimCreateOffer(window, browserDetails);\n      firefoxShim.shimCreateAnswer(window, browserDetails);\n\n      commonShim.shimRTCIceCandidate(window, browserDetails);\n      commonShim.shimConnectionState(window, browserDetails);\n      commonShim.shimMaxMessageSize(window, browserDetails);\n      commonShim.shimSendThrowTypeError(window, browserDetails);\n      break;\n    case 'safari':\n      if (!safariShim || !options.shimSafari) {\n        logging('Safari shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming safari.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = safariShim;\n\n      // Must be called before shimCallbackAPI.\n      commonShim.shimAddIceCandidateNullOrEmpty(window, browserDetails);\n      commonShim.shimParameterlessSetLocalDescription(window, browserDetails);\n\n      safariShim.shimRTCIceServerUrls(window, browserDetails);\n      safariShim.shimCreateOfferLegacy(window, browserDetails);\n      safariShim.shimCallbacksAPI(window, browserDetails);\n      safariShim.shimLocalStreamsAPI(window, browserDetails);\n      safariShim.shimRemoteStreamsAPI(window, browserDetails);\n      safariShim.shimTrackEventTransceiver(window, browserDetails);\n      safariShim.shimGetUserMedia(window, browserDetails);\n      safariShim.shimAudioContext(window, browserDetails);\n\n      commonShim.shimRTCIceCandidate(window, browserDetails);\n      commonShim.shimRTCIceCandidateRelayProtocol(window, browserDetails);\n      commonShim.shimMaxMessageSize(window, browserDetails);\n      commonShim.shimSendThrowTypeError(window, browserDetails);\n      commonShim.removeExtmapAllowMixed(window, browserDetails);\n      break;\n    default:\n      logging('Unsupported browser!');\n      break;\n  }\n\n  return adapter;\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n\n'use strict';\n\nimport {adapterFactory} from './adapter_factory.js';\n\nconst adapter =\n  adapterFactory({window: typeof window === 'undefined' ? undefined : window});\nexport default adapter;\n","// created by @HenrikJoreteg\nvar prefix;\nvar version;\n\nif (window.mozRTCPeerConnection || navigator.mozGetUserMedia) {\n    prefix = 'moz';\n    version = parseInt(navigator.userAgent.match(/Firefox\\/([0-9]+)\\./)[1], 10);\n} else if (window.webkitRTCPeerConnection || navigator.webkitGetUserMedia) {\n    prefix = 'webkit';\n    version = navigator.userAgent.match(/Chrom(e|ium)/) && parseInt(navigator.userAgent.match(/Chrom(e|ium)\\/([0-9]+)\\./)[2], 10);\n}\n\nvar PC = window.RTCPeerConnection || window.mozRTCPeerConnection || window.webkitRTCPeerConnection;\nvar IceCandidate = window.mozRTCIceCandidate || window.RTCIceCandidate;\nvar SessionDescription = window.mozRTCSessionDescription || window.RTCSessionDescription;\nvar MediaStream = window.webkitMediaStream || window.MediaStream;\nvar screenSharing = window.location.protocol === 'https:' &&\n    ((prefix === 'webkit' && version >= 26) ||\n     (prefix === 'moz' && version >= 33))\nvar AudioContext = window.AudioContext || window.webkitAudioContext;\nvar videoEl = document.createElement('video');\nvar supportVp8 = videoEl && videoEl.canPlayType && videoEl.canPlayType('video/webm; codecs=\"vp8\", vorbis') === \"probably\";\nvar getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.msGetUserMedia || navigator.mozGetUserMedia;\n\n// export support flags and constructors.prototype && PC\nmodule.exports = {\n    prefix: prefix,\n    browserVersion: version,\n    support: !!PC && !!getUserMedia,\n    // new support style\n    supportRTCPeerConnection: !!PC,\n    supportVp8: supportVp8,\n    supportGetUserMedia: !!getUserMedia,\n    supportDataChannel: !!(PC && PC.prototype && PC.prototype.createDataChannel),\n    supportWebAudio: !!(AudioContext && AudioContext.prototype.createMediaStreamSource),\n    supportMediaStream: !!(MediaStream && MediaStream.prototype.removeTrack),\n    supportScreenSharing: !!screenSharing,\n    // constructors\n    AudioContext: AudioContext,\n    PeerConnection: PC,\n    SessionDescription: SessionDescription,\n    IceCandidate: IceCandidate,\n    MediaStream: MediaStream,\n    getUserMedia: getUserMedia\n};\n","var _globalThis;\nif (typeof globalThis === 'object') {\n\t_globalThis = globalThis;\n} else {\n\ttry {\n\t\t_globalThis = require('es5-ext/global');\n\t} catch (error) {\n\t} finally {\n\t\tif (!_globalThis && typeof window !== 'undefined') { _globalThis = window; }\n\t\tif (!_globalThis) { throw new Error('Could not determine global this'); }\n\t}\n}\n\nvar NativeWebSocket = _globalThis.WebSocket || _globalThis.MozWebSocket;\nvar websocket_version = require('./version');\n\n\n/**\n * Expose a W3C WebSocket class with just one or two arguments.\n */\nfunction W3CWebSocket(uri, protocols) {\n\tvar native_instance;\n\n\tif (protocols) {\n\t\tnative_instance = new NativeWebSocket(uri, protocols);\n\t}\n\telse {\n\t\tnative_instance = new NativeWebSocket(uri);\n\t}\n\n\t/**\n\t * 'native_instance' is an instance of nativeWebSocket (the browser's WebSocket\n\t * class). Since it is an Object it will be returned as it is when creating an\n\t * instance of W3CWebSocket via 'new W3CWebSocket()'.\n\t *\n\t * ECMAScript 5: http://bclary.com/2004/11/07/#a-13.2.2\n\t */\n\treturn native_instance;\n}\nif (NativeWebSocket) {\n\t['CONNECTING', 'OPEN', 'CLOSING', 'CLOSED'].forEach(function(prop) {\n\t\tObject.defineProperty(W3CWebSocket, prop, {\n\t\t\tget: function() { return NativeWebSocket[prop]; }\n\t\t});\n\t});\n}\n\n/**\n * Module exports.\n */\nmodule.exports = {\n    'w3cwebsocket' : NativeWebSocket ? W3CWebSocket : null,\n    'version'      : websocket_version\n};\n","module.exports = require('../package.json').version;\n","function asyncGeneratorStep(n, t, e, r, o, a, c) {\n  try {\n    var i = n[a](c),\n      u = i.value;\n  } catch (n) {\n    return void e(n);\n  }\n  i.done ? t(u) : Promise.resolve(u).then(r, o);\n}\nfunction _asyncToGenerator(n) {\n  return function () {\n    var t = this,\n      e = arguments;\n    return new Promise(function (r, o) {\n      var a = n.apply(t, e);\n      function _next(n) {\n        asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n);\n      }\n      function _throw(n) {\n        asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n);\n      }\n      _next(void 0);\n    });\n  };\n}\nexport { _asyncToGenerator as default };","import _typeof from \"./typeof.js\";\nfunction _regeneratorRuntime() {\n  \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */\n  _regeneratorRuntime = function _regeneratorRuntime() {\n    return e;\n  };\n  var t,\n    e = {},\n    r = Object.prototype,\n    n = r.hasOwnProperty,\n    o = Object.defineProperty || function (t, e, r) {\n      t[e] = r.value;\n    },\n    i = \"function\" == typeof Symbol ? Symbol : {},\n    a = i.iterator || \"@@iterator\",\n    c = i.asyncIterator || \"@@asyncIterator\",\n    u = i.toStringTag || \"@@toStringTag\";\n  function define(t, e, r) {\n    return Object.defineProperty(t, e, {\n      value: r,\n      enumerable: !0,\n      configurable: !0,\n      writable: !0\n    }), t[e];\n  }\n  try {\n    define({}, \"\");\n  } catch (t) {\n    define = function define(t, e, r) {\n      return t[e] = r;\n    };\n  }\n  function wrap(t, e, r, n) {\n    var i = e && e.prototype instanceof Generator ? e : Generator,\n      a = Object.create(i.prototype),\n      c = new Context(n || []);\n    return o(a, \"_invoke\", {\n      value: makeInvokeMethod(t, r, c)\n    }), a;\n  }\n  function tryCatch(t, e, r) {\n    try {\n      return {\n        type: \"normal\",\n        arg: t.call(e, r)\n      };\n    } catch (t) {\n      return {\n        type: \"throw\",\n        arg: t\n      };\n    }\n  }\n  e.wrap = wrap;\n  var h = \"suspendedStart\",\n    l = \"suspendedYield\",\n    f = \"executing\",\n    s = \"completed\",\n    y = {};\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n  var p = {};\n  define(p, a, function () {\n    return this;\n  });\n  var d = Object.getPrototypeOf,\n    v = d && d(d(values([])));\n  v && v !== r && n.call(v, a) && (p = v);\n  var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p);\n  function defineIteratorMethods(t) {\n    [\"next\", \"throw\", \"return\"].forEach(function (e) {\n      define(t, e, function (t) {\n        return this._invoke(e, t);\n      });\n    });\n  }\n  function AsyncIterator(t, e) {\n    function invoke(r, o, i, a) {\n      var c = tryCatch(t[r], t, o);\n      if (\"throw\" !== c.type) {\n        var u = c.arg,\n          h = u.value;\n        return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) {\n          invoke(\"next\", t, i, a);\n        }, function (t) {\n          invoke(\"throw\", t, i, a);\n        }) : e.resolve(h).then(function (t) {\n          u.value = t, i(u);\n        }, function (t) {\n          return invoke(\"throw\", t, i, a);\n        });\n      }\n      a(c.arg);\n    }\n    var r;\n    o(this, \"_invoke\", {\n      value: function value(t, n) {\n        function callInvokeWithMethodAndArg() {\n          return new e(function (e, r) {\n            invoke(t, n, e, r);\n          });\n        }\n        return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n      }\n    });\n  }\n  function makeInvokeMethod(e, r, n) {\n    var o = h;\n    return function (i, a) {\n      if (o === f) throw Error(\"Generator is already running\");\n      if (o === s) {\n        if (\"throw\" === i) throw a;\n        return {\n          value: t,\n          done: !0\n        };\n      }\n      for (n.method = i, n.arg = a;;) {\n        var c = n.delegate;\n        if (c) {\n          var u = maybeInvokeDelegate(c, n);\n          if (u) {\n            if (u === y) continue;\n            return u;\n          }\n        }\n        if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) {\n          if (o === h) throw o = s, n.arg;\n          n.dispatchException(n.arg);\n        } else \"return\" === n.method && n.abrupt(\"return\", n.arg);\n        o = f;\n        var p = tryCatch(e, r, n);\n        if (\"normal\" === p.type) {\n          if (o = n.done ? s : l, p.arg === y) continue;\n          return {\n            value: p.arg,\n            done: n.done\n          };\n        }\n        \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg);\n      }\n    };\n  }\n  function maybeInvokeDelegate(e, r) {\n    var n = r.method,\n      o = e.iterator[n];\n    if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y;\n    var i = tryCatch(o, e.iterator, r.arg);\n    if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y;\n    var a = i.arg;\n    return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y);\n  }\n  function pushTryEntry(t) {\n    var e = {\n      tryLoc: t[0]\n    };\n    1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e);\n  }\n  function resetTryEntry(t) {\n    var e = t.completion || {};\n    e.type = \"normal\", delete e.arg, t.completion = e;\n  }\n  function Context(t) {\n    this.tryEntries = [{\n      tryLoc: \"root\"\n    }], t.forEach(pushTryEntry, this), this.reset(!0);\n  }\n  function values(e) {\n    if (e || \"\" === e) {\n      var r = e[a];\n      if (r) return r.call(e);\n      if (\"function\" == typeof e.next) return e;\n      if (!isNaN(e.length)) {\n        var o = -1,\n          i = function next() {\n            for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next;\n            return next.value = t, next.done = !0, next;\n          };\n        return i.next = i;\n      }\n    }\n    throw new TypeError(_typeof(e) + \" is not iterable\");\n  }\n  return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", {\n    value: GeneratorFunctionPrototype,\n    configurable: !0\n  }), o(GeneratorFunctionPrototype, \"constructor\", {\n    value: GeneratorFunction,\n    configurable: !0\n  }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) {\n    var e = \"function\" == typeof t && t.constructor;\n    return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name));\n  }, e.mark = function (t) {\n    return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t;\n  }, e.awrap = function (t) {\n    return {\n      __await: t\n    };\n  }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () {\n    return this;\n  }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) {\n    void 0 === i && (i = Promise);\n    var a = new AsyncIterator(wrap(t, r, n, o), i);\n    return e.isGeneratorFunction(r) ? a : a.next().then(function (t) {\n      return t.done ? t.value : a.next();\n    });\n  }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () {\n    return this;\n  }), define(g, \"toString\", function () {\n    return \"[object Generator]\";\n  }), e.keys = function (t) {\n    var e = Object(t),\n      r = [];\n    for (var n in e) r.push(n);\n    return r.reverse(), function next() {\n      for (; r.length;) {\n        var t = r.pop();\n        if (t in e) return next.value = t, next.done = !1, next;\n      }\n      return next.done = !0, next;\n    };\n  }, e.values = values, Context.prototype = {\n    constructor: Context,\n    reset: function reset(e) {\n      if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t);\n    },\n    stop: function stop() {\n      this.done = !0;\n      var t = this.tryEntries[0].completion;\n      if (\"throw\" === t.type) throw t.arg;\n      return this.rval;\n    },\n    dispatchException: function dispatchException(e) {\n      if (this.done) throw e;\n      var r = this;\n      function handle(n, o) {\n        return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o;\n      }\n      for (var o = this.tryEntries.length - 1; o >= 0; --o) {\n        var i = this.tryEntries[o],\n          a = i.completion;\n        if (\"root\" === i.tryLoc) return handle(\"end\");\n        if (i.tryLoc <= this.prev) {\n          var c = n.call(i, \"catchLoc\"),\n            u = n.call(i, \"finallyLoc\");\n          if (c && u) {\n            if (this.prev < i.catchLoc) return handle(i.catchLoc, !0);\n            if (this.prev < i.finallyLoc) return handle(i.finallyLoc);\n          } else if (c) {\n            if (this.prev < i.catchLoc) return handle(i.catchLoc, !0);\n          } else {\n            if (!u) throw Error(\"try statement without catch or finally\");\n            if (this.prev < i.finallyLoc) return handle(i.finallyLoc);\n          }\n        }\n      }\n    },\n    abrupt: function abrupt(t, e) {\n      for (var r = this.tryEntries.length - 1; r >= 0; --r) {\n        var o = this.tryEntries[r];\n        if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) {\n          var i = o;\n          break;\n        }\n      }\n      i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null);\n      var a = i ? i.completion : {};\n      return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a);\n    },\n    complete: function complete(t, e) {\n      if (\"throw\" === t.type) throw t.arg;\n      return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y;\n    },\n    finish: function finish(t) {\n      for (var e = this.tryEntries.length - 1; e >= 0; --e) {\n        var r = this.tryEntries[e];\n        if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y;\n      }\n    },\n    \"catch\": function _catch(t) {\n      for (var e = this.tryEntries.length - 1; e >= 0; --e) {\n        var r = this.tryEntries[e];\n        if (r.tryLoc === t) {\n          var n = r.completion;\n          if (\"throw\" === n.type) {\n            var o = n.arg;\n            resetTryEntry(r);\n          }\n          return o;\n        }\n      }\n      throw Error(\"illegal catch attempt\");\n    },\n    delegateYield: function delegateYield(e, r, n) {\n      return this.delegate = {\n        iterator: values(e),\n        resultName: r,\n        nextLoc: n\n      }, \"next\" === this.method && (this.arg = t), y;\n    }\n  }, e;\n}\nexport { _regeneratorRuntime as default };","export var IconsManifest = [\n  {\n    \"id\": \"ci\",\n    \"name\": \"Circum Icons\",\n    \"projectUrl\": \"https://circumicons.com/\",\n    \"license\": \"MPL-2.0 license\",\n    \"licenseUrl\": \"https://github.com/Klarr-Agency/Circum-Icons/blob/main/LICENSE\"\n  },\n  {\n    \"id\": \"fa\",\n    \"name\": \"Font Awesome 5\",\n    \"projectUrl\": \"https://fontawesome.com/\",\n    \"license\": \"CC BY 4.0 License\",\n    \"licenseUrl\": \"https://creativecommons.org/licenses/by/4.0/\"\n  },\n  {\n    \"id\": \"fa6\",\n    \"name\": \"Font Awesome 6\",\n    \"projectUrl\": \"https://fontawesome.com/\",\n    \"license\": \"CC BY 4.0 License\",\n    \"licenseUrl\": \"https://creativecommons.org/licenses/by/4.0/\"\n  },\n  {\n    \"id\": \"io\",\n    \"name\": \"Ionicons 4\",\n    \"projectUrl\": \"https://ionicons.com/\",\n    \"license\": \"MIT\",\n    \"licenseUrl\": \"https://github.com/ionic-team/ionicons/blob/master/LICENSE\"\n  },\n  {\n    \"id\": \"io5\",\n    \"name\": \"Ionicons 5\",\n    \"projectUrl\": \"https://ionicons.com/\",\n    \"license\": \"MIT\",\n    \"licenseUrl\": \"https://github.com/ionic-team/ionicons/blob/master/LICENSE\"\n  },\n  {\n    \"id\": \"md\",\n    \"name\": \"Material Design icons\",\n    \"projectUrl\": \"http://google.github.io/material-design-icons/\",\n    \"license\": \"Apache License Version 2.0\",\n    \"licenseUrl\": \"https://github.com/google/material-design-icons/blob/master/LICENSE\"\n  },\n  {\n    \"id\": \"ti\",\n    \"name\": \"Typicons\",\n    \"projectUrl\": \"http://s-ings.com/typicons/\",\n    \"license\": \"CC BY-SA 3.0\",\n    \"licenseUrl\": \"https://creativecommons.org/licenses/by-sa/3.0/\"\n  },\n  {\n    \"id\": \"go\",\n    \"name\": \"Github Octicons icons\",\n    \"projectUrl\": \"https://octicons.github.com/\",\n    \"license\": \"MIT\",\n    \"licenseUrl\": \"https://github.com/primer/octicons/blob/master/LICENSE\"\n  },\n  {\n    \"id\": \"fi\",\n    \"name\": \"Feather\",\n    \"projectUrl\": \"https://feathericons.com/\",\n    \"license\": \"MIT\",\n    \"licenseUrl\": \"https://github.com/feathericons/feather/blob/master/LICENSE\"\n  },\n  {\n    \"id\": \"lu\",\n    \"name\": \"Lucide\",\n    \"projectUrl\": \"https://lucide.dev/\",\n    \"license\": \"ISC\",\n    \"licenseUrl\": \"https://github.com/lucide-icons/lucide/blob/main/LICENSE\"\n  },\n  {\n    \"id\": \"gi\",\n    \"name\": \"Game Icons\",\n    \"projectUrl\": \"https://game-icons.net/\",\n    \"license\": \"CC BY 3.0\",\n    \"licenseUrl\": \"https://creativecommons.org/licenses/by/3.0/\"\n  },\n  {\n    \"id\": \"wi\",\n    \"name\": \"Weather Icons\",\n    \"projectUrl\": \"https://erikflowers.github.io/weather-icons/\",\n    \"license\": \"SIL OFL 1.1\",\n    \"licenseUrl\": \"http://scripts.sil.org/OFL\"\n  },\n  {\n    \"id\": \"di\",\n    \"name\": \"Devicons\",\n    \"projectUrl\": \"https://vorillaz.github.io/devicons/\",\n    \"license\": \"MIT\",\n    \"licenseUrl\": \"https://opensource.org/licenses/MIT\"\n  },\n  {\n    \"id\": \"ai\",\n    \"name\": \"Ant Design Icons\",\n    \"projectUrl\": \"https://github.com/ant-design/ant-design-icons\",\n    \"license\": \"MIT\",\n    \"licenseUrl\": \"https://opensource.org/licenses/MIT\"\n  },\n  {\n    \"id\": \"bs\",\n    \"name\": \"Bootstrap Icons\",\n    \"projectUrl\": \"https://github.com/twbs/icons\",\n    \"license\": \"MIT\",\n    \"licenseUrl\": \"https://opensource.org/licenses/MIT\"\n  },\n  {\n    \"id\": \"ri\",\n    \"name\": \"Remix Icon\",\n    \"projectUrl\": \"https://github.com/Remix-Design/RemixIcon\",\n    \"license\": \"Apache License Version 2.0\",\n    \"licenseUrl\": \"http://www.apache.org/licenses/\"\n  },\n  {\n    \"id\": \"fc\",\n    \"name\": \"Flat Color Icons\",\n    \"projectUrl\": \"https://github.com/icons8/flat-color-icons\",\n    \"license\": \"MIT\",\n    \"licenseUrl\": \"https://opensource.org/licenses/MIT\"\n  },\n  {\n    \"id\": \"gr\",\n    \"name\": \"Grommet-Icons\",\n    \"projectUrl\": \"https://github.com/grommet/grommet-icons\",\n    \"license\": \"Apache License Version 2.0\",\n    \"licenseUrl\": \"http://www.apache.org/licenses/\"\n  },\n  {\n    \"id\": \"hi\",\n    \"name\": \"Heroicons\",\n    \"projectUrl\": \"https://github.com/tailwindlabs/heroicons\",\n    \"license\": \"MIT\",\n    \"licenseUrl\": \"https://opensource.org/licenses/MIT\"\n  },\n  {\n    \"id\": \"hi2\",\n    \"name\": \"Heroicons 2\",\n    \"projectUrl\": \"https://github.com/tailwindlabs/heroicons\",\n    \"license\": \"MIT\",\n    \"licenseUrl\": \"https://opensource.org/licenses/MIT\"\n  },\n  {\n    \"id\": \"si\",\n    \"name\": \"Simple Icons\",\n    \"projectUrl\": \"https://simpleicons.org/\",\n    \"license\": \"CC0 1.0 Universal\",\n    \"licenseUrl\": \"https://creativecommons.org/publicdomain/zero/1.0/\"\n  },\n  {\n    \"id\": \"sl\",\n    \"name\": \"Simple Line Icons\",\n    \"projectUrl\": \"https://thesabbir.github.io/simple-line-icons/\",\n    \"license\": \"MIT\",\n    \"licenseUrl\": \"https://opensource.org/licenses/MIT\"\n  },\n  {\n    \"id\": \"im\",\n    \"name\": \"IcoMoon Free\",\n    \"projectUrl\": \"https://github.com/Keyamoon/IcoMoon-Free\",\n    \"license\": \"CC BY 4.0 License\",\n    \"licenseUrl\": \"https://github.com/Keyamoon/IcoMoon-Free/blob/master/License.txt\"\n  },\n  {\n    \"id\": \"bi\",\n    \"name\": \"BoxIcons\",\n    \"projectUrl\": \"https://github.com/atisawd/boxicons\",\n    \"license\": \"MIT\",\n    \"licenseUrl\": \"https://github.com/atisawd/boxicons/blob/master/LICENSE\"\n  },\n  {\n    \"id\": \"cg\",\n    \"name\": \"css.gg\",\n    \"projectUrl\": \"https://github.com/astrit/css.gg\",\n    \"license\": \"MIT\",\n    \"licenseUrl\": \"https://opensource.org/licenses/MIT\"\n  },\n  {\n    \"id\": \"vsc\",\n    \"name\": \"VS Code Icons\",\n    \"projectUrl\": \"https://github.com/microsoft/vscode-codicons\",\n    \"license\": \"CC BY 4.0\",\n    \"licenseUrl\": \"https://creativecommons.org/licenses/by/4.0/\"\n  },\n  {\n    \"id\": \"tb\",\n    \"name\": \"Tabler Icons\",\n    \"projectUrl\": \"https://github.com/tabler/tabler-icons\",\n    \"license\": \"MIT\",\n    \"licenseUrl\": \"https://opensource.org/licenses/MIT\"\n  },\n  {\n    \"id\": \"tfi\",\n    \"name\": \"Themify Icons\",\n    \"projectUrl\": \"https://github.com/lykmapipo/themify-icons\",\n    \"license\": \"MIT\",\n    \"licenseUrl\": \"https://github.com/thecreation/standard-icons/blob/master/modules/themify-icons/LICENSE\"\n  },\n  {\n    \"id\": \"rx\",\n    \"name\": \"Radix Icons\",\n    \"projectUrl\": \"https://icons.radix-ui.com\",\n    \"license\": \"MIT\",\n    \"licenseUrl\": \"https://github.com/radix-ui/icons/blob/master/LICENSE\"\n  },\n  {\n    \"id\": \"pi\",\n    \"name\": \"Phosphor Icons\",\n    \"projectUrl\": \"https://github.com/phosphor-icons/core\",\n    \"license\": \"MIT\",\n    \"licenseUrl\": \"https://github.com/phosphor-icons/core/blob/main/LICENSE\"\n  },\n  {\n    \"id\": \"lia\",\n    \"name\": \"Icons8 Line Awesome\",\n    \"projectUrl\": \"https://icons8.com/line-awesome\",\n    \"license\": \"MIT\",\n    \"licenseUrl\": \"https://github.com/icons8/line-awesome/blob/master/LICENSE.md\"\n  }\n]","import React from \"react\";\nexport var DefaultContext = {\n  color: undefined,\n  size: undefined,\n  className: undefined,\n  style: undefined,\n  attr: undefined\n};\nexport var IconContext = React.createContext && /*#__PURE__*/React.createContext(DefaultContext);","var _excluded = [\"attr\", \"size\", \"title\"];\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } } return target; }\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == typeof i ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != typeof i) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nimport React from \"react\";\nimport { IconContext, DefaultContext } from \"./iconContext.mjs\";\nfunction Tree2Element(tree) {\n  return tree && tree.map((node, i) => /*#__PURE__*/React.createElement(node.tag, _objectSpread({\n    key: i\n  }, node.attr), Tree2Element(node.child)));\n}\nexport function GenIcon(data) {\n  return props => /*#__PURE__*/React.createElement(IconBase, _extends({\n    attr: _objectSpread({}, data.attr)\n  }, props), Tree2Element(data.child));\n}\nexport function IconBase(props) {\n  var elem = conf => {\n    var {\n        attr,\n        size,\n        title\n      } = props,\n      svgProps = _objectWithoutProperties(props, _excluded);\n    var computedSize = size || conf.size || \"1em\";\n    var className;\n    if (conf.className) className = conf.className;\n    if (props.className) className = (className ? className + \" \" : \"\") + props.className;\n    return /*#__PURE__*/React.createElement(\"svg\", _extends({\n      stroke: \"currentColor\",\n      fill: \"currentColor\",\n      strokeWidth: \"0\"\n    }, conf.attr, attr, svgProps, {\n      className: className,\n      style: _objectSpread(_objectSpread({\n        color: props.color || conf.color\n      }, conf.style), props.style),\n      height: computedSize,\n      width: computedSize,\n      xmlns: \"http://www.w3.org/2000/svg\"\n    }), title && /*#__PURE__*/React.createElement(\"title\", null, title), props.children);\n  };\n  return IconContext !== undefined ? /*#__PURE__*/React.createElement(IconContext.Consumer, null, conf => elem(conf)) : elem(DefaultContext);\n}"],"names":["e","define","module","exports","t","n","r","s","o","u","a","_dereq_","i","f","Error","code","l","call","length","Promise","SomePromiseArray","_SomePromiseArray","any","promises","ret","promise","setHowMany","setUnwrap","init","prototype","this","firstLineError","schedule","Queue","Async","_customScheduler","_isTickUsed","_lateQueue","_normalQueue","_haveDrainedQueues","self","drainQueues","_drainQueues","_schedule","_drainQueue","queue","_drainQueueStep","fn","shift","_settlePromises","receiver","arg","setScheduler","prev","hasCustomScheduler","haveItemsQueued","fatalError","isNode","process","stderr","write","stack","exit","throwLater","arguments","setTimeout","invokeLater","push","_queueTick","invoke","settlePromises","_pushOne","_reset","INTERNAL","tryConvertToPromise","debug","calledBind","rejectThis","_","_reject","targetRejected","context","promiseRejectionQueued","bindingPromise","_then","bindingResolved","thisArg","_bitField","_resolveCallback","target","bindingRejected","bind","_propagateFrom","propagateFromFunction","_boundValue","boundValueFunction","maybePromise","_target","_setBoundTo","undefined","_setOnCancel","obj","_boundTo","_isBound","value","resolve","old","bluebird","noConflict","cr","Object","create","callerCache","getterCache","util","canEvaluate","caller","methodName","message","classString","toString","TypeError","ensureMethod","pop","apply","namedGetter","indexedGetter","index","Math","max","isIdentifier","args","slice","get","propertyName","getter","maybeGetter","getGetter","PromiseArray","apiRejection","tryCatch","errorObj","async","_async","cancel","cancellation","_warn","child","_isCancellable","_cancelBy","_isFollowing","_followee","_cancelBranched","parent","_cancellationParent","_setWillBeCancelled","_branchHasCancelled","_branchesRemainingToCancel","_enoughBranchesHaveCancelled","canceller","_invokeOnCancel","_cancel","_setCancelled","_cancelPromises","_length","_unsetOnCancel","_onCancelField","isPending","_isCancelled","isCancellable","isCancelled","_doInvokeOnCancel","onCancelCallback","internalOnly","isArray","_attachExtraTrace","_resultCancelled","_onCancel","_invokeInternalOnCancel","NEXT_FILTER","getKeys","keys","instances","cb","boundTo","predicateLoop","item","matchesPredicate","isObject","j","key","longStackTraces","contextStack","Context","_trace","CapturedTrace","peekContext","lastIndex","_promiseCreated","_pushContext","_popContext","_peekContext","trace","deactivateLongStackTraces","activateLongStackTraces","Promise_pushContext","Promise_popContext","Promise_PeekContext","Promise_peekContext","Promise_promiseCreated","ctx","enableAsyncHooks","disableAsyncHooks","unhandledRejectionHandled","possiblyUnhandledRejection","printWarning","deferUnhandledRejectionCheck","Warning","es5","canAttachTrace","bluebirdFramePattern","nodeFramePattern","parseLinePattern","stackFramePattern","formatStack","indentStackFrames","debugging","env","warnings","wForgottenReturn","unhandledRejectionCheck","_notifyUnhandledRejection","unhandledRejectionClear","defineProperty","suppressUnhandledRejections","_ensurePossibleRejectionHandled","_setRejectionIsUnhandled","_notifyUnhandledRejectionIsHandled","fireRejectionEvent","_setReturnedNonUndefined","_returnedNonUndefined","_isRejectionUnhandled","reason","_settledValue","_setUnhandledRejectionIsNotified","_unsetUnhandledRejectionIsNotified","_isUnhandledRejectionNotified","_unsetRejectionIsUnhandled","shouldUseOwnTrace","warn","onPossiblyUnhandledRejection","_getContext","contextBind","onUnhandledRejectionHandled","disableLongStackTraces","config","longStackTracesIsSupported","Promise_captureStackTrace","_captureStackTrace","Promise_attachExtraTrace","Promise_dereferenceTrace","_dereferenceTrace","longStackTracesCaptureStackTrace","longStackTracesAttachExtraTrace","longStackTracesDereferenceTrace","hasLongStackTraces","legacyHandlers","unhandledrejection","before","global","onunhandledrejection","after","rejectionhandled","onrejectionhandled","fireDomEvent","dispatch","legacy","dispatchEvent","CustomEvent","event","name","toLowerCase","domEvent","detail","cancelable","Event","document","createEvent","initCustomEvent","fireGlobalEvent","emit","method","generatePromiseLifecycleEventObject","eventToObjectGenerator","promiseCreated","promiseFulfilled","promiseRejected","promiseResolved","promiseCancelled","promiseChained","warning","unhandledRejection","rejectionHandled","activeFireEvent","globalEventFired","domEventFired","defaultFireEvent","cancellationExecute","executor","reject","onCancel","_attachCancellationCallback","cancellationAttachCancellationCallback","previousOnCancel","cancellationOnCancel","cancellationSetOnCancel","cancellationClearCancellationData","cancellationPropagateFrom","flags","branchesRemainingToCancel","opts","warningsOption","_clearCancellationData","_execute","monitoring","_fireEvent","nodeSupportsAsyncResource","asyncHooks","cur","handler","isFulfilled","error","ignoreSelf","_parent","attachExtraTrace","__stackCleaned__","parsed","parseStackAndMessage","notEnumerableProp","join","formatAndLogError","cleanStack","line","isTraceLine","test","isInternalFrame","shouldIgnore","charAt","replace","split","stackFramesAsArray","title","isSoft","console","String","log","localHandler","localEventFired","formatNonError","str","JSON","stringify","maxChars","substr","snip","captureStackTrace","parseLineInfoRegex","parseLineInfo","matches","match","fileName","parseInt","_promisesCreated","uncycle","inherits","nodes","stackToIndex","node","cycleEdgeNode","currentChildLength","stacks","current","currentLastIndex","currentLastLine","commonRootMeetPoint","removeCommonRoots","splice","removeDuplicateOrEmptyJumps","reconstructStack","v8stackFramePattern","v8stackFormatter","stackTraceLimit","ignoreUntil","hasStackAfterThrow","err","indexOf","isTTY","color","checkForgottenReturns","returnValue","handlerLine","creatorLine","traceLines","lineMatches","firstUserLine","msg","setBounds","lastLineError","firstFileName","lastFileName","firstStackLines","lastStackLines","firstIndex","result","info","deprecated","replacement","returner","thrower","thenReturn","thenThrow","catchThrow","_reason","caught","catchReturn","_value","PromiseReduce","reduce","PromiseAll","all","promiseAllThis","each","mapSeries","_TypeError","_RangeError","Objectfreeze","freeze","subError","nameProperty","defaultMessage","SubError","constructor","CancellationError","TimeoutError","AggregateError","RangeError","methods","Array","configurable","writable","enumerable","level","OperationalError","cause","indent","lines","errorTypes","RejectionError","isES5","getDescriptor","getOwnPropertyDescriptor","names","getOwnPropertyNames","getPrototypeOf","propertyIsWritable","prop","descriptor","set","has","hasOwnProperty","proto","ObjectKeys","desc","PromiseMap","map","filter","options","catchFilter","PassThroughHandlerContext","type","called","cancelPromise","FinallyHandlerCancelReaction","finallyHandler","checkCancel","succeed","fail","reasonOrValue","isFinallyHandler","isRejected","_passThrough","success","then","lastly","tap","tapCatch","handlerOrPredicate","len","catchInstances","Proxyable","yieldHandlers","PromiseSpawn","generatorFunction","yieldHandler","internal","_finallyPromise","_promise","_stack","_generatorFunction","_receiver","_generator","_yieldHandlers","concat","_yieldedPromise","_cancellationPhase","_isResolved","_cleanup","_fulfill","_promiseCancelled","coroutine","returnSentinel","_continue","_promiseFulfilled","next","_promiseRejected","_run","_rejectCallback","done","traceParent","promiseFromYieldHandler","bitField","_proxy","PromiseSpawn$","generator","spawn","addYieldHandler","last","spread","MappingPromiseArray","limit","_filter","constructor$","_callback","_preservedValues","_limit","_inFlight","_queue","_asyncInit","concurrency","isFinite","_init$","_init","values","_values","preservedValues","callback","_totalResolved","_resolve","booleans","_resolveFromSyncValue","attempt","maybeWrapAsError","rErrorKey","wrapAsOperationalError","isUntypedError","markAsOriginatingFromRejection","multiArgs","wrapped","spreadAdapter","val","nodeback","successAdapter","errorAdapter","newReason","asCallback","nodeify","adapter","makeSelfResolutionError","reflectHandler","PromiseInspection","UNDEFINED_BINDING","setReflectHandler","getDomain","domain","getContextDomain","AsyncResource","getContextAsyncHooks","getContext","errors","APPLY","createContext","nodebackForPromise","check","_fulfillmentHandler0","_rejectionHandler0","_promise0","_receiver0","_resolveFromExecutor","deferResolve","v","deferReject","fillTypes","p","reflect","didFulfill","didReject","_setIsFinal","toJSON","fulfillmentValue","rejectionReason","originatesFromRejection","getNewLibraryCopy","is","fromNode","fromCallback","_isFateSealed","_setAsyncGuaranteed","cast","_setFulfilled","fulfilled","rejected","internalData","haveInternalData","settler","_settlePromiseCtx","_settlePromiseLateCancellationObserver","_addCallbacks","_setLength","_setRejected","_setFollowing","_isFinal","_unsetCancelled","_setNoAsyncGuarantee","_receiverAt","_promiseAt","_fulfillmentHandlerAt","_rejectionHandlerAt","_migrateCallback0","follower","fulfill","_migrateCallbackAt","base","proxyable","shouldBind","_setFollowee","synchronous","ignoreNonErrorWarnings","ensureErrorObject","hasStack","_settlePromiseFromHandler","x","_settlePromise","isPromise","asyncGuaranteed","_settlePromise0","_clearCallbackDataAtIndex","_fulfillPromises","_rejectPromises","Symbol","toStringTag","defer","pending","version","toFastProperties","b","c","resolveValueIfEmpty","asArray","_iterate","_resolveEmptyArray","Map","toResolutionValue","getActualLength","shouldCopyValues","isResolved","THIS","withAppended","defaultPromisified","__isPromisified__","noCopyPropsPattern","RegExp","defaultFilter","propsFilter","isPromisified","hasPromisified","suffix","getDataPropertyOrDefault","promisifiableMethods","suffixRegexp","inheritedDataKeys","passesDefaultFilter","keyWithoutAsyncSuffix","checkValid","makeNodePromisified","makeNodePromisifiedEval","__","defaultThis","promisified","promisifyAll","promisifier","promisifiedKey","promisify","copyDescriptors","isClass","Es6Map","mapToEntries","size","extractEntry","forEach","PropertiesPromiseArray","entries","isMap","_isMap","props","castValue","entriesToMap","keyOffset","capacity","_capacity","_front","_willBeOverCapacity","_checkCapacity","wrapMask","front","_resizeTo","oldCapacity","src","srcIndex","dst","dstIndex","arrayMove","race","array","ReductionPromiseArray","initialValue","_each","_fn","_initialValue","_currentCancellable","_eachValues","completed","valueOrReason","gotAccum","accum","_gotAccum","gotValue","_eachComplete","sender","_resultCancelled$","NativePromise","getNativePromise","MutationObserver","GlobalSetImmediate","setImmediate","ProcessNextTick","nextTick","isRecentNode","nativePromise","window","navigator","standalone","cordova","documentElement","div","createElement","attributes","toggleScheduled","div2","classList","toggle","observe","disconnect","SettledPromiseArray","_promiseResolved","inspection","_settledValueField","settle","allSettled","CANCELLATION","_howMany","_unwrap","_initialized","some","howMany","isArrayResolved","_canPossiblyFulfill","_getRangeError","count","_addFulfilled","_fulfilled","_addRejected","_checkOutcome","_rejected","__isCancelled","hasProp","doGetThen","getThen","isAnyBluebirdPromise","doThenable","HandleWrapper","handle","clearTimeout","afterValue","delay","ms","successClear","failureClear","timeout","handleWrapper","afterTimeout","NULL","dispose","resources","iterator","thenable","_isDisposable","_getDisposer","_setDisposable","castPreservingDisposable","tryDispose","Disposer","data","_data","_context","FunctionDisposer","maybeUnwrapDisposer","isDisposer","ResourceList","resource","doDispose","_unsetDisposable","d","using","input","spreadArgs","disposer","reflectedResources","resultPromise","inspections","_disposer","tryCatchTarget","globalObject","tryCatcher","Child","Parent","T","isPrimitive","maybeError","safeToString","appendee","defaultValue","excludedPrototypes","Function","isExcludedProto","visitedKeys","enumeration","thisAssignmentPattern","hasMethods","hasMethodsOtherThanConstructor","hasThisAssignmentAndStaticMethods","FakeConstructor","ic","foo","rident","filledRange","prefix","isError","ignore","from","to","ArrayFrom","itResult","it","hasEnvVariables","runInAsyncScope","versions","Number","supportsAsync","P","naiveFallback","globalThis","__global__","_events","_conf","configure","conf","delimiter","maxListeners","wildcard","newListener","verboseMemoryLeak","listenerTree","logPossibleMemoryLeak","eventName","errorMsg","EventEmitter","searchListenerTree","handlers","tree","leaf","branch","xTree","xxTree","isolatedBranch","endReached","listeners","typeLength","currentType","nextType","_listeners","growListenerTree","listener","warned","EventEmitter2","setMaxListeners","once","many","ttl","off","_origin","on","al","_all","ns","emitAsync","onAny","addListener","leafs","iLeaf","position","recursivelyGarbageCollect","root","offAny","fns","removeListener","removeAllListeners","listenerCount","listenersAny","logging","require","browserDetails","extractVersion","disableLog","chromeShim","edgeShim","firefoxShim","safariShim","browser","shimPeerConnection","browserShim","shimGetUserMedia","shimSourceObject","shimOnTrack","RTCPeerConnection","_ontrack","removeEventListener","_ontrackpoly","addEventListener","stream","te","track","streams","getTracks","HTMLMediaElement","_srcObject","URL","revokeObjectURL","createObjectURL","pcConfig","pcConstraints","iceTransportPolicy","iceTransports","pc","webkitRTCPeerConnection","origGetStats","getStats","selector","successCallback","errorCallback","fixChromeStats_","response","standardReport","report","standardStats","id","timestamp","stat","generateCertificate","nativeMethod","RTCIceCandidate","RTCSessionDescription","attachMediaStream","element","srcObject","reattachMediaStream","constraintsToChrome_","mandatory","optional","cc","ideal","exact","min","oldname_","toUpperCase","oc","mix","advanced","getUserMedia","constraints","onSuccess","onError","parse","audio","video","webkitGetUserMedia","getUserMediaPromise_","mediaDevices","enumerateDevices","kinds","MediaStreamTrack","getSources","devices","device","label","kind","deviceId","groupId","origGetUserMedia","SDPUtils","random","localCName","generateIdentifier","splitLines","blob","trim","splitSections","part","matchPrefix","parseCandidate","parts","candidate","foundation","substring","component","protocol","priority","ip","port","relatedAddress","relatedPort","tcpType","writeCandidate","sdp","parseRtpMap","payloadType","clockRate","numChannels","writeRtpMap","codec","pt","preferredPayloadType","parseExtmap","uri","writeExtmap","headerExtension","preferredId","parseFmtp","kv","writeFmtp","parameters","params","param","parseRtcpFb","parameter","writeRtcpFb","rtcpFeedback","fb","parseSsrcMedia","sp","ssrc","colon","attribute","getDtlsParameters","mediaSection","sessionpart","fpLine","role","fingerprints","algorithm","writeDtlsParameters","setupType","fp","getIceParameters","usernameFragment","password","writeIceParameters","parseRtpParameters","description","codecs","headerExtensions","fecMechanisms","rtcp","mline","rtpmapline","fmtps","writeRtpDescription","caps","parseRtpEncodingParameters","secondarySsrc","encodingParameters","hasRed","hasUlpfec","ssrcs","primarySsrc","flows","apt","encParam","codecPayloadType","rtx","fec","mechanism","bandwidth","maxBitrate","writeSessionBoilerplate","writeMediaSection","transceiver","iceGatherer","getLocalParameters","dtlsTransport","mid","rtpSender","rtpReceiver","msid","sendEncodingParameters","getDirection","RTCIceGatherer","_eventTarget","createDocumentFragment","onicecandidate","onaddstream","ontrack","onremovestream","onsignalingstatechange","oniceconnectionstatechange","onnegotiationneeded","ondatachannel","localStreams","remoteStreams","getLocalStreams","getRemoteStreams","localDescription","remoteDescription","signalingState","iceConnectionState","iceGatheringState","iceOptions","gatherPolicy","iceServers","server","urls","url","transceivers","_localIceCandidatesBuffer","_emitBufferedCandidates","sections","sdpMLineIndex","every","state","addStream","clone","_maybeFireNegotiationNeeded","removeStream","idx","_getCommonCapabilities","localCapabilities","remoteCapabilities","commonCapabilities","lCodec","rCodec","lHeaderExtension","rHeaderExtension","_createIceAndDtlsTransports","iceTransport","RTCIceTransport","onlocalcandidate","evt","sdpMid","cand","end","complete","onicestatechange","_updateConnectionState","RTCDtlsTransport","ondtlsstatechange","onerror","_transceive","send","recv","encodings","cname","recvEncodingParameters","receive","setLocalDescription","_pendingOffer","remoteIceParameters","start","remoteDtlsParameters","_updateSignalingState","hasCallback","setRemoteDescription","MediaStream","receiverList","direction","remoteSsrc","isComplete","cands","setRemoteCandidates","addTrack","transports","RTCRtpReceiver","getCapabilities","localtrack","RTCRtpSender","trackEvent","close","stop","newState","states","closed","connecting","checking","connected","failed","disconnected","new","createOffer","offerOptions","tracks","numAudioTracks","numVideoTracks","getAudioTracks","getVideoTracks","offerToReceiveAudio","offerToReceiveVideo","wantReceive","createAnswer","addIceCandidate","mLineIndex","addRemoteCandidate","results","res","mozSrcObject","newIceServers","newServer","username","credential","mozRTCPeerConnection","mozRTCSessionDescription","mozRTCIceCandidate","constraintsToFF37_","mozGetUserMedia","orgEnumerateDevices","logDisabled_","utils","bool","uastring","expr","pos","detectBrowser","userAgent","minVersion","Connection","Client","address","_address","_options","createConnection","open","Helpers","TTransactionGateway","JanusError","Transaction","WebsocketConnection","Session","JanusMessage","super_","_id","_sessions","_websocketConnection","_installWebsocketListeners","extend","processIncomeMessage","catch","getId","getAddress","getOptions","return","isOpened","getSessionList","session","cleanup","createSession","sendSync","janus","hasSession","sessionId","getSession","isClosed","addSession","removeSession","token","apisecret","generateRandomId","processOutcomeMessage","_onCreate","incomeMessage","try","defaultProcessIncomeMessage","outcomeMessage","addTransaction","janusMessage","janusError","getError","destination","source","ctor","superCtor","Plugin","MediaPlugin","AudiobridgePlugin","AudioroomPlugin","StreamingPlugin","RtpbroadcastPlugin","plainMessage","_plainMessage","getPlainMessage","JanusPluginMessage","plugin","_plugin","getPluginData","unshift","getResultText","getResponseAlias","_session","_name","_detach","_types","aClass","register","getName","detach","sendWithTransaction","_onDetached","transactionId","transaction","sendPromise","Timer","connection","_connection","_plugins","_startKeepAlive","_destroy","_keepAliveTimer","reset","attachPlugin","destroy","hasPlugin","pluginId","getPlugin","getPluginList","addPlugin","removePlugin","_onAttach","_onDestroy","_onTimeout","_stopKeepAlive","finally","_isNaturalNumber","isNaN","parseFloat","keepAlive","_keepAlivePeriod","_ms","_timeoutId","Transactions","getTransactions","_transactions","add","find","hasTransaction","executeTransaction","execute","timeoutPeriod","timeoutRejection","_isExecuted","list","_find","remove","MediaEntityPlugin","MediaAudioPlugin","_join","body","request","setCurrentEntity","leave","resetCurrentEntity","_change","_connect","hasCurrentEntity","_list","jsep","offerStream","configureOptions","createPeerConnection","sendSDP","setRemoteSDP","_listParticipants","webrtc","MediaDevicesShim","getSharedScreen","location","_getSharedScreenChrome","_getSharedScreenFirefox","chromever","maxver","googLeakyBucket","maxWidth","screen","width","maxHeight","height","maxFrameRate","chromeMediaSource","timeoutRejectId","messageListener","origin","sourceId","googTemporalLayeredScreencast","chromeMediaSourceId","postMessage","mozMediaSource","mediaSource","lastStreamTime","currentTime","inderval","setInterval","clearInterval","onended","_currentEntityId","_create","_onHangup","webrtcsupport","_pcListeners","_pc","PeerConnection","_addPcEventListeners","getPeerConnection","hangup","_createSDP","SessionDescription","party","_onTrickle","IceCandidate","closePeerConnection","_stopLocalMedia","_removePcEventListener","_addPcEventListener","MediaStreamPlugin","_watch","watchOptions","answerOptions","_offerAnswer","_start","_stop","_pause","_switch","connect","NAME","roomId","room","change","listParticipants","watch","watchUDP","pause","switch","switchSource","superuser","enabled","mountpointId","enable","disable","recording","WebSocket","webSocket","_webSocket","_onOpen","onclose","onopen","readyState","_installW3cListeners","_installNodeListeners","onmessage","parsedMessage","onMessage","_close","OPEN","CLOSED","CLOSING","terminate","_send","CONNECTING","getDescription","getMediaSections","ufrag","parseIceOptions","channels","parseSsrcGroup","semantics","getMid","parseFingerprint","parseCryptoLine","tag","cryptoSuite","keyParams","sessionParams","writeCryptoLine","writeCryptoKeyParams","parseCryptoKeyParams","keyMethod","keySalt","lifeTime","mkiValue","mkiLength","getCryptoParameters","pwd","iceLite","profile","wildcardRtcpFb","existingFeedback","maxptime","extension","parseRtcpParameters","rtcpParameters","rsize","reducedSize","compound","mux","writeRtcpParameters","parseMsid","spec","planB","msidParts","parseSctpDescription","maxMessageSize","parseMLine","maxSizeLine","sctpPort","fmt","sctpMapLines","writeSctpDescription","media","sctp","output","generateSessionId","sessId","sessVer","sessUser","getKind","parseOLine","sessionVersion","netType","addressType","isValidSDP","deprecationWarnings_","wrapPeerConnectionEvent","eventNameToWrap","wrapper","nativeAddEventListener","nativeEventName","wrappedCallback","modifiedEvent","handleEvent","_eventMap","nativeRemoveEventListener","unwrappedCb","delete","disableWarnings","oldMethod","newMethod","compactObject","accumulator","isObj","isEmptyObject","assign","_defineProperty","walkStats","stats","resultSet","endsWith","filterStats","outbound","streamStatsType","filteredResult","trackStats","trackIdentifier","trackStat","trackId","shimConstraints_","func","remap","face","facingMode","getSupportedFacingModeLies","getSupportedConstraints","dev","includes","shimError_","PermissionDeniedError","PermissionDismissedError","InvalidStateError","DevicesNotFoundError","ConstraintNotSatisfiedError","TrackStartError","MediaDeviceFailedDueToShutdown","MediaDeviceKillSwitchOn","TabCaptureError","ScreenCaptureError","DeviceCaptureError","constraint","constraintName","cs","DOMException","shimMediaStream","webkitMediaStream","origSetRemoteDescription","_this","getReceivers","shimGetSendersWithDtmf","shimSenderWithDtmf","dtmf","_dtmf","createDTMFSender","getSenders","_senders","origAddTrack","origRemoveTrack","removeTrack","origAddStream","_this2","origRemoveStream","_this3","origGetSenders","_this4","senders","shimSenderReceiverGetStats","_this5","origGetReceivers","_this6","receivers","srcElement","shimAddTrackRemoveTrackWithNative","_this7","_shimmedLocalStreams","streamId","_this8","existingSenders","newSenders","newSender","_this9","shimAddTrackRemoveTrack","origGetLocalStreams","_this10","nativeStreams","_reverseStreams","_this11","_streams","newStream","_this12","oldStream","methodObj","_this13","replaceInternalStreamId","origSetLocalDescription","internalId","externalStream","internalStream","replaceExternalStreamId","origLocalDescription","_this14","streamid","fixNegotiationNeeded","getConfiguration","sdpSemantics","nativeGetUserMedia","getSettings","nativeGetSettings","applyConstraints","nativeApplyConstraints","shimGetDisplayMedia","preferredMediaSource","getDisplayMedia","RTCTrackEvent","modernStatsTypes","inboundrtp","outboundrtp","candidatepair","localcandidate","remotecandidate","nativeGetStats","_arguments","onSucc","onErr","shimSenderGetStats","shimReceiverGetStats","shimRemoveStream","shimRTCDataChannel","DataChannel","RTCDataChannel","shimAddTransceiver","origAddTransceiver","addTransceiver","setParametersPromises","sendEncodings","shouldPerformCheck","_toConsumableArray","encodingParam","rid","scaleResolutionDownBy","maxFramerate","getParameters","setParameters","shimGetParameters","origGetParameters","shimCreateOffer","origCreateOffer","_arguments2","shimCreateAnswer","origCreateAnswer","_arguments3","shimLocalStreamsAPI","_localStreams","_addTrack","_len","_key","shimRemoteStreamsAPI","_remoteStreams","_onaddstream","_onaddstreampoly","shimCallbacksAPI","failureCallback","withCallback","_getUserMedia","shimConstraints","errcb","shimRTCIceServerUrls","OrigPeerConnection","shimTrackEventTransceiver","shimCreateOfferLegacy","audioTransceiver","getTransceivers","setDirection","videoTransceiver","shimAudioContext","AudioContext","webkitAudioContext","shimRTCIceCandidate","NativeRTCIceCandidate","nativeCandidate","parsedCandidate","shimRTCIceCandidateRelayProtocol","relayProtocol","shimMaxMessageSize","_sctp","mLine","sctpInDescription","isFirefox","getRemoteFirefoxVersion","canSendMMS","remoteIsFirefox","canSendMaxMessageSize","getCanSendMaxMessageSize","remoteMMS","getMaxMessageSize","POSITIVE_INFINITY","shimSendThrowTypeError","origCreateDataChannel","createDataChannel","dataChannel","wrapDcSend","channel","dc","origDataChannelSend","byteLength","shimConnectionState","_onconnectionstatechange","origMethod","_connectionstatechangepoly","_lastConnectionState","connectionState","newEvent","removeExtmapAllowMixed","nativeSRD","shimAddIceCandidateNullOrEmpty","nativeAddIceCandidate","shimParameterlessSetLocalDescription","nativeSetLocalDescription","shimChrome","shimFirefox","shimSafari","userAgentData","brands","chromium","brand","isSecureContext","supportsUnifiedPlan","RTCRtpTransceiver","commonShim","adapterFactory","PC","screenSharing","videoEl","supportVp8","canPlayType","msGetUserMedia","browserVersion","support","supportRTCPeerConnection","supportGetUserMedia","supportDataChannel","supportWebAudio","createMediaStreamSource","supportMediaStream","supportScreenSharing","_globalThis","NativeWebSocket","MozWebSocket","websocket_version","W3CWebSocket","protocols","asyncGeneratorStep","_asyncToGenerator","_next","_throw","_regeneratorRuntime","asyncIterator","wrap","Generator","makeInvokeMethod","h","y","GeneratorFunction","GeneratorFunctionPrototype","g","defineIteratorMethods","_invoke","AsyncIterator","__await","callInvokeWithMethodAndArg","delegate","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","resultName","nextLoc","pushTryEntry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","displayName","isGeneratorFunction","mark","setPrototypeOf","__proto__","awrap","reverse","rval","finish","delegateYield","DefaultContext","className","style","attr","IconContext","React","_excluded","_objectWithoutProperties","excluded","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","_extends","ownKeys","_objectSpread","getOwnPropertyDescriptors","defineProperties","toPrimitive","_toPrimitive","_toPropertyKey","Tree2Element","GenIcon","IconBase","elem","svgProps","computedSize","stroke","fill","strokeWidth","xmlns","children","Consumer"],"sourceRoot":""}