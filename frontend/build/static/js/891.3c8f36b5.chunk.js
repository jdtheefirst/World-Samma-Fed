"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[891],{97891:function(e,t,o){o.r(t);var r=o(90675),n=o(10467),s=o(5544),i=o(65043),a=o(93748),l=o(30834),d=o(3952),c=o(17118),u=o(85522),p=o(93461),f=o(24776),h=o(17921),g=o(69699),m=o(38028),b=o(48024),x=o(79722),j=o(73216),v=o(70579);t.default=function(e){var t=e.user,o=(0,i.useState)(null),y=(0,s.A)(o,2),w=y[0],k=y[1],A=(0,i.useState)(null),S=(0,s.A)(A,2),C=S[0],P=S[1],E=(0,i.useState)(!1),W=(0,s.A)(E,2),_=W[0],z=W[1],U=(0,i.useState)(!1),D=(0,s.A)(U,2),F=D[0],I=D[1],J=(0,i.useState)(""),M=(0,s.A)(J,2),N=M[0],O=M[1],V=(0,i.useState)(""),Y=(0,s.A)(V,2),B=Y[0],T=Y[1],Z=(0,a.d)(),$=(0,j.g)().title,q=(0,j.Zp)(),G=(0,i.useCallback)((0,n.A)((0,r.A)().mark((function e(){var o,n;return(0,r.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return q("/dashboard"),e.abrupt("return");case 3:return e.prev=3,o={headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(t.token)}},e.next=7,x.A.post("/api/submit/".concat(t._id),{savePhoto:B,saveVideo:N},o);case 7:n=e.sent,n.data,q("/dashboard"),Z({title:"Submission successful!",description:"Wait for your results under 24hrs",status:"success",duration:5e3,isClosable:!0,position:"bottom"}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(3),console.log(e.t0),Z({title:"Error occurred trying to send your work!",status:"error",duration:5e3,isClosable:!0,position:"bottom"});case 17:case"end":return e.stop()}}),e,null,[[3,13]])}))),[Z,q,t,B,B]);(0,i.useEffect)((function(){B&&N&&G()}),[B,N]);return(0,v.jsxs)(l.T,{align:"center",justify:"center",width:"100%",background:"white",p:2,children:[(0,v.jsx)(b.A,{}),(0,v.jsx)(d.E,{fontSize:"sm",fontWeight:500,bg:(0,c.dU)("green.50","green.900"),p:2,px:3,color:"green.500",rounded:"full",margin:1,width:{base:"90%",md:"60%"},children:$}),(0,v.jsx)(d.E,{textAlign:"center",fontSize:"large",fontWeight:"bold",children:"Submit your work for grading(*Passport picture as proof of identity)"}),(0,v.jsxs)(u.az,{width:{base:"100%",md:"50%"},children:[" ",(0,v.jsxs)(p.MJ,{isInvalid:!w,children:[(0,v.jsx)(f.l,{children:"Video"}),(0,v.jsx)(h.p,{type:"file",accept:"video/*",onChange:function(e){k(e.target.files[0])}}),_&&(0,v.jsx)("p",{children:"Uploading video..."}),(0,v.jsx)(g.Wt,{children:"Please select a video file."})]}),(0,v.jsxs)(p.MJ,{isInvalid:!C,children:[(0,v.jsx)(f.l,{children:"Passport Photo"}),(0,v.jsx)(h.p,{type:"file",accept:"image/*",onChange:function(e){P(e.target.files[0])}}),F&&(0,v.jsx)("p",{children:"Uploading passport photo..."}),(0,v.jsx)(g.Wt,{children:"Please select a passport photo."})]}),(0,v.jsx)(m.$,{colorScheme:"teal",onClick:function(){if(w)if(C){if(w){z(!0);var e=new FormData;e.append("file",w),e.append("upload_preset","worldsamma"),fetch("https://api.cloudinary.com/v1_1/dsdlgmgwi/video/upload",{method:"post",body:e}).then((function(e){return e.json()})).then((function(e){O(e.url),z(!1)})).catch((function(e){z(!1),Z({title:"Error Occurred uploading your video.",description:"Please try again later.",duration:5e3,status:"error"})}))}if(C){I(!0);var t=new FormData;t.append("file",C),t.append("upload_preset","worldsamma"),fetch("https://api.cloudinary.com/v1_1/dsdlgmgwi/image/upload",{method:"post",body:t}).then((function(e){return e.json()})).then((function(e){T(e.url),I(!1)})).catch((function(e){I(!1),Z({title:"Error Occurred uploading your passport photo.",description:"Please try again later.",duration:5e3,status:"error"})}))}}else Z({title:"Your passport photo please.",description:"No file selected.",status:"info",duration:5e3});else Z({title:"Your recorded video please.",description:"No file selected.",status:"info",duration:5e3})},children:"Submit"})]})]})}}}]);
//# sourceMappingURL=891.3c8f36b5.chunk.js.map