{"version":3,"file":"static/js/432.e1333f14.chunk.js","mappings":"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","sources":["components/ErrorBoundary.js","components/config/axios.js","components/config/chatlogics.js","components/config/formatTime.js","miscellenious/Progress.js","miscellenious/Payments.js","miscellenious/Myprograms.js","miscellenious/Message.js","miscellenious/ScrollableChat.js","miscellenious/FloatingChat.js","pages/Dashboard.js"],"sourcesContent":["import { Box, Link, Text } from \"@chakra-ui/react\";\r\nimport React from \"react\";\r\n\r\nclass ErrorBoundary extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { hasError: false };\r\n  }\r\n\r\n  static getDerivedStateFromError(error) {\r\n    return { hasError: true };\r\n  }\r\n\r\n  componentDidCatch(error, info) {\r\n    console.error(error, info);\r\n  }\r\n\r\n  render() {\r\n    if (this.state.hasError) {\r\n      return (\r\n        <Box\r\n          display={\"flex\"}\r\n          justifyContent=\"center\"\r\n          alignItems=\"center\"\r\n          background={\"whitesmoke\"}\r\n          width={\"100%\"}\r\n          height={\"100%\"}\r\n        >\r\n          {\" \"}\r\n          <Box\r\n            display={\"flex\"}\r\n            flexDirection={\"column\"}\r\n            justifyContent={\"center\"}\r\n            alignItems={\"center\"}\r\n          >\r\n            {\" \"}\r\n            <Text fontSize={\"2xl\"}>An error occurred. Please </Text>\r\n            <Link color=\"teal.500\" href=\"/dashboard\">\r\n              Go Back...\r\n            </Link>\r\n          </Box>\r\n        </Box>\r\n      );\r\n    }\r\n\r\n    return this.props.children;\r\n  }\r\n}\r\nexport default ErrorBoundary;\r\n","import axios from \"axios\";\r\n\r\nconst axiosInstance = axios.create();\r\naxiosInstance.interceptors.response.use(\r\n  async (response) => {\r\n    return response;\r\n  },\r\n  (error) => {\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\nexport default axiosInstance;\r\n","import axios from \"axios\";\r\nimport { useEffect, useRef, useState } from \"react\";\r\nimport { io } from \"socket.io-client\";\r\nimport { z } from \"zod\";\r\n\r\nexport const cn = (...inputs) => {\r\n  return twMerge(clsx(inputs));\r\n};\r\n\r\nexport const UserFormValidation = z.object({\r\n  name: z\r\n    .string()\r\n    .min(2, \"Name must be at least 2 characters\")\r\n    .max(50, \"Name must be at most 50 characters\"),\r\n  otherName: z\r\n    .string()\r\n    .min(2, \"Other name must be at least 2 characters\")\r\n    .max(50, \"Other name must be at most 50 characters\"),\r\n  email: z.string().email(\"Invalid email address\"),\r\n  gender: z.enum([\"male\", \"female\", \"other\"]),\r\n  password: z\r\n    .string()\r\n    .min(4, \"Password must be at least 8 characters long\")\r\n    .max(100, \"Password must be at most 100 characters\"),\r\n  confirmPassword: z\r\n    .string()\r\n    .min(4, \"Confirm password must be at least 8 characters long\")\r\n    .max(100, \"Confirm password must be at most 100 characters\")\r\n    .refine((val, ctx) => val === ctx.parent.password, {\r\n      message: \"Passwords do not match\",\r\n    }),\r\n  passport: z.string().regex(/^\\d{8,15}$/, \"Invalid passport/ID number\"),\r\n  selectedCountry: z.string().min(2, \"Country is required\"),\r\n  provinces: z.string().optional(),\r\n  language: z.string().min(2, \"Language is required\"),\r\n  pic: z.string().url(\"Profile picture is required\"),\r\n});\r\n\r\nexport const isSameSenderMargin = (messages, m, i, userId) => {\r\n  const isCurrentUserSender = m.sender?.$oid === userId;\r\n\r\n  if (\r\n    i < messages.length - 1 &&\r\n    messages[i + 1].sender?.$oid === m.sender?.$oid &&\r\n    !isCurrentUserSender\r\n  ) {\r\n    return 33;\r\n  } else if (\r\n    (i < messages.length - 1 &&\r\n      messages[i + 1].sender?.$oid !== m.sender?.$oid &&\r\n      !isCurrentUserSender) ||\r\n    (i === messages.length - 1 && !isCurrentUserSender)\r\n  ) {\r\n    return 0;\r\n  } else {\r\n    return \"auto\";\r\n  }\r\n};\r\n\r\nexport const isSameSender = (messages, m, i, userId) => {\r\n  return (\r\n    i < messages.length - 1 &&\r\n    (messages[i + 1]?.sender?._id !== m.sender?._id ||\r\n      messages[i + 1]?.sender?._id === undefined) &&\r\n    messages[i]?.sender?._id !== userId\r\n  );\r\n};\r\n\r\nexport const isLastMessage = (messages, i, userId) => {\r\n  const lastMessageSenderId = messages[messages.length - 1].sender?.$oid;\r\n  return (\r\n    i === messages.length - 1 &&\r\n    lastMessageSenderId !== userId &&\r\n    lastMessageSenderId\r\n  );\r\n};\r\n\r\nexport const isSameUser = (messages, m, i) => {\r\n  return i > 0 && messages[i - 1].sender?.$oid === m.sender?.$oid;\r\n};\r\n\r\nexport const getSenderName = (loggedUser, users) => {\r\n  return users[0]._id === loggedUser._id ? users[1].name : users[0].name;\r\n};\r\nexport const getSenderId = (loggedUser, users) => {\r\n  return users[0]._id === loggedUser._id ? users[1]._id : users[0]._id;\r\n};\r\n\r\nexport const getSenderFull = (loggedUser, user) => {\r\n  return user[0]._id === loggedUser._id ? user[1] : user[0];\r\n};\r\n\r\nexport async function getUserById(userId, token) {\r\n  if (!userId && !token) {\r\n    return;\r\n  }\r\n  try {\r\n    const config = {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n    };\r\n    const { data } = await axios.get(`/api/user/getuserid/${userId}`, config);\r\n    return data;\r\n  } catch (error) {\r\n    console.error(error);\r\n    throw error;\r\n  }\r\n}\r\n\r\nexport function useConnectSocket(user) {\r\n  const [socket, setSocket] = useState(null);\r\n  const socketRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    if (!user || !user.token) {\r\n      return;\r\n    }\r\n\r\n    // Check if the socket already exists\r\n    if (socketRef.current) {\r\n      setSocket(socketRef.current);\r\n      return;\r\n    }\r\n\r\n    const userId = user._id;\r\n    const newSocket = io(\"/\", {\r\n      query: { token: user.token, userId },\r\n    });\r\n\r\n    newSocket.on(\"connect\", () => {\r\n      console.log(\"connected\");\r\n      setSocket(newSocket); // Set socket state after connection\r\n    });\r\n\r\n    newSocket.on(\"disconnect\", (reason) => {\r\n      console.log(\"Socket.IO disconnected due to:\", reason);\r\n      if (reason === \"io server disconnect\") {\r\n        // Handle server-side disconnections\r\n        newSocket.connect();\r\n      }\r\n    });\r\n\r\n    newSocket.on(\"reconnect_attempt\", (attemptNumber) => {\r\n      console.log(`Reconnection attempt ${attemptNumber}`);\r\n    });\r\n\r\n    newSocket.on(\"error\", (error) => {\r\n      console.error(\"Socket.IO error:\", error);\r\n    });\r\n\r\n    // Update socketRef with the new socket instance\r\n    socketRef.current = newSocket;\r\n\r\n    // Clean up function to disconnect socket when the component unmounts\r\n    return () => {\r\n      if (newSocket) {\r\n        newSocket.disconnect();\r\n      }\r\n      socketRef.current = null;\r\n    };\r\n  }, [user]); // Only rerun if user changes\r\n\r\n  return socket;\r\n}\r\n\r\nexport async function makePaymentMpesa(amount, phoneNumber, user, toast) {\r\n  if (!phoneNumber) {\r\n    return;\r\n  }\r\n  try {\r\n    const config = {\r\n      headers: {\r\n        \"Content-type\": \"application/json\",\r\n        Authorization: `Bearer ${user.token}`,\r\n      },\r\n    };\r\n    const { data } = await axios.post(\r\n      `/api/paycheck/makepaymentmpesa/${user._id}?amount=${amount}`,\r\n      { phoneNumber },\r\n      config\r\n    );\r\n\r\n    if (data) {\r\n      toast({\r\n        title: \"You have been prompt to finish your subscription process\",\r\n        status: \"info\",\r\n        duration: 1000,\r\n        position: \"bottom\",\r\n      });\r\n    }\r\n  } catch (error) {}\r\n}\r\n\r\nexport async function donationsMpesa(amount, phoneNumber, toast) {\r\n  if (!phoneNumber) {\r\n    return;\r\n  }\r\n  try {\r\n    const config = {\r\n      headers: {\r\n        \"Content-type\": \"application/json\",\r\n      },\r\n    };\r\n    const { data } = await axios.post(\r\n      `/api/paycheck/donationsmpesa?amount=${amount}`,\r\n      { phoneNumber },\r\n      config\r\n    );\r\n\r\n    if (data) {\r\n      toast({\r\n        title: \"You have been prompt to finish your subscription process\",\r\n        status: \"info\",\r\n        duration: 1000,\r\n        position: \"bottom\",\r\n      });\r\n    }\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n}\r\n\r\nexport async function handleApprove(accountType, type, user, setUser) {\r\n  try {\r\n    const config = {\r\n      headers: {\r\n        Authorization: `Bearer ${user.token}`,\r\n      },\r\n    };\r\n    const { data } = await axios.put(\r\n      `/api/paycheck/${user._id}/${type}/${accountType}`,\r\n      {},\r\n      config\r\n    );\r\n\r\n    const userData = await {\r\n      ...user,\r\n      accountType: data.accountType,\r\n      subscription: data.subscription,\r\n      day: data.day,\r\n    };\r\n    localStorage.setItem(\"userInfo\", JSON.stringify(userData));\r\n    setUser(userData);\r\n  } catch (error) {\r\n    console.log(error);\r\n    throw new Error(\"Error occurred\", error);\r\n  }\r\n}\r\n","const formatMessageTime = (timestamp) => {\r\n  const messageTime = new Date(timestamp);\r\n  const currentTime = new Date();\r\n\r\n  const timeDifference = currentTime - messageTime;\r\n  const seconds = Math.floor(timeDifference / 1000);\r\n  const minutes = Math.floor(seconds / 60);\r\n  const hours = Math.floor(minutes / 60);\r\n  const days = Math.floor(hours / 24);\r\n\r\n  if (seconds < 60) {\r\n    return \"Just now\";\r\n  } else if (minutes < 60) {\r\n    return `${minutes} minute${minutes === 1 ? \"\" : \"s\"} ago`;\r\n  } else if (hours < 24) {\r\n    return `${hours} hour${hours === 1 ? \"\" : \"s\"} ago`;\r\n  } else if (days === 1) {\r\n    return \"Yesterday\";\r\n  } else if (days < 7) {\r\n    return `${days} day${days === 1 ? \"\" : \"s\"} ago`;\r\n  } else {\r\n    const options = {\r\n      hour: \"numeric\",\r\n      minute: \"numeric\",\r\n      month: \"long\",\r\n      day: \"numeric\",\r\n      year: \"numeric\",\r\n    };\r\n    return messageTime.toLocaleDateString(\"en-US\", options);\r\n  }\r\n};\r\nexport default formatMessageTime;\r\n","import { Text } from \"@chakra-ui/react\";\r\nimport styled from \"styled-components\";\r\nimport { keyframes } from \"styled-components\";\r\nimport { GiBlackBelt } from \"react-icons/gi\";\r\n\r\nconst ProgressContainer = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: flex-end;\r\n  position: relative;\r\n  width: 100%;\r\n  padding: 0;\r\n  margin: 0;\r\n`;\r\n\r\nconst ProgressSlot = styled.div`\r\n  display: flex;\r\n  width: 30%;\r\n  height: 50px;\r\n  border: none;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  flex-direction: column;\r\n  font-weight: bold;\r\n  padding: 0;\r\n  margin: 0;\r\n`;\r\nconst progressAnimation = keyframes`\r\n  from {\r\n    width: 1%; /* Adjust the initial width as needed */\r\n  }\r\n  to {\r\n    width: ${({ level }) => (level + 1.2) * 10}%;\r\n  }\r\n`;\r\n\r\nconst blinkingAnimation = keyframes`\r\n  0%, 100% {\r\n    background-color: #ed7d66; /* Slightly less green color */\r\n  }\r\n  50% {\r\n    background-color: #66d171; /* Default green color */\r\n  }\r\n`;\r\n\r\nconst ProgressArrow = styled.div`\r\n  position: absolute;\r\n  bottom: 0;\r\n  left: 0;\r\n  width: 50px;\r\n  height: 14px;\r\n  background-color: #66d171;\r\n  border-radius: 20px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: flex-end;\r\n  margin: 0;\r\n  padding: 0;\r\n  width: ${({ level }) => (level + 1) * 10}%;\r\n  animation: ${progressAnimation} 2s ease-in-out,\r\n    ${blinkingAnimation} 3s ease-in-out infinite;\r\n`;\r\n\r\nconst Progress = ({ userBelt }) => {\r\n  const progressLevels = [\r\n    \"Guest\",\r\n    `grey`,\r\n    `#baba30`,\r\n    `orange`,\r\n    `red`,\r\n    `purple`,\r\n    `green`,\r\n    `blue`,\r\n    `brown`,\r\n    `black`,\r\n  ];\r\n  const progress = [\r\n    \"Guest\" || undefined,\r\n    \"Beginner\",\r\n    \"Yellow\",\r\n    \"Orange\",\r\n    \"Red\",\r\n    \"Purple\",\r\n    \"Green\",\r\n    \"Blue\",\r\n    \"Brown\",\r\n    \"Black\",\r\n  ];\r\n\r\n  const level = progress.indexOf(userBelt);\r\n\r\n  return (\r\n    <ProgressContainer>\r\n      {progressLevels.map((belt, index) => (\r\n        <ProgressSlot key={index}>\r\n          <Text\r\n            marginTop={-3}\r\n            fontWeight={{ base: \"sm\", md: \"md\" }}\r\n            fontSize={{ base: \"10px\", md: \"md\" }}\r\n            textAlign=\"center\"\r\n          >\r\n            {index > 0 ? (\r\n              <GiBlackBelt style={{ color: belt, fontSize: \"1.5rem\" }} />\r\n            ) : (\r\n              belt\r\n            )}\r\n          </Text>\r\n        </ProgressSlot>\r\n      ))}\r\n      <ProgressArrow level={level}>\r\n        {\" \"}\r\n        <Text textAlign={\"center\"} fontSize={\"small\"} p={1}>\r\n          {(level + 1) * 10}%\r\n        </Text>{\" \"}\r\n      </ProgressArrow>\r\n    </ProgressContainer>\r\n  );\r\n};\r\n\r\nexport default Progress;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport {\r\n  Box,\r\n  Text,\r\n  useColorModeValue,\r\n  useToast,\r\n  Button,\r\n  Image,\r\n  Input,\r\n  ModalContent,\r\n  ModalOverlay,\r\n  ModalHeader,\r\n  ModalCloseButton,\r\n  ModalBody,\r\n  ModalFooter,\r\n  Modal,\r\n  useDisclosure,\r\n  Divider,\r\n} from \"@chakra-ui/react\";\r\nimport { PayPalScriptProvider, PayPalButtons } from \"@paypal/react-paypal-js\";\r\nimport {\r\n  makePaymentMpesa,\r\n  useConnectSocket,\r\n} from \"../components/config/chatlogics\";\r\nimport { ChatState } from \"../components/Context/ChatProvider\";\r\nimport axios from \"axios\";\r\n\r\nexport default function Paycheck({ course }) {\r\n  const toast = useToast();\r\n  const { user, setUser } = ChatState();\r\n  const [show, setShow] = useState(false);\r\n  const [phoneNumber, setPhoneNumber] = useState(\"\");\r\n  const { isOpen, onOpen, onClose } = useDisclosure();\r\n  const socket = useConnectSocket(user?.token);\r\n\r\n  useEffect(() => {\r\n    if (!socket) return;\r\n    socket.on(\"noPayment\", (nothing) => {\r\n      toast({\r\n        title: nothing,\r\n        description: \"Subscription unsuccessful\",\r\n        status: \"info\",\r\n        duration: 5000,\r\n        position: \"bottom\",\r\n      });\r\n    });\r\n    socket.on(\"userUpdated\", async (update) => {\r\n      setUser((prev) => ({ ...prev, belt: update.belt }));\r\n\r\n      toast({\r\n        title: \"Successfully updated\",\r\n        description: `Ranked ${update.belt}`,\r\n        status: \"info\",\r\n        duration: 5000,\r\n        position: \"bottom\",\r\n      });\r\n    });\r\n\r\n    return () => {\r\n      socket.off(\"userUpdated\");\r\n      socket.off(\"noPayment\");\r\n    };\r\n  }, [setUser, toast, socket]);\r\n\r\n  const handleAfterPay = async () => {\r\n    if (!user) {\r\n      return;\r\n    }\r\n    try {\r\n      const config = {\r\n        headers: {\r\n          Authorization: `Bearer ${user.token}`,\r\n        },\r\n      };\r\n\r\n      const { data } = await axios.get(`/api/user/update`, config);\r\n      setUser((prev) => ({ ...prev, belt: data.belt }));\r\n    } catch (error) {\r\n      if (error.response && error.response.status === 400) {\r\n        toast({\r\n          title: \"Belt achieved!\",\r\n          description: error.response.data.message,\r\n          status: \"info\",\r\n          duration: 5000,\r\n          isClosable: true,\r\n          position: \"bottom\",\r\n        });\r\n      } else {\r\n        // Handle other errors\r\n        console.error(\"An error occurred:\", error);\r\n        toast({\r\n          title: \"An Error Occurred!\",\r\n          description: \"Please try again later.\",\r\n          status: \"error\",\r\n          duration: 5000,\r\n          isClosable: true,\r\n          position: \"bottom\",\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n  const checkAvailability = () => {\r\n    const userCertificatesLength = user && user.certificates.length;\r\n    const courseIndex = course.id - 1;\r\n\r\n    // Allow enrollment for the first/next course only if the user is a guest\r\n    const canEnroll =\r\n      (user && user.belt === \"Guest\" && courseIndex === 0) ||\r\n      userCertificatesLength + 1 === courseIndex + 1;\r\n\r\n    if (canEnroll) {\r\n      // Open the payment modal\r\n      onOpen();\r\n    } else if (user && user.belt === course.title) {\r\n      toast({\r\n        title: \"Currently on this course\",\r\n        description: \"You don't need to enroll in this course.\",\r\n        status: \"warning\",\r\n        duration: 5000,\r\n        isClosable: true,\r\n      });\r\n    } else {\r\n      // Display a toast message indicating unavailability\r\n      toast({\r\n        title: \"Course Unavailable\",\r\n        description:\r\n          \"You don't meet the requirements to enroll in this course.\",\r\n        status: \"warning\",\r\n        duration: 5000,\r\n        isClosable: true,\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Button\r\n        borderRadius={20}\r\n        fontSize={\"small\"}\r\n        background={\"#a432a8\"}\r\n        textColor={\"white\"}\r\n        _hover={{ color: \"black\" }}\r\n        m={1}\r\n        onClick={checkAvailability}\r\n      >\r\n        Enroll\r\n      </Button>\r\n      <Modal\r\n        size=\"lg\"\r\n        onClose={() => {\r\n          setShow(false);\r\n          onClose();\r\n        }}\r\n        isOpen={isOpen}\r\n        isCentered\r\n      >\r\n        <ModalOverlay\r\n          bg=\"blackAlpha.300\"\r\n          backdropFilter=\"blur(10px) hue-rotate(90deg)\"\r\n        />\r\n        <ModalContent\r\n          display=\"flex\"\r\n          flexDirection=\"column\"\r\n          justifyContent=\"center\"\r\n          width={\"100%\"}\r\n        >\r\n          <ModalHeader fontSize=\"40px\" fontFamily=\"Work sans\">\r\n            <Text\r\n              textAlign={\"center\"}\r\n              fontSize={\"sm\"}\r\n              fontWeight={500}\r\n              p={2}\r\n              px={3}\r\n              color={\"green.500\"}\r\n              rounded={\"full\"}\r\n            >\r\n              Elevate Your Craft: {course.title}\r\n            </Text>\r\n          </ModalHeader>\r\n          <ModalCloseButton />\r\n          <ModalBody>\r\n            <PayPalScriptProvider\r\n              options={{\r\n                clientId:\r\n                  \"AZAdYFR_SbadcgOcCLYn9ajkReJTZmOCnEeAvQ3xPYAE5BMYFBHi4vDeILfNwBO-hh-8wfyGC9lNeB1I\",\r\n              }}\r\n            >\r\n              <PayPalButtons\r\n                createOrder={(data, actions) => {\r\n                  const amount = 12.0;\r\n                  return actions.order.create({\r\n                    purchase_units: [\r\n                      {\r\n                        amount: {\r\n                          currency_code: \"USD\",\r\n                          value: amount.toFixed(2),\r\n                        },\r\n                      },\r\n                    ],\r\n                  });\r\n                }}\r\n                onApprove={async (data, actions) => {\r\n                  await handleAfterPay();\r\n                  return actions.order.capture().then(function (details) {\r\n                    toast({\r\n                      title: \"Success\",\r\n                      description: data.subscriptionID,\r\n                      status: \"info\",\r\n                      duration: 3000,\r\n                      isClosable: true,\r\n                      position: \"bottom\",\r\n                    });\r\n                  });\r\n                }}\r\n                onCancel={() => {\r\n                  toast({\r\n                    title: \"Cancelled\",\r\n                    description: \"Subscription Unsuccessful\",\r\n                    status: \"info\",\r\n                    isClosable: true,\r\n                    position: \"bottom\",\r\n                  });\r\n                }}\r\n              />\r\n            </PayPalScriptProvider>\r\n            <Button\r\n              fontSize={\"small\"}\r\n              width={\"100%\"}\r\n              bg={useColorModeValue(\"green.100\", \"green.900\")}\r\n              onClick={() => {\r\n                setShow(true);\r\n              }}\r\n              p={0}\r\n            >\r\n              <Image\r\n                height={5}\r\n                width={\"auto\"}\r\n                src={\r\n                  \"https://res.cloudinary.com/dvc7i8g1a/image/upload/v1694007922/mpesa_ppfs6p.png\"\r\n                }\r\n                alt={\"\"}\r\n                loading=\"lazy\"\r\n              />{\" \"}\r\n              Pay via Mpesa\r\n            </Button>\r\n            {show && (\r\n              <Box m={3}>\r\n                <Text\r\n                  textAlign={\"center\"}\r\n                  justifyContent={\"center\"}\r\n                  fontSize={\"2xl\"}\r\n                >\r\n                  Enter Your Mpesa Phone Number\r\n                </Text>\r\n                <Input\r\n                  fontSize={\"small\"}\r\n                  color={\"green.400\"}\r\n                  fontWeight={\"bold\"}\r\n                  placeholder=\"Enter phone number\"\r\n                  textAlign={\"center\"}\r\n                  type=\"number\"\r\n                  onChange={(e) => setPhoneNumber(e.target.value)}\r\n                  value={phoneNumber}\r\n                  minLength={10}\r\n                  maxLength={10}\r\n                />\r\n                <Divider p={2} />\r\n                <Button\r\n                  width={\"100%\"}\r\n                  onClick={() => {\r\n                    makePaymentMpesa(\"4500\", phoneNumber, user, toast);\r\n                    setShow(false);\r\n                    toast({\r\n                      title: \"Wait as message is sent\",\r\n                      status: \"loading\",\r\n                      isClosable: true,\r\n                      position: \"bottom\",\r\n                      duration: 5000,\r\n                    });\r\n                  }}\r\n                  isDisabled={phoneNumber.length !== parseInt(10)}\r\n                  colorScheme=\"green\"\r\n                >\r\n                  Proceed\r\n                </Button>\r\n                <Text textAlign={\"center\"} justifyContent={\"center\"}>\r\n                  You'll be sent a Message\r\n                </Text>\r\n              </Box>\r\n            )}\r\n          </ModalBody>\r\n          <ModalFooter display=\"flex\"> Wait as PayPal processes...</ModalFooter>\r\n        </ModalContent>\r\n      </Modal>\r\n    </>\r\n  );\r\n}\r\n","import {\r\n  Box,\r\n  Flex,\r\n  Text,\r\n  Button,\r\n  Link,\r\n  useColorModeValue,\r\n} from \"@chakra-ui/react\";\r\n\r\nimport Paycheck from \"./Payments\";\r\nimport { GiBlackBelt } from \"react-icons/gi\";\r\n\r\nconst MyPrograms = ({ courses, user }) => {\r\n  const handleDownload = (title, url) => {\r\n    const a = document.createElement(\"a\");\r\n    a.href = url;\r\n    a.download = `${title}BeltCertificate.pdf`;\r\n    a.click();\r\n  };\r\n\r\n  const progressLevels = [\r\n    `#baba30`,\r\n    `orange`,\r\n    `red`,\r\n    `purple`,\r\n    `green`,\r\n    `blue`,\r\n    `brown`,\r\n    `black`,\r\n  ];\r\n  return (\r\n    <Box \r\n      display={\"flex\"}\r\n      flexDir={\"column\"}\r\n      alignItems={\"center\"}\r\n      justifyContent={\"center\"}\r\n      width=\"100%\"\r\n      p={4}\r\n      backgroundColor={\"white\"}\r\n    >\r\n      <Text fontSize=\"20px\" fontWeight=\"medium\">\r\n        My Programs\r\n      </Text>\r\n      {courses.map((course, index) => (\r\n        <Flex\r\n          key={course.id}\r\n          display={\"flex\"}\r\n          alignItems=\"center\"\r\n          justifyContent=\"space-between\"\r\n          m={4}\r\n          p={{ base: \"1\", md: \"4\" }}\r\n          width={{ base: \"90%\", md: \"70%\" }}\r\n          border={\"1px\"}\r\n          borderRadius={5}\r\n        >\r\n          <Box>\r\n            <Box fontSize={\"larger\"} fontWeight={\"medium\"}>\r\n              <Text>{course.title}</Text>\r\n              <GiBlackBelt\r\n                style={{ color: progressLevels[index], fontSize: \"3rem\" }}\r\n              />\r\n            </Box>\r\n            {course.title === user?.belt && (\r\n              <Link\r\n                href={`/courses/${course.id}`}\r\n                style={{ textDecoration: \"none\", color: \"inherit\" }}\r\n                p={0}\r\n                m={0}\r\n              >\r\n                Continue\r\n              </Link>\r\n            )}\r\n          </Box>\r\n\r\n          {user && user.certificates && user.certificates[index] ? (\r\n            <Button\r\n              onClick={handleDownload(course.title, user.certificates[index])}\r\n              borderRadius={20}\r\n              fontSize={\"small\"}\r\n              border={\"none\"}\r\n            >\r\n              Download Certificate\r\n            </Button>\r\n          ) : (\r\n            <Box\r\n              display={\"flex\"}\r\n              flexDir={\"column\"}\r\n              justifyContent={\"space-between\"}\r\n              alignItems={\"center\"}\r\n            >\r\n              <Paycheck course={course} />\r\n              <Text\r\n                fontSize={\"sm\"}\r\n                fontWeight={400}\r\n                bg={useColorModeValue(\"green.50\", \"green.900\")}\r\n                p={3}\r\n                px={3}\r\n                color={\"green.500\"}\r\n                rounded={\"full\"}\r\n              >\r\n                $12.00 only\r\n              </Text>\r\n            </Box>\r\n          )}\r\n        </Flex>\r\n      ))}\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default MyPrograms;\r\n","// Message.js\r\nimport React from \"react\";\r\nimport { ChatState } from \"../components/Context/ChatProvider\";\r\nimport { Box, Text } from \"@chakra-ui/react\";\r\nimport formatMessageTime from \"../components/config/formatTime\";\r\nimport { BsSendCheck } from \"react-icons/bs\";\r\nimport { LuBadgeCheck } from \"react-icons/lu\";\r\n\r\nfunction Message({ m }) {\r\n  const { user, setSelectedChat, setSend } = ChatState();\r\n  const adminId = \"6693a995f6295b8bd90d9301\"; \r\n  const userId = user?._id;\r\n  const handleClick = () => {\r\n    if (m.sender?._id !== userId) {\r\n      setSelectedChat(m.sender?._id);\r\n      setSend(m.sender?.name);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Box\r\n        display={\"flex\"}\r\n        flexDir={\"column\"}\r\n        position={\"relative\"}\r\n        fontSize={\"small\"}\r\n        onClick={handleClick}\r\n      >\r\n        <Box fontSize={\"smaller\"} textDecor={\"underline\"} textAlign={\"end\"}>\r\n        {m.sender?._id === adminId && userId !== adminId && <Box display={\"flex\"} justifyContent={\"flex-end\"} alignItems={\"center\"} width={\"100%\"}>From:{'\\u00A0'}<Box display={\"flex\"}><Text fontSize={\"bold\"}>WSF</Text><LuBadgeCheck style={{color: \"blue\"}} /></Box></Box>}\r\n        {m.sender?._id === userId && m.recipient?._id === adminId && <Box display={\"flex\"} >Sent to{'\\u00A0'}WSF<LuBadgeCheck style={{color: \"blue\"}} /></Box>}\r\n        {m.sender?._id !== adminId && <Text >From{'\\u00A0'}{m.sender?.name}</Text>}\r\n        {m.sender?._id === adminId && <Text >Sent to{'\\u00A0'}{m.recipient?.name}</Text>}\r\n        </Box>\r\n\r\n        {m.content}\r\n\r\n        <Text display={\"flex\"} textAlign=\"right\" m={0} p={0} fontSize={\"2xs\"}>\r\n          {m.sender?._id === user._id ? (\r\n            <BsSendCheck />\r\n          ) : (\r\n            \"\"\r\n          )}\r\n          {formatMessageTime(m.createdAt)}\r\n        </Text>\r\n      </Box>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Message;\r\n","import React from \"react\";\r\nimport { Box } from \"@chakra-ui/react\";\r\nimport { ChatState } from \"../components/Context/ChatProvider\";\r\nimport Message from \"./Message\";\r\n\r\nconst ScrollableChat = ({ messages }) => {\r\n  const { user } = ChatState();\r\n  return (\r\n    <div style={{ width: '100%', height: '90%', overflowY: 'auto' }}>\r\n      <Box \r\n        display=\"flex\" \r\n        justifyContent=\"start\" \r\n        alignItems=\"center\" \r\n        flexDir=\"column\" \r\n        background=\"white\"  \r\n        minH={\"100vh\"}\r\n        p={4} \r\n        mb={\"10\"}\r\n        width=\"100%\"\r\n      >\r\n        {messages.map((m, index) => {\r\n          if (!m && !user) {\r\n            return null;\r\n          }\r\n\r\n          const isUserMessage = m.sender?._id === user._id;\r\n\r\n          return (\r\n            <Box\r\n              bg={isUserMessage ? \"#BEE3F8\" : \"#B9F5D0\"}\r\n              borderRadius=\"20px\"\r\n              p=\"5px 15px\"\r\n              mb={\"2\"}\r\n              maxW=\"75%\"\r\n              alignSelf={isUserMessage ? \"flex-end\" : \"flex-start\"}\r\n              key={index}\r\n            >\r\n              <Message m={m} />\r\n            </Box>\r\n          );\r\n        })}\r\n      </Box>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ScrollableChat;\r\n","import React, { useEffect, useState, useCallback } from \"react\";\r\nimport {\r\n  Box,\r\n  Input,\r\n  Button,\r\n  Text,\r\n  useToast,\r\n  IconButton,\r\n  Spinner,\r\n} from \"@chakra-ui/react\";\r\nimport ScrollableChat from \"./ScrollableChat\";\r\nimport { ChatState } from \"../components/Context/ChatProvider\";\r\nimport axios from \"axios\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useConnectSocket } from \"../components/config/chatlogics\";\r\nimport { IoIosSend } from \"react-icons/io\";\r\n\r\nconst FloatingChat = ({ onClose }) => {\r\n  const toast = useToast();\r\n  const [newMessage, setNewMessage] = useState(\"\");\r\n  const [chatOptions, setChatOptions] = useState([\r\n    \"WSF\",\r\n    \"Coach\",\r\n    \"Provincial Coach\",\r\n    \"National Coach\",\r\n  ]);\r\n  const [selectedChatOption, setSelectedChatOption] = useState(null);\r\n  const [sender, setSender] = useState(null);\r\n  const [loading, setLoading] = useState();\r\n  const [rank, setRank] = useState(false);\r\n  const [sending, setSending] = useState(false);\r\n  const {\r\n    user,\r\n    selectedChat,\r\n    setSelectedChat,\r\n    send,\r\n    setSend,\r\n    messages,\r\n    setMessages,\r\n    national,\r\n    province,\r\n  } = ChatState();\r\n  const navigate = useNavigate();\r\n  const adminId = \"6693a995f6295b8bd90d9301\";\r\n  const socket = useConnectSocket(user?.token);\r\n\r\n  useEffect(() => {\r\n    if (\r\n      user?._id === adminId ||\r\n      user?.coach ||\r\n      province?.provincialCoach._id === user?._id ||\r\n      national?.nationalCoach._id === user?._id\r\n    ) {\r\n      setRank(true);\r\n    }\r\n  }, [user, national, province, setRank]);\r\n\r\n  useEffect(() => {\r\n    if (user.provinces === undefined) {\r\n      setChatOptions((prevOptions) =>\r\n        prevOptions.filter((option) => option !== \"Provincial Coach\")\r\n      );\r\n    }\r\n  }, [user.provinces]);\r\n\r\n  useEffect(() => {\r\n    if (selectedChatOption === \"Coach\" && !user?.physicalCoach) {\r\n      navigate(\"/clubs\");\r\n      toast({\r\n        title: \"You've not joined a Club\",\r\n        description: \"Join a club or make one as you'd please\",\r\n        status: \"info\",\r\n        duration: 5000,\r\n        position: \"bottom-left\",\r\n      });\r\n      setSelectedChatOption(null)\r\n      return;\r\n    } else if (selectedChatOption === \"Provincial Coach\" && !province) {\r\n      setSelectedChatOption(null)\r\n      navigate(\"/province\");\r\n      toast({\r\n        title: \"Provincial Samma Association seat is empty!\",\r\n        description: \"Apply for Interim\",\r\n        status: \"info\",\r\n        duration: 5000,\r\n        position: \"bottom-left\",\r\n      });\r\n      return\r\n    } else if (selectedChatOption === \"National Coach\" && !national) {\r\n      setSelectedChatOption(null)\r\n      navigate(\"/national\");\r\n      toast({\r\n        title: \"National Samma Association seat is empty!\",\r\n        description: \"Apply for Interim\",\r\n        status: \"info\",\r\n        duration: 5000,\r\n        position: \"bottom-left\",\r\n      });\r\n      return;\r\n    }\r\n  }, [selectedChatOption, navigate, user, national, province, toast]);\r\n\r\n  const fetchMessages = useCallback(async () => {\r\n    if (!user) return;\r\n\r\n    try {\r\n      const config = {\r\n        headers: {\r\n          Authorization: `Bearer ${user.token}`,\r\n        },\r\n      };\r\n\r\n      setLoading(true);\r\n\r\n      const { data } = await axios.get(`/api/message/${user._id}`, config);\r\n\r\n      setMessages(data);\r\n\r\n      setLoading(false);\r\n    } catch (error) {\r\n      console.log(error);\r\n\r\n      setLoading(false);\r\n      toast({\r\n        title: \"Error Occured!\",\r\n        description: \"Failed to Load the Messages\",\r\n        status: \"error\",\r\n        duration: 5000,\r\n        isClosable: true,\r\n        position: \"bottom\",\r\n      });\r\n    }\r\n  }, [toast, user]);\r\n\r\n  useEffect(() => {\r\n    fetchMessages();\r\n  }, [fetchMessages]);\r\n\r\n  useEffect(() => {\r\n    if (selectedChatOption === \"Coach\") {\r\n      setSender(user.physicalCoach);\r\n    } else if (selectedChatOption === \"WSF\" && user) {\r\n      setSender(user.wsf);\r\n    } else if (selectedChatOption === \"Provincial Coach\" && province) {\r\n      setSender(province.provincialCoach._id);\r\n    } else if (selectedChatOption === \"National Coach\" && national) {\r\n      setSender(national.nationalCoach._id);\r\n    }\r\n  }, [selectedChatOption, national, province, user, setSender]);\r\n\r\n  useEffect(() => {\r\n    if (selectedChat) {\r\n      setSender(selectedChat);\r\n    }\r\n  }, [selectedChat, setSender]);\r\n\r\n  const sendMessage = async (event) => {\r\n    if ((event && event.type === \"click\") || (event && event.key === \"Enter\")) {\r\n      setSending(true);\r\n      const userId = user._id;\r\n  \r\n      if (!selectedChatOption && !rank) {\r\n        toast({\r\n          title: \"Select a recipient\",\r\n          description: \"Please choose whom you want to chat with.\",\r\n          status: \"info\",\r\n          duration: 5000,\r\n          isClosable: true,\r\n          position: \"bottom\",\r\n        });\r\n        setSending(false);\r\n        return;\r\n      }\r\n  \r\n      if (rank && !selectedChat && userId !== adminId) {\r\n        toast({\r\n          title: \"Select a recipient!\",\r\n          description: \"Please choose whom you want to reply to...\",\r\n          status: \"info\",\r\n          duration: 5000,\r\n          isClosable: true,\r\n          position: \"bottom\",\r\n        });\r\n        setSending(false);\r\n        return;\r\n      }\r\n  \r\n      try {\r\n        const config = {\r\n          headers: {\r\n            \"Content-type\": \"application/json\",\r\n            Authorization: `Bearer ${user.token}`,\r\n          },\r\n        };\r\n  \r\n        // Send message to backend\r\n        const { data } = await axios.post(\r\n          \"/api/message\",\r\n          { sender: sender, content: newMessage, userId },\r\n          config\r\n        );\r\n  \r\n        // Update messages state based on sender\r\n        if (userId === adminId) {\r\n          // If admin, construct the new message object\r\n          const newMessageObj = {\r\n            content: newMessage.trim(),\r\n            createdAt: new Date(),\r\n            recipient: { WSF: null, _id: '65c7549721abc4f629ae5009', name: 'Broadcast', otherName: 'Ngatia', email: 'josephmpesa23@gmail.com' },\r\n            sender: { _id: '6693a995f6295b8bd90d9301', name: 'j', otherName: 'e', email: 'almanobe2@gmail.com' },\r\n            updatedAt: \"2024-07-01T16:26:45.964Z\",\r\n            __v: 0,\r\n            _id: \"6682d8c501209935692efb9e\"\r\n          };\r\n  \r\n          // Update messages state with the new message object\r\n          setMessages(prevMessages => [...prevMessages, newMessageObj]);\r\n        } else {\r\n          // If regular user, update messages state with the response data\r\n          setMessages(prevMessages => [...prevMessages, data]);\r\n          socket.emit(\"new message\", data);\r\n        }\r\n  \r\n        // Clear input and reset sending state\r\n        setSending(false);\r\n        setNewMessage(\"\");\r\n      } catch (error) {\r\n        console.error(\"Failed to send message:\", error);\r\n        setSending(false);\r\n        toast({\r\n          title: \"Failed to send the Message\",\r\n          description: \"Please try again after some time\",\r\n          status: \"error\",\r\n          duration: 5000,\r\n          isClosable: true,\r\n          position: \"bottom\",\r\n        });\r\n      }\r\n    }\r\n  };  \r\n  \r\n  const handleChatClose = () => {\r\n    onClose();\r\n  };\r\n  return (\r\n    <Box\r\n      display={\"flex\"}\r\n      flexDirection={\"column\"}\r\n      position=\"fixed\"\r\n      bottom=\"0\"\r\n      right=\"1\"\r\n      height={\"90vh\"}\r\n      width={{base: \"100%\", md: \"60%\"}}\r\n      borderRadius={4}\r\n      boxShadow=\"dark-lg\"\r\n      p=\"2\"\r\n      rounded=\"md\"\r\n      bg=\"white\"\r\n      zIndex={11}\r\n    >\r\n      <Button p={2} onClick={handleChatClose} border={\"none\"}>\r\n        X\r\n      </Button>\r\n      <Box\r\n        p={2}\r\n        top=\"0\"\r\n        left=\"0\"\r\n        height=\"90%\"\r\n        display=\"flex\"\r\n        flexDir=\"column\"\r\n        justifyContent=\"center\"\r\n        alignItems={\"center\"}\r\n        width={\"100%\"}\r\n        background={\"whitesmoke\"}\r\n        \r\n      >\r\n        {!selectedChatOption && !rank && (\r\n          <Box display={\"flex\"} flexDir={\"column\"} bg=\"transparent\">\r\n            <Text>Select whom you want to chat with:</Text>\r\n            {chatOptions.map((option) => (\r\n              <Button\r\n                key={option}\r\n                bg=\"transparent\"\r\n                onClick={() => setSelectedChatOption(option)}\r\n                border={\"none\"}\r\n                p={'2'}\r\n              >\r\n                {option}\r\n              </Button>\r\n            ))}\r\n          </Box>\r\n        )}\r\n        {loading ? (\r\n          <Spinner speed='0.65s' size={\"xl\"} />\r\n        ) : (\r\n         <ScrollableChat messages={messages} />\r\n        )}\r\n        <Box position=\"absolute\" bottom={0} width=\"100%\">\r\n          {rank && (\r\n            <Box\r\n              display={\"flex\"}\r\n              justifyContent={\"center\"}\r\n              alignItems={\"center\"}\r\n              width={\"100%\"}\r\n            >\r\n              Replying to {selectedChat ? send : \"(select a message please)\"}\r\n              {selectedChat && (\r\n                <Button\r\n                  onClick={() => {\r\n                    setSelectedChat(null);\r\n                    setSend(null);\r\n                  }}\r\n                  background={\"transparent\"}\r\n                  textColor={\"red\"}\r\n                  border={\"none\"}\r\n                >\r\n                  X\r\n                </Button>\r\n              )}\r\n            </Box>\r\n          )}\r\n\r\n          {selectedChatOption && (\r\n            <Box\r\n              display={\"flex\"}\r\n              justifyContent={\"center\"}\r\n              alignItems={\"center\"}\r\n              width={\"100%\"}\r\n            >\r\n              Chatting with {selectedChatOption}\r\n              <Button\r\n                onClick={() => setSelectedChatOption(null)}\r\n                background={\"transparent\"}\r\n                textColor={\"red\"}\r\n                border={\"none\"}\r\n              >\r\n                X\r\n              </Button>\r\n            </Box>\r\n          )}\r\n\r\n          <Box\r\n            display={\"flex\"}\r\n            justifyContent={\"center\"}\r\n            alignItems={\"center\"}\r\n            width={\"100%\"}\r\n            background={\"white\"}\r\n            p={2}\r\n          >\r\n            <Input\r\n              placeholder=\"Type your message...\"\r\n              value={newMessage}\r\n              onChange={(e) => setNewMessage(e.target.value)}\r\n            />\r\n            <IconButton isLoading={sending} border={\"none\"} onClick={(event) => sendMessage(event)} p={0} m={1}>\r\n            <IoIosSend/>\r\n            </IconButton>\r\n          </Box>\r\n        </Box>\r\n      </Box>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default FloatingChat;\r\n","import React, { useCallback, useEffect, useState } from \"react\";\r\nimport ErrorBoundary from \"../components/ErrorBoundary\";\r\nimport { Box, IconButton, useToast } from \"@chakra-ui/react\";\r\nimport UpperNav from \"../miscellenious/upperNav\";\r\nimport Progress from \"../miscellenious/Progress\";\r\nimport MyPrograms from \"../miscellenious/Myprograms\";\r\nimport FloatingChat from \"../miscellenious/FloatingChat\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { ChatState } from \"../components/Context/ChatProvider\";\r\nimport { useConnectSocket } from \"../components/config/chatlogics\";\r\nimport axiosInstance from \"../components/config/axios\";\r\nimport { MdOutlineMarkUnreadChatAlt } from \"react-icons/md\";\r\n//twillio code: S8ZVS4F9BYTUYWM47439RPNR\r\n\r\nconst Dashboard = ({ courses }) => {\r\n  const [chatOpen, setChatOpen] = useState(false);\r\n  const {\r\n    user,\r\n    setUser,\r\n    setClub,\r\n    setMessages,\r\n    notification,\r\n    setNotification,\r\n    setNational,\r\n    setProvince,\r\n  } = ChatState();\r\n  const navigate = useNavigate();\r\n  const [isHovered, setHovered] = useState(false);\r\n  const toast = useToast();\r\n  const socket = useConnectSocket(user);\r\n  const [isSocketConnected, setIsSocketConnected] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (socket) {\r\n      setIsSocketConnected(socket.connected);\r\n\r\n      socket.on('connect', () => {\r\n        setIsSocketConnected(true);\r\n      });\r\n\r\n      socket.on('disconnect', () => {\r\n        setIsSocketConnected(false);\r\n      });\r\n    }\r\n  }, [socket]);\r\n\r\n  const requestClub = useCallback(async () => {\r\n    if (!user?.coach) {\r\n      return;\r\n    }\r\n\r\n    const config = {\r\n      headers: {\r\n        Authorization: `Bearer ${user.token}`,\r\n      },\r\n    };\r\n\r\n    try {\r\n      const response = await axiosInstance.get(`/api/clubs/${user.coach}`, config);\r\n      setClub(response.data);\r\n    } catch (error) {\r\n      console.error(\"Error fetching Club:\", error);\r\n    }\r\n  }, [user]);\r\n\r\n  // Use another useEffect to call requestClub when user is set\r\n  useEffect(() => {\r\n    if (user) {\r\n      requestClub();\r\n    }\r\n  }, [user, requestClub]);\r\n\r\n  useEffect(() => {\r\n\r\n    if (isSocketConnected) {\r\n    const showNotification = (title, options) => {\r\n      if (Notification.permission === \"granted\") {\r\n        new Notification(title, options);\r\n        const audio = new Audio(\r\n          \"https://s3.amazonaws.com/freecodecamp/drums/Give_us_a_light.mp3\"\r\n        );\r\n        audio.addEventListener(\"error\", (error) => {\r\n          console.error(\"Audio playback error:\", error);\r\n        });\r\n\r\n        audio.play().catch((error) => {\r\n          console.error(\"Audio playback error:\", error);\r\n        });\r\n      } else if (Notification.permission !== \"denied\") {\r\n        Notification.requestPermission().then((permission) => {\r\n          if (permission === \"granted\") {\r\n            new Notification(title, options);\r\n            const audio = new Audio(\r\n              \"https://s3.amazonaws.com/freecodecamp/drums/Give_us_a_light.mp3\"\r\n            );\r\n            audio.addEventListener(\"error\", (error) => {\r\n              console.error(\"Audio playback error:\", error);\r\n            });\r\n\r\n            audio.play().catch((error) => {\r\n              console.error(\"Audio playback error:\", error);\r\n            });\r\n          }\r\n        });\r\n      }\r\n    };\r\n\r\n    const handleMessageReceived = (newMessageReceived) => {\r\n      setNotification([newMessageReceived, ...notification]);\r\n      showNotification(\r\n        \"New Message\",\r\n        {\r\n          body: `New message from ${newMessageReceived.sender.name}`,\r\n          icon: `${newMessageReceived.sender.pic}`,\r\n        },\r\n        () => {\r\n          navigate(\"/dashboard\");\r\n        }\r\n      );\r\n      setMessages((prevMessages) => [...prevMessages, newMessageReceived]);\r\n    };\r\n\r\n    const handleProvincialRequest = (request) => {\r\n      setUser((prevUser) => ({\r\n        ...prevUser,\r\n        provinceRequests: [\r\n          ...prevUser.provinceRequests,\r\n          request.provincialCoach,\r\n        ],\r\n      }));\r\n    };\r\n\r\n    const handleNationalRequest = (request) => {\r\n      setUser((prevUser) => ({\r\n        ...prevUser,\r\n        nationalRequests: [\r\n          ...prevUser.nationalRequests,\r\n          request.nationalCoach,\r\n        ],\r\n      }));\r\n    };\r\n\r\n    const handleCertificates = (certificates) => {\r\n      setUser((prev) => ({\r\n        ...prev,\r\n        certificates: certificates.certificates,\r\n        belt: certificates.belt,\r\n      }));\r\n    };\r\n    socket.on(\"provincial request\", handleProvincialRequest);\r\n    socket.on(\"national request\", handleNationalRequest);\r\n    socket.on(\"certificates\", handleCertificates);\r\n    socket.on(\"message received\", handleMessageReceived);\r\n\r\n    return () => {\r\n      socket.off(\"provincial request\", handleProvincialRequest);\r\n      socket.off(\"national request\", handleNationalRequest);\r\n      socket.off(\"certificates\", handleCertificates);\r\n      socket.off(\"message received\", handleMessageReceived);\r\n    };\r\n }\r\n  }, [socket, navigate, notification, isSocketConnected]);\r\n\r\n  // Combine requests and use a stable function reference\r\n  const fetchClubs = useCallback(async () => {\r\n    if (!user) {\r\n      navigate(\"/\");\r\n      return;\r\n    }\r\n\r\n    const config = {\r\n      headers: {\r\n        Authorization: `Bearer ${user.token}`,\r\n      },\r\n    };\r\n\r\n    try {\r\n      const [provinceResponse, nationalResponse] = await Promise.all([\r\n        axiosInstance.get(`/api/province/officials/${user.country}/${user.provinces}`, config),\r\n        axiosInstance.get(`/api/national/officials/${user.country}/${user.provinces}`, config)\r\n      ]);\r\n\r\n      const provinceData = provinceResponse.data;\r\n      const nationalData = nationalResponse.data;\r\n\r\n      if (provinceData.length > 0) {\r\n        setProvince(provinceData);\r\n        console.log(provinceData);\r\n      }\r\n\r\n      if (nationalData.length > 0) {\r\n        setNational(nationalData);\r\n      }\r\n    } catch (error) {\r\n      if (error.response && error.response.status === 401) {\r\n        toast({\r\n          title: \"Your session has expired\",\r\n          description: \"Logging out in 8 seconds\",\r\n          duration: 8000,\r\n          status: \"loading\",\r\n          position: \"bottom\",\r\n        });\r\n        console.log(error);\r\n\r\n        setTimeout(() => {\r\n          localStorage.removeItem(\"userInfo\");\r\n          navigate(\"/\");\r\n        }, 8000);\r\n      } else {\r\n        console.log(error);\r\n        toast({\r\n          title: \"An Error Occurred!\",\r\n          description: \"Try again after sometime.\",\r\n          status: \"error\",\r\n          duration: 5000,\r\n          isClosable: true,\r\n        });\r\n      }\r\n    }\r\n  }, [user, navigate, toast]);\r\n\r\n  // Fetch data on mount and when user changes\r\n  useEffect(() => {\r\n    if (!user) {\r\n      navigate(\"/dashboard\");\r\n      return;\r\n    }\r\n    fetchClubs();\r\n  }, [fetchClubs, navigate, user]);\r\n\r\n  return (\r\n    <ErrorBoundary fallback={<p style={{ color: \"white\" }}>Something went wrong</p>} userSelect=\"none\">\r\n      <Box display=\"flex\" alignItems=\"center\" justifyContent=\"center\" flexDir=\"column\" width=\"100%\" background=\"white\" position=\"relative\">\r\n        <UpperNav />\r\n        <Box width=\"100%\" mt={20}>\r\n          <Progress userBelt={user?.belt} />\r\n        </Box>\r\n        <MyPrograms courses={courses} user={user} />\r\n        {chatOpen && <FloatingChat onClose={() => setChatOpen(false)} />}\r\n        <IconButton\r\n          display={chatOpen ? \"none\" : \"flex\"}\r\n          position=\"fixed\"\r\n          bottom=\"8%\"\r\n          right=\"10%\"\r\n          icon={\r\n            <MdOutlineMarkUnreadChatAlt\r\n              style={{\r\n                width: isHovered ? \"60px\" : \"40px\",\r\n                transition: \"width 0.3s ease-in-out\",\r\n                color: \"teal\",\r\n                fontSize: \"40px\",\r\n                border: 'none',\r\n              }}\r\n            />\r\n          }\r\n          backgroundColor=\"orange\"\r\n          p={\"2\"}\r\n          boxSize={\"auto\"}\r\n          border=\"none\"\r\n          _hover={{ backgroundColor: \"white\" }}\r\n          onClick={() => setChatOpen(true)}\r\n          onMouseEnter={() => setHovered(true)}\r\n          onMouseLeave={() => setHovered(false)}\r\n          borderRadius=\"full\"\r\n        />\r\n      </Box>\r\n    </ErrorBoundary>\r\n  );\r\n};\r\nexport default Dashboard;\r\n"],"names":["ErrorBoundary","_React$Component","props","_this","_classCallCheck","_callSuper","state","hasError","_inherits","_createClass","key","value","error","info","console","this","_jsxs","Box","display","justifyContent","alignItems","background","width","height","children","flexDirection","_jsx","Text","fontSize","Link","color","href","React","axiosInstance","axios","create","interceptors","response","use","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_context","prev","next","abrupt","stop","_x","apply","arguments","Promise","reject","UserFormValidation","z","object","name","string","min","max","otherName","email","gender","enum","password","confirmPassword","refine","val","ctx","parent","message","passport","regex","selectedCountry","provinces","optional","language","pic","url","useConnectSocket","user","_useState","useState","_useState2","_slicedToArray","socket","setSocket","socketRef","useRef","useEffect","token","current","userId","_id","newSocket","io","query","on","log","reason","connect","attemptNumber","concat","disconnect","makePaymentMpesa","_x3","_x4","_x5","_x6","_makePaymentMpesa","_callee2","amount","phoneNumber","toast","config","_yield$axios$post","_context2","headers","Authorization","post","sent","data","title","status","duration","position","t0","donationsMpesa","_x7","_x8","_x9","_donationsMpesa","_callee3","_yield$axios$post2","_context3","timestamp","messageTime","Date","timeDifference","seconds","Math","floor","minutes","hours","days","toLocaleDateString","hour","minute","month","day","year","ProgressContainer","styled","div","_templateObject","_taggedTemplateLiteral","ProgressSlot","_templateObject2","progressAnimation","keyframes","_templateObject3","level","blinkingAnimation","_templateObject4","ProgressArrow","_templateObject5","_ref2","_ref3","userBelt","indexOf","map","belt","index","marginTop","fontWeight","base","md","textAlign","GiBlackBelt","style","p","Paycheck","course","useToast","_ChatState","ChatState","setUser","show","setShow","_useState3","_useState4","setPhoneNumber","_useDisclosure","useDisclosure","isOpen","onOpen","onClose","nothing","description","update","_objectSpread","off","handleAfterPay","_yield$axios$get","get","isClosable","_Fragment","Button","borderRadius","textColor","_hover","m","onClick","userCertificatesLength","certificates","length","courseIndex","id","Modal","size","isCentered","ModalOverlay","bg","backdropFilter","ModalContent","ModalHeader","fontFamily","px","rounded","ModalCloseButton","ModalBody","PayPalScriptProvider","options","clientId","PayPalButtons","createOrder","actions","order","purchase_units","currency_code","toFixed","onApprove","_ref4","capture","then","details","subscriptionID","_x2","onCancel","useColorModeValue","Image","src","alt","loading","Input","placeholder","type","onChange","e","target","minLength","maxLength","Divider","isDisabled","parseInt","colorScheme","ModalFooter","courses","handleDownload","a","document","createElement","download","click","progressLevels","flexDir","backgroundColor","Flex","border","textDecoration","_m$sender4","_m$sender5","_m$recipient","_m$sender6","_m$sender7","_m$sender8","_m$recipient2","_m$sender9","setSelectedChat","setSend","adminId","_m$sender","_m$sender2","_m$sender3","sender","textDecor","LuBadgeCheck","recipient","content","BsSendCheck","formatMessageTime","createdAt","messages","overflowY","minH","mb","isUserMessage","maxW","alignSelf","Message","newMessage","setNewMessage","chatOptions","setChatOptions","_useState5","_useState6","selectedChatOption","setSelectedChatOption","_useState7","_useState8","setSender","_useState9","_useState10","setLoading","_useState11","_useState12","rank","setRank","_useState13","_useState14","sending","setSending","selectedChat","send","setMessages","national","province","navigate","useNavigate","coach","provincialCoach","nationalCoach","undefined","prevOptions","filter","option","physicalCoach","fetchMessages","useCallback","wsf","sendMessage","event","newMessageObj","trim","WSF","updatedAt","__v","prevMessages","_toConsumableArray","emit","bottom","right","boxShadow","zIndex","top","left","Spinner","speed","ScrollableChat","IconButton","isLoading","IoIosSend","chatOpen","setChatOpen","setClub","notification","setNotification","setNational","setProvince","isHovered","setHovered","isSocketConnected","setIsSocketConnected","connected","requestClub","handleMessageReceived","newMessageReceived","Notification","permission","audio","Audio","addEventListener","play","catch","requestPermission","showNotification","body","icon","handleProvincialRequest","request","prevUser","provinceRequests","handleNationalRequest","nationalRequests","handleCertificates","fetchClubs","_yield$Promise$all","_yield$Promise$all2","provinceResponse","nationalResponse","provinceData","nationalData","all","country","setTimeout","localStorage","removeItem","fallback","userSelect","UpperNav","mt","Progress","MyPrograms","FloatingChat","MdOutlineMarkUnreadChatAlt","transition","boxSize","onMouseEnter","onMouseLeave"],"sourceRoot":""}