"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[42],{35042:function(e,n,s){s.r(n);var o=s(5544),c=s(65043),t=(s(58650),s(51064)),r=s(60184),l=s(70579);n.default=function(){var e=(0,c.useState)(null),n=(0,o.A)(e,2),s=n[0],i=n[1],a=(0,c.useState)(null),u=(0,o.A)(a,2),d=u[0],f=u[1],g=(0,c.useState)(!1),h=(0,o.A)(g,2),m=h[0],p=h[1],v=(0,c.useState)(!1),b=(0,o.A)(v,2),j=b[0],S=b[1],x=(0,c.useState)(!1),k=(0,o.A)(x,2),N=k[0],w=k[1],C=(0,c.useRef)(null);(0,c.useEffect)((function(){var e=new WebSocket("ws://167.99.44.195:8188");return e.onopen=function(){console.log("WebSocket connected"),w(!0)},e.onclose=function(){console.log("WebSocket closed"),w(!1)},e.onerror=function(e){console.error("WebSocket error",e)},function(){e.close()}}),[]),(0,c.useEffect)((function(){return N&&t.A.init({debug:"all",callback:function(){var e=new t.A({server:"ws://167.99.44.195:8188",success:function(){P(e)},error:function(e){console.error("Janus error:",e)}});i(e)}}),function(){s&&s.destroy()}}),[N]);var P=function(e){e.attach({plugin:"janus.plugin.rtmp",success:function(e){f(e),console.log("RTMP plugin attached!")},error:function(e){console.error("Error attaching RTMP plugin:",e)},webrtcState:function(e){S(e),console.log("WebRTC peer connection is ",e?"up":"down")},onmessage:function(e,n){console.log("Message received from RTMP plugin:",e)},onlocalstream:function(e){C.current.srcObject=e}})};return(0,l.jsxs)("div",{className:"streaming-container",children:[(0,l.jsxs)("div",{className:"video-wrapper",children:[(0,l.jsx)("video",{ref:C,autoPlay:!0,muted:!0,className:"video-feed"}),!j&&(0,l.jsx)("div",{className:"overlay",children:"Connecting..."})]}),(0,l.jsxs)("div",{className:"control-panel",children:[(0,l.jsx)("h2",{children:"Live Stream Control"}),(0,l.jsxs)("div",{className:"status-indicators",children:[(0,l.jsx)("div",{className:"status ".concat(j?"connected":"disconnected"),children:j?"Connected":"Disconnected"}),(0,l.jsx)("div",{className:"status ".concat(m?"live":"idle"),children:m?"Live":"Idle"})]}),(0,l.jsxs)("div",{className:"controls",children:[(0,l.jsxs)("button",{onClick:function(){if(d){d.publish({stream:"rtmp://nginx:1935/stream",success:function(){console.log("Publishing to RTMP successfully!"),p(!0)},error:function(e){console.error("Error publishing to RTMP:",e)}})}else console.error("RTMP plugin not attached.")},disabled:m,className:"start-btn",children:[(0,l.jsx)(r.gSK,{})," Start Streaming"]}),(0,l.jsxs)("button",{onClick:function(){d&&(d.hangup(),p(!1))},disabled:!m,className:"stop-btn",children:[(0,l.jsx)(r.wFo,{})," Stop Streaming"]})]})]})]})}}}]);
//# sourceMappingURL=42.9e146b91.chunk.js.map