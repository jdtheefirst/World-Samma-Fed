{"version":3,"file":"static/js/120.2cb0a2b9.chunk.js","mappings":"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","sources":["../node_modules/sdp/sdp.js","../node_modules/webrtc-adapter/src/js/utils.js","../node_modules/webrtc-adapter/src/js/chrome/getusermedia.js","../node_modules/webrtc-adapter/src/js/chrome/chrome_shim.js","../node_modules/webrtc-adapter/src/js/firefox/getusermedia.js","../node_modules/webrtc-adapter/src/js/firefox/getdisplaymedia.js","../node_modules/webrtc-adapter/src/js/firefox/firefox_shim.js","../node_modules/webrtc-adapter/src/js/safari/safari_shim.js","../node_modules/webrtc-adapter/src/js/common_shim.js","../node_modules/webrtc-adapter/src/js/adapter_factory.js","../node_modules/webrtc-adapter/src/js/adapter_core.js","../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","../node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js","../node_modules/react-icons/lib/iconsManifest.mjs","../node_modules/react-icons/lib/iconContext.mjs","../node_modules/react-icons/lib/iconBase.mjs"],"sourcesContent":["/* eslint-env node */\n'use strict';\n\n// SDP helpers.\nconst SDPUtils = {};\n\n// Generate an alphanumeric identifier for cname or mids.\n// TODO: use UUIDs instead? https://gist.github.com/jed/982883\nSDPUtils.generateIdentifier = function() {\n  return Math.random().toString(36).substring(2, 12);\n};\n\n// The RTCP CNAME used by all peerconnections from the same JS.\nSDPUtils.localCName = SDPUtils.generateIdentifier();\n\n// Splits SDP into lines, dealing with both CRLF and LF.\nSDPUtils.splitLines = function(blob) {\n  return blob.trim().split('\\n').map(line => line.trim());\n};\n// Splits SDP into sessionpart and mediasections. Ensures CRLF.\nSDPUtils.splitSections = function(blob) {\n  const parts = blob.split('\\nm=');\n  return parts.map((part, index) => (index > 0 ?\n    'm=' + part : part).trim() + '\\r\\n');\n};\n\n// Returns the session description.\nSDPUtils.getDescription = function(blob) {\n  const sections = SDPUtils.splitSections(blob);\n  return sections && sections[0];\n};\n\n// Returns the individual media sections.\nSDPUtils.getMediaSections = function(blob) {\n  const sections = SDPUtils.splitSections(blob);\n  sections.shift();\n  return sections;\n};\n\n// Returns lines that start with a certain prefix.\nSDPUtils.matchPrefix = function(blob, prefix) {\n  return SDPUtils.splitLines(blob).filter(line => line.indexOf(prefix) === 0);\n};\n\n// Parses an ICE candidate line. Sample input:\n// candidate:702786350 2 udp 41819902 8.8.8.8 60769 typ relay raddr 8.8.8.8\n// rport 55996\"\n// Input can be prefixed with a=.\nSDPUtils.parseCandidate = function(line) {\n  let parts;\n  // Parse both variants.\n  if (line.indexOf('a=candidate:') === 0) {\n    parts = line.substring(12).split(' ');\n  } else {\n    parts = line.substring(10).split(' ');\n  }\n\n  const candidate = {\n    foundation: parts[0],\n    component: {1: 'rtp', 2: 'rtcp'}[parts[1]] || parts[1],\n    protocol: parts[2].toLowerCase(),\n    priority: parseInt(parts[3], 10),\n    ip: parts[4],\n    address: parts[4], // address is an alias for ip.\n    port: parseInt(parts[5], 10),\n    // skip parts[6] == 'typ'\n    type: parts[7],\n  };\n\n  for (let i = 8; i < parts.length; i += 2) {\n    switch (parts[i]) {\n      case 'raddr':\n        candidate.relatedAddress = parts[i + 1];\n        break;\n      case 'rport':\n        candidate.relatedPort = parseInt(parts[i + 1], 10);\n        break;\n      case 'tcptype':\n        candidate.tcpType = parts[i + 1];\n        break;\n      case 'ufrag':\n        candidate.ufrag = parts[i + 1]; // for backward compatibility.\n        candidate.usernameFragment = parts[i + 1];\n        break;\n      default: // extension handling, in particular ufrag. Don't overwrite.\n        if (candidate[parts[i]] === undefined) {\n          candidate[parts[i]] = parts[i + 1];\n        }\n        break;\n    }\n  }\n  return candidate;\n};\n\n// Translates a candidate object into SDP candidate attribute.\n// This does not include the a= prefix!\nSDPUtils.writeCandidate = function(candidate) {\n  const sdp = [];\n  sdp.push(candidate.foundation);\n\n  const component = candidate.component;\n  if (component === 'rtp') {\n    sdp.push(1);\n  } else if (component === 'rtcp') {\n    sdp.push(2);\n  } else {\n    sdp.push(component);\n  }\n  sdp.push(candidate.protocol.toUpperCase());\n  sdp.push(candidate.priority);\n  sdp.push(candidate.address || candidate.ip);\n  sdp.push(candidate.port);\n\n  const type = candidate.type;\n  sdp.push('typ');\n  sdp.push(type);\n  if (type !== 'host' && candidate.relatedAddress &&\n      candidate.relatedPort) {\n    sdp.push('raddr');\n    sdp.push(candidate.relatedAddress);\n    sdp.push('rport');\n    sdp.push(candidate.relatedPort);\n  }\n  if (candidate.tcpType && candidate.protocol.toLowerCase() === 'tcp') {\n    sdp.push('tcptype');\n    sdp.push(candidate.tcpType);\n  }\n  if (candidate.usernameFragment || candidate.ufrag) {\n    sdp.push('ufrag');\n    sdp.push(candidate.usernameFragment || candidate.ufrag);\n  }\n  return 'candidate:' + sdp.join(' ');\n};\n\n// Parses an ice-options line, returns an array of option tags.\n// Sample input:\n// a=ice-options:foo bar\nSDPUtils.parseIceOptions = function(line) {\n  return line.substring(14).split(' ');\n};\n\n// Parses a rtpmap line, returns RTCRtpCoddecParameters. Sample input:\n// a=rtpmap:111 opus/48000/2\nSDPUtils.parseRtpMap = function(line) {\n  let parts = line.substring(9).split(' ');\n  const parsed = {\n    payloadType: parseInt(parts.shift(), 10), // was: id\n  };\n\n  parts = parts[0].split('/');\n\n  parsed.name = parts[0];\n  parsed.clockRate = parseInt(parts[1], 10); // was: clockrate\n  parsed.channels = parts.length === 3 ? parseInt(parts[2], 10) : 1;\n  // legacy alias, got renamed back to channels in ORTC.\n  parsed.numChannels = parsed.channels;\n  return parsed;\n};\n\n// Generates a rtpmap line from RTCRtpCodecCapability or\n// RTCRtpCodecParameters.\nSDPUtils.writeRtpMap = function(codec) {\n  let pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  const channels = codec.channels || codec.numChannels || 1;\n  return 'a=rtpmap:' + pt + ' ' + codec.name + '/' + codec.clockRate +\n      (channels !== 1 ? '/' + channels : '') + '\\r\\n';\n};\n\n// Parses a extmap line (headerextension from RFC 5285). Sample input:\n// a=extmap:2 urn:ietf:params:rtp-hdrext:toffset\n// a=extmap:2/sendonly urn:ietf:params:rtp-hdrext:toffset\nSDPUtils.parseExtmap = function(line) {\n  const parts = line.substring(9).split(' ');\n  return {\n    id: parseInt(parts[0], 10),\n    direction: parts[0].indexOf('/') > 0 ? parts[0].split('/')[1] : 'sendrecv',\n    uri: parts[1],\n    attributes: parts.slice(2).join(' '),\n  };\n};\n\n// Generates an extmap line from RTCRtpHeaderExtensionParameters or\n// RTCRtpHeaderExtension.\nSDPUtils.writeExtmap = function(headerExtension) {\n  return 'a=extmap:' + (headerExtension.id || headerExtension.preferredId) +\n      (headerExtension.direction && headerExtension.direction !== 'sendrecv'\n        ? '/' + headerExtension.direction\n        : '') +\n      ' ' + headerExtension.uri +\n      (headerExtension.attributes ? ' ' + headerExtension.attributes : '') +\n      '\\r\\n';\n};\n\n// Parses a fmtp line, returns dictionary. Sample input:\n// a=fmtp:96 vbr=on;cng=on\n// Also deals with vbr=on; cng=on\nSDPUtils.parseFmtp = function(line) {\n  const parsed = {};\n  let kv;\n  const parts = line.substring(line.indexOf(' ') + 1).split(';');\n  for (let j = 0; j < parts.length; j++) {\n    kv = parts[j].trim().split('=');\n    parsed[kv[0].trim()] = kv[1];\n  }\n  return parsed;\n};\n\n// Generates a fmtp line from RTCRtpCodecCapability or RTCRtpCodecParameters.\nSDPUtils.writeFmtp = function(codec) {\n  let line = '';\n  let pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  if (codec.parameters && Object.keys(codec.parameters).length) {\n    const params = [];\n    Object.keys(codec.parameters).forEach(param => {\n      if (codec.parameters[param] !== undefined) {\n        params.push(param + '=' + codec.parameters[param]);\n      } else {\n        params.push(param);\n      }\n    });\n    line += 'a=fmtp:' + pt + ' ' + params.join(';') + '\\r\\n';\n  }\n  return line;\n};\n\n// Parses a rtcp-fb line, returns RTCPRtcpFeedback object. Sample input:\n// a=rtcp-fb:98 nack rpsi\nSDPUtils.parseRtcpFb = function(line) {\n  const parts = line.substring(line.indexOf(' ') + 1).split(' ');\n  return {\n    type: parts.shift(),\n    parameter: parts.join(' '),\n  };\n};\n\n// Generate a=rtcp-fb lines from RTCRtpCodecCapability or RTCRtpCodecParameters.\nSDPUtils.writeRtcpFb = function(codec) {\n  let lines = '';\n  let pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  if (codec.rtcpFeedback && codec.rtcpFeedback.length) {\n    // FIXME: special handling for trr-int?\n    codec.rtcpFeedback.forEach(fb => {\n      lines += 'a=rtcp-fb:' + pt + ' ' + fb.type +\n      (fb.parameter && fb.parameter.length ? ' ' + fb.parameter : '') +\n          '\\r\\n';\n    });\n  }\n  return lines;\n};\n\n// Parses a RFC 5576 ssrc media attribute. Sample input:\n// a=ssrc:3735928559 cname:something\nSDPUtils.parseSsrcMedia = function(line) {\n  const sp = line.indexOf(' ');\n  const parts = {\n    ssrc: parseInt(line.substring(7, sp), 10),\n  };\n  const colon = line.indexOf(':', sp);\n  if (colon > -1) {\n    parts.attribute = line.substring(sp + 1, colon);\n    parts.value = line.substring(colon + 1);\n  } else {\n    parts.attribute = line.substring(sp + 1);\n  }\n  return parts;\n};\n\n// Parse a ssrc-group line (see RFC 5576). Sample input:\n// a=ssrc-group:semantics 12 34\nSDPUtils.parseSsrcGroup = function(line) {\n  const parts = line.substring(13).split(' ');\n  return {\n    semantics: parts.shift(),\n    ssrcs: parts.map(ssrc => parseInt(ssrc, 10)),\n  };\n};\n\n// Extracts the MID (RFC 5888) from a media section.\n// Returns the MID or undefined if no mid line was found.\nSDPUtils.getMid = function(mediaSection) {\n  const mid = SDPUtils.matchPrefix(mediaSection, 'a=mid:')[0];\n  if (mid) {\n    return mid.substring(6);\n  }\n};\n\n// Parses a fingerprint line for DTLS-SRTP.\nSDPUtils.parseFingerprint = function(line) {\n  const parts = line.substring(14).split(' ');\n  return {\n    algorithm: parts[0].toLowerCase(), // algorithm is case-sensitive in Edge.\n    value: parts[1].toUpperCase(), // the definition is upper-case in RFC 4572.\n  };\n};\n\n// Extracts DTLS parameters from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the fingerprint line as input. See also getIceParameters.\nSDPUtils.getDtlsParameters = function(mediaSection, sessionpart) {\n  const lines = SDPUtils.matchPrefix(mediaSection + sessionpart,\n    'a=fingerprint:');\n  // Note: a=setup line is ignored since we use the 'auto' role in Edge.\n  return {\n    role: 'auto',\n    fingerprints: lines.map(SDPUtils.parseFingerprint),\n  };\n};\n\n// Serializes DTLS parameters to SDP.\nSDPUtils.writeDtlsParameters = function(params, setupType) {\n  let sdp = 'a=setup:' + setupType + '\\r\\n';\n  params.fingerprints.forEach(fp => {\n    sdp += 'a=fingerprint:' + fp.algorithm + ' ' + fp.value + '\\r\\n';\n  });\n  return sdp;\n};\n\n// Parses a=crypto lines into\n//   https://rawgit.com/aboba/edgertc/master/msortc-rs4.html#dictionary-rtcsrtpsdesparameters-members\nSDPUtils.parseCryptoLine = function(line) {\n  const parts = line.substring(9).split(' ');\n  return {\n    tag: parseInt(parts[0], 10),\n    cryptoSuite: parts[1],\n    keyParams: parts[2],\n    sessionParams: parts.slice(3),\n  };\n};\n\nSDPUtils.writeCryptoLine = function(parameters) {\n  return 'a=crypto:' + parameters.tag + ' ' +\n    parameters.cryptoSuite + ' ' +\n    (typeof parameters.keyParams === 'object'\n      ? SDPUtils.writeCryptoKeyParams(parameters.keyParams)\n      : parameters.keyParams) +\n    (parameters.sessionParams ? ' ' + parameters.sessionParams.join(' ') : '') +\n    '\\r\\n';\n};\n\n// Parses the crypto key parameters into\n//   https://rawgit.com/aboba/edgertc/master/msortc-rs4.html#rtcsrtpkeyparam*\nSDPUtils.parseCryptoKeyParams = function(keyParams) {\n  if (keyParams.indexOf('inline:') !== 0) {\n    return null;\n  }\n  const parts = keyParams.substring(7).split('|');\n  return {\n    keyMethod: 'inline',\n    keySalt: parts[0],\n    lifeTime: parts[1],\n    mkiValue: parts[2] ? parts[2].split(':')[0] : undefined,\n    mkiLength: parts[2] ? parts[2].split(':')[1] : undefined,\n  };\n};\n\nSDPUtils.writeCryptoKeyParams = function(keyParams) {\n  return keyParams.keyMethod + ':'\n    + keyParams.keySalt +\n    (keyParams.lifeTime ? '|' + keyParams.lifeTime : '') +\n    (keyParams.mkiValue && keyParams.mkiLength\n      ? '|' + keyParams.mkiValue + ':' + keyParams.mkiLength\n      : '');\n};\n\n// Extracts all SDES parameters.\nSDPUtils.getCryptoParameters = function(mediaSection, sessionpart) {\n  const lines = SDPUtils.matchPrefix(mediaSection + sessionpart,\n    'a=crypto:');\n  return lines.map(SDPUtils.parseCryptoLine);\n};\n\n// Parses ICE information from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the ice-ufrag and ice-pwd lines as input.\nSDPUtils.getIceParameters = function(mediaSection, sessionpart) {\n  const ufrag = SDPUtils.matchPrefix(mediaSection + sessionpart,\n    'a=ice-ufrag:')[0];\n  const pwd = SDPUtils.matchPrefix(mediaSection + sessionpart,\n    'a=ice-pwd:')[0];\n  if (!(ufrag && pwd)) {\n    return null;\n  }\n  return {\n    usernameFragment: ufrag.substring(12),\n    password: pwd.substring(10),\n  };\n};\n\n// Serializes ICE parameters to SDP.\nSDPUtils.writeIceParameters = function(params) {\n  let sdp = 'a=ice-ufrag:' + params.usernameFragment + '\\r\\n' +\n      'a=ice-pwd:' + params.password + '\\r\\n';\n  if (params.iceLite) {\n    sdp += 'a=ice-lite\\r\\n';\n  }\n  return sdp;\n};\n\n// Parses the SDP media section and returns RTCRtpParameters.\nSDPUtils.parseRtpParameters = function(mediaSection) {\n  const description = {\n    codecs: [],\n    headerExtensions: [],\n    fecMechanisms: [],\n    rtcp: [],\n  };\n  const lines = SDPUtils.splitLines(mediaSection);\n  const mline = lines[0].split(' ');\n  description.profile = mline[2];\n  for (let i = 3; i < mline.length; i++) { // find all codecs from mline[3..]\n    const pt = mline[i];\n    const rtpmapline = SDPUtils.matchPrefix(\n      mediaSection, 'a=rtpmap:' + pt + ' ')[0];\n    if (rtpmapline) {\n      const codec = SDPUtils.parseRtpMap(rtpmapline);\n      const fmtps = SDPUtils.matchPrefix(\n        mediaSection, 'a=fmtp:' + pt + ' ');\n      // Only the first a=fmtp:<pt> is considered.\n      codec.parameters = fmtps.length ? SDPUtils.parseFmtp(fmtps[0]) : {};\n      codec.rtcpFeedback = SDPUtils.matchPrefix(\n        mediaSection, 'a=rtcp-fb:' + pt + ' ')\n        .map(SDPUtils.parseRtcpFb);\n      description.codecs.push(codec);\n      // parse FEC mechanisms from rtpmap lines.\n      switch (codec.name.toUpperCase()) {\n        case 'RED':\n        case 'ULPFEC':\n          description.fecMechanisms.push(codec.name.toUpperCase());\n          break;\n        default: // only RED and ULPFEC are recognized as FEC mechanisms.\n          break;\n      }\n    }\n  }\n  SDPUtils.matchPrefix(mediaSection, 'a=extmap:').forEach(line => {\n    description.headerExtensions.push(SDPUtils.parseExtmap(line));\n  });\n  const wildcardRtcpFb = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-fb:* ')\n    .map(SDPUtils.parseRtcpFb);\n  description.codecs.forEach(codec => {\n    wildcardRtcpFb.forEach(fb=> {\n      const duplicate = codec.rtcpFeedback.find(existingFeedback => {\n        return existingFeedback.type === fb.type &&\n          existingFeedback.parameter === fb.parameter;\n      });\n      if (!duplicate) {\n        codec.rtcpFeedback.push(fb);\n      }\n    });\n  });\n  // FIXME: parse rtcp.\n  return description;\n};\n\n// Generates parts of the SDP media section describing the capabilities /\n// parameters.\nSDPUtils.writeRtpDescription = function(kind, caps) {\n  let sdp = '';\n\n  // Build the mline.\n  sdp += 'm=' + kind + ' ';\n  sdp += caps.codecs.length > 0 ? '9' : '0'; // reject if no codecs.\n  sdp += ' ' + (caps.profile || 'UDP/TLS/RTP/SAVPF') + ' ';\n  sdp += caps.codecs.map(codec => {\n    if (codec.preferredPayloadType !== undefined) {\n      return codec.preferredPayloadType;\n    }\n    return codec.payloadType;\n  }).join(' ') + '\\r\\n';\n\n  sdp += 'c=IN IP4 0.0.0.0\\r\\n';\n  sdp += 'a=rtcp:9 IN IP4 0.0.0.0\\r\\n';\n\n  // Add a=rtpmap lines for each codec. Also fmtp and rtcp-fb.\n  caps.codecs.forEach(codec => {\n    sdp += SDPUtils.writeRtpMap(codec);\n    sdp += SDPUtils.writeFmtp(codec);\n    sdp += SDPUtils.writeRtcpFb(codec);\n  });\n  let maxptime = 0;\n  caps.codecs.forEach(codec => {\n    if (codec.maxptime > maxptime) {\n      maxptime = codec.maxptime;\n    }\n  });\n  if (maxptime > 0) {\n    sdp += 'a=maxptime:' + maxptime + '\\r\\n';\n  }\n\n  if (caps.headerExtensions) {\n    caps.headerExtensions.forEach(extension => {\n      sdp += SDPUtils.writeExtmap(extension);\n    });\n  }\n  // FIXME: write fecMechanisms.\n  return sdp;\n};\n\n// Parses the SDP media section and returns an array of\n// RTCRtpEncodingParameters.\nSDPUtils.parseRtpEncodingParameters = function(mediaSection) {\n  const encodingParameters = [];\n  const description = SDPUtils.parseRtpParameters(mediaSection);\n  const hasRed = description.fecMechanisms.indexOf('RED') !== -1;\n  const hasUlpfec = description.fecMechanisms.indexOf('ULPFEC') !== -1;\n\n  // filter a=ssrc:... cname:, ignore PlanB-msid\n  const ssrcs = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n    .map(line => SDPUtils.parseSsrcMedia(line))\n    .filter(parts => parts.attribute === 'cname');\n  const primarySsrc = ssrcs.length > 0 && ssrcs[0].ssrc;\n  let secondarySsrc;\n\n  const flows = SDPUtils.matchPrefix(mediaSection, 'a=ssrc-group:FID')\n    .map(line => {\n      const parts = line.substring(17).split(' ');\n      return parts.map(part => parseInt(part, 10));\n    });\n  if (flows.length > 0 && flows[0].length > 1 && flows[0][0] === primarySsrc) {\n    secondarySsrc = flows[0][1];\n  }\n\n  description.codecs.forEach(codec => {\n    if (codec.name.toUpperCase() === 'RTX' && codec.parameters.apt) {\n      let encParam = {\n        ssrc: primarySsrc,\n        codecPayloadType: parseInt(codec.parameters.apt, 10),\n      };\n      if (primarySsrc && secondarySsrc) {\n        encParam.rtx = {ssrc: secondarySsrc};\n      }\n      encodingParameters.push(encParam);\n      if (hasRed) {\n        encParam = JSON.parse(JSON.stringify(encParam));\n        encParam.fec = {\n          ssrc: primarySsrc,\n          mechanism: hasUlpfec ? 'red+ulpfec' : 'red',\n        };\n        encodingParameters.push(encParam);\n      }\n    }\n  });\n  if (encodingParameters.length === 0 && primarySsrc) {\n    encodingParameters.push({\n      ssrc: primarySsrc,\n    });\n  }\n\n  // we support both b=AS and b=TIAS but interpret AS as TIAS.\n  let bandwidth = SDPUtils.matchPrefix(mediaSection, 'b=');\n  if (bandwidth.length) {\n    if (bandwidth[0].indexOf('b=TIAS:') === 0) {\n      bandwidth = parseInt(bandwidth[0].substring(7), 10);\n    } else if (bandwidth[0].indexOf('b=AS:') === 0) {\n      // use formula from JSEP to convert b=AS to TIAS value.\n      bandwidth = parseInt(bandwidth[0].substring(5), 10) * 1000 * 0.95\n          - (50 * 40 * 8);\n    } else {\n      bandwidth = undefined;\n    }\n    encodingParameters.forEach(params => {\n      params.maxBitrate = bandwidth;\n    });\n  }\n  return encodingParameters;\n};\n\n// parses http://draft.ortc.org/#rtcrtcpparameters*\nSDPUtils.parseRtcpParameters = function(mediaSection) {\n  const rtcpParameters = {};\n\n  // Gets the first SSRC. Note that with RTX there might be multiple\n  // SSRCs.\n  const remoteSsrc = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n    .map(line => SDPUtils.parseSsrcMedia(line))\n    .filter(obj => obj.attribute === 'cname')[0];\n  if (remoteSsrc) {\n    rtcpParameters.cname = remoteSsrc.value;\n    rtcpParameters.ssrc = remoteSsrc.ssrc;\n  }\n\n  // Edge uses the compound attribute instead of reducedSize\n  // compound is !reducedSize\n  const rsize = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-rsize');\n  rtcpParameters.reducedSize = rsize.length > 0;\n  rtcpParameters.compound = rsize.length === 0;\n\n  // parses the rtcp-mux attrіbute.\n  // Note that Edge does not support unmuxed RTCP.\n  const mux = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-mux');\n  rtcpParameters.mux = mux.length > 0;\n\n  return rtcpParameters;\n};\n\nSDPUtils.writeRtcpParameters = function(rtcpParameters) {\n  let sdp = '';\n  if (rtcpParameters.reducedSize) {\n    sdp += 'a=rtcp-rsize\\r\\n';\n  }\n  if (rtcpParameters.mux) {\n    sdp += 'a=rtcp-mux\\r\\n';\n  }\n  if (rtcpParameters.ssrc !== undefined && rtcpParameters.cname) {\n    sdp += 'a=ssrc:' + rtcpParameters.ssrc +\n      ' cname:' + rtcpParameters.cname + '\\r\\n';\n  }\n  return sdp;\n};\n\n\n// parses either a=msid: or a=ssrc:... msid lines and returns\n// the id of the MediaStream and MediaStreamTrack.\nSDPUtils.parseMsid = function(mediaSection) {\n  let parts;\n  const spec = SDPUtils.matchPrefix(mediaSection, 'a=msid:');\n  if (spec.length === 1) {\n    parts = spec[0].substring(7).split(' ');\n    return {stream: parts[0], track: parts[1]};\n  }\n  const planB = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n    .map(line => SDPUtils.parseSsrcMedia(line))\n    .filter(msidParts => msidParts.attribute === 'msid');\n  if (planB.length > 0) {\n    parts = planB[0].value.split(' ');\n    return {stream: parts[0], track: parts[1]};\n  }\n};\n\n// SCTP\n// parses draft-ietf-mmusic-sctp-sdp-26 first and falls back\n// to draft-ietf-mmusic-sctp-sdp-05\nSDPUtils.parseSctpDescription = function(mediaSection) {\n  const mline = SDPUtils.parseMLine(mediaSection);\n  const maxSizeLine = SDPUtils.matchPrefix(mediaSection, 'a=max-message-size:');\n  let maxMessageSize;\n  if (maxSizeLine.length > 0) {\n    maxMessageSize = parseInt(maxSizeLine[0].substring(19), 10);\n  }\n  if (isNaN(maxMessageSize)) {\n    maxMessageSize = 65536;\n  }\n  const sctpPort = SDPUtils.matchPrefix(mediaSection, 'a=sctp-port:');\n  if (sctpPort.length > 0) {\n    return {\n      port: parseInt(sctpPort[0].substring(12), 10),\n      protocol: mline.fmt,\n      maxMessageSize,\n    };\n  }\n  const sctpMapLines = SDPUtils.matchPrefix(mediaSection, 'a=sctpmap:');\n  if (sctpMapLines.length > 0) {\n    const parts = sctpMapLines[0]\n      .substring(10)\n      .split(' ');\n    return {\n      port: parseInt(parts[0], 10),\n      protocol: parts[1],\n      maxMessageSize,\n    };\n  }\n};\n\n// SCTP\n// outputs the draft-ietf-mmusic-sctp-sdp-26 version that all browsers\n// support by now receiving in this format, unless we originally parsed\n// as the draft-ietf-mmusic-sctp-sdp-05 format (indicated by the m-line\n// protocol of DTLS/SCTP -- without UDP/ or TCP/)\nSDPUtils.writeSctpDescription = function(media, sctp) {\n  let output = [];\n  if (media.protocol !== 'DTLS/SCTP') {\n    output = [\n      'm=' + media.kind + ' 9 ' + media.protocol + ' ' + sctp.protocol + '\\r\\n',\n      'c=IN IP4 0.0.0.0\\r\\n',\n      'a=sctp-port:' + sctp.port + '\\r\\n',\n    ];\n  } else {\n    output = [\n      'm=' + media.kind + ' 9 ' + media.protocol + ' ' + sctp.port + '\\r\\n',\n      'c=IN IP4 0.0.0.0\\r\\n',\n      'a=sctpmap:' + sctp.port + ' ' + sctp.protocol + ' 65535\\r\\n',\n    ];\n  }\n  if (sctp.maxMessageSize !== undefined) {\n    output.push('a=max-message-size:' + sctp.maxMessageSize + '\\r\\n');\n  }\n  return output.join('');\n};\n\n// Generate a session ID for SDP.\n// https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-20#section-5.2.1\n// recommends using a cryptographically random +ve 64-bit value\n// but right now this should be acceptable and within the right range\nSDPUtils.generateSessionId = function() {\n  return Math.random().toString().substr(2, 22);\n};\n\n// Write boiler plate for start of SDP\n// sessId argument is optional - if not supplied it will\n// be generated randomly\n// sessVersion is optional and defaults to 2\n// sessUser is optional and defaults to 'thisisadapterortc'\nSDPUtils.writeSessionBoilerplate = function(sessId, sessVer, sessUser) {\n  let sessionId;\n  const version = sessVer !== undefined ? sessVer : 2;\n  if (sessId) {\n    sessionId = sessId;\n  } else {\n    sessionId = SDPUtils.generateSessionId();\n  }\n  const user = sessUser || 'thisisadapterortc';\n  // FIXME: sess-id should be an NTP timestamp.\n  return 'v=0\\r\\n' +\n      'o=' + user + ' ' + sessionId + ' ' + version +\n        ' IN IP4 127.0.0.1\\r\\n' +\n      's=-\\r\\n' +\n      't=0 0\\r\\n';\n};\n\n// Gets the direction from the mediaSection or the sessionpart.\nSDPUtils.getDirection = function(mediaSection, sessionpart) {\n  // Look for sendrecv, sendonly, recvonly, inactive, default to sendrecv.\n  const lines = SDPUtils.splitLines(mediaSection);\n  for (let i = 0; i < lines.length; i++) {\n    switch (lines[i]) {\n      case 'a=sendrecv':\n      case 'a=sendonly':\n      case 'a=recvonly':\n      case 'a=inactive':\n        return lines[i].substring(2);\n      default:\n        // FIXME: What should happen here?\n    }\n  }\n  if (sessionpart) {\n    return SDPUtils.getDirection(sessionpart);\n  }\n  return 'sendrecv';\n};\n\nSDPUtils.getKind = function(mediaSection) {\n  const lines = SDPUtils.splitLines(mediaSection);\n  const mline = lines[0].split(' ');\n  return mline[0].substring(2);\n};\n\nSDPUtils.isRejected = function(mediaSection) {\n  return mediaSection.split(' ', 2)[1] === '0';\n};\n\nSDPUtils.parseMLine = function(mediaSection) {\n  const lines = SDPUtils.splitLines(mediaSection);\n  const parts = lines[0].substring(2).split(' ');\n  return {\n    kind: parts[0],\n    port: parseInt(parts[1], 10),\n    protocol: parts[2],\n    fmt: parts.slice(3).join(' '),\n  };\n};\n\nSDPUtils.parseOLine = function(mediaSection) {\n  const line = SDPUtils.matchPrefix(mediaSection, 'o=')[0];\n  const parts = line.substring(2).split(' ');\n  return {\n    username: parts[0],\n    sessionId: parts[1],\n    sessionVersion: parseInt(parts[2], 10),\n    netType: parts[3],\n    addressType: parts[4],\n    address: parts[5],\n  };\n};\n\n// a very naive interpretation of a valid SDP.\nSDPUtils.isValidSDP = function(blob) {\n  if (typeof blob !== 'string' || blob.length === 0) {\n    return false;\n  }\n  const lines = SDPUtils.splitLines(blob);\n  for (let i = 0; i < lines.length; i++) {\n    if (lines[i].length < 2 || lines[i].charAt(1) !== '=') {\n      return false;\n    }\n    // TODO: check the modifier a bit more.\n  }\n  return true;\n};\n\n// Expose public methods.\nif (typeof module === 'object') {\n  module.exports = SDPUtils;\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nlet logDisabled_ = true;\nlet deprecationWarnings_ = true;\n\n/**\n * Extract browser version out of the provided user agent string.\n *\n * @param {!string} uastring userAgent string.\n * @param {!string} expr Regular expression used as match criteria.\n * @param {!number} pos position in the version string to be returned.\n * @return {!number} browser version.\n */\nexport function extractVersion(uastring, expr, pos) {\n  const match = uastring.match(expr);\n  return match && match.length >= pos && parseInt(match[pos], 10);\n}\n\n// Wraps the peerconnection event eventNameToWrap in a function\n// which returns the modified event object (or false to prevent\n// the event).\nexport function wrapPeerConnectionEvent(window, eventNameToWrap, wrapper) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  const proto = window.RTCPeerConnection.prototype;\n  const nativeAddEventListener = proto.addEventListener;\n  proto.addEventListener = function(nativeEventName, cb) {\n    if (nativeEventName !== eventNameToWrap) {\n      return nativeAddEventListener.apply(this, arguments);\n    }\n    const wrappedCallback = (e) => {\n      const modifiedEvent = wrapper(e);\n      if (modifiedEvent) {\n        if (cb.handleEvent) {\n          cb.handleEvent(modifiedEvent);\n        } else {\n          cb(modifiedEvent);\n        }\n      }\n    };\n    this._eventMap = this._eventMap || {};\n    if (!this._eventMap[eventNameToWrap]) {\n      this._eventMap[eventNameToWrap] = new Map();\n    }\n    this._eventMap[eventNameToWrap].set(cb, wrappedCallback);\n    return nativeAddEventListener.apply(this, [nativeEventName,\n      wrappedCallback]);\n  };\n\n  const nativeRemoveEventListener = proto.removeEventListener;\n  proto.removeEventListener = function(nativeEventName, cb) {\n    if (nativeEventName !== eventNameToWrap || !this._eventMap\n        || !this._eventMap[eventNameToWrap]) {\n      return nativeRemoveEventListener.apply(this, arguments);\n    }\n    if (!this._eventMap[eventNameToWrap].has(cb)) {\n      return nativeRemoveEventListener.apply(this, arguments);\n    }\n    const unwrappedCb = this._eventMap[eventNameToWrap].get(cb);\n    this._eventMap[eventNameToWrap].delete(cb);\n    if (this._eventMap[eventNameToWrap].size === 0) {\n      delete this._eventMap[eventNameToWrap];\n    }\n    if (Object.keys(this._eventMap).length === 0) {\n      delete this._eventMap;\n    }\n    return nativeRemoveEventListener.apply(this, [nativeEventName,\n      unwrappedCb]);\n  };\n\n  Object.defineProperty(proto, 'on' + eventNameToWrap, {\n    get() {\n      return this['_on' + eventNameToWrap];\n    },\n    set(cb) {\n      if (this['_on' + eventNameToWrap]) {\n        this.removeEventListener(eventNameToWrap,\n          this['_on' + eventNameToWrap]);\n        delete this['_on' + eventNameToWrap];\n      }\n      if (cb) {\n        this.addEventListener(eventNameToWrap,\n          this['_on' + eventNameToWrap] = cb);\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n}\n\nexport function disableLog(bool) {\n  if (typeof bool !== 'boolean') {\n    return new Error('Argument type: ' + typeof bool +\n        '. Please use a boolean.');\n  }\n  logDisabled_ = bool;\n  return (bool) ? 'adapter.js logging disabled' :\n    'adapter.js logging enabled';\n}\n\n/**\n * Disable or enable deprecation warnings\n * @param {!boolean} bool set to true to disable warnings.\n */\nexport function disableWarnings(bool) {\n  if (typeof bool !== 'boolean') {\n    return new Error('Argument type: ' + typeof bool +\n        '. Please use a boolean.');\n  }\n  deprecationWarnings_ = !bool;\n  return 'adapter.js deprecation warnings ' + (bool ? 'disabled' : 'enabled');\n}\n\nexport function log() {\n  if (typeof window === 'object') {\n    if (logDisabled_) {\n      return;\n    }\n    if (typeof console !== 'undefined' && typeof console.log === 'function') {\n      console.log.apply(console, arguments);\n    }\n  }\n}\n\n/**\n * Shows a deprecation warning suggesting the modern and spec-compatible API.\n */\nexport function deprecated(oldMethod, newMethod) {\n  if (!deprecationWarnings_) {\n    return;\n  }\n  console.warn(oldMethod + ' is deprecated, please use ' + newMethod +\n      ' instead.');\n}\n\n/**\n * Browser detector.\n *\n * @return {object} result containing browser and version\n *     properties.\n */\nexport function detectBrowser(window) {\n  // Returned result object.\n  const result = {browser: null, version: null};\n\n  // Fail early if it's not a browser\n  if (typeof window === 'undefined' || !window.navigator ||\n      !window.navigator.userAgent) {\n    result.browser = 'Not a browser.';\n    return result;\n  }\n\n  const {navigator} = window;\n\n  // Prefer navigator.userAgentData.\n  if (navigator.userAgentData && navigator.userAgentData.brands) {\n    const chromium = navigator.userAgentData.brands.find((brand) => {\n      return brand.brand === 'Chromium';\n    });\n    if (chromium) {\n      return {browser: 'chrome', version: parseInt(chromium.version, 10)};\n    }\n  }\n\n  if (navigator.mozGetUserMedia) { // Firefox.\n    result.browser = 'firefox';\n    result.version = extractVersion(navigator.userAgent,\n      /Firefox\\/(\\d+)\\./, 1);\n  } else if (navigator.webkitGetUserMedia ||\n      (window.isSecureContext === false && window.webkitRTCPeerConnection)) {\n    // Chrome, Chromium, Webview, Opera.\n    // Version matches Chrome/WebRTC version.\n    // Chrome 74 removed webkitGetUserMedia on http as well so we need the\n    // more complicated fallback to webkitRTCPeerConnection.\n    result.browser = 'chrome';\n    result.version = extractVersion(navigator.userAgent,\n      /Chrom(e|ium)\\/(\\d+)\\./, 2);\n  } else if (window.RTCPeerConnection &&\n      navigator.userAgent.match(/AppleWebKit\\/(\\d+)\\./)) { // Safari.\n    result.browser = 'safari';\n    result.version = extractVersion(navigator.userAgent,\n      /AppleWebKit\\/(\\d+)\\./, 1);\n    result.supportsUnifiedPlan = window.RTCRtpTransceiver &&\n        'currentDirection' in window.RTCRtpTransceiver.prototype;\n  } else { // Default fallthrough: not supported.\n    result.browser = 'Not a supported browser.';\n    return result;\n  }\n\n  return result;\n}\n\n/**\n * Checks if something is an object.\n *\n * @param {*} val The something you want to check.\n * @return true if val is an object, false otherwise.\n */\nfunction isObject(val) {\n  return Object.prototype.toString.call(val) === '[object Object]';\n}\n\n/**\n * Remove all empty objects and undefined values\n * from a nested object -- an enhanced and vanilla version\n * of Lodash's `compact`.\n */\nexport function compactObject(data) {\n  if (!isObject(data)) {\n    return data;\n  }\n\n  return Object.keys(data).reduce(function(accumulator, key) {\n    const isObj = isObject(data[key]);\n    const value = isObj ? compactObject(data[key]) : data[key];\n    const isEmptyObject = isObj && !Object.keys(value).length;\n    if (value === undefined || isEmptyObject) {\n      return accumulator;\n    }\n    return Object.assign(accumulator, {[key]: value});\n  }, {});\n}\n\n/* iterates the stats graph recursively. */\nexport function walkStats(stats, base, resultSet) {\n  if (!base || resultSet.has(base.id)) {\n    return;\n  }\n  resultSet.set(base.id, base);\n  Object.keys(base).forEach(name => {\n    if (name.endsWith('Id')) {\n      walkStats(stats, stats.get(base[name]), resultSet);\n    } else if (name.endsWith('Ids')) {\n      base[name].forEach(id => {\n        walkStats(stats, stats.get(id), resultSet);\n      });\n    }\n  });\n}\n\n/* filter getStats for a sender/receiver track. */\nexport function filterStats(result, track, outbound) {\n  const streamStatsType = outbound ? 'outbound-rtp' : 'inbound-rtp';\n  const filteredResult = new Map();\n  if (track === null) {\n    return filteredResult;\n  }\n  const trackStats = [];\n  result.forEach(value => {\n    if (value.type === 'track' &&\n        value.trackIdentifier === track.id) {\n      trackStats.push(value);\n    }\n  });\n  trackStats.forEach(trackStat => {\n    result.forEach(stats => {\n      if (stats.type === streamStatsType && stats.trackId === trackStat.id) {\n        walkStats(result, stats, filteredResult);\n      }\n    });\n  });\n  return filteredResult;\n}\n\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\nimport * as utils from '../utils.js';\nconst logging = utils.log;\n\nexport function shimGetUserMedia(window, browserDetails) {\n  const navigator = window && window.navigator;\n\n  if (!navigator.mediaDevices) {\n    return;\n  }\n\n  const constraintsToChrome_ = function(c) {\n    if (typeof c !== 'object' || c.mandatory || c.optional) {\n      return c;\n    }\n    const cc = {};\n    Object.keys(c).forEach(key => {\n      if (key === 'require' || key === 'advanced' || key === 'mediaSource') {\n        return;\n      }\n      const r = (typeof c[key] === 'object') ? c[key] : {ideal: c[key]};\n      if (r.exact !== undefined && typeof r.exact === 'number') {\n        r.min = r.max = r.exact;\n      }\n      const oldname_ = function(prefix, name) {\n        if (prefix) {\n          return prefix + name.charAt(0).toUpperCase() + name.slice(1);\n        }\n        return (name === 'deviceId') ? 'sourceId' : name;\n      };\n      if (r.ideal !== undefined) {\n        cc.optional = cc.optional || [];\n        let oc = {};\n        if (typeof r.ideal === 'number') {\n          oc[oldname_('min', key)] = r.ideal;\n          cc.optional.push(oc);\n          oc = {};\n          oc[oldname_('max', key)] = r.ideal;\n          cc.optional.push(oc);\n        } else {\n          oc[oldname_('', key)] = r.ideal;\n          cc.optional.push(oc);\n        }\n      }\n      if (r.exact !== undefined && typeof r.exact !== 'number') {\n        cc.mandatory = cc.mandatory || {};\n        cc.mandatory[oldname_('', key)] = r.exact;\n      } else {\n        ['min', 'max'].forEach(mix => {\n          if (r[mix] !== undefined) {\n            cc.mandatory = cc.mandatory || {};\n            cc.mandatory[oldname_(mix, key)] = r[mix];\n          }\n        });\n      }\n    });\n    if (c.advanced) {\n      cc.optional = (cc.optional || []).concat(c.advanced);\n    }\n    return cc;\n  };\n\n  const shimConstraints_ = function(constraints, func) {\n    if (browserDetails.version >= 61) {\n      return func(constraints);\n    }\n    constraints = JSON.parse(JSON.stringify(constraints));\n    if (constraints && typeof constraints.audio === 'object') {\n      const remap = function(obj, a, b) {\n        if (a in obj && !(b in obj)) {\n          obj[b] = obj[a];\n          delete obj[a];\n        }\n      };\n      constraints = JSON.parse(JSON.stringify(constraints));\n      remap(constraints.audio, 'autoGainControl', 'googAutoGainControl');\n      remap(constraints.audio, 'noiseSuppression', 'googNoiseSuppression');\n      constraints.audio = constraintsToChrome_(constraints.audio);\n    }\n    if (constraints && typeof constraints.video === 'object') {\n      // Shim facingMode for mobile & surface pro.\n      let face = constraints.video.facingMode;\n      face = face && ((typeof face === 'object') ? face : {ideal: face});\n      const getSupportedFacingModeLies = browserDetails.version < 66;\n\n      if ((face && (face.exact === 'user' || face.exact === 'environment' ||\n                    face.ideal === 'user' || face.ideal === 'environment')) &&\n          !(navigator.mediaDevices.getSupportedConstraints &&\n            navigator.mediaDevices.getSupportedConstraints().facingMode &&\n            !getSupportedFacingModeLies)) {\n        delete constraints.video.facingMode;\n        let matches;\n        if (face.exact === 'environment' || face.ideal === 'environment') {\n          matches = ['back', 'rear'];\n        } else if (face.exact === 'user' || face.ideal === 'user') {\n          matches = ['front'];\n        }\n        if (matches) {\n          // Look for matches in label, or use last cam for back (typical).\n          return navigator.mediaDevices.enumerateDevices()\n            .then(devices => {\n              devices = devices.filter(d => d.kind === 'videoinput');\n              let dev = devices.find(d => matches.some(match =>\n                d.label.toLowerCase().includes(match)));\n              if (!dev && devices.length && matches.includes('back')) {\n                dev = devices[devices.length - 1]; // more likely the back cam\n              }\n              if (dev) {\n                constraints.video.deviceId = face.exact\n                  ? {exact: dev.deviceId}\n                  : {ideal: dev.deviceId};\n              }\n              constraints.video = constraintsToChrome_(constraints.video);\n              logging('chrome: ' + JSON.stringify(constraints));\n              return func(constraints);\n            });\n        }\n      }\n      constraints.video = constraintsToChrome_(constraints.video);\n    }\n    logging('chrome: ' + JSON.stringify(constraints));\n    return func(constraints);\n  };\n\n  const shimError_ = function(e) {\n    if (browserDetails.version >= 64) {\n      return e;\n    }\n    return {\n      name: {\n        PermissionDeniedError: 'NotAllowedError',\n        PermissionDismissedError: 'NotAllowedError',\n        InvalidStateError: 'NotAllowedError',\n        DevicesNotFoundError: 'NotFoundError',\n        ConstraintNotSatisfiedError: 'OverconstrainedError',\n        TrackStartError: 'NotReadableError',\n        MediaDeviceFailedDueToShutdown: 'NotAllowedError',\n        MediaDeviceKillSwitchOn: 'NotAllowedError',\n        TabCaptureError: 'AbortError',\n        ScreenCaptureError: 'AbortError',\n        DeviceCaptureError: 'AbortError'\n      }[e.name] || e.name,\n      message: e.message,\n      constraint: e.constraint || e.constraintName,\n      toString() {\n        return this.name + (this.message && ': ') + this.message;\n      }\n    };\n  };\n\n  const getUserMedia_ = function(constraints, onSuccess, onError) {\n    shimConstraints_(constraints, c => {\n      navigator.webkitGetUserMedia(c, onSuccess, e => {\n        if (onError) {\n          onError(shimError_(e));\n        }\n      });\n    });\n  };\n  navigator.getUserMedia = getUserMedia_.bind(navigator);\n\n  // Even though Chrome 45 has navigator.mediaDevices and a getUserMedia\n  // function which returns a Promise, it does not accept spec-style\n  // constraints.\n  if (navigator.mediaDevices.getUserMedia) {\n    const origGetUserMedia = navigator.mediaDevices.getUserMedia.\n      bind(navigator.mediaDevices);\n    navigator.mediaDevices.getUserMedia = function(cs) {\n      return shimConstraints_(cs, c => origGetUserMedia(c).then(stream => {\n        if (c.audio && !stream.getAudioTracks().length ||\n            c.video && !stream.getVideoTracks().length) {\n          stream.getTracks().forEach(track => {\n            track.stop();\n          });\n          throw new DOMException('', 'NotFoundError');\n        }\n        return stream;\n      }, e => Promise.reject(shimError_(e))));\n    };\n  }\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\nimport * as utils from '../utils.js';\n\nexport {shimGetUserMedia} from './getusermedia';\n\nexport function shimMediaStream(window) {\n  window.MediaStream = window.MediaStream || window.webkitMediaStream;\n}\n\nexport function shimOnTrack(window) {\n  if (typeof window === 'object' && window.RTCPeerConnection && !('ontrack' in\n      window.RTCPeerConnection.prototype)) {\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'ontrack', {\n      get() {\n        return this._ontrack;\n      },\n      set(f) {\n        if (this._ontrack) {\n          this.removeEventListener('track', this._ontrack);\n        }\n        this.addEventListener('track', this._ontrack = f);\n      },\n      enumerable: true,\n      configurable: true\n    });\n    const origSetRemoteDescription =\n        window.RTCPeerConnection.prototype.setRemoteDescription;\n    window.RTCPeerConnection.prototype.setRemoteDescription =\n      function setRemoteDescription() {\n        if (!this._ontrackpoly) {\n          this._ontrackpoly = (e) => {\n            // onaddstream does not fire when a track is added to an existing\n            // stream. But stream.onaddtrack is implemented so we use that.\n            e.stream.addEventListener('addtrack', te => {\n              let receiver;\n              if (window.RTCPeerConnection.prototype.getReceivers) {\n                receiver = this.getReceivers()\n                  .find(r => r.track && r.track.id === te.track.id);\n              } else {\n                receiver = {track: te.track};\n              }\n\n              const event = new Event('track');\n              event.track = te.track;\n              event.receiver = receiver;\n              event.transceiver = {receiver};\n              event.streams = [e.stream];\n              this.dispatchEvent(event);\n            });\n            e.stream.getTracks().forEach(track => {\n              let receiver;\n              if (window.RTCPeerConnection.prototype.getReceivers) {\n                receiver = this.getReceivers()\n                  .find(r => r.track && r.track.id === track.id);\n              } else {\n                receiver = {track};\n              }\n              const event = new Event('track');\n              event.track = track;\n              event.receiver = receiver;\n              event.transceiver = {receiver};\n              event.streams = [e.stream];\n              this.dispatchEvent(event);\n            });\n          };\n          this.addEventListener('addstream', this._ontrackpoly);\n        }\n        return origSetRemoteDescription.apply(this, arguments);\n      };\n  } else {\n    // even if RTCRtpTransceiver is in window, it is only used and\n    // emitted in unified-plan. Unfortunately this means we need\n    // to unconditionally wrap the event.\n    utils.wrapPeerConnectionEvent(window, 'track', e => {\n      if (!e.transceiver) {\n        Object.defineProperty(e, 'transceiver',\n          {value: {receiver: e.receiver}});\n      }\n      return e;\n    });\n  }\n}\n\nexport function shimGetSendersWithDtmf(window) {\n  // Overrides addTrack/removeTrack, depends on shimAddTrackRemoveTrack.\n  if (typeof window === 'object' && window.RTCPeerConnection &&\n      !('getSenders' in window.RTCPeerConnection.prototype) &&\n      'createDTMFSender' in window.RTCPeerConnection.prototype) {\n    const shimSenderWithDtmf = function(pc, track) {\n      return {\n        track,\n        get dtmf() {\n          if (this._dtmf === undefined) {\n            if (track.kind === 'audio') {\n              this._dtmf = pc.createDTMFSender(track);\n            } else {\n              this._dtmf = null;\n            }\n          }\n          return this._dtmf;\n        },\n        _pc: pc\n      };\n    };\n\n    // augment addTrack when getSenders is not available.\n    if (!window.RTCPeerConnection.prototype.getSenders) {\n      window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n        this._senders = this._senders || [];\n        return this._senders.slice(); // return a copy of the internal state.\n      };\n      const origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n      window.RTCPeerConnection.prototype.addTrack =\n        function addTrack(track, stream) {\n          let sender = origAddTrack.apply(this, arguments);\n          if (!sender) {\n            sender = shimSenderWithDtmf(this, track);\n            this._senders.push(sender);\n          }\n          return sender;\n        };\n\n      const origRemoveTrack = window.RTCPeerConnection.prototype.removeTrack;\n      window.RTCPeerConnection.prototype.removeTrack =\n        function removeTrack(sender) {\n          origRemoveTrack.apply(this, arguments);\n          const idx = this._senders.indexOf(sender);\n          if (idx !== -1) {\n            this._senders.splice(idx, 1);\n          }\n        };\n    }\n    const origAddStream = window.RTCPeerConnection.prototype.addStream;\n    window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n      this._senders = this._senders || [];\n      origAddStream.apply(this, [stream]);\n      stream.getTracks().forEach(track => {\n        this._senders.push(shimSenderWithDtmf(this, track));\n      });\n    };\n\n    const origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n    window.RTCPeerConnection.prototype.removeStream =\n      function removeStream(stream) {\n        this._senders = this._senders || [];\n        origRemoveStream.apply(this, [stream]);\n\n        stream.getTracks().forEach(track => {\n          const sender = this._senders.find(s => s.track === track);\n          if (sender) { // remove sender\n            this._senders.splice(this._senders.indexOf(sender), 1);\n          }\n        });\n      };\n  } else if (typeof window === 'object' && window.RTCPeerConnection &&\n             'getSenders' in window.RTCPeerConnection.prototype &&\n             'createDTMFSender' in window.RTCPeerConnection.prototype &&\n             window.RTCRtpSender &&\n             !('dtmf' in window.RTCRtpSender.prototype)) {\n    const origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n    window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n      const senders = origGetSenders.apply(this, []);\n      senders.forEach(sender => sender._pc = this);\n      return senders;\n    };\n\n    Object.defineProperty(window.RTCRtpSender.prototype, 'dtmf', {\n      get() {\n        if (this._dtmf === undefined) {\n          if (this.track.kind === 'audio') {\n            this._dtmf = this._pc.createDTMFSender(this.track);\n          } else {\n            this._dtmf = null;\n          }\n        }\n        return this._dtmf;\n      }\n    });\n  }\n}\n\nexport function shimSenderReceiverGetStats(window) {\n  if (!(typeof window === 'object' && window.RTCPeerConnection &&\n      window.RTCRtpSender && window.RTCRtpReceiver)) {\n    return;\n  }\n\n  // shim sender stats.\n  if (!('getStats' in window.RTCRtpSender.prototype)) {\n    const origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n    if (origGetSenders) {\n      window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n        const senders = origGetSenders.apply(this, []);\n        senders.forEach(sender => sender._pc = this);\n        return senders;\n      };\n    }\n\n    const origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n    if (origAddTrack) {\n      window.RTCPeerConnection.prototype.addTrack = function addTrack() {\n        const sender = origAddTrack.apply(this, arguments);\n        sender._pc = this;\n        return sender;\n      };\n    }\n    window.RTCRtpSender.prototype.getStats = function getStats() {\n      const sender = this;\n      return this._pc.getStats().then(result =>\n        /* Note: this will include stats of all senders that\n         *   send a track with the same id as sender.track as\n         *   it is not possible to identify the RTCRtpSender.\n         */\n        utils.filterStats(result, sender.track, true));\n    };\n  }\n\n  // shim receiver stats.\n  if (!('getStats' in window.RTCRtpReceiver.prototype)) {\n    const origGetReceivers = window.RTCPeerConnection.prototype.getReceivers;\n    if (origGetReceivers) {\n      window.RTCPeerConnection.prototype.getReceivers =\n        function getReceivers() {\n          const receivers = origGetReceivers.apply(this, []);\n          receivers.forEach(receiver => receiver._pc = this);\n          return receivers;\n        };\n    }\n    utils.wrapPeerConnectionEvent(window, 'track', e => {\n      e.receiver._pc = e.srcElement;\n      return e;\n    });\n    window.RTCRtpReceiver.prototype.getStats = function getStats() {\n      const receiver = this;\n      return this._pc.getStats().then(result =>\n        utils.filterStats(result, receiver.track, false));\n    };\n  }\n\n  if (!('getStats' in window.RTCRtpSender.prototype &&\n      'getStats' in window.RTCRtpReceiver.prototype)) {\n    return;\n  }\n\n  // shim RTCPeerConnection.getStats(track).\n  const origGetStats = window.RTCPeerConnection.prototype.getStats;\n  window.RTCPeerConnection.prototype.getStats = function getStats() {\n    if (arguments.length > 0 &&\n        arguments[0] instanceof window.MediaStreamTrack) {\n      const track = arguments[0];\n      let sender;\n      let receiver;\n      let err;\n      this.getSenders().forEach(s => {\n        if (s.track === track) {\n          if (sender) {\n            err = true;\n          } else {\n            sender = s;\n          }\n        }\n      });\n      this.getReceivers().forEach(r => {\n        if (r.track === track) {\n          if (receiver) {\n            err = true;\n          } else {\n            receiver = r;\n          }\n        }\n        return r.track === track;\n      });\n      if (err || (sender && receiver)) {\n        return Promise.reject(new DOMException(\n          'There are more than one sender or receiver for the track.',\n          'InvalidAccessError'));\n      } else if (sender) {\n        return sender.getStats();\n      } else if (receiver) {\n        return receiver.getStats();\n      }\n      return Promise.reject(new DOMException(\n        'There is no sender or receiver for the track.',\n        'InvalidAccessError'));\n    }\n    return origGetStats.apply(this, arguments);\n  };\n}\n\nexport function shimAddTrackRemoveTrackWithNative(window) {\n  // shim addTrack/removeTrack with native variants in order to make\n  // the interactions with legacy getLocalStreams behave as in other browsers.\n  // Keeps a mapping stream.id => [stream, rtpsenders...]\n  window.RTCPeerConnection.prototype.getLocalStreams =\n    function getLocalStreams() {\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n      return Object.keys(this._shimmedLocalStreams)\n        .map(streamId => this._shimmedLocalStreams[streamId][0]);\n    };\n\n  const origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n  window.RTCPeerConnection.prototype.addTrack =\n    function addTrack(track, stream) {\n      if (!stream) {\n        return origAddTrack.apply(this, arguments);\n      }\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n\n      const sender = origAddTrack.apply(this, arguments);\n      if (!this._shimmedLocalStreams[stream.id]) {\n        this._shimmedLocalStreams[stream.id] = [stream, sender];\n      } else if (this._shimmedLocalStreams[stream.id].indexOf(sender) === -1) {\n        this._shimmedLocalStreams[stream.id].push(sender);\n      }\n      return sender;\n    };\n\n  const origAddStream = window.RTCPeerConnection.prototype.addStream;\n  window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n    this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n\n    stream.getTracks().forEach(track => {\n      const alreadyExists = this.getSenders().find(s => s.track === track);\n      if (alreadyExists) {\n        throw new DOMException('Track already exists.',\n          'InvalidAccessError');\n      }\n    });\n    const existingSenders = this.getSenders();\n    origAddStream.apply(this, arguments);\n    const newSenders = this.getSenders()\n      .filter(newSender => existingSenders.indexOf(newSender) === -1);\n    this._shimmedLocalStreams[stream.id] = [stream].concat(newSenders);\n  };\n\n  const origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n  window.RTCPeerConnection.prototype.removeStream =\n    function removeStream(stream) {\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n      delete this._shimmedLocalStreams[stream.id];\n      return origRemoveStream.apply(this, arguments);\n    };\n\n  const origRemoveTrack = window.RTCPeerConnection.prototype.removeTrack;\n  window.RTCPeerConnection.prototype.removeTrack =\n    function removeTrack(sender) {\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n      if (sender) {\n        Object.keys(this._shimmedLocalStreams).forEach(streamId => {\n          const idx = this._shimmedLocalStreams[streamId].indexOf(sender);\n          if (idx !== -1) {\n            this._shimmedLocalStreams[streamId].splice(idx, 1);\n          }\n          if (this._shimmedLocalStreams[streamId].length === 1) {\n            delete this._shimmedLocalStreams[streamId];\n          }\n        });\n      }\n      return origRemoveTrack.apply(this, arguments);\n    };\n}\n\nexport function shimAddTrackRemoveTrack(window, browserDetails) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  // shim addTrack and removeTrack.\n  if (window.RTCPeerConnection.prototype.addTrack &&\n      browserDetails.version >= 65) {\n    return shimAddTrackRemoveTrackWithNative(window);\n  }\n\n  // also shim pc.getLocalStreams when addTrack is shimmed\n  // to return the original streams.\n  const origGetLocalStreams = window.RTCPeerConnection.prototype\n    .getLocalStreams;\n  window.RTCPeerConnection.prototype.getLocalStreams =\n    function getLocalStreams() {\n      const nativeStreams = origGetLocalStreams.apply(this);\n      this._reverseStreams = this._reverseStreams || {};\n      return nativeStreams.map(stream => this._reverseStreams[stream.id]);\n    };\n\n  const origAddStream = window.RTCPeerConnection.prototype.addStream;\n  window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n    this._streams = this._streams || {};\n    this._reverseStreams = this._reverseStreams || {};\n\n    stream.getTracks().forEach(track => {\n      const alreadyExists = this.getSenders().find(s => s.track === track);\n      if (alreadyExists) {\n        throw new DOMException('Track already exists.',\n          'InvalidAccessError');\n      }\n    });\n    // Add identity mapping for consistency with addTrack.\n    // Unless this is being used with a stream from addTrack.\n    if (!this._reverseStreams[stream.id]) {\n      const newStream = new window.MediaStream(stream.getTracks());\n      this._streams[stream.id] = newStream;\n      this._reverseStreams[newStream.id] = stream;\n      stream = newStream;\n    }\n    origAddStream.apply(this, [stream]);\n  };\n\n  const origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n  window.RTCPeerConnection.prototype.removeStream =\n    function removeStream(stream) {\n      this._streams = this._streams || {};\n      this._reverseStreams = this._reverseStreams || {};\n\n      origRemoveStream.apply(this, [(this._streams[stream.id] || stream)]);\n      delete this._reverseStreams[(this._streams[stream.id] ?\n        this._streams[stream.id].id : stream.id)];\n      delete this._streams[stream.id];\n    };\n\n  window.RTCPeerConnection.prototype.addTrack =\n    function addTrack(track, stream) {\n      if (this.signalingState === 'closed') {\n        throw new DOMException(\n          'The RTCPeerConnection\\'s signalingState is \\'closed\\'.',\n          'InvalidStateError');\n      }\n      const streams = [].slice.call(arguments, 1);\n      if (streams.length !== 1 ||\n          !streams[0].getTracks().find(t => t === track)) {\n        // this is not fully correct but all we can manage without\n        // [[associated MediaStreams]] internal slot.\n        throw new DOMException(\n          'The adapter.js addTrack polyfill only supports a single ' +\n          ' stream which is associated with the specified track.',\n          'NotSupportedError');\n      }\n\n      const alreadyExists = this.getSenders().find(s => s.track === track);\n      if (alreadyExists) {\n        throw new DOMException('Track already exists.',\n          'InvalidAccessError');\n      }\n\n      this._streams = this._streams || {};\n      this._reverseStreams = this._reverseStreams || {};\n      const oldStream = this._streams[stream.id];\n      if (oldStream) {\n        // this is using odd Chrome behaviour, use with caution:\n        // https://bugs.chromium.org/p/webrtc/issues/detail?id=7815\n        // Note: we rely on the high-level addTrack/dtmf shim to\n        // create the sender with a dtmf sender.\n        oldStream.addTrack(track);\n\n        // Trigger ONN async.\n        Promise.resolve().then(() => {\n          this.dispatchEvent(new Event('negotiationneeded'));\n        });\n      } else {\n        const newStream = new window.MediaStream([track]);\n        this._streams[stream.id] = newStream;\n        this._reverseStreams[newStream.id] = stream;\n        this.addStream(newStream);\n      }\n      return this.getSenders().find(s => s.track === track);\n    };\n\n  // replace the internal stream id with the external one and\n  // vice versa.\n  function replaceInternalStreamId(pc, description) {\n    let sdp = description.sdp;\n    Object.keys(pc._reverseStreams || []).forEach(internalId => {\n      const externalStream = pc._reverseStreams[internalId];\n      const internalStream = pc._streams[externalStream.id];\n      sdp = sdp.replace(new RegExp(internalStream.id, 'g'),\n        externalStream.id);\n    });\n    return new RTCSessionDescription({\n      type: description.type,\n      sdp\n    });\n  }\n  function replaceExternalStreamId(pc, description) {\n    let sdp = description.sdp;\n    Object.keys(pc._reverseStreams || []).forEach(internalId => {\n      const externalStream = pc._reverseStreams[internalId];\n      const internalStream = pc._streams[externalStream.id];\n      sdp = sdp.replace(new RegExp(externalStream.id, 'g'),\n        internalStream.id);\n    });\n    return new RTCSessionDescription({\n      type: description.type,\n      sdp\n    });\n  }\n  ['createOffer', 'createAnswer'].forEach(function(method) {\n    const nativeMethod = window.RTCPeerConnection.prototype[method];\n    const methodObj = {[method]() {\n      const args = arguments;\n      const isLegacyCall = arguments.length &&\n          typeof arguments[0] === 'function';\n      if (isLegacyCall) {\n        return nativeMethod.apply(this, [\n          (description) => {\n            const desc = replaceInternalStreamId(this, description);\n            args[0].apply(null, [desc]);\n          },\n          (err) => {\n            if (args[1]) {\n              args[1].apply(null, err);\n            }\n          }, arguments[2]\n        ]);\n      }\n      return nativeMethod.apply(this, arguments)\n        .then(description => replaceInternalStreamId(this, description));\n    }};\n    window.RTCPeerConnection.prototype[method] = methodObj[method];\n  });\n\n  const origSetLocalDescription =\n      window.RTCPeerConnection.prototype.setLocalDescription;\n  window.RTCPeerConnection.prototype.setLocalDescription =\n    function setLocalDescription() {\n      if (!arguments.length || !arguments[0].type) {\n        return origSetLocalDescription.apply(this, arguments);\n      }\n      arguments[0] = replaceExternalStreamId(this, arguments[0]);\n      return origSetLocalDescription.apply(this, arguments);\n    };\n\n  // TODO: mangle getStats: https://w3c.github.io/webrtc-stats/#dom-rtcmediastreamstats-streamidentifier\n\n  const origLocalDescription = Object.getOwnPropertyDescriptor(\n    window.RTCPeerConnection.prototype, 'localDescription');\n  Object.defineProperty(window.RTCPeerConnection.prototype,\n    'localDescription', {\n      get() {\n        const description = origLocalDescription.get.apply(this);\n        if (description.type === '') {\n          return description;\n        }\n        return replaceInternalStreamId(this, description);\n      }\n    });\n\n  window.RTCPeerConnection.prototype.removeTrack =\n    function removeTrack(sender) {\n      if (this.signalingState === 'closed') {\n        throw new DOMException(\n          'The RTCPeerConnection\\'s signalingState is \\'closed\\'.',\n          'InvalidStateError');\n      }\n      // We can not yet check for sender instanceof RTCRtpSender\n      // since we shim RTPSender. So we check if sender._pc is set.\n      if (!sender._pc) {\n        throw new DOMException('Argument 1 of RTCPeerConnection.removeTrack ' +\n            'does not implement interface RTCRtpSender.', 'TypeError');\n      }\n      const isLocal = sender._pc === this;\n      if (!isLocal) {\n        throw new DOMException('Sender was not created by this connection.',\n          'InvalidAccessError');\n      }\n\n      // Search for the native stream the senders track belongs to.\n      this._streams = this._streams || {};\n      let stream;\n      Object.keys(this._streams).forEach(streamid => {\n        const hasTrack = this._streams[streamid].getTracks()\n          .find(track => sender.track === track);\n        if (hasTrack) {\n          stream = this._streams[streamid];\n        }\n      });\n\n      if (stream) {\n        if (stream.getTracks().length === 1) {\n          // if this is the last track of the stream, remove the stream. This\n          // takes care of any shimmed _senders.\n          this.removeStream(this._reverseStreams[stream.id]);\n        } else {\n          // relying on the same odd chrome behaviour as above.\n          stream.removeTrack(sender.track);\n        }\n        this.dispatchEvent(new Event('negotiationneeded'));\n      }\n    };\n}\n\nexport function shimPeerConnection(window, browserDetails) {\n  if (!window.RTCPeerConnection && window.webkitRTCPeerConnection) {\n    // very basic support for old versions.\n    window.RTCPeerConnection = window.webkitRTCPeerConnection;\n  }\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n\n  // shim implicit creation of RTCSessionDescription/RTCIceCandidate\n  if (browserDetails.version < 53) {\n    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n      .forEach(function(method) {\n        const nativeMethod = window.RTCPeerConnection.prototype[method];\n        const methodObj = {[method]() {\n          arguments[0] = new ((method === 'addIceCandidate') ?\n            window.RTCIceCandidate :\n            window.RTCSessionDescription)(arguments[0]);\n          return nativeMethod.apply(this, arguments);\n        }};\n        window.RTCPeerConnection.prototype[method] = methodObj[method];\n      });\n  }\n}\n\n// Attempt to fix ONN in plan-b mode.\nexport function fixNegotiationNeeded(window, browserDetails) {\n  utils.wrapPeerConnectionEvent(window, 'negotiationneeded', e => {\n    const pc = e.target;\n    if (browserDetails.version < 72 || (pc.getConfiguration &&\n        pc.getConfiguration().sdpSemantics === 'plan-b')) {\n      if (pc.signalingState !== 'stable') {\n        return;\n      }\n    }\n    return e;\n  });\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nimport * as utils from '../utils';\n\nexport function shimGetUserMedia(window, browserDetails) {\n  const navigator = window && window.navigator;\n  const MediaStreamTrack = window && window.MediaStreamTrack;\n\n  navigator.getUserMedia = function(constraints, onSuccess, onError) {\n    // Replace Firefox 44+'s deprecation warning with unprefixed version.\n    utils.deprecated('navigator.getUserMedia',\n      'navigator.mediaDevices.getUserMedia');\n    navigator.mediaDevices.getUserMedia(constraints).then(onSuccess, onError);\n  };\n\n  if (!(browserDetails.version > 55 &&\n      'autoGainControl' in navigator.mediaDevices.getSupportedConstraints())) {\n    const remap = function(obj, a, b) {\n      if (a in obj && !(b in obj)) {\n        obj[b] = obj[a];\n        delete obj[a];\n      }\n    };\n\n    const nativeGetUserMedia = navigator.mediaDevices.getUserMedia.\n      bind(navigator.mediaDevices);\n    navigator.mediaDevices.getUserMedia = function(c) {\n      if (typeof c === 'object' && typeof c.audio === 'object') {\n        c = JSON.parse(JSON.stringify(c));\n        remap(c.audio, 'autoGainControl', 'mozAutoGainControl');\n        remap(c.audio, 'noiseSuppression', 'mozNoiseSuppression');\n      }\n      return nativeGetUserMedia(c);\n    };\n\n    if (MediaStreamTrack && MediaStreamTrack.prototype.getSettings) {\n      const nativeGetSettings = MediaStreamTrack.prototype.getSettings;\n      MediaStreamTrack.prototype.getSettings = function() {\n        const obj = nativeGetSettings.apply(this, arguments);\n        remap(obj, 'mozAutoGainControl', 'autoGainControl');\n        remap(obj, 'mozNoiseSuppression', 'noiseSuppression');\n        return obj;\n      };\n    }\n\n    if (MediaStreamTrack && MediaStreamTrack.prototype.applyConstraints) {\n      const nativeApplyConstraints =\n        MediaStreamTrack.prototype.applyConstraints;\n      MediaStreamTrack.prototype.applyConstraints = function(c) {\n        if (this.kind === 'audio' && typeof c === 'object') {\n          c = JSON.parse(JSON.stringify(c));\n          remap(c, 'autoGainControl', 'mozAutoGainControl');\n          remap(c, 'noiseSuppression', 'mozNoiseSuppression');\n        }\n        return nativeApplyConstraints.apply(this, [c]);\n      };\n    }\n  }\n}\n","/*\n *  Copyright (c) 2018 The adapter.js project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nexport function shimGetDisplayMedia(window, preferredMediaSource) {\n  if (window.navigator.mediaDevices &&\n    'getDisplayMedia' in window.navigator.mediaDevices) {\n    return;\n  }\n  if (!(window.navigator.mediaDevices)) {\n    return;\n  }\n  window.navigator.mediaDevices.getDisplayMedia =\n    function getDisplayMedia(constraints) {\n      if (!(constraints && constraints.video)) {\n        const err = new DOMException('getDisplayMedia without video ' +\n            'constraints is undefined');\n        err.name = 'NotFoundError';\n        // from https://heycam.github.io/webidl/#idl-DOMException-error-names\n        err.code = 8;\n        return Promise.reject(err);\n      }\n      if (constraints.video === true) {\n        constraints.video = {mediaSource: preferredMediaSource};\n      } else {\n        constraints.video.mediaSource = preferredMediaSource;\n      }\n      return window.navigator.mediaDevices.getUserMedia(constraints);\n    };\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nimport * as utils from '../utils';\nexport {shimGetUserMedia} from './getusermedia';\nexport {shimGetDisplayMedia} from './getdisplaymedia';\n\nexport function shimOnTrack(window) {\n  if (typeof window === 'object' && window.RTCTrackEvent &&\n      ('receiver' in window.RTCTrackEvent.prototype) &&\n      !('transceiver' in window.RTCTrackEvent.prototype)) {\n    Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n      get() {\n        return {receiver: this.receiver};\n      }\n    });\n  }\n}\n\nexport function shimPeerConnection(window, browserDetails) {\n  if (typeof window !== 'object' ||\n      !(window.RTCPeerConnection || window.mozRTCPeerConnection)) {\n    return; // probably media.peerconnection.enabled=false in about:config\n  }\n  if (!window.RTCPeerConnection && window.mozRTCPeerConnection) {\n    // very basic support for old versions.\n    window.RTCPeerConnection = window.mozRTCPeerConnection;\n  }\n\n  if (browserDetails.version < 53) {\n    // shim away need for obsolete RTCIceCandidate/RTCSessionDescription.\n    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n      .forEach(function(method) {\n        const nativeMethod = window.RTCPeerConnection.prototype[method];\n        const methodObj = {[method]() {\n          arguments[0] = new ((method === 'addIceCandidate') ?\n            window.RTCIceCandidate :\n            window.RTCSessionDescription)(arguments[0]);\n          return nativeMethod.apply(this, arguments);\n        }};\n        window.RTCPeerConnection.prototype[method] = methodObj[method];\n      });\n  }\n\n  const modernStatsTypes = {\n    inboundrtp: 'inbound-rtp',\n    outboundrtp: 'outbound-rtp',\n    candidatepair: 'candidate-pair',\n    localcandidate: 'local-candidate',\n    remotecandidate: 'remote-candidate'\n  };\n\n  const nativeGetStats = window.RTCPeerConnection.prototype.getStats;\n  window.RTCPeerConnection.prototype.getStats = function getStats() {\n    const [selector, onSucc, onErr] = arguments;\n    return nativeGetStats.apply(this, [selector || null])\n      .then(stats => {\n        if (browserDetails.version < 53 && !onSucc) {\n          // Shim only promise getStats with spec-hyphens in type names\n          // Leave callback version alone; misc old uses of forEach before Map\n          try {\n            stats.forEach(stat => {\n              stat.type = modernStatsTypes[stat.type] || stat.type;\n            });\n          } catch (e) {\n            if (e.name !== 'TypeError') {\n              throw e;\n            }\n            // Avoid TypeError: \"type\" is read-only, in old versions. 34-43ish\n            stats.forEach((stat, i) => {\n              stats.set(i, Object.assign({}, stat, {\n                type: modernStatsTypes[stat.type] || stat.type\n              }));\n            });\n          }\n        }\n        return stats;\n      })\n      .then(onSucc, onErr);\n  };\n}\n\nexport function shimSenderGetStats(window) {\n  if (!(typeof window === 'object' && window.RTCPeerConnection &&\n      window.RTCRtpSender)) {\n    return;\n  }\n  if (window.RTCRtpSender && 'getStats' in window.RTCRtpSender.prototype) {\n    return;\n  }\n  const origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n  if (origGetSenders) {\n    window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n      const senders = origGetSenders.apply(this, []);\n      senders.forEach(sender => sender._pc = this);\n      return senders;\n    };\n  }\n\n  const origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n  if (origAddTrack) {\n    window.RTCPeerConnection.prototype.addTrack = function addTrack() {\n      const sender = origAddTrack.apply(this, arguments);\n      sender._pc = this;\n      return sender;\n    };\n  }\n  window.RTCRtpSender.prototype.getStats = function getStats() {\n    return this.track ? this._pc.getStats(this.track) :\n      Promise.resolve(new Map());\n  };\n}\n\nexport function shimReceiverGetStats(window) {\n  if (!(typeof window === 'object' && window.RTCPeerConnection &&\n      window.RTCRtpSender)) {\n    return;\n  }\n  if (window.RTCRtpSender && 'getStats' in window.RTCRtpReceiver.prototype) {\n    return;\n  }\n  const origGetReceivers = window.RTCPeerConnection.prototype.getReceivers;\n  if (origGetReceivers) {\n    window.RTCPeerConnection.prototype.getReceivers = function getReceivers() {\n      const receivers = origGetReceivers.apply(this, []);\n      receivers.forEach(receiver => receiver._pc = this);\n      return receivers;\n    };\n  }\n  utils.wrapPeerConnectionEvent(window, 'track', e => {\n    e.receiver._pc = e.srcElement;\n    return e;\n  });\n  window.RTCRtpReceiver.prototype.getStats = function getStats() {\n    return this._pc.getStats(this.track);\n  };\n}\n\nexport function shimRemoveStream(window) {\n  if (!window.RTCPeerConnection ||\n      'removeStream' in window.RTCPeerConnection.prototype) {\n    return;\n  }\n  window.RTCPeerConnection.prototype.removeStream =\n    function removeStream(stream) {\n      utils.deprecated('removeStream', 'removeTrack');\n      this.getSenders().forEach(sender => {\n        if (sender.track && stream.getTracks().includes(sender.track)) {\n          this.removeTrack(sender);\n        }\n      });\n    };\n}\n\nexport function shimRTCDataChannel(window) {\n  // rename DataChannel to RTCDataChannel (native fix in FF60):\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1173851\n  if (window.DataChannel && !window.RTCDataChannel) {\n    window.RTCDataChannel = window.DataChannel;\n  }\n}\n\nexport function shimAddTransceiver(window) {\n  // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647\n  // Firefox ignores the init sendEncodings options passed to addTransceiver\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918\n  if (!(typeof window === 'object' && window.RTCPeerConnection)) {\n    return;\n  }\n  const origAddTransceiver = window.RTCPeerConnection.prototype.addTransceiver;\n  if (origAddTransceiver) {\n    window.RTCPeerConnection.prototype.addTransceiver =\n      function addTransceiver() {\n        this.setParametersPromises = [];\n        // WebIDL input coercion and validation\n        let sendEncodings = arguments[1] && arguments[1].sendEncodings;\n        if (sendEncodings === undefined) {\n          sendEncodings = [];\n        }\n        sendEncodings = [...sendEncodings];\n        const shouldPerformCheck = sendEncodings.length > 0;\n        if (shouldPerformCheck) {\n          // If sendEncodings params are provided, validate grammar\n          sendEncodings.forEach((encodingParam) => {\n            if ('rid' in encodingParam) {\n              const ridRegex = /^[a-z0-9]{0,16}$/i;\n              if (!ridRegex.test(encodingParam.rid)) {\n                throw new TypeError('Invalid RID value provided.');\n              }\n            }\n            if ('scaleResolutionDownBy' in encodingParam) {\n              if (!(parseFloat(encodingParam.scaleResolutionDownBy) >= 1.0)) {\n                throw new RangeError('scale_resolution_down_by must be >= 1.0');\n              }\n            }\n            if ('maxFramerate' in encodingParam) {\n              if (!(parseFloat(encodingParam.maxFramerate) >= 0)) {\n                throw new RangeError('max_framerate must be >= 0.0');\n              }\n            }\n          });\n        }\n        const transceiver = origAddTransceiver.apply(this, arguments);\n        if (shouldPerformCheck) {\n          // Check if the init options were applied. If not we do this in an\n          // asynchronous way and save the promise reference in a global object.\n          // This is an ugly hack, but at the same time is way more robust than\n          // checking the sender parameters before and after the createOffer\n          // Also note that after the createoffer we are not 100% sure that\n          // the params were asynchronously applied so we might miss the\n          // opportunity to recreate offer.\n          const {sender} = transceiver;\n          const params = sender.getParameters();\n          if (!('encodings' in params) ||\n              // Avoid being fooled by patched getParameters() below.\n              (params.encodings.length === 1 &&\n               Object.keys(params.encodings[0]).length === 0)) {\n            params.encodings = sendEncodings;\n            sender.sendEncodings = sendEncodings;\n            this.setParametersPromises.push(sender.setParameters(params)\n              .then(() => {\n                delete sender.sendEncodings;\n              }).catch(() => {\n                delete sender.sendEncodings;\n              })\n            );\n          }\n        }\n        return transceiver;\n      };\n  }\n}\n\nexport function shimGetParameters(window) {\n  if (!(typeof window === 'object' && window.RTCRtpSender)) {\n    return;\n  }\n  const origGetParameters = window.RTCRtpSender.prototype.getParameters;\n  if (origGetParameters) {\n    window.RTCRtpSender.prototype.getParameters =\n      function getParameters() {\n        const params = origGetParameters.apply(this, arguments);\n        if (!('encodings' in params)) {\n          params.encodings = [].concat(this.sendEncodings || [{}]);\n        }\n        return params;\n      };\n  }\n}\n\nexport function shimCreateOffer(window) {\n  // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647\n  // Firefox ignores the init sendEncodings options passed to addTransceiver\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918\n  if (!(typeof window === 'object' && window.RTCPeerConnection)) {\n    return;\n  }\n  const origCreateOffer = window.RTCPeerConnection.prototype.createOffer;\n  window.RTCPeerConnection.prototype.createOffer = function createOffer() {\n    if (this.setParametersPromises && this.setParametersPromises.length) {\n      return Promise.all(this.setParametersPromises)\n        .then(() => {\n          return origCreateOffer.apply(this, arguments);\n        })\n        .finally(() => {\n          this.setParametersPromises = [];\n        });\n    }\n    return origCreateOffer.apply(this, arguments);\n  };\n}\n\nexport function shimCreateAnswer(window) {\n  // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647\n  // Firefox ignores the init sendEncodings options passed to addTransceiver\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918\n  if (!(typeof window === 'object' && window.RTCPeerConnection)) {\n    return;\n  }\n  const origCreateAnswer = window.RTCPeerConnection.prototype.createAnswer;\n  window.RTCPeerConnection.prototype.createAnswer = function createAnswer() {\n    if (this.setParametersPromises && this.setParametersPromises.length) {\n      return Promise.all(this.setParametersPromises)\n        .then(() => {\n          return origCreateAnswer.apply(this, arguments);\n        })\n        .finally(() => {\n          this.setParametersPromises = [];\n        });\n    }\n    return origCreateAnswer.apply(this, arguments);\n  };\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n'use strict';\nimport * as utils from '../utils';\n\nexport function shimLocalStreamsAPI(window) {\n  if (typeof window !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  if (!('getLocalStreams' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.getLocalStreams =\n      function getLocalStreams() {\n        if (!this._localStreams) {\n          this._localStreams = [];\n        }\n        return this._localStreams;\n      };\n  }\n  if (!('addStream' in window.RTCPeerConnection.prototype)) {\n    const _addTrack = window.RTCPeerConnection.prototype.addTrack;\n    window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n      if (!this._localStreams) {\n        this._localStreams = [];\n      }\n      if (!this._localStreams.includes(stream)) {\n        this._localStreams.push(stream);\n      }\n      // Try to emulate Chrome's behaviour of adding in audio-video order.\n      // Safari orders by track id.\n      stream.getAudioTracks().forEach(track => _addTrack.call(this, track,\n        stream));\n      stream.getVideoTracks().forEach(track => _addTrack.call(this, track,\n        stream));\n    };\n\n    window.RTCPeerConnection.prototype.addTrack =\n      function addTrack(track, ...streams) {\n        if (streams) {\n          streams.forEach((stream) => {\n            if (!this._localStreams) {\n              this._localStreams = [stream];\n            } else if (!this._localStreams.includes(stream)) {\n              this._localStreams.push(stream);\n            }\n          });\n        }\n        return _addTrack.apply(this, arguments);\n      };\n  }\n  if (!('removeStream' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.removeStream =\n      function removeStream(stream) {\n        if (!this._localStreams) {\n          this._localStreams = [];\n        }\n        const index = this._localStreams.indexOf(stream);\n        if (index === -1) {\n          return;\n        }\n        this._localStreams.splice(index, 1);\n        const tracks = stream.getTracks();\n        this.getSenders().forEach(sender => {\n          if (tracks.includes(sender.track)) {\n            this.removeTrack(sender);\n          }\n        });\n      };\n  }\n}\n\nexport function shimRemoteStreamsAPI(window) {\n  if (typeof window !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  if (!('getRemoteStreams' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.getRemoteStreams =\n      function getRemoteStreams() {\n        return this._remoteStreams ? this._remoteStreams : [];\n      };\n  }\n  if (!('onaddstream' in window.RTCPeerConnection.prototype)) {\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'onaddstream', {\n      get() {\n        return this._onaddstream;\n      },\n      set(f) {\n        if (this._onaddstream) {\n          this.removeEventListener('addstream', this._onaddstream);\n          this.removeEventListener('track', this._onaddstreampoly);\n        }\n        this.addEventListener('addstream', this._onaddstream = f);\n        this.addEventListener('track', this._onaddstreampoly = (e) => {\n          e.streams.forEach(stream => {\n            if (!this._remoteStreams) {\n              this._remoteStreams = [];\n            }\n            if (this._remoteStreams.includes(stream)) {\n              return;\n            }\n            this._remoteStreams.push(stream);\n            const event = new Event('addstream');\n            event.stream = stream;\n            this.dispatchEvent(event);\n          });\n        });\n      }\n    });\n    const origSetRemoteDescription =\n      window.RTCPeerConnection.prototype.setRemoteDescription;\n    window.RTCPeerConnection.prototype.setRemoteDescription =\n      function setRemoteDescription() {\n        const pc = this;\n        if (!this._onaddstreampoly) {\n          this.addEventListener('track', this._onaddstreampoly = function(e) {\n            e.streams.forEach(stream => {\n              if (!pc._remoteStreams) {\n                pc._remoteStreams = [];\n              }\n              if (pc._remoteStreams.indexOf(stream) >= 0) {\n                return;\n              }\n              pc._remoteStreams.push(stream);\n              const event = new Event('addstream');\n              event.stream = stream;\n              pc.dispatchEvent(event);\n            });\n          });\n        }\n        return origSetRemoteDescription.apply(pc, arguments);\n      };\n  }\n}\n\nexport function shimCallbacksAPI(window) {\n  if (typeof window !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  const prototype = window.RTCPeerConnection.prototype;\n  const origCreateOffer = prototype.createOffer;\n  const origCreateAnswer = prototype.createAnswer;\n  const setLocalDescription = prototype.setLocalDescription;\n  const setRemoteDescription = prototype.setRemoteDescription;\n  const addIceCandidate = prototype.addIceCandidate;\n\n  prototype.createOffer =\n    function createOffer(successCallback, failureCallback) {\n      const options = (arguments.length >= 2) ? arguments[2] : arguments[0];\n      const promise = origCreateOffer.apply(this, [options]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n\n  prototype.createAnswer =\n    function createAnswer(successCallback, failureCallback) {\n      const options = (arguments.length >= 2) ? arguments[2] : arguments[0];\n      const promise = origCreateAnswer.apply(this, [options]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n\n  let withCallback = function(description, successCallback, failureCallback) {\n    const promise = setLocalDescription.apply(this, [description]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.setLocalDescription = withCallback;\n\n  withCallback = function(description, successCallback, failureCallback) {\n    const promise = setRemoteDescription.apply(this, [description]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.setRemoteDescription = withCallback;\n\n  withCallback = function(candidate, successCallback, failureCallback) {\n    const promise = addIceCandidate.apply(this, [candidate]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.addIceCandidate = withCallback;\n}\n\nexport function shimGetUserMedia(window) {\n  const navigator = window && window.navigator;\n\n  if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n    // shim not needed in Safari 12.1\n    const mediaDevices = navigator.mediaDevices;\n    const _getUserMedia = mediaDevices.getUserMedia.bind(mediaDevices);\n    navigator.mediaDevices.getUserMedia = (constraints) => {\n      return _getUserMedia(shimConstraints(constraints));\n    };\n  }\n\n  if (!navigator.getUserMedia && navigator.mediaDevices &&\n    navigator.mediaDevices.getUserMedia) {\n    navigator.getUserMedia = function getUserMedia(constraints, cb, errcb) {\n      navigator.mediaDevices.getUserMedia(constraints)\n        .then(cb, errcb);\n    }.bind(navigator);\n  }\n}\n\nexport function shimConstraints(constraints) {\n  if (constraints && constraints.video !== undefined) {\n    return Object.assign({},\n      constraints,\n      {video: utils.compactObject(constraints.video)}\n    );\n  }\n\n  return constraints;\n}\n\nexport function shimRTCIceServerUrls(window) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  // migrate from non-spec RTCIceServer.url to RTCIceServer.urls\n  const OrigPeerConnection = window.RTCPeerConnection;\n  window.RTCPeerConnection =\n    function RTCPeerConnection(pcConfig, pcConstraints) {\n      if (pcConfig && pcConfig.iceServers) {\n        const newIceServers = [];\n        for (let i = 0; i < pcConfig.iceServers.length; i++) {\n          let server = pcConfig.iceServers[i];\n          if (server.urls === undefined && server.url) {\n            utils.deprecated('RTCIceServer.url', 'RTCIceServer.urls');\n            server = JSON.parse(JSON.stringify(server));\n            server.urls = server.url;\n            delete server.url;\n            newIceServers.push(server);\n          } else {\n            newIceServers.push(pcConfig.iceServers[i]);\n          }\n        }\n        pcConfig.iceServers = newIceServers;\n      }\n      return new OrigPeerConnection(pcConfig, pcConstraints);\n    };\n  window.RTCPeerConnection.prototype = OrigPeerConnection.prototype;\n  // wrap static methods. Currently just generateCertificate.\n  if ('generateCertificate' in OrigPeerConnection) {\n    Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n      get() {\n        return OrigPeerConnection.generateCertificate;\n      }\n    });\n  }\n}\n\nexport function shimTrackEventTransceiver(window) {\n  // Add event.transceiver member over deprecated event.receiver\n  if (typeof window === 'object' && window.RTCTrackEvent &&\n      'receiver' in window.RTCTrackEvent.prototype &&\n      !('transceiver' in window.RTCTrackEvent.prototype)) {\n    Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n      get() {\n        return {receiver: this.receiver};\n      }\n    });\n  }\n}\n\nexport function shimCreateOfferLegacy(window) {\n  const origCreateOffer = window.RTCPeerConnection.prototype.createOffer;\n  window.RTCPeerConnection.prototype.createOffer =\n    function createOffer(offerOptions) {\n      if (offerOptions) {\n        if (typeof offerOptions.offerToReceiveAudio !== 'undefined') {\n          // support bit values\n          offerOptions.offerToReceiveAudio =\n            !!offerOptions.offerToReceiveAudio;\n        }\n        const audioTransceiver = this.getTransceivers().find(transceiver =>\n          transceiver.receiver.track.kind === 'audio');\n        if (offerOptions.offerToReceiveAudio === false && audioTransceiver) {\n          if (audioTransceiver.direction === 'sendrecv') {\n            if (audioTransceiver.setDirection) {\n              audioTransceiver.setDirection('sendonly');\n            } else {\n              audioTransceiver.direction = 'sendonly';\n            }\n          } else if (audioTransceiver.direction === 'recvonly') {\n            if (audioTransceiver.setDirection) {\n              audioTransceiver.setDirection('inactive');\n            } else {\n              audioTransceiver.direction = 'inactive';\n            }\n          }\n        } else if (offerOptions.offerToReceiveAudio === true &&\n            !audioTransceiver) {\n          this.addTransceiver('audio', {direction: 'recvonly'});\n        }\n\n        if (typeof offerOptions.offerToReceiveVideo !== 'undefined') {\n          // support bit values\n          offerOptions.offerToReceiveVideo =\n            !!offerOptions.offerToReceiveVideo;\n        }\n        const videoTransceiver = this.getTransceivers().find(transceiver =>\n          transceiver.receiver.track.kind === 'video');\n        if (offerOptions.offerToReceiveVideo === false && videoTransceiver) {\n          if (videoTransceiver.direction === 'sendrecv') {\n            if (videoTransceiver.setDirection) {\n              videoTransceiver.setDirection('sendonly');\n            } else {\n              videoTransceiver.direction = 'sendonly';\n            }\n          } else if (videoTransceiver.direction === 'recvonly') {\n            if (videoTransceiver.setDirection) {\n              videoTransceiver.setDirection('inactive');\n            } else {\n              videoTransceiver.direction = 'inactive';\n            }\n          }\n        } else if (offerOptions.offerToReceiveVideo === true &&\n            !videoTransceiver) {\n          this.addTransceiver('video', {direction: 'recvonly'});\n        }\n      }\n      return origCreateOffer.apply(this, arguments);\n    };\n}\n\nexport function shimAudioContext(window) {\n  if (typeof window !== 'object' || window.AudioContext) {\n    return;\n  }\n  window.AudioContext = window.webkitAudioContext;\n}\n\n","/*\n *  Copyright (c) 2017 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nimport SDPUtils from 'sdp';\nimport * as utils from './utils';\n\nexport function shimRTCIceCandidate(window) {\n  // foundation is arbitrarily chosen as an indicator for full support for\n  // https://w3c.github.io/webrtc-pc/#rtcicecandidate-interface\n  if (!window.RTCIceCandidate || (window.RTCIceCandidate && 'foundation' in\n      window.RTCIceCandidate.prototype)) {\n    return;\n  }\n\n  const NativeRTCIceCandidate = window.RTCIceCandidate;\n  window.RTCIceCandidate = function RTCIceCandidate(args) {\n    // Remove the a= which shouldn't be part of the candidate string.\n    if (typeof args === 'object' && args.candidate &&\n        args.candidate.indexOf('a=') === 0) {\n      args = JSON.parse(JSON.stringify(args));\n      args.candidate = args.candidate.substring(2);\n    }\n\n    if (args.candidate && args.candidate.length) {\n      // Augment the native candidate with the parsed fields.\n      const nativeCandidate = new NativeRTCIceCandidate(args);\n      const parsedCandidate = SDPUtils.parseCandidate(args.candidate);\n      for (const key in parsedCandidate) {\n        if (!(key in nativeCandidate)) {\n          Object.defineProperty(nativeCandidate, key,\n            {value: parsedCandidate[key]});\n        }\n      }\n\n      // Override serializer to not serialize the extra attributes.\n      nativeCandidate.toJSON = function toJSON() {\n        return {\n          candidate: nativeCandidate.candidate,\n          sdpMid: nativeCandidate.sdpMid,\n          sdpMLineIndex: nativeCandidate.sdpMLineIndex,\n          usernameFragment: nativeCandidate.usernameFragment,\n        };\n      };\n      return nativeCandidate;\n    }\n    return new NativeRTCIceCandidate(args);\n  };\n  window.RTCIceCandidate.prototype = NativeRTCIceCandidate.prototype;\n\n  // Hook up the augmented candidate in onicecandidate and\n  // addEventListener('icecandidate', ...)\n  utils.wrapPeerConnectionEvent(window, 'icecandidate', e => {\n    if (e.candidate) {\n      Object.defineProperty(e, 'candidate', {\n        value: new window.RTCIceCandidate(e.candidate),\n        writable: 'false'\n      });\n    }\n    return e;\n  });\n}\n\nexport function shimRTCIceCandidateRelayProtocol(window) {\n  if (!window.RTCIceCandidate || (window.RTCIceCandidate && 'relayProtocol' in\n      window.RTCIceCandidate.prototype)) {\n    return;\n  }\n\n  // Hook up the augmented candidate in onicecandidate and\n  // addEventListener('icecandidate', ...)\n  utils.wrapPeerConnectionEvent(window, 'icecandidate', e => {\n    if (e.candidate) {\n      const parsedCandidate = SDPUtils.parseCandidate(e.candidate.candidate);\n      if (parsedCandidate.type === 'relay') {\n        // This is a libwebrtc-specific mapping of local type preference\n        // to relayProtocol.\n        e.candidate.relayProtocol = {\n          0: 'tls',\n          1: 'tcp',\n          2: 'udp',\n        }[parsedCandidate.priority >> 24];\n      }\n    }\n    return e;\n  });\n}\n\nexport function shimMaxMessageSize(window, browserDetails) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n\n  if (!('sctp' in window.RTCPeerConnection.prototype)) {\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'sctp', {\n      get() {\n        return typeof this._sctp === 'undefined' ? null : this._sctp;\n      }\n    });\n  }\n\n  const sctpInDescription = function(description) {\n    if (!description || !description.sdp) {\n      return false;\n    }\n    const sections = SDPUtils.splitSections(description.sdp);\n    sections.shift();\n    return sections.some(mediaSection => {\n      const mLine = SDPUtils.parseMLine(mediaSection);\n      return mLine && mLine.kind === 'application'\n          && mLine.protocol.indexOf('SCTP') !== -1;\n    });\n  };\n\n  const getRemoteFirefoxVersion = function(description) {\n    // TODO: Is there a better solution for detecting Firefox?\n    const match = description.sdp.match(/mozilla...THIS_IS_SDPARTA-(\\d+)/);\n    if (match === null || match.length < 2) {\n      return -1;\n    }\n    const version = parseInt(match[1], 10);\n    // Test for NaN (yes, this is ugly)\n    return version !== version ? -1 : version;\n  };\n\n  const getCanSendMaxMessageSize = function(remoteIsFirefox) {\n    // Every implementation we know can send at least 64 KiB.\n    // Note: Although Chrome is technically able to send up to 256 KiB, the\n    //       data does not reach the other peer reliably.\n    //       See: https://bugs.chromium.org/p/webrtc/issues/detail?id=8419\n    let canSendMaxMessageSize = 65536;\n    if (browserDetails.browser === 'firefox') {\n      if (browserDetails.version < 57) {\n        if (remoteIsFirefox === -1) {\n          // FF < 57 will send in 16 KiB chunks using the deprecated PPID\n          // fragmentation.\n          canSendMaxMessageSize = 16384;\n        } else {\n          // However, other FF (and RAWRTC) can reassemble PPID-fragmented\n          // messages. Thus, supporting ~2 GiB when sending.\n          canSendMaxMessageSize = 2147483637;\n        }\n      } else if (browserDetails.version < 60) {\n        // Currently, all FF >= 57 will reset the remote maximum message size\n        // to the default value when a data channel is created at a later\n        // stage. :(\n        // See: https://bugzilla.mozilla.org/show_bug.cgi?id=1426831\n        canSendMaxMessageSize =\n          browserDetails.version === 57 ? 65535 : 65536;\n      } else {\n        // FF >= 60 supports sending ~2 GiB\n        canSendMaxMessageSize = 2147483637;\n      }\n    }\n    return canSendMaxMessageSize;\n  };\n\n  const getMaxMessageSize = function(description, remoteIsFirefox) {\n    // Note: 65536 bytes is the default value from the SDP spec. Also,\n    //       every implementation we know supports receiving 65536 bytes.\n    let maxMessageSize = 65536;\n\n    // FF 57 has a slightly incorrect default remote max message size, so\n    // we need to adjust it here to avoid a failure when sending.\n    // See: https://bugzilla.mozilla.org/show_bug.cgi?id=1425697\n    if (browserDetails.browser === 'firefox'\n         && browserDetails.version === 57) {\n      maxMessageSize = 65535;\n    }\n\n    const match = SDPUtils.matchPrefix(description.sdp,\n      'a=max-message-size:');\n    if (match.length > 0) {\n      maxMessageSize = parseInt(match[0].substring(19), 10);\n    } else if (browserDetails.browser === 'firefox' &&\n                remoteIsFirefox !== -1) {\n      // If the maximum message size is not present in the remote SDP and\n      // both local and remote are Firefox, the remote peer can receive\n      // ~2 GiB.\n      maxMessageSize = 2147483637;\n    }\n    return maxMessageSize;\n  };\n\n  const origSetRemoteDescription =\n      window.RTCPeerConnection.prototype.setRemoteDescription;\n  window.RTCPeerConnection.prototype.setRemoteDescription =\n    function setRemoteDescription() {\n      this._sctp = null;\n      // Chrome decided to not expose .sctp in plan-b mode.\n      // As usual, adapter.js has to do an 'ugly worakaround'\n      // to cover up the mess.\n      if (browserDetails.browser === 'chrome' && browserDetails.version >= 76) {\n        const {sdpSemantics} = this.getConfiguration();\n        if (sdpSemantics === 'plan-b') {\n          Object.defineProperty(this, 'sctp', {\n            get() {\n              return typeof this._sctp === 'undefined' ? null : this._sctp;\n            },\n            enumerable: true,\n            configurable: true,\n          });\n        }\n      }\n\n      if (sctpInDescription(arguments[0])) {\n        // Check if the remote is FF.\n        const isFirefox = getRemoteFirefoxVersion(arguments[0]);\n\n        // Get the maximum message size the local peer is capable of sending\n        const canSendMMS = getCanSendMaxMessageSize(isFirefox);\n\n        // Get the maximum message size of the remote peer.\n        const remoteMMS = getMaxMessageSize(arguments[0], isFirefox);\n\n        // Determine final maximum message size\n        let maxMessageSize;\n        if (canSendMMS === 0 && remoteMMS === 0) {\n          maxMessageSize = Number.POSITIVE_INFINITY;\n        } else if (canSendMMS === 0 || remoteMMS === 0) {\n          maxMessageSize = Math.max(canSendMMS, remoteMMS);\n        } else {\n          maxMessageSize = Math.min(canSendMMS, remoteMMS);\n        }\n\n        // Create a dummy RTCSctpTransport object and the 'maxMessageSize'\n        // attribute.\n        const sctp = {};\n        Object.defineProperty(sctp, 'maxMessageSize', {\n          get() {\n            return maxMessageSize;\n          }\n        });\n        this._sctp = sctp;\n      }\n\n      return origSetRemoteDescription.apply(this, arguments);\n    };\n}\n\nexport function shimSendThrowTypeError(window) {\n  if (!(window.RTCPeerConnection &&\n      'createDataChannel' in window.RTCPeerConnection.prototype)) {\n    return;\n  }\n\n  // Note: Although Firefox >= 57 has a native implementation, the maximum\n  //       message size can be reset for all data channels at a later stage.\n  //       See: https://bugzilla.mozilla.org/show_bug.cgi?id=1426831\n\n  function wrapDcSend(dc, pc) {\n    const origDataChannelSend = dc.send;\n    dc.send = function send() {\n      const data = arguments[0];\n      const length = data.length || data.size || data.byteLength;\n      if (dc.readyState === 'open' &&\n          pc.sctp && length > pc.sctp.maxMessageSize) {\n        throw new TypeError('Message too large (can send a maximum of ' +\n          pc.sctp.maxMessageSize + ' bytes)');\n      }\n      return origDataChannelSend.apply(dc, arguments);\n    };\n  }\n  const origCreateDataChannel =\n    window.RTCPeerConnection.prototype.createDataChannel;\n  window.RTCPeerConnection.prototype.createDataChannel =\n    function createDataChannel() {\n      const dataChannel = origCreateDataChannel.apply(this, arguments);\n      wrapDcSend(dataChannel, this);\n      return dataChannel;\n    };\n  utils.wrapPeerConnectionEvent(window, 'datachannel', e => {\n    wrapDcSend(e.channel, e.target);\n    return e;\n  });\n}\n\n\n/* shims RTCConnectionState by pretending it is the same as iceConnectionState.\n * See https://bugs.chromium.org/p/webrtc/issues/detail?id=6145#c12\n * for why this is a valid hack in Chrome. In Firefox it is slightly incorrect\n * since DTLS failures would be hidden. See\n * https://bugzilla.mozilla.org/show_bug.cgi?id=1265827\n * for the Firefox tracking bug.\n */\nexport function shimConnectionState(window) {\n  if (!window.RTCPeerConnection ||\n      'connectionState' in window.RTCPeerConnection.prototype) {\n    return;\n  }\n  const proto = window.RTCPeerConnection.prototype;\n  Object.defineProperty(proto, 'connectionState', {\n    get() {\n      return {\n        completed: 'connected',\n        checking: 'connecting'\n      }[this.iceConnectionState] || this.iceConnectionState;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(proto, 'onconnectionstatechange', {\n    get() {\n      return this._onconnectionstatechange || null;\n    },\n    set(cb) {\n      if (this._onconnectionstatechange) {\n        this.removeEventListener('connectionstatechange',\n          this._onconnectionstatechange);\n        delete this._onconnectionstatechange;\n      }\n      if (cb) {\n        this.addEventListener('connectionstatechange',\n          this._onconnectionstatechange = cb);\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  ['setLocalDescription', 'setRemoteDescription'].forEach((method) => {\n    const origMethod = proto[method];\n    proto[method] = function() {\n      if (!this._connectionstatechangepoly) {\n        this._connectionstatechangepoly = e => {\n          const pc = e.target;\n          if (pc._lastConnectionState !== pc.connectionState) {\n            pc._lastConnectionState = pc.connectionState;\n            const newEvent = new Event('connectionstatechange', e);\n            pc.dispatchEvent(newEvent);\n          }\n          return e;\n        };\n        this.addEventListener('iceconnectionstatechange',\n          this._connectionstatechangepoly);\n      }\n      return origMethod.apply(this, arguments);\n    };\n  });\n}\n\nexport function removeExtmapAllowMixed(window, browserDetails) {\n  /* remove a=extmap-allow-mixed for webrtc.org < M71 */\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  if (browserDetails.browser === 'chrome' && browserDetails.version >= 71) {\n    return;\n  }\n  if (browserDetails.browser === 'safari' && browserDetails.version >= 605) {\n    return;\n  }\n  const nativeSRD = window.RTCPeerConnection.prototype.setRemoteDescription;\n  window.RTCPeerConnection.prototype.setRemoteDescription =\n  function setRemoteDescription(desc) {\n    if (desc && desc.sdp && desc.sdp.indexOf('\\na=extmap-allow-mixed') !== -1) {\n      const sdp = desc.sdp.split('\\n').filter((line) => {\n        return line.trim() !== 'a=extmap-allow-mixed';\n      }).join('\\n');\n      // Safari enforces read-only-ness of RTCSessionDescription fields.\n      if (window.RTCSessionDescription &&\n          desc instanceof window.RTCSessionDescription) {\n        arguments[0] = new window.RTCSessionDescription({\n          type: desc.type,\n          sdp,\n        });\n      } else {\n        desc.sdp = sdp;\n      }\n    }\n    return nativeSRD.apply(this, arguments);\n  };\n}\n\nexport function shimAddIceCandidateNullOrEmpty(window, browserDetails) {\n  // Support for addIceCandidate(null or undefined)\n  // as well as addIceCandidate({candidate: \"\", ...})\n  // https://bugs.chromium.org/p/chromium/issues/detail?id=978582\n  // Note: must be called before other polyfills which change the signature.\n  if (!(window.RTCPeerConnection && window.RTCPeerConnection.prototype)) {\n    return;\n  }\n  const nativeAddIceCandidate =\n      window.RTCPeerConnection.prototype.addIceCandidate;\n  if (!nativeAddIceCandidate || nativeAddIceCandidate.length === 0) {\n    return;\n  }\n  window.RTCPeerConnection.prototype.addIceCandidate =\n    function addIceCandidate() {\n      if (!arguments[0]) {\n        if (arguments[1]) {\n          arguments[1].apply(null);\n        }\n        return Promise.resolve();\n      }\n      // Firefox 68+ emits and processes {candidate: \"\", ...}, ignore\n      // in older versions.\n      // Native support for ignoring exists for Chrome M77+.\n      // Safari ignores as well, exact version unknown but works in the same\n      // version that also ignores addIceCandidate(null).\n      if (((browserDetails.browser === 'chrome' && browserDetails.version < 78)\n           || (browserDetails.browser === 'firefox'\n               && browserDetails.version < 68)\n           || (browserDetails.browser === 'safari'))\n          && arguments[0] && arguments[0].candidate === '') {\n        return Promise.resolve();\n      }\n      return nativeAddIceCandidate.apply(this, arguments);\n    };\n}\n\n// Note: Make sure to call this ahead of APIs that modify\n// setLocalDescription.length\nexport function shimParameterlessSetLocalDescription(window, browserDetails) {\n  if (!(window.RTCPeerConnection && window.RTCPeerConnection.prototype)) {\n    return;\n  }\n  const nativeSetLocalDescription =\n      window.RTCPeerConnection.prototype.setLocalDescription;\n  if (!nativeSetLocalDescription || nativeSetLocalDescription.length === 0) {\n    return;\n  }\n  window.RTCPeerConnection.prototype.setLocalDescription =\n    function setLocalDescription() {\n      let desc = arguments[0] || {};\n      if (typeof desc !== 'object' || (desc.type && desc.sdp)) {\n        return nativeSetLocalDescription.apply(this, arguments);\n      }\n      // The remaining steps should technically happen when SLD comes off the\n      // RTCPeerConnection's operations chain (not ahead of going on it), but\n      // this is too difficult to shim. Instead, this shim only covers the\n      // common case where the operations chain is empty. This is imperfect, but\n      // should cover many cases. Rationale: Even if we can't reduce the glare\n      // window to zero on imperfect implementations, there's value in tapping\n      // into the perfect negotiation pattern that several browsers support.\n      desc = {type: desc.type, sdp: desc.sdp};\n      if (!desc.type) {\n        switch (this.signalingState) {\n          case 'stable':\n          case 'have-local-offer':\n          case 'have-remote-pranswer':\n            desc.type = 'offer';\n            break;\n          default:\n            desc.type = 'answer';\n            break;\n        }\n      }\n      if (desc.sdp || (desc.type !== 'offer' && desc.type !== 'answer')) {\n        return nativeSetLocalDescription.apply(this, [desc]);\n      }\n      const func = desc.type === 'offer' ? this.createOffer : this.createAnswer;\n      return func.apply(this)\n        .then(d => nativeSetLocalDescription.apply(this, [d]));\n    };\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\nimport * as utils from './utils';\n\n// Browser shims.\nimport * as chromeShim from './chrome/chrome_shim';\nimport * as firefoxShim from './firefox/firefox_shim';\nimport * as safariShim from './safari/safari_shim';\nimport * as commonShim from './common_shim';\nimport * as sdp from 'sdp';\n\n// Shimming starts here.\nexport function adapterFactory({window} = {}, options = {\n  shimChrome: true,\n  shimFirefox: true,\n  shimSafari: true,\n}) {\n  // Utils.\n  const logging = utils.log;\n  const browserDetails = utils.detectBrowser(window);\n\n  const adapter = {\n    browserDetails,\n    commonShim,\n    extractVersion: utils.extractVersion,\n    disableLog: utils.disableLog,\n    disableWarnings: utils.disableWarnings,\n    // Expose sdp as a convenience. For production apps include directly.\n    sdp,\n  };\n\n  // Shim browser if found.\n  switch (browserDetails.browser) {\n    case 'chrome':\n      if (!chromeShim || !chromeShim.shimPeerConnection ||\n          !options.shimChrome) {\n        logging('Chrome shim is not included in this adapter release.');\n        return adapter;\n      }\n      if (browserDetails.version === null) {\n        logging('Chrome shim can not determine version, not shimming.');\n        return adapter;\n      }\n      logging('adapter.js shimming chrome.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = chromeShim;\n\n      // Must be called before shimPeerConnection.\n      commonShim.shimAddIceCandidateNullOrEmpty(window, browserDetails);\n      commonShim.shimParameterlessSetLocalDescription(window, browserDetails);\n\n      chromeShim.shimGetUserMedia(window, browserDetails);\n      chromeShim.shimMediaStream(window, browserDetails);\n      chromeShim.shimPeerConnection(window, browserDetails);\n      chromeShim.shimOnTrack(window, browserDetails);\n      chromeShim.shimAddTrackRemoveTrack(window, browserDetails);\n      chromeShim.shimGetSendersWithDtmf(window, browserDetails);\n      chromeShim.shimSenderReceiverGetStats(window, browserDetails);\n      chromeShim.fixNegotiationNeeded(window, browserDetails);\n\n      commonShim.shimRTCIceCandidate(window, browserDetails);\n      commonShim.shimRTCIceCandidateRelayProtocol(window, browserDetails);\n      commonShim.shimConnectionState(window, browserDetails);\n      commonShim.shimMaxMessageSize(window, browserDetails);\n      commonShim.shimSendThrowTypeError(window, browserDetails);\n      commonShim.removeExtmapAllowMixed(window, browserDetails);\n      break;\n    case 'firefox':\n      if (!firefoxShim || !firefoxShim.shimPeerConnection ||\n          !options.shimFirefox) {\n        logging('Firefox shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming firefox.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = firefoxShim;\n\n      // Must be called before shimPeerConnection.\n      commonShim.shimAddIceCandidateNullOrEmpty(window, browserDetails);\n      commonShim.shimParameterlessSetLocalDescription(window, browserDetails);\n\n      firefoxShim.shimGetUserMedia(window, browserDetails);\n      firefoxShim.shimPeerConnection(window, browserDetails);\n      firefoxShim.shimOnTrack(window, browserDetails);\n      firefoxShim.shimRemoveStream(window, browserDetails);\n      firefoxShim.shimSenderGetStats(window, browserDetails);\n      firefoxShim.shimReceiverGetStats(window, browserDetails);\n      firefoxShim.shimRTCDataChannel(window, browserDetails);\n      firefoxShim.shimAddTransceiver(window, browserDetails);\n      firefoxShim.shimGetParameters(window, browserDetails);\n      firefoxShim.shimCreateOffer(window, browserDetails);\n      firefoxShim.shimCreateAnswer(window, browserDetails);\n\n      commonShim.shimRTCIceCandidate(window, browserDetails);\n      commonShim.shimConnectionState(window, browserDetails);\n      commonShim.shimMaxMessageSize(window, browserDetails);\n      commonShim.shimSendThrowTypeError(window, browserDetails);\n      break;\n    case 'safari':\n      if (!safariShim || !options.shimSafari) {\n        logging('Safari shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming safari.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = safariShim;\n\n      // Must be called before shimCallbackAPI.\n      commonShim.shimAddIceCandidateNullOrEmpty(window, browserDetails);\n      commonShim.shimParameterlessSetLocalDescription(window, browserDetails);\n\n      safariShim.shimRTCIceServerUrls(window, browserDetails);\n      safariShim.shimCreateOfferLegacy(window, browserDetails);\n      safariShim.shimCallbacksAPI(window, browserDetails);\n      safariShim.shimLocalStreamsAPI(window, browserDetails);\n      safariShim.shimRemoteStreamsAPI(window, browserDetails);\n      safariShim.shimTrackEventTransceiver(window, browserDetails);\n      safariShim.shimGetUserMedia(window, browserDetails);\n      safariShim.shimAudioContext(window, browserDetails);\n\n      commonShim.shimRTCIceCandidate(window, browserDetails);\n      commonShim.shimRTCIceCandidateRelayProtocol(window, browserDetails);\n      commonShim.shimMaxMessageSize(window, browserDetails);\n      commonShim.shimSendThrowTypeError(window, browserDetails);\n      commonShim.removeExtmapAllowMixed(window, browserDetails);\n      break;\n    default:\n      logging('Unsupported browser!');\n      break;\n  }\n\n  return adapter;\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n\n'use strict';\n\nimport {adapterFactory} from './adapter_factory.js';\n\nconst adapter =\n  adapterFactory({window: typeof window === 'undefined' ? undefined : window});\nexport default adapter;\n","function asyncGeneratorStep(n, t, e, r, o, a, c) {\n  try {\n    var i = n[a](c),\n      u = i.value;\n  } catch (n) {\n    return void e(n);\n  }\n  i.done ? t(u) : Promise.resolve(u).then(r, o);\n}\nfunction _asyncToGenerator(n) {\n  return function () {\n    var t = this,\n      e = arguments;\n    return new Promise(function (r, o) {\n      var a = n.apply(t, e);\n      function _next(n) {\n        asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n);\n      }\n      function _throw(n) {\n        asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n);\n      }\n      _next(void 0);\n    });\n  };\n}\nexport { _asyncToGenerator as default };","import _typeof from \"./typeof.js\";\nfunction _regeneratorRuntime() {\n  \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */\n  _regeneratorRuntime = function _regeneratorRuntime() {\n    return e;\n  };\n  var t,\n    e = {},\n    r = Object.prototype,\n    n = r.hasOwnProperty,\n    o = Object.defineProperty || function (t, e, r) {\n      t[e] = r.value;\n    },\n    i = \"function\" == typeof Symbol ? Symbol : {},\n    a = i.iterator || \"@@iterator\",\n    c = i.asyncIterator || \"@@asyncIterator\",\n    u = i.toStringTag || \"@@toStringTag\";\n  function define(t, e, r) {\n    return Object.defineProperty(t, e, {\n      value: r,\n      enumerable: !0,\n      configurable: !0,\n      writable: !0\n    }), t[e];\n  }\n  try {\n    define({}, \"\");\n  } catch (t) {\n    define = function define(t, e, r) {\n      return t[e] = r;\n    };\n  }\n  function wrap(t, e, r, n) {\n    var i = e && e.prototype instanceof Generator ? e : Generator,\n      a = Object.create(i.prototype),\n      c = new Context(n || []);\n    return o(a, \"_invoke\", {\n      value: makeInvokeMethod(t, r, c)\n    }), a;\n  }\n  function tryCatch(t, e, r) {\n    try {\n      return {\n        type: \"normal\",\n        arg: t.call(e, r)\n      };\n    } catch (t) {\n      return {\n        type: \"throw\",\n        arg: t\n      };\n    }\n  }\n  e.wrap = wrap;\n  var h = \"suspendedStart\",\n    l = \"suspendedYield\",\n    f = \"executing\",\n    s = \"completed\",\n    y = {};\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n  var p = {};\n  define(p, a, function () {\n    return this;\n  });\n  var d = Object.getPrototypeOf,\n    v = d && d(d(values([])));\n  v && v !== r && n.call(v, a) && (p = v);\n  var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p);\n  function defineIteratorMethods(t) {\n    [\"next\", \"throw\", \"return\"].forEach(function (e) {\n      define(t, e, function (t) {\n        return this._invoke(e, t);\n      });\n    });\n  }\n  function AsyncIterator(t, e) {\n    function invoke(r, o, i, a) {\n      var c = tryCatch(t[r], t, o);\n      if (\"throw\" !== c.type) {\n        var u = c.arg,\n          h = u.value;\n        return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) {\n          invoke(\"next\", t, i, a);\n        }, function (t) {\n          invoke(\"throw\", t, i, a);\n        }) : e.resolve(h).then(function (t) {\n          u.value = t, i(u);\n        }, function (t) {\n          return invoke(\"throw\", t, i, a);\n        });\n      }\n      a(c.arg);\n    }\n    var r;\n    o(this, \"_invoke\", {\n      value: function value(t, n) {\n        function callInvokeWithMethodAndArg() {\n          return new e(function (e, r) {\n            invoke(t, n, e, r);\n          });\n        }\n        return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n      }\n    });\n  }\n  function makeInvokeMethod(e, r, n) {\n    var o = h;\n    return function (i, a) {\n      if (o === f) throw Error(\"Generator is already running\");\n      if (o === s) {\n        if (\"throw\" === i) throw a;\n        return {\n          value: t,\n          done: !0\n        };\n      }\n      for (n.method = i, n.arg = a;;) {\n        var c = n.delegate;\n        if (c) {\n          var u = maybeInvokeDelegate(c, n);\n          if (u) {\n            if (u === y) continue;\n            return u;\n          }\n        }\n        if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) {\n          if (o === h) throw o = s, n.arg;\n          n.dispatchException(n.arg);\n        } else \"return\" === n.method && n.abrupt(\"return\", n.arg);\n        o = f;\n        var p = tryCatch(e, r, n);\n        if (\"normal\" === p.type) {\n          if (o = n.done ? s : l, p.arg === y) continue;\n          return {\n            value: p.arg,\n            done: n.done\n          };\n        }\n        \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg);\n      }\n    };\n  }\n  function maybeInvokeDelegate(e, r) {\n    var n = r.method,\n      o = e.iterator[n];\n    if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y;\n    var i = tryCatch(o, e.iterator, r.arg);\n    if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y;\n    var a = i.arg;\n    return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y);\n  }\n  function pushTryEntry(t) {\n    var e = {\n      tryLoc: t[0]\n    };\n    1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e);\n  }\n  function resetTryEntry(t) {\n    var e = t.completion || {};\n    e.type = \"normal\", delete e.arg, t.completion = e;\n  }\n  function Context(t) {\n    this.tryEntries = [{\n      tryLoc: \"root\"\n    }], t.forEach(pushTryEntry, this), this.reset(!0);\n  }\n  function values(e) {\n    if (e || \"\" === e) {\n      var r = e[a];\n      if (r) return r.call(e);\n      if (\"function\" == typeof e.next) return e;\n      if (!isNaN(e.length)) {\n        var o = -1,\n          i = function next() {\n            for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next;\n            return next.value = t, next.done = !0, next;\n          };\n        return i.next = i;\n      }\n    }\n    throw new TypeError(_typeof(e) + \" is not iterable\");\n  }\n  return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", {\n    value: GeneratorFunctionPrototype,\n    configurable: !0\n  }), o(GeneratorFunctionPrototype, \"constructor\", {\n    value: GeneratorFunction,\n    configurable: !0\n  }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) {\n    var e = \"function\" == typeof t && t.constructor;\n    return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name));\n  }, e.mark = function (t) {\n    return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t;\n  }, e.awrap = function (t) {\n    return {\n      __await: t\n    };\n  }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () {\n    return this;\n  }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) {\n    void 0 === i && (i = Promise);\n    var a = new AsyncIterator(wrap(t, r, n, o), i);\n    return e.isGeneratorFunction(r) ? a : a.next().then(function (t) {\n      return t.done ? t.value : a.next();\n    });\n  }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () {\n    return this;\n  }), define(g, \"toString\", function () {\n    return \"[object Generator]\";\n  }), e.keys = function (t) {\n    var e = Object(t),\n      r = [];\n    for (var n in e) r.push(n);\n    return r.reverse(), function next() {\n      for (; r.length;) {\n        var t = r.pop();\n        if (t in e) return next.value = t, next.done = !1, next;\n      }\n      return next.done = !0, next;\n    };\n  }, e.values = values, Context.prototype = {\n    constructor: Context,\n    reset: function reset(e) {\n      if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t);\n    },\n    stop: function stop() {\n      this.done = !0;\n      var t = this.tryEntries[0].completion;\n      if (\"throw\" === t.type) throw t.arg;\n      return this.rval;\n    },\n    dispatchException: function dispatchException(e) {\n      if (this.done) throw e;\n      var r = this;\n      function handle(n, o) {\n        return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o;\n      }\n      for (var o = this.tryEntries.length - 1; o >= 0; --o) {\n        var i = this.tryEntries[o],\n          a = i.completion;\n        if (\"root\" === i.tryLoc) return handle(\"end\");\n        if (i.tryLoc <= this.prev) {\n          var c = n.call(i, \"catchLoc\"),\n            u = n.call(i, \"finallyLoc\");\n          if (c && u) {\n            if (this.prev < i.catchLoc) return handle(i.catchLoc, !0);\n            if (this.prev < i.finallyLoc) return handle(i.finallyLoc);\n          } else if (c) {\n            if (this.prev < i.catchLoc) return handle(i.catchLoc, !0);\n          } else {\n            if (!u) throw Error(\"try statement without catch or finally\");\n            if (this.prev < i.finallyLoc) return handle(i.finallyLoc);\n          }\n        }\n      }\n    },\n    abrupt: function abrupt(t, e) {\n      for (var r = this.tryEntries.length - 1; r >= 0; --r) {\n        var o = this.tryEntries[r];\n        if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) {\n          var i = o;\n          break;\n        }\n      }\n      i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null);\n      var a = i ? i.completion : {};\n      return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a);\n    },\n    complete: function complete(t, e) {\n      if (\"throw\" === t.type) throw t.arg;\n      return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y;\n    },\n    finish: function finish(t) {\n      for (var e = this.tryEntries.length - 1; e >= 0; --e) {\n        var r = this.tryEntries[e];\n        if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y;\n      }\n    },\n    \"catch\": function _catch(t) {\n      for (var e = this.tryEntries.length - 1; e >= 0; --e) {\n        var r = this.tryEntries[e];\n        if (r.tryLoc === t) {\n          var n = r.completion;\n          if (\"throw\" === n.type) {\n            var o = n.arg;\n            resetTryEntry(r);\n          }\n          return o;\n        }\n      }\n      throw Error(\"illegal catch attempt\");\n    },\n    delegateYield: function delegateYield(e, r, n) {\n      return this.delegate = {\n        iterator: values(e),\n        resultName: r,\n        nextLoc: n\n      }, \"next\" === this.method && (this.arg = t), y;\n    }\n  }, e;\n}\nexport { _regeneratorRuntime as default };","export var IconsManifest = [\n  {\n    \"id\": \"ci\",\n    \"name\": \"Circum Icons\",\n    \"projectUrl\": \"https://circumicons.com/\",\n    \"license\": \"MPL-2.0 license\",\n    \"licenseUrl\": \"https://github.com/Klarr-Agency/Circum-Icons/blob/main/LICENSE\"\n  },\n  {\n    \"id\": \"fa\",\n    \"name\": \"Font Awesome 5\",\n    \"projectUrl\": \"https://fontawesome.com/\",\n    \"license\": \"CC BY 4.0 License\",\n    \"licenseUrl\": \"https://creativecommons.org/licenses/by/4.0/\"\n  },\n  {\n    \"id\": \"fa6\",\n    \"name\": \"Font Awesome 6\",\n    \"projectUrl\": \"https://fontawesome.com/\",\n    \"license\": \"CC BY 4.0 License\",\n    \"licenseUrl\": \"https://creativecommons.org/licenses/by/4.0/\"\n  },\n  {\n    \"id\": \"io\",\n    \"name\": \"Ionicons 4\",\n    \"projectUrl\": \"https://ionicons.com/\",\n    \"license\": \"MIT\",\n    \"licenseUrl\": \"https://github.com/ionic-team/ionicons/blob/master/LICENSE\"\n  },\n  {\n    \"id\": \"io5\",\n    \"name\": \"Ionicons 5\",\n    \"projectUrl\": \"https://ionicons.com/\",\n    \"license\": \"MIT\",\n    \"licenseUrl\": \"https://github.com/ionic-team/ionicons/blob/master/LICENSE\"\n  },\n  {\n    \"id\": \"md\",\n    \"name\": \"Material Design icons\",\n    \"projectUrl\": \"http://google.github.io/material-design-icons/\",\n    \"license\": \"Apache License Version 2.0\",\n    \"licenseUrl\": \"https://github.com/google/material-design-icons/blob/master/LICENSE\"\n  },\n  {\n    \"id\": \"ti\",\n    \"name\": \"Typicons\",\n    \"projectUrl\": \"http://s-ings.com/typicons/\",\n    \"license\": \"CC BY-SA 3.0\",\n    \"licenseUrl\": \"https://creativecommons.org/licenses/by-sa/3.0/\"\n  },\n  {\n    \"id\": \"go\",\n    \"name\": \"Github Octicons icons\",\n    \"projectUrl\": \"https://octicons.github.com/\",\n    \"license\": \"MIT\",\n    \"licenseUrl\": \"https://github.com/primer/octicons/blob/master/LICENSE\"\n  },\n  {\n    \"id\": \"fi\",\n    \"name\": \"Feather\",\n    \"projectUrl\": \"https://feathericons.com/\",\n    \"license\": \"MIT\",\n    \"licenseUrl\": \"https://github.com/feathericons/feather/blob/master/LICENSE\"\n  },\n  {\n    \"id\": \"lu\",\n    \"name\": \"Lucide\",\n    \"projectUrl\": \"https://lucide.dev/\",\n    \"license\": \"ISC\",\n    \"licenseUrl\": \"https://github.com/lucide-icons/lucide/blob/main/LICENSE\"\n  },\n  {\n    \"id\": \"gi\",\n    \"name\": \"Game Icons\",\n    \"projectUrl\": \"https://game-icons.net/\",\n    \"license\": \"CC BY 3.0\",\n    \"licenseUrl\": \"https://creativecommons.org/licenses/by/3.0/\"\n  },\n  {\n    \"id\": \"wi\",\n    \"name\": \"Weather Icons\",\n    \"projectUrl\": \"https://erikflowers.github.io/weather-icons/\",\n    \"license\": \"SIL OFL 1.1\",\n    \"licenseUrl\": \"http://scripts.sil.org/OFL\"\n  },\n  {\n    \"id\": \"di\",\n    \"name\": \"Devicons\",\n    \"projectUrl\": \"https://vorillaz.github.io/devicons/\",\n    \"license\": \"MIT\",\n    \"licenseUrl\": \"https://opensource.org/licenses/MIT\"\n  },\n  {\n    \"id\": \"ai\",\n    \"name\": \"Ant Design Icons\",\n    \"projectUrl\": \"https://github.com/ant-design/ant-design-icons\",\n    \"license\": \"MIT\",\n    \"licenseUrl\": \"https://opensource.org/licenses/MIT\"\n  },\n  {\n    \"id\": \"bs\",\n    \"name\": \"Bootstrap Icons\",\n    \"projectUrl\": \"https://github.com/twbs/icons\",\n    \"license\": \"MIT\",\n    \"licenseUrl\": \"https://opensource.org/licenses/MIT\"\n  },\n  {\n    \"id\": \"ri\",\n    \"name\": \"Remix Icon\",\n    \"projectUrl\": \"https://github.com/Remix-Design/RemixIcon\",\n    \"license\": \"Apache License Version 2.0\",\n    \"licenseUrl\": \"http://www.apache.org/licenses/\"\n  },\n  {\n    \"id\": \"fc\",\n    \"name\": \"Flat Color Icons\",\n    \"projectUrl\": \"https://github.com/icons8/flat-color-icons\",\n    \"license\": \"MIT\",\n    \"licenseUrl\": \"https://opensource.org/licenses/MIT\"\n  },\n  {\n    \"id\": \"gr\",\n    \"name\": \"Grommet-Icons\",\n    \"projectUrl\": \"https://github.com/grommet/grommet-icons\",\n    \"license\": \"Apache License Version 2.0\",\n    \"licenseUrl\": \"http://www.apache.org/licenses/\"\n  },\n  {\n    \"id\": \"hi\",\n    \"name\": \"Heroicons\",\n    \"projectUrl\": \"https://github.com/tailwindlabs/heroicons\",\n    \"license\": \"MIT\",\n    \"licenseUrl\": \"https://opensource.org/licenses/MIT\"\n  },\n  {\n    \"id\": \"hi2\",\n    \"name\": \"Heroicons 2\",\n    \"projectUrl\": \"https://github.com/tailwindlabs/heroicons\",\n    \"license\": \"MIT\",\n    \"licenseUrl\": \"https://opensource.org/licenses/MIT\"\n  },\n  {\n    \"id\": \"si\",\n    \"name\": \"Simple Icons\",\n    \"projectUrl\": \"https://simpleicons.org/\",\n    \"license\": \"CC0 1.0 Universal\",\n    \"licenseUrl\": \"https://creativecommons.org/publicdomain/zero/1.0/\"\n  },\n  {\n    \"id\": \"sl\",\n    \"name\": \"Simple Line Icons\",\n    \"projectUrl\": \"https://thesabbir.github.io/simple-line-icons/\",\n    \"license\": \"MIT\",\n    \"licenseUrl\": \"https://opensource.org/licenses/MIT\"\n  },\n  {\n    \"id\": \"im\",\n    \"name\": \"IcoMoon Free\",\n    \"projectUrl\": \"https://github.com/Keyamoon/IcoMoon-Free\",\n    \"license\": \"CC BY 4.0 License\",\n    \"licenseUrl\": \"https://github.com/Keyamoon/IcoMoon-Free/blob/master/License.txt\"\n  },\n  {\n    \"id\": \"bi\",\n    \"name\": \"BoxIcons\",\n    \"projectUrl\": \"https://github.com/atisawd/boxicons\",\n    \"license\": \"MIT\",\n    \"licenseUrl\": \"https://github.com/atisawd/boxicons/blob/master/LICENSE\"\n  },\n  {\n    \"id\": \"cg\",\n    \"name\": \"css.gg\",\n    \"projectUrl\": \"https://github.com/astrit/css.gg\",\n    \"license\": \"MIT\",\n    \"licenseUrl\": \"https://opensource.org/licenses/MIT\"\n  },\n  {\n    \"id\": \"vsc\",\n    \"name\": \"VS Code Icons\",\n    \"projectUrl\": \"https://github.com/microsoft/vscode-codicons\",\n    \"license\": \"CC BY 4.0\",\n    \"licenseUrl\": \"https://creativecommons.org/licenses/by/4.0/\"\n  },\n  {\n    \"id\": \"tb\",\n    \"name\": \"Tabler Icons\",\n    \"projectUrl\": \"https://github.com/tabler/tabler-icons\",\n    \"license\": \"MIT\",\n    \"licenseUrl\": \"https://opensource.org/licenses/MIT\"\n  },\n  {\n    \"id\": \"tfi\",\n    \"name\": \"Themify Icons\",\n    \"projectUrl\": \"https://github.com/lykmapipo/themify-icons\",\n    \"license\": \"MIT\",\n    \"licenseUrl\": \"https://github.com/thecreation/standard-icons/blob/master/modules/themify-icons/LICENSE\"\n  },\n  {\n    \"id\": \"rx\",\n    \"name\": \"Radix Icons\",\n    \"projectUrl\": \"https://icons.radix-ui.com\",\n    \"license\": \"MIT\",\n    \"licenseUrl\": \"https://github.com/radix-ui/icons/blob/master/LICENSE\"\n  },\n  {\n    \"id\": \"pi\",\n    \"name\": \"Phosphor Icons\",\n    \"projectUrl\": \"https://github.com/phosphor-icons/core\",\n    \"license\": \"MIT\",\n    \"licenseUrl\": \"https://github.com/phosphor-icons/core/blob/main/LICENSE\"\n  },\n  {\n    \"id\": \"lia\",\n    \"name\": \"Icons8 Line Awesome\",\n    \"projectUrl\": \"https://icons8.com/line-awesome\",\n    \"license\": \"MIT\",\n    \"licenseUrl\": \"https://github.com/icons8/line-awesome/blob/master/LICENSE.md\"\n  }\n]","import React from \"react\";\nexport var DefaultContext = {\n  color: undefined,\n  size: undefined,\n  className: undefined,\n  style: undefined,\n  attr: undefined\n};\nexport var IconContext = React.createContext && /*#__PURE__*/React.createContext(DefaultContext);","var _excluded = [\"attr\", \"size\", \"title\"];\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } } return target; }\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == typeof i ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != typeof i) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nimport React from \"react\";\nimport { IconContext, DefaultContext } from \"./iconContext.mjs\";\nfunction Tree2Element(tree) {\n  return tree && tree.map((node, i) => /*#__PURE__*/React.createElement(node.tag, _objectSpread({\n    key: i\n  }, node.attr), Tree2Element(node.child)));\n}\nexport function GenIcon(data) {\n  return props => /*#__PURE__*/React.createElement(IconBase, _extends({\n    attr: _objectSpread({}, data.attr)\n  }, props), Tree2Element(data.child));\n}\nexport function IconBase(props) {\n  var elem = conf => {\n    var {\n        attr,\n        size,\n        title\n      } = props,\n      svgProps = _objectWithoutProperties(props, _excluded);\n    var computedSize = size || conf.size || \"1em\";\n    var className;\n    if (conf.className) className = conf.className;\n    if (props.className) className = (className ? className + \" \" : \"\") + props.className;\n    return /*#__PURE__*/React.createElement(\"svg\", _extends({\n      stroke: \"currentColor\",\n      fill: \"currentColor\",\n      strokeWidth: \"0\"\n    }, conf.attr, attr, svgProps, {\n      className: className,\n      style: _objectSpread(_objectSpread({\n        color: props.color || conf.color\n      }, conf.style), props.style),\n      height: computedSize,\n      width: computedSize,\n      xmlns: \"http://www.w3.org/2000/svg\"\n    }), title && /*#__PURE__*/React.createElement(\"title\", null, title), props.children);\n  };\n  return IconContext !== undefined ? /*#__PURE__*/React.createElement(IconContext.Consumer, null, conf => elem(conf)) : elem(DefaultContext);\n}"],"names":["SDPUtils","Math","random","toString","substring","localCName","generateIdentifier","splitLines","blob","trim","split","map","line","splitSections","part","index","getDescription","sections","getMediaSections","shift","matchPrefix","prefix","filter","indexOf","parseCandidate","parts","candidate","foundation","component","protocol","toLowerCase","priority","parseInt","ip","address","port","type","i","length","relatedAddress","relatedPort","tcpType","ufrag","usernameFragment","undefined","writeCandidate","sdp","push","toUpperCase","join","parseIceOptions","parseRtpMap","parsed","payloadType","name","clockRate","channels","numChannels","writeRtpMap","codec","pt","preferredPayloadType","parseExtmap","id","direction","uri","attributes","slice","writeExtmap","headerExtension","preferredId","parseFmtp","kv","j","writeFmtp","parameters","Object","keys","params","forEach","param","parseRtcpFb","parameter","writeRtcpFb","lines","rtcpFeedback","fb","parseSsrcMedia","sp","ssrc","colon","attribute","value","parseSsrcGroup","semantics","ssrcs","getMid","mediaSection","mid","parseFingerprint","algorithm","getDtlsParameters","sessionpart","role","fingerprints","writeDtlsParameters","setupType","fp","parseCryptoLine","tag","cryptoSuite","keyParams","sessionParams","writeCryptoLine","writeCryptoKeyParams","parseCryptoKeyParams","keyMethod","keySalt","lifeTime","mkiValue","mkiLength","getCryptoParameters","getIceParameters","pwd","password","writeIceParameters","iceLite","parseRtpParameters","description","codecs","headerExtensions","fecMechanisms","rtcp","mline","profile","rtpmapline","fmtps","wildcardRtcpFb","find","existingFeedback","writeRtpDescription","kind","caps","maxptime","extension","parseRtpEncodingParameters","secondarySsrc","encodingParameters","hasRed","hasUlpfec","primarySsrc","flows","apt","encParam","codecPayloadType","rtx","JSON","parse","stringify","fec","mechanism","bandwidth","maxBitrate","parseRtcpParameters","rtcpParameters","remoteSsrc","obj","cname","rsize","reducedSize","compound","mux","writeRtcpParameters","parseMsid","spec","stream","track","planB","msidParts","parseSctpDescription","maxMessageSize","parseMLine","maxSizeLine","isNaN","sctpPort","fmt","sctpMapLines","writeSctpDescription","media","sctp","output","generateSessionId","substr","writeSessionBoilerplate","sessId","sessVer","sessUser","version","getDirection","getKind","isRejected","parseOLine","username","sessionId","sessionVersion","netType","addressType","isValidSDP","charAt","module","exports","logDisabled_","deprecationWarnings_","extractVersion","uastring","expr","pos","match","wrapPeerConnectionEvent","window","eventNameToWrap","wrapper","RTCPeerConnection","proto","prototype","nativeAddEventListener","addEventListener","nativeEventName","cb","apply","this","arguments","wrappedCallback","e","modifiedEvent","handleEvent","_eventMap","Map","set","nativeRemoveEventListener","removeEventListener","has","unwrappedCb","get","delete","size","defineProperty","enumerable","configurable","disableLog","bool","Error","disableWarnings","log","console","deprecated","oldMethod","newMethod","warn","isObject","val","call","compactObject","data","reduce","accumulator","key","isObj","isEmptyObject","assign","_defineProperty","walkStats","stats","base","resultSet","endsWith","filterStats","result","outbound","streamStatsType","filteredResult","trackStats","trackIdentifier","trackStat","trackId","logging","utils","shimGetUserMedia","browserDetails","navigator","mediaDevices","constraintsToChrome_","c","mandatory","optional","cc","r","ideal","exact","min","max","oldname_","oc","mix","advanced","concat","shimConstraints_","constraints","func","audio","remap","a","b","video","face","facingMode","matches","getSupportedFacingModeLies","getSupportedConstraints","enumerateDevices","then","devices","dev","d","some","label","includes","deviceId","shimError_","PermissionDeniedError","PermissionDismissedError","InvalidStateError","DevicesNotFoundError","ConstraintNotSatisfiedError","TrackStartError","MediaDeviceFailedDueToShutdown","MediaDeviceKillSwitchOn","TabCaptureError","ScreenCaptureError","DeviceCaptureError","message","constraint","constraintName","getUserMedia","onSuccess","onError","webkitGetUserMedia","bind","origGetUserMedia","cs","getAudioTracks","getVideoTracks","getTracks","stop","DOMException","Promise","reject","shimMediaStream","MediaStream","webkitMediaStream","shimOnTrack","_ontrack","f","origSetRemoteDescription","setRemoteDescription","_this","_ontrackpoly","te","receiver","getReceivers","event","Event","transceiver","streams","dispatchEvent","shimGetSendersWithDtmf","shimSenderWithDtmf","pc","dtmf","_dtmf","createDTMFSender","_pc","getSenders","_senders","origAddTrack","addTrack","sender","origRemoveTrack","removeTrack","idx","splice","origAddStream","addStream","_this2","origRemoveStream","removeStream","_this3","s","RTCRtpSender","origGetSenders","_this4","senders","shimSenderReceiverGetStats","RTCRtpReceiver","_this5","getStats","origGetReceivers","_this6","receivers","srcElement","origGetStats","MediaStreamTrack","err","shimAddTrackRemoveTrackWithNative","getLocalStreams","_this7","_shimmedLocalStreams","streamId","_this8","existingSenders","newSenders","newSender","_this9","shimAddTrackRemoveTrack","origGetLocalStreams","_this10","nativeStreams","_reverseStreams","_this11","_streams","newStream","_this12","signalingState","t","oldStream","resolve","method","nativeMethod","methodObj","_this13","args","desc","replaceInternalStreamId","origSetLocalDescription","setLocalDescription","internalId","externalStream","internalStream","replace","RegExp","RTCSessionDescription","replaceExternalStreamId","origLocalDescription","getOwnPropertyDescriptor","_this14","streamid","shimPeerConnection","webkitRTCPeerConnection","RTCIceCandidate","fixNegotiationNeeded","target","getConfiguration","sdpSemantics","nativeGetUserMedia","getSettings","nativeGetSettings","applyConstraints","nativeApplyConstraints","shimGetDisplayMedia","preferredMediaSource","getDisplayMedia","code","mediaSource","RTCTrackEvent","mozRTCPeerConnection","modernStatsTypes","inboundrtp","outboundrtp","candidatepair","localcandidate","remotecandidate","nativeGetStats","_arguments","Array","selector","onSucc","onErr","stat","shimSenderGetStats","shimReceiverGetStats","shimRemoveStream","shimRTCDataChannel","DataChannel","RTCDataChannel","shimAddTransceiver","origAddTransceiver","addTransceiver","setParametersPromises","sendEncodings","shouldPerformCheck","_toConsumableArray","encodingParam","test","rid","TypeError","parseFloat","scaleResolutionDownBy","RangeError","maxFramerate","getParameters","encodings","setParameters","catch","shimGetParameters","origGetParameters","shimCreateOffer","origCreateOffer","createOffer","_arguments2","all","finally","shimCreateAnswer","origCreateAnswer","createAnswer","_arguments3","shimLocalStreamsAPI","_localStreams","_addTrack","_len","_key","tracks","shimRemoteStreamsAPI","getRemoteStreams","_remoteStreams","_onaddstream","_onaddstreampoly","shimCallbacksAPI","addIceCandidate","successCallback","failureCallback","options","promise","withCallback","_getUserMedia","shimConstraints","errcb","shimRTCIceServerUrls","OrigPeerConnection","pcConfig","pcConstraints","iceServers","newIceServers","server","urls","url","generateCertificate","shimTrackEventTransceiver","shimCreateOfferLegacy","offerOptions","offerToReceiveAudio","audioTransceiver","getTransceivers","setDirection","offerToReceiveVideo","videoTransceiver","shimAudioContext","AudioContext","webkitAudioContext","shimRTCIceCandidate","NativeRTCIceCandidate","nativeCandidate","parsedCandidate","toJSON","sdpMid","sdpMLineIndex","writable","shimRTCIceCandidateRelayProtocol","relayProtocol","shimMaxMessageSize","_sctp","browser","mLine","sctpInDescription","isFirefox","getRemoteFirefoxVersion","canSendMMS","remoteIsFirefox","canSendMaxMessageSize","getCanSendMaxMessageSize","remoteMMS","getMaxMessageSize","Number","POSITIVE_INFINITY","shimSendThrowTypeError","origCreateDataChannel","createDataChannel","dataChannel","wrapDcSend","channel","dc","origDataChannelSend","send","byteLength","readyState","shimConnectionState","completed","checking","iceConnectionState","_onconnectionstatechange","origMethod","_connectionstatechangepoly","_lastConnectionState","connectionState","newEvent","removeExtmapAllowMixed","nativeSRD","shimAddIceCandidateNullOrEmpty","nativeAddIceCandidate","shimParameterlessSetLocalDescription","nativeSetLocalDescription","shimChrome","shimFirefox","shimSafari","userAgent","userAgentData","brands","chromium","brand","mozGetUserMedia","isSecureContext","supportsUnifiedPlan","RTCRtpTransceiver","adapter","commonShim","chromeShim","browserShim","firefoxShim","safariShim","adapterFactory","asyncGeneratorStep","n","o","u","done","_asyncToGenerator","_next","_throw","_regeneratorRuntime","hasOwnProperty","Symbol","iterator","asyncIterator","toStringTag","define","wrap","Generator","create","Context","makeInvokeMethod","tryCatch","arg","h","l","y","GeneratorFunction","GeneratorFunctionPrototype","p","getPrototypeOf","v","values","g","defineIteratorMethods","_invoke","AsyncIterator","invoke","__await","callInvokeWithMethodAndArg","delegate","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","resultName","next","nextLoc","pushTryEntry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","displayName","isGeneratorFunction","constructor","mark","setPrototypeOf","__proto__","awrap","async","reverse","pop","prev","rval","handle","complete","finish","delegateYield","DefaultContext","color","className","style","attr","IconContext","React","_excluded","_objectWithoutProperties","source","excluded","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","_extends","ownKeys","_objectSpread","getOwnPropertyDescriptors","defineProperties","toPrimitive","String","_toPrimitive","_toPropertyKey","Tree2Element","tree","node","child","GenIcon","props","IconBase","elem","conf","title","svgProps","computedSize","stroke","fill","strokeWidth","height","width","xmlns","children","Consumer"],"sourceRoot":""}