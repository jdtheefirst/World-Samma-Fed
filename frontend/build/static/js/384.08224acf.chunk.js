"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[384],{53747:function(e,t,n){n.d(t,{ZU:function(){return m},bK:function(){return f},tJ:function(){return p},uS:function(){return d}});var r=n(90675),o=n(5544),s=n(10467),a=n(79722),c=n(65043),u=n(42104),i=n(97665),p=i.z.object({name:i.z.string().min(2,"Name must be at least 2 characters").max(50,"Name must be at most 50 characters"),otherName:i.z.string().min(2,"Other name must be at least 2 characters").max(50,"Other name must be at most 50 characters"),email:i.z.string().email("Invalid email address"),gender:i.z.enum(["male","female","other"]),password:i.z.string().min(4,"Password must be at least 8 characters long").max(100,"Password must be at most 100 characters"),confirmPassword:i.z.string().min(4,"Confirm password must be at least 8 characters long").max(100,"Confirm password must be at most 100 characters").refine((function(e,t){return e===t.parent.password}),{message:"Passwords do not match"}),passport:i.z.string().regex(/^\d{8,15}$/,"Invalid passport/ID number"),selectedCountry:i.z.string().min(2,"Country is required"),provinces:i.z.string().optional(),language:i.z.string().min(2,"Language is required"),pic:i.z.string().url("Profile picture is required")});function f(e){var t=(0,c.useState)(null),n=(0,o.A)(t,2),r=n[0],s=n[1],a=(0,c.useRef)(null);return(0,c.useEffect)((function(){if(e&&e.token){if(!a.current){var t=e._id,n=(0,u.io)("/",{query:{token:e.token,userId:t}});return n.on("connect",(function(){console.log("connected"),s(n)})),n.on("disconnect",(function(e){console.log("Socket.IO disconnected due to:",e),"io server disconnect"===e&&n.connect()})),n.on("reconnect_attempt",(function(e){console.log("Reconnection attempt ".concat(e))})),n.on("error",(function(e){console.error("Socket.IO error:",e)})),a.current=n,function(){n&&n.disconnect(),a.current=null}}s(a.current)}}),[e]),r}function m(e,t,n,r){return l.apply(this,arguments)}function l(){return(l=(0,s.A)((0,r.A)().mark((function e(t,n,o,s){var c,u;return(0,r.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,c={headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(o.token)}},e.next=6,a.A.post("/api/paycheck/makepaymentmpesa/".concat(o._id,"?amount=").concat(t),{phoneNumber:n},c);case 6:u=e.sent,u.data&&s({title:"You have been prompt to finish your subscription process",status:"info",duration:1e3,position:"bottom"}),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(2);case 13:case"end":return e.stop()}}),e,null,[[2,11]])})))).apply(this,arguments)}function d(e,t,n){return h.apply(this,arguments)}function h(){return(h=(0,s.A)((0,r.A)().mark((function e(t,n,o){var s,c;return(0,r.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,s={headers:{"Content-type":"application/json"}},e.next=6,a.A.post("/api/paycheck/donationsmpesa?amount=".concat(t),{phoneNumber:n},s);case 6:c=e.sent,c.data&&o({title:"You have been prompt to finish your subscription process",status:"info",duration:1e3,position:"bottom"}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[2,11]])})))).apply(this,arguments)}},36384:function(e,t,n){n.r(t);var r=n(5544),o=n(65043),s=n(22107),a=n(39081),c=n(56818),u=n(53747),i=n(70579);t.default=function(){var e=(0,o.useState)(!1),t=(0,r.A)(e,2),n=(t[0],t[1]),p=(0,o.useRef)(null),f=(0,o.useRef)(null),m=(0,c.a)().user,l=(0,u.bK)(m),d=(0,o.useState)(!1),h=(0,r.A)(d,2),b=h[0],v=h[1];return(0,o.useEffect)((function(){l&&(v(l.connected),l.on("connect",(function(){return v(!0)})),l.on("disconnect",(function(){return v(!1)})))}),[l]),(0,o.useEffect)((function(){if(b)return l.emit("checkLiveStream"),l.on("liveStreamStatus",(function(e){n(e),e&&setupWebRTC()})),l.on("streamEnded",(function(){n(!1)})),l.on("stopped",(function(e){n(e),p.current&&(p.current.dispose(),p.current=null)})),function(){l.off("liveStreamStatus"),l.off("stopped"),l.off("streamEnded"),p.current&&(p.current.dispose(),p.current=null)}}),[b]),(0,i.jsxs)(s.a,{children:[(0,i.jsx)(a.E,{children:"Live Stream"}),(0,i.jsx)("video",{ref:f,autoPlay:!0,style:{width:"100%",height:"80vh"}})]})}}}]);
//# sourceMappingURL=384.08224acf.chunk.js.map