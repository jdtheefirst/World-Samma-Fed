"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[432],{59209:function(e,n,t){var r=t(23029),o=t(92901),i=t(6919),s=t(85501),a=t(22107),c=t(39081),l=t(7189),u=t(65043),d=t(70579),f=function(e){function n(e){var t;return(0,r.A)(this,n),(t=(0,i.A)(this,n,[e])).state={hasError:!1},t}return(0,s.A)(n,e),(0,o.A)(n,[{key:"componentDidCatch",value:function(e,n){console.error(e,n)}},{key:"render",value:function(){return this.state.hasError?(0,d.jsxs)(a.a,{display:"flex",justifyContent:"center",alignItems:"center",background:"whitesmoke",width:"100%",height:"100%",children:[" ",(0,d.jsxs)(a.a,{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[" ",(0,d.jsx)(c.E,{fontSize:"2xl",children:"An error occurred. Please "}),(0,d.jsx)(l.N,{color:"teal.500",href:"/dashboard",children:"Go Back..."})]})]}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}])}(u.Component);n.A=f},10554:function(e,n,t){var r=t(90675),o=t(10467),i=t(79722).A.create();i.interceptors.response.use(function(){var e=(0,o.A)((0,r.A)().mark((function e(n){return(0,r.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n);case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),(function(e){return Promise.reject(e)})),n.A=i},53747:function(e,n,t){t.d(n,{ZU:function(){return f},bK:function(){return d},tJ:function(){return u},uS:function(){return h}});var r=t(90675),o=t(5544),i=t(10467),s=t(79722),a=t(65043),c=t(42104),l=t(97665),u=l.z.object({name:l.z.string().min(2,"Name must be at least 2 characters").max(50,"Name must be at most 50 characters"),otherName:l.z.string().min(2,"Other name must be at least 2 characters").max(50,"Other name must be at most 50 characters"),email:l.z.string().email("Invalid email address"),gender:l.z.enum(["male","female","other"]),password:l.z.string().min(4,"Password must be at least 8 characters long").max(100,"Password must be at most 100 characters"),confirmPassword:l.z.string().min(4,"Confirm password must be at least 8 characters long").max(100,"Confirm password must be at most 100 characters").refine((function(e,n){return e===n.parent.password}),{message:"Passwords do not match"}),passport:l.z.string().regex(/^\d{8,15}$/,"Invalid passport/ID number"),selectedCountry:l.z.string().min(2,"Country is required"),provinces:l.z.string().optional(),language:l.z.string().min(2,"Language is required"),pic:l.z.string().url("Profile picture is required")});function d(e){var n=(0,a.useState)(null),t=(0,o.A)(n,2),r=t[0],i=t[1],s=(0,a.useRef)(null);return(0,a.useEffect)((function(){if(e&&e.token){if(!s.current){var n=e._id,t=(0,c.io)("/",{query:{token:e.token,userId:n}});return t.on("connect",(function(){console.log("connected"),i(t)})),t.on("disconnect",(function(e){console.log("Socket.IO disconnected due to:",e),"io server disconnect"===e&&t.connect()})),t.on("reconnect_attempt",(function(e){console.log("Reconnection attempt ".concat(e))})),t.on("error",(function(e){console.error("Socket.IO error:",e)})),s.current=t,function(){t&&t.disconnect(),s.current=null}}i(s.current)}}),[e]),r}function f(e,n,t,r){return p.apply(this,arguments)}function p(){return(p=(0,i.A)((0,r.A)().mark((function e(n,t,o,i){var a,c;return(0,r.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,a={headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(o.token)}},e.next=6,s.A.post("/api/paycheck/makepaymentmpesa/".concat(o._id,"?amount=").concat(n),{phoneNumber:t},a);case 6:c=e.sent,c.data&&i({title:"You have been prompt to finish your subscription process",status:"info",duration:1e3,position:"bottom"}),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(2);case 13:case"end":return e.stop()}}),e,null,[[2,11]])})))).apply(this,arguments)}function h(e,n,t){return x.apply(this,arguments)}function x(){return(x=(0,i.A)((0,r.A)().mark((function e(n,t,o){var i,a;return(0,r.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,i={headers:{"Content-type":"application/json"}},e.next=6,s.A.post("/api/paycheck/donationsmpesa?amount=".concat(n),{phoneNumber:t},i);case 6:a=e.sent,a.data&&o({title:"You have been prompt to finish your subscription process",status:"info",duration:1e3,position:"bottom"}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[2,11]])})))).apply(this,arguments)}},20200:function(e,n){n.A=function(e){var n=new Date(e),t=new Date-n,r=Math.floor(t/1e3),o=Math.floor(r/60),i=Math.floor(o/60),s=Math.floor(i/24);if(r<60)return"Just now";if(o<60)return"".concat(o," minute").concat(1===o?"":"s"," ago");if(i<24)return"".concat(i," hour").concat(1===i?"":"s"," ago");if(1===s)return"Yesterday";if(s<7)return"".concat(s," day").concat(1===s?"":"s"," ago");return n.toLocaleDateString("en-US",{hour:"numeric",minute:"numeric",month:"long",day:"numeric",year:"numeric"})}},33021:function(e,n,t){t.d(n,{A:function(){return V}});var r=t(5544),o=t(38028),i=t(96870),s=t(85522),a=t(3952),c=t(18876),l=t(20972),u=t(87139),d=t(42703),f=t(15707),p=t(98151),h=t(67918),x=t(71847),m=t(85156),b=t(18842),g=t(50927),v=t(52793),j=t(14929),k=t(11300),C=t(49342),y=t(42369),A=t(49788),w=t(73216),S=t(56818),_=t(90675),z=t(10467),E=t(29301),I=t(39081),P=t(73203),D=t(11054),N=t(76524),F=t(15071),$=t(35929),M=t(67516),B=t(22107),O=t(76659),q=t(56529),R=t(65043),W=t(79722),Y=t(47196),T=t(70579),L=function(){var e=(0,i.j)(),n=e.isOpen,t=e.onOpen,o=e.onClose,s=(0,R.useState)([]),a=(0,r.A)(s,2),c=a[0],l=a[1],u=(0,R.useState)(!1),d=(0,r.A)(u,2),f=d[0],p=d[1],h=(0,S.a)().user,x=(0,w.Zp)(),m=(0,R.useCallback)((0,z.A)((0,_.A)().mark((function e(){var n,t,r;return(0,_.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,n={headers:{Authorization:"Bearer ".concat(h.token)}},e.next=6,W.A.get("/api/clubs/github/something/".concat(h._id),n);case 6:t=e.sent,r=t.data,l(r),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),console.error("Error fetching club requests:",e.t0);case 14:case"end":return e.stop()}}),e,null,[[2,11]])}))),[h]);(0,R.useEffect)((function(){h&&m()}),[h,m]);var b=function(){var e=(0,z.A)((0,_.A)().mark((function e(n){var t,r,o;return(0,_.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h&&n){e.next=2;break}return e.abrupt("return");case 2:return p(!0),e.prev=3,t={headers:{Authorization:"Bearer ".concat(h.token)}},e.next=7,W.A.get("/api/clubs/decline/request/".concat(n,"/").concat(h._id),t);case 7:r=e.sent,o=r.data,l(o),p(!1),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(3),p(!1),console.error("Error fetching club requests/decline:",e.t0);case 17:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(n){return e.apply(this,arguments)}}();return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)(E.$,{backgroundColor:"white",_hover:{backgroundColor:"transparent"},onClick:t,border:"none",children:[(0,T.jsx)(Y.TKI,{fontSize:"20px",border:"none"}),c&&c.length>0&&(0,T.jsx)(I.E,{position:"absolute",bottom:"70%",right:"70%",transform:"translate(50%, 0)",bg:"red.500",borderRadius:"50%",width:"2px",height:"2px",p:1.5}),(0,T.jsx)(I.E,{})]}),(0,T.jsxs)(P.aF,{isOpen:n,onClose:o,isCentered:!0,size:"sm",children:[(0,T.jsx)(D.m,{bg:"blackAlpha.300",backdropFilter:"blur(10px) hue-rotate(90deg)"}),(0,T.jsxs)(N.$,{children:[(0,T.jsx)(F.r,{textAlign:"center",children:"Clubs Requests"}),(0,T.jsx)($.s,{border:"none"}),(0,T.jsx)(M.c,{display:"flex",justifyContent:"center",alignItems:"center",flexDir:"column",maxH:"300px",children:c&&c.length>0?c.map((function(e,n){return(0,T.jsxs)(B.a,{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",children:[(0,T.jsxs)(E.$,{justifyContent:"space-between",onClick:function(){return x("/showclub/".concat(e._id))},border:"none",children:[n+1,". Club Name: ",e.name]},e._id),(0,T.jsx)(E.$,{background:"#f05e56",onClick:function(){return b(e._id)},border:"none",children:f?(0,T.jsx)(O.y,{size:"small"}):"Decline"})]},n)})):(0,T.jsx)(T.Fragment,{children:(0,T.jsx)(I.E,{children:"All club requests have been replied to."})})}),(0,T.jsx)(q.j,{fontSize:"small",textDecor:"underline",children:"These requests were made by club coaches."})]})]})]})},U=t(32212),Z=t(83002),G=t(10202),K=t(96148),J=t(50464),X=function(e){var n=e.isOpen,t=e.onClose,o=(0,R.useState)(""),i=(0,r.A)(o,2),s=i[0],a=i[1],c=(0,R.useState)(""),l=(0,r.A)(c,2),u=l[0],d=l[1],f=(0,w.Zp)();return(0,T.jsxs)(P.aF,{isOpen:n,onClose:t,isCentered:!0,children:[(0,T.jsx)(D.m,{}),(0,T.jsxs)(N.$,{children:[(0,T.jsx)(F.r,{textAlign:"center",children:"Admin Access Verification"}),(0,T.jsx)($.s,{}),(0,T.jsx)(M.c,{children:(0,T.jsxs)(G.T,{spacing:4,align:"center",children:[(0,T.jsx)(I.E,{children:"To access the admin page, please enter the passkey."}),(0,T.jsx)(K.z,{children:(0,T.jsxs)(J.c,{value:s,onChange:function(e){a(e),d("")},type:"number",autoFocus:!0,children:[(0,T.jsx)(J.M,{}),(0,T.jsx)(J.M,{}),(0,T.jsx)(J.M,{}),(0,T.jsx)(J.M,{}),(0,T.jsx)(J.M,{}),(0,T.jsx)(J.M,{})]})}),u&&(0,T.jsx)(I.E,{color:"red.500",children:u})]})}),(0,T.jsx)(q.j,{children:(0,T.jsx)(E.$,{colorScheme:"blue",onClick:function(){"165432"===s?(f("/admin"),t()):d("Invalid passkey. Please try again.")},width:"full",children:"Enter Admin Passkey"})})]})]})},H=t(6720);var V=function(){var e=(0,S.a)(),n=e.user,t=e.notification,_=e.setNotification,z=(0,i.j)(),E=z.isOpen,I=z.onOpen,P=z.onClose,D=(0,w.Zp)(),N=(0,R.useState)(!1),F=(0,r.A)(N,2),$=F[0],M=F[1],B=(0,c.A)({base:"none",md:"flex"}),O=(0,c.A)({base:"hidden",md:"visible"});return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)(s.az,{display:"flex",justifyContent:"space-between",alignItems:"center",bg:"white",w:"100%",p:3,paddingBottom:2,boxShadow:"2xl",zIndex:10,top:0,position:"fixed",children:[(0,T.jsx)(l._,{src:U,height:12}),(0,T.jsxs)(s.az,{display:"flex",justifyContent:"center",alignItems:"center",children:[(0,T.jsx)(o.$,{backgroundColor:"transparent",border:"none",display:B,visibility:O,_hover:{backgroundColor:"transparent",color:"green.400"},onClick:function(){D("/dashboard")},children:"My Programs"}),(0,T.jsx)(o.$,{variant:"ghost",display:{base:"none",md:"flex"},border:"none",onClick:I,_hover:{backgroundColor:"transparent",color:"green.400"},children:(0,T.jsx)(a.E,{px:4,userSelect:"none",children:"Discover"})}),(0,T.jsx)(L,{})]}),(0,T.jsxs)("div",{children:[(0,T.jsxs)(p.W,{children:[(0,T.jsxs)(h.I,{p:1,position:"relative",border:"none",children:[(0,T.jsx)(y.X,{fontSize:"2xl",p:0,m:0}),t.length>0&&(0,T.jsx)(u.E,{variant:"subtle",position:"absolute",top:"-3px",right:"-3px",backgroundColor:"red",zIndex:1,borderRadius:"50%",color:"white",children:t.length})]}),(0,T.jsxs)(x.c,{pl:2,children:[!t.length&&"No New Messages",t.map((function(e){return(0,T.jsx)(m.D,{onClick:function(){_(t.filter((function(n){return n!==e})))},p:"4",children:"New message from ".concat(e.sender?e.sender.name:"Coach"," ADM: ").concat(e.sender?e.sender.admission:" ")},e._id)}))]})]}),(0,T.jsx)(p.W,{children:(0,T.jsx)(h.I,{as:o.$,bg:"white",border:"none",_hover:{backgroundColor:"transparent"},onClick:I,children:"flex"===B?(0,T.jsx)(A.e,{size:"sm",cursor:"pointer",name:null===n||void 0===n?void 0:n.name,src:null===n||void 0===n?void 0:n.pic}):(0,T.jsx)(d.K,{backgroundColor:"transparent",border:"none",icon:(0,T.jsx)(C.twg,{})})})})]})]}),(0,T.jsx)(X,{isOpen:$,onClose:function(){return M(!1)}}),(0,T.jsxs)(b._,{placement:"left",onClose:P,isOpen:E,children:[(0,T.jsx)(g.m,{bg:"blackAlpha.300",backdropFilter:"blur(10px) hue-rotate(90deg)"}),(0,T.jsxs)(v.z,{children:[(0,T.jsxs)(j.r,{borderBottomWidth:"1px",display:"flex",justifyContent:"space-between",children:["Dashboard",(0,T.jsx)(f.J,{onClick:P,border:"none"})]}),(0,T.jsxs)(k.c,{display:"flex",flexDir:"column",justifyContent:"start",width:"100%",padding:3,children:[(0,T.jsxs)(o.$,{display:"flex",justifyContent:"left",alignItems:"center",border:"none",fontSize:"medium",background:"white",_hover:{backgroundColor:"transparent",color:"green"},onClick:function(){return D("/profile")},children:[(0,T.jsx)(A.e,{size:"sm",cursor:"pointer",name:null===n||void 0===n?void 0:n.name,src:null===n||void 0===n?void 0:n.pic}),(0,T.jsx)(a.E,{p:2,m:1,children:"Profile"})]}),(0,T.jsx)(o.$,{justifyContent:"left",border:"none",background:"white",_hover:{backgroundColor:"transparent",color:"blackAlpha.600"},onClick:function(){D("/dashboard"),P()},children:"My Programs"}),(0,T.jsx)(o.$,{justifyContent:"start",background:"white",border:"none",_hover:{backgroundColor:"transparent",color:"blackAlpha.600"},onClick:function(){D("/clubs"),P()},children:"Clubs"}),(0,T.jsx)(o.$,{justifyContent:"left",background:"white",border:"none",_hover:{backgroundColor:"transparent",color:"blackAlpha.600"},isDisabled:!(null!==n&&void 0!==n&&n.provinces),onClick:function(){D("/province"),P()},children:"Provincial level"}),(0,T.jsx)(o.$,{background:"white",justifyContent:"left",border:"none",_hover:{backgroundColor:"transparent",color:"blackAlpha.600"},onClick:function(){D("/national"),P()},children:"National level"}),(0,T.jsx)(o.$,{background:"white",justifyContent:"left",border:"none",_hover:{backgroundColor:"transparent",color:"blackAlpha.600"},onClick:function(){D("/championships"),P()},children:"International Championship"}),(0,T.jsxs)(o.$,{background:"white",justifyContent:"left",border:"none",isDisabled:!0,_hover:{backgroundColor:"transparent",color:"blackAlpha.600"},onClick:function(){D("/stream"),P()},children:[(0,T.jsx)(H.Md6,{})," \xa0 Streams"]}),(0,T.jsxs)(o.$,{background:"white",justifyContent:"left",border:"none",_hover:{backgroundColor:"transparent",color:"blackAlpha.600"},onClick:function(){M(!0),P()},children:[(0,T.jsx)(Y.P3Y,{})," \xa0 Admin"]}),(0,T.jsxs)(o.$,{background:"white",justifyContent:"left",border:"none",_hover:{backgroundColor:"transparent",color:"blackAlpha.600"},onClick:function(){localStorage.removeItem("userInfo"),_([]),D("/")},children:[(0,T.jsx)(Z.TMk,{})," \xa0 Sign out"]})]})]})]})]})}},33432:function(e,n,t){t.r(n),t.d(n,{default:function(){return ce}});var r,o,i,s,a,c=t(89379),l=t(60436),u=t(90675),d=t(10467),f=t(5544),p=t(65043),h=t(59209),x=t(30502),m=t(22107),b=t(42703),g=t(33021),v=t(57528),j=t(39081),k=t(1529),C=t(82639),y=t(70579),A=k.Ay.div(r||(r=(0,v.A)(["\n  display: flex;\n  justify-content: center;\n  align-items: flex-end;\n  position: relative;\n  width: 100%;\n  padding: 0;\n  margin: 0;\n"]))),w=k.Ay.div(o||(o=(0,v.A)(["\n  display: flex;\n  width: 30%;\n  height: 50px;\n  border: none;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n  font-weight: bold;\n  padding: 0;\n  margin: 0;\n"]))),S=(0,k.i7)(i||(i=(0,v.A)(["\n  from {\n    width: 1%; /* Adjust the initial width as needed */\n  }\n  to {\n    width: ","%;\n  }\n"])),(function(e){return 10*(e.level+1.2)})),_=(0,k.i7)(s||(s=(0,v.A)(["\n  0%, 100% {\n    background-color: #ed7d66; /* Slightly less green color */\n  }\n  50% {\n    background-color: #66d171; /* Default green color */\n  }\n"]))),z=k.Ay.div(a||(a=(0,v.A)(["\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  width: 50px;\n  height: 14px;\n  background-color: #66d171;\n  border-radius: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n  margin: 0;\n  padding: 0;\n  width: ","%;\n  animation: "," 2s ease-in-out,\n    "," 3s ease-in-out infinite;\n"])),(function(e){return 10*(e.level+1)}),S,_),E=function(e){var n=e.userBelt,t=["Guest","Beginner","Yellow","Orange","Red","Purple","Green","Blue","Brown","Black"].indexOf(n);return(0,y.jsxs)(A,{children:[["Guest","grey","#baba30","orange","red","purple","green","blue","brown","black"].map((function(e,n){return(0,y.jsx)(w,{children:(0,y.jsx)(j.E,{marginTop:-3,fontWeight:{base:"sm",md:"md"},fontSize:{base:"10px",md:"md"},textAlign:"center",children:n>0?(0,y.jsx)(C.n7_,{style:{color:e,fontSize:"1.5rem"}}):e})},n)})),(0,y.jsxs)(z,{level:t,children:[" ",(0,y.jsxs)(j.E,{textAlign:"center",fontSize:"small",p:1,children:[10*(t+1),"%"]})," "]})]})},I=t(5371),P=t(7189),D=t(29301),N=t(44093),F=t(96870),$=t(73203),M=t(11054),B=t(76524),O=t(15071),q=t(35929),R=t(67516),W=t(20972),Y=t(35699),T=t(82459),L=t(56529),U=t(30059),Z=t(53747),G=t(56818),K=t(79722);function J(e){var n=e.course,t=(0,x.d)(),r=(0,G.a)(),o=r.user,i=r.setUser,s=(0,p.useState)(!1),a=(0,f.A)(s,2),l=a[0],h=a[1],b=(0,p.useState)(""),g=(0,f.A)(b,2),v=g[0],k=g[1],C=(0,F.j)(),A=C.isOpen,w=C.onOpen,S=C.onClose,_=(0,Z.bK)(null===o||void 0===o?void 0:o.token);(0,p.useEffect)((function(){if(_)return _.on("noPayment",(function(e){t({title:e,description:"Subscription unsuccessful",status:"info",duration:5e3,position:"bottom"})})),_.on("userUpdated",function(){var e=(0,d.A)((0,u.A)().mark((function e(n){return(0,u.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i((function(e){return(0,c.A)((0,c.A)({},e),{},{belt:n.belt})})),t({title:"Successfully updated",description:"Ranked ".concat(n.belt),status:"info",duration:5e3,position:"bottom"});case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),function(){_.off("userUpdated"),_.off("noPayment")}}),[i,t,_]);var z=function(){var e=(0,d.A)((0,u.A)().mark((function e(){var n,r,s;return(0,u.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,n={headers:{Authorization:"Bearer ".concat(o.token)}},e.next=6,K.A.get("/api/user/update",n);case 6:r=e.sent,s=r.data,i((function(e){return(0,c.A)((0,c.A)({},e),{},{belt:s.belt})})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),e.t0.response&&400===e.t0.response.status?t({title:"Belt achieved!",description:e.t0.response.data.message,status:"info",duration:5e3,isClosable:!0,position:"bottom"}):(console.error("An error occurred:",e.t0),t({title:"An Error Occurred!",description:"Please try again later.",status:"error",duration:5e3,isClosable:!0,position:"bottom"}));case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(){return e.apply(this,arguments)}}();return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(D.$,{borderRadius:20,fontSize:"small",background:"#a432a8",textColor:"white",_hover:{color:"black"},m:1,onClick:function(){var e=o&&o.certificates.length,r=n.id-1;o&&"Guest"===o.belt&&0===r||e+1===r+1?w():o&&o.belt===n.title?t({title:"Currently on this course",description:"You don't need to enroll in this course.",status:"warning",duration:5e3,isClosable:!0}):t({title:"Course Unavailable",description:"You don't meet the requirements to enroll in this course.",status:"warning",duration:5e3,isClosable:!0})},children:"Enroll"}),(0,y.jsxs)($.aF,{size:"lg",onClose:function(){h(!1),S()},isOpen:A,isCentered:!0,children:[(0,y.jsx)(M.m,{bg:"blackAlpha.300",backdropFilter:"blur(10px) hue-rotate(90deg)"}),(0,y.jsxs)(B.$,{display:"flex",flexDirection:"column",justifyContent:"center",width:"100%",children:[(0,y.jsx)(O.r,{fontSize:"40px",fontFamily:"Work sans",children:(0,y.jsxs)(j.E,{textAlign:"center",fontSize:"sm",fontWeight:500,p:2,px:3,color:"green.500",rounded:"full",children:["Elevate Your Craft: ",n.title]})}),(0,y.jsx)(q.s,{}),(0,y.jsxs)(R.c,{children:[(0,y.jsx)(U.ag,{options:{clientId:"AZAdYFR_SbadcgOcCLYn9ajkReJTZmOCnEeAvQ3xPYAE5BMYFBHi4vDeILfNwBO-hh-8wfyGC9lNeB1I"},children:(0,y.jsx)(U.JV,{createOrder:function(e,n){return n.order.create({purchase_units:[{amount:{currency_code:"USD",value:12..toFixed(2)}}]})},onApprove:function(){var e=(0,d.A)((0,u.A)().mark((function e(n,r){return(0,u.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z();case 2:return e.abrupt("return",r.order.capture().then((function(e){t({title:"Success",description:n.subscriptionID,status:"info",duration:3e3,isClosable:!0,position:"bottom"})})));case 3:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),onCancel:function(){t({title:"Cancelled",description:"Subscription Unsuccessful",status:"info",isClosable:!0,position:"bottom"})}})}),(0,y.jsxs)(D.$,{fontSize:"small",width:"100%",bg:(0,N.dU)("green.100","green.900"),onClick:function(){h(!0)},p:0,children:[(0,y.jsx)(W._,{height:5,width:"auto",src:"https://res.cloudinary.com/dvc7i8g1a/image/upload/v1694007922/mpesa_ppfs6p.png",alt:"",loading:"lazy"})," ","Pay via Mpesa"]}),l&&(0,y.jsxs)(m.a,{m:3,children:[(0,y.jsx)(j.E,{textAlign:"center",justifyContent:"center",fontSize:"2xl",children:"Enter Your Mpesa Phone Number"}),(0,y.jsx)(Y.p,{fontSize:"small",color:"green.400",fontWeight:"bold",placeholder:"Enter phone number",textAlign:"center",type:"number",onChange:function(e){return k(e.target.value)},value:v,minLength:10,maxLength:10}),(0,y.jsx)(T.c,{p:2}),(0,y.jsx)(D.$,{width:"100%",onClick:function(){(0,Z.ZU)("4500",v,o,t),h(!1),t({title:"Wait as message is sent",status:"loading",isClosable:!0,position:"bottom",duration:5e3})},isDisabled:v.length!==parseInt(10),colorScheme:"green",children:"Proceed"}),(0,y.jsx)(j.E,{textAlign:"center",justifyContent:"center",children:"You'll be sent a Message"})]})]}),(0,y.jsx)(L.j,{display:"flex",children:" Wait as PayPal processes..."})]})]})]})}var X=function(e){var n=e.courses,t=e.user,r=function(e,n){var t=document.createElement("a");t.href=n,t.download="".concat(e,"BeltCertificate.pdf"),t.click()},o=["#baba30","orange","red","purple","green","blue","brown","black"];return(0,y.jsxs)(m.a,{display:"flex",flexDir:"column",alignItems:"center",justifyContent:"center",width:"100%",p:4,backgroundColor:"white",children:[(0,y.jsx)(j.E,{fontSize:"20px",fontWeight:"medium",children:"My Programs"}),n.map((function(e,n){return(0,y.jsxs)(I.s,{display:"flex",alignItems:"center",justifyContent:"space-between",m:4,p:{base:"1",md:"4"},width:{base:"90%",md:"70%"},border:"1px",borderRadius:5,children:[(0,y.jsxs)(m.a,{children:[(0,y.jsxs)(m.a,{fontSize:"larger",fontWeight:"medium",children:[(0,y.jsx)(j.E,{children:e.title}),(0,y.jsx)(C.n7_,{style:{color:o[n],fontSize:"3rem"}})]}),e.title===(null===t||void 0===t?void 0:t.belt)&&(0,y.jsx)(P.N,{href:"/courses/".concat(e.id),style:{textDecoration:"none",color:"inherit"},p:0,m:0,children:"Continue"})]}),t&&t.certificates&&t.certificates[n]?(0,y.jsx)(D.$,{onClick:r(e.title,t.certificates[n]),borderRadius:20,fontSize:"small",border:"none",children:"Download Certificate"}):(0,y.jsxs)(m.a,{display:"flex",flexDir:"column",justifyContent:"space-between",alignItems:"center",children:[(0,y.jsx)(J,{course:e}),(0,y.jsx)(j.E,{fontSize:"sm",fontWeight:400,bg:(0,N.dU)("green.50","green.900"),p:3,px:3,color:"green.500",rounded:"full",children:"$12.00 only"})]})]},e.id)}))]})},H=t(76659),V=t(20200),Q=t(31462),ee=t(89698);var ne=function(e){var n,t,r,o,i,s,a,c,l=e.m,u=(0,G.a)(),d=u.user,f=u.setSelectedChat,p=u.setSend,h="6693a995f6295b8bd90d9301",x=null===d||void 0===d?void 0:d._id;return(0,y.jsx)(y.Fragment,{children:(0,y.jsxs)(m.a,{display:"flex",flexDir:"column",position:"relative",fontSize:"small",onClick:function(){var e,n,t;(null===(e=l.sender)||void 0===e?void 0:e._id)!==x&&(f(null===(n=l.sender)||void 0===n?void 0:n._id),p(null===(t=l.sender)||void 0===t?void 0:t.name))},children:[(0,y.jsxs)(m.a,{fontSize:"smaller",textDecor:"underline",textAlign:"end",children:[(null===(n=l.sender)||void 0===n?void 0:n._id)===h&&x!==h&&(0,y.jsxs)(m.a,{display:"flex",justifyContent:"flex-end",alignItems:"center",width:"100%",children:["From:","\xa0",(0,y.jsxs)(m.a,{display:"flex",children:[(0,y.jsx)(j.E,{fontSize:"bold",children:"WSF"}),(0,y.jsx)(ee.Tcv,{style:{color:"blue"}})]})]}),(null===(t=l.sender)||void 0===t?void 0:t._id)===x&&(null===(r=l.recipient)||void 0===r?void 0:r._id)===h&&(0,y.jsxs)(m.a,{display:"flex",children:["Sent to","\xa0","WSF",(0,y.jsx)(ee.Tcv,{style:{color:"blue"}})]}),(null===(o=l.sender)||void 0===o?void 0:o._id)!==h&&(0,y.jsxs)(j.E,{children:["From","\xa0",null===(i=l.sender)||void 0===i?void 0:i.name]}),(null===(s=l.sender)||void 0===s?void 0:s._id)===h&&(0,y.jsxs)(j.E,{children:["Sent to","\xa0",null===(a=l.recipient)||void 0===a?void 0:a.name]})]}),l.content,(0,y.jsxs)(j.E,{display:"flex",textAlign:"right",m:0,p:0,fontSize:"2xs",children:[(null===(c=l.sender)||void 0===c?void 0:c._id)===d._id?(0,y.jsx)(Q.ohF,{}):"",(0,V.A)(l.createdAt)]})]})})},te=function(e){var n=e.messages,t=(0,G.a)().user;return(0,y.jsx)("div",{style:{width:"100%",height:"90%",overflowY:"auto"},children:(0,y.jsx)(m.a,{display:"flex",justifyContent:"start",alignItems:"center",flexDir:"column",background:"white",minH:"100vh",p:4,mb:"10",width:"100%",children:n.map((function(e,n){var r;if(!e&&!t)return null;var o=(null===(r=e.sender)||void 0===r?void 0:r._id)===t._id;return(0,y.jsx)(m.a,{bg:o?"#BEE3F8":"#B9F5D0",borderRadius:"20px",p:"5px 15px",mb:"2",maxW:"75%",alignSelf:o?"flex-end":"flex-start",children:(0,y.jsx)(ne,{m:e})},n)}))})})},re=t(73216),oe=t(50423),ie=function(e){var n=e.onClose,t=(0,x.d)(),r=(0,p.useState)(""),o=(0,f.A)(r,2),i=o[0],s=o[1],a=(0,p.useState)(["WSF","Coach","Provincial Coach","National Coach"]),c=(0,f.A)(a,2),h=c[0],g=c[1],v=(0,p.useState)(null),k=(0,f.A)(v,2),C=k[0],A=k[1],w=(0,p.useState)(null),S=(0,f.A)(w,2),_=S[0],z=S[1],E=(0,p.useState)(),I=(0,f.A)(E,2),P=I[0],N=I[1],F=(0,p.useState)(!1),$=(0,f.A)(F,2),M=$[0],B=$[1],O=(0,p.useState)(!1),q=(0,f.A)(O,2),R=q[0],W=q[1],T=(0,G.a)(),L=T.user,U=T.selectedChat,J=T.setSelectedChat,X=T.send,V=T.setSend,Q=T.messages,ee=T.setMessages,ne=T.national,ie=T.province,se=(0,re.Zp)(),ae="6693a995f6295b8bd90d9301",ce=(0,Z.bK)(null===L||void 0===L?void 0:L.token);(0,p.useEffect)((function(){((null===L||void 0===L?void 0:L._id)===ae||null!==L&&void 0!==L&&L.coach||(null===ie||void 0===ie?void 0:ie.provincialCoach._id)===(null===L||void 0===L?void 0:L._id)||(null===ne||void 0===ne?void 0:ne.nationalCoach._id)===(null===L||void 0===L?void 0:L._id))&&B(!0)}),[L,ne,ie,B]),(0,p.useEffect)((function(){void 0===L.provinces&&g((function(e){return e.filter((function(e){return"Provincial Coach"!==e}))}))}),[L.provinces]),(0,p.useEffect)((function(){return"Coach"!==C||null!==L&&void 0!==L&&L.physicalCoach?"Provincial Coach"!==C||ie?"National Coach"!==C||ne?void 0:(A(null),se("/national"),void t({title:"National Samma Association seat is empty!",description:"Apply for Interim",status:"info",duration:5e3,position:"bottom-left"})):(A(null),se("/province"),void t({title:"Provincial Samma Association seat is empty!",description:"Apply for Interim",status:"info",duration:5e3,position:"bottom-left"})):(se("/clubs"),t({title:"You've not joined a Club",description:"Join a club or make one as you'd please",status:"info",duration:5e3,position:"bottom-left"}),void A(null))}),[C,se,L,ne,ie,t]);var le=(0,p.useCallback)((0,d.A)((0,u.A)().mark((function e(){var n,r,o;return(0,u.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(L){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,n={headers:{Authorization:"Bearer ".concat(L.token)}},N(!0),e.next=7,K.A.get("/api/message/".concat(L._id),n);case 7:r=e.sent,o=r.data,ee(o),N(!1),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(2),console.log(e.t0),N(!1),t({title:"Error Occured!",description:"Failed to Load the Messages",status:"error",duration:5e3,isClosable:!0,position:"bottom"});case 18:case"end":return e.stop()}}),e,null,[[2,13]])}))),[t,L]);(0,p.useEffect)((function(){le()}),[le]),(0,p.useEffect)((function(){"Coach"===C?z(L.physicalCoach):"WSF"===C&&L?z(L.wsf):"Provincial Coach"===C&&ie?z(ie.provincialCoach._id):"National Coach"===C&&ne&&z(ne.nationalCoach._id)}),[C,ne,ie,L,z]),(0,p.useEffect)((function(){U&&z(U)}),[U,z]);var ue=function(){var e=(0,d.A)((0,u.A)().mark((function e(n){var r,o,a,c,d;return(0,u.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n&&"click"===n.type||n&&"Enter"===n.key)){e.next=27;break}if(W(!0),r=L._id,C||M){e.next=7;break}return t({title:"Select a recipient",description:"Please choose whom you want to chat with.",status:"info",duration:5e3,isClosable:!0,position:"bottom"}),W(!1),e.abrupt("return");case 7:if(!M||U||r===ae){e.next=11;break}return t({title:"Select a recipient!",description:"Please choose whom you want to reply to...",status:"info",duration:5e3,isClosable:!0,position:"bottom"}),W(!1),e.abrupt("return");case 11:return e.prev=11,o={headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(L.token)}},e.next=15,K.A.post("/api/message",{sender:_,content:i,userId:r},o);case 15:a=e.sent,c=a.data,r===ae?(d={content:i.trim(),createdAt:new Date,recipient:{WSF:null,_id:"65c7549721abc4f629ae5009",name:"Broadcast",otherName:"Ngatia",email:"josephmpesa23@gmail.com"},sender:{_id:"6693a995f6295b8bd90d9301",name:"j",otherName:"e",email:"almanobe2@gmail.com"},updatedAt:"2024-07-01T16:26:45.964Z",__v:0,_id:"6682d8c501209935692efb9e"},ee((function(e){return[].concat((0,l.A)(e),[d])}))):(ee((function(e){return[].concat((0,l.A)(e),[c])})),ce.emit("new message",c)),W(!1),s(""),e.next=27;break;case 22:e.prev=22,e.t0=e.catch(11),console.error("Failed to send message:",e.t0),W(!1),t({title:"Failed to send the Message",description:"Please try again after some time",status:"error",duration:5e3,isClosable:!0,position:"bottom"});case 27:case"end":return e.stop()}}),e,null,[[11,22]])})));return function(n){return e.apply(this,arguments)}}();return(0,y.jsxs)(m.a,{display:"flex",flexDirection:"column",position:"fixed",bottom:"0",right:"1",height:"90vh",width:{base:"100%",md:"60%"},borderRadius:4,boxShadow:"dark-lg",p:"2",rounded:"md",bg:"white",zIndex:11,children:[(0,y.jsx)(D.$,{p:2,onClick:function(){n()},border:"none",children:"X"}),(0,y.jsxs)(m.a,{p:2,top:"0",left:"0",height:"90%",display:"flex",flexDir:"column",justifyContent:"center",alignItems:"center",width:"100%",background:"whitesmoke",children:[!C&&!M&&(0,y.jsxs)(m.a,{display:"flex",flexDir:"column",bg:"transparent",children:[(0,y.jsx)(j.E,{children:"Select whom you want to chat with:"}),h.map((function(e){return(0,y.jsx)(D.$,{bg:"transparent",onClick:function(){return A(e)},border:"none",p:"2",children:e},e)}))]}),P?(0,y.jsx)(H.y,{speed:"0.65s",size:"xl"}):(0,y.jsx)(te,{messages:Q}),(0,y.jsxs)(m.a,{position:"absolute",bottom:0,width:"100%",children:[M&&(0,y.jsxs)(m.a,{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",children:["Replying to ",U?X:"(select a message please)",U&&(0,y.jsx)(D.$,{onClick:function(){J(null),V(null)},background:"transparent",textColor:"red",border:"none",children:"X"})]}),C&&(0,y.jsxs)(m.a,{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",children:["Chatting with ",C,(0,y.jsx)(D.$,{onClick:function(){return A(null)},background:"transparent",textColor:"red",border:"none",children:"X"})]}),(0,y.jsxs)(m.a,{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",background:"white",p:2,children:[(0,y.jsx)(Y.p,{placeholder:"Type your message...",value:i,onChange:function(e){return s(e.target.value)}}),(0,y.jsx)(b.K,{isLoading:R,border:"none",onClick:function(e){return ue(e)},p:0,m:1,children:(0,y.jsx)(oe.sfP,{})})]})]})]})]})},se=t(10554),ae=t(6720),ce=function(e){var n=e.courses,t=(0,p.useState)(!1),r=(0,f.A)(t,2),o=r[0],i=r[1],s=(0,G.a)(),a=s.user,v=s.setUser,j=s.setClub,k=s.setMessages,C=s.notification,A=s.setNotification,w=s.setNational,S=s.setProvince,_=(0,re.Zp)(),z=(0,p.useState)(!1),I=(0,f.A)(z,2),P=I[0],D=I[1],N=(0,x.d)(),F=(0,Z.bK)(a),$=(0,p.useState)(!1),M=(0,f.A)($,2),B=M[0],O=M[1];(0,p.useEffect)((function(){F&&(O(F.connected),F.on("connect",(function(){O(!0)})),F.on("disconnect",(function(){O(!1)})))}),[F]);var q=(0,p.useCallback)((0,d.A)((0,u.A)().mark((function e(){var n,t;return(0,u.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==a&&void 0!==a&&a.coach){e.next=2;break}return e.abrupt("return");case 2:return n={headers:{Authorization:"Bearer ".concat(a.token)}},e.prev=3,e.next=6,se.A.get("/api/clubs/".concat(a.coach),n);case 6:t=e.sent,j(t.data),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),console.error("Error fetching Club:",e.t0);case 13:case"end":return e.stop()}}),e,null,[[3,10]])}))),[a]);(0,p.useEffect)((function(){a&&q()}),[a,q]),(0,p.useEffect)((function(){if(B){var e=function(e){A([e].concat((0,l.A)(C))),function(e,n){if("granted"===Notification.permission){new Notification(e,n);var t=new Audio("https://s3.amazonaws.com/freecodecamp/drums/Give_us_a_light.mp3");t.addEventListener("error",(function(e){console.error("Audio playback error:",e)})),t.play().catch((function(e){console.error("Audio playback error:",e)}))}else"denied"!==Notification.permission&&Notification.requestPermission().then((function(t){if("granted"===t){new Notification(e,n);var r=new Audio("https://s3.amazonaws.com/freecodecamp/drums/Give_us_a_light.mp3");r.addEventListener("error",(function(e){console.error("Audio playback error:",e)})),r.play().catch((function(e){console.error("Audio playback error:",e)}))}}))}("New Message",{body:"New message from ".concat(e.sender.name),icon:"".concat(e.sender.pic)}),k((function(n){return[].concat((0,l.A)(n),[e])}))},n=function(e){v((function(n){return(0,c.A)((0,c.A)({},n),{},{provinceRequests:[].concat((0,l.A)(n.provinceRequests),[e.provincialCoach])})}))},t=function(e){v((function(n){return(0,c.A)((0,c.A)({},n),{},{nationalRequests:[].concat((0,l.A)(n.nationalRequests),[e.nationalCoach])})}))},r=function(e){v((function(n){return(0,c.A)((0,c.A)({},n),{},{certificates:e.certificates,belt:e.belt})}))};return F.on("provincial request",n),F.on("national request",t),F.on("certificates",r),F.on("message received",e),function(){F.off("provincial request",n),F.off("national request",t),F.off("certificates",r),F.off("message received",e)}}}),[F,_,C,B]);var R=(0,p.useCallback)((0,d.A)((0,u.A)().mark((function e(){var n,t,r,o,i,s,c;return(0,u.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=3;break}return _("/"),e.abrupt("return");case 3:return n={headers:{Authorization:"Bearer ".concat(a.token)}},e.prev=4,e.next=7,Promise.all([se.A.get("/api/province/officials/".concat(a.country,"/").concat(a.provinces),n),se.A.get("/api/national/officials/".concat(a.country,"/").concat(a.provinces),n)]);case 7:t=e.sent,r=(0,f.A)(t,2),o=r[0],i=r[1],s=o.data,c=i.data,s.length>0&&(S(s),console.log(s)),c.length>0&&w(c),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(4),e.t0.response&&401===e.t0.response.status?(N({title:"Your session has expired",description:"Logging out in 8 seconds",duration:8e3,status:"loading",position:"bottom"}),console.log(e.t0),setTimeout((function(){localStorage.removeItem("userInfo"),_("/")}),8e3)):(console.log(e.t0),N({title:"An Error Occurred!",description:"Try again after sometime.",status:"error",duration:5e3,isClosable:!0}));case 20:case"end":return e.stop()}}),e,null,[[4,17]])}))),[a,_,N]);return(0,p.useEffect)((function(){a?R():_("/dashboard")}),[R,_,a]),(0,y.jsx)(h.A,{fallback:(0,y.jsx)("p",{style:{color:"white"},children:"Something went wrong"}),userSelect:"none",children:(0,y.jsxs)(m.a,{display:"flex",alignItems:"center",justifyContent:"center",flexDir:"column",width:"100%",background:"white",position:"relative",children:[(0,y.jsx)(g.A,{}),(0,y.jsx)(m.a,{width:"100%",mt:20,children:(0,y.jsx)(E,{userBelt:null===a||void 0===a?void 0:a.belt})}),(0,y.jsx)(X,{courses:n,user:a}),o&&(0,y.jsx)(ie,{onClose:function(){return i(!1)}}),(0,y.jsx)(b.K,{display:o?"none":"flex",position:"fixed",bottom:"8%",right:"10%",icon:(0,y.jsx)(ae.X5G,{style:{width:P?"60px":"40px",transition:"width 0.3s ease-in-out",color:"teal",fontSize:"40px",border:"none"}}),backgroundColor:"orange",p:"2",boxSize:"auto",border:"none",_hover:{backgroundColor:"white"},onClick:function(){return i(!0)},onMouseEnter:function(){return D(!0)},onMouseLeave:function(){return D(!1)},borderRadius:"full"})]})})}},32212:function(e,n,t){e.exports=t.p+"static/media/final.bb3e38731f3994d71217.jpeg"}}]);
//# sourceMappingURL=432.f1414ade.chunk.js.map